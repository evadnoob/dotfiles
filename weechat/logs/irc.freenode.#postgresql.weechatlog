2016-12-13 15:10:45	◥	boon (~david@66.195.46.242) has joined #postgresql
2016-12-13 15:10:45	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-13 15:10:45	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-13 15:10:47	⚡	Channel #postgresql: 1009 nicks (0 ops, 0 voices, 1009 normals)
2016-12-13 15:10:48	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-13 15:10:48	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-13 15:10:49	◥	chrisw_ (~chrisw@cpc95902-rdng25-2-0-cust181.15-3.cable.virginm.net) has joined #postgresql
2016-12-13 15:11:53	whartung	sorry macdice, missed your reply. It's < 1M rows, and not a particyularly big table at that (in terms of rowsize)
2016-12-13 15:12:12	◣	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has quit (Ping timeout: 252 seconds)
2016-12-13 15:12:20	whartung	it seems to have finished tho, so… /shrug
2016-12-13 15:13:34	◥	aristippos (~aristippo@c-73-222-39-214.hsd1.ca.comcast.net) has joined #postgresql
2016-12-13 15:14:32	◥	tozhu (~Thunderbi@220.166.250.168) has joined #postgresql
2016-12-13 15:14:49	◣	ReptilianBrain (~Reptilian@224-30.mg.cgocable.ca) has quit (Remote host closed the connection)
2016-12-13 15:14:54	◥	justatheory (~justatheo@74.121.28.6) has joined #postgresql
2016-12-13 15:18:01	◣	Happy_the_Exceed (~Happy@unaffiliated/featheredserpent) has quit (Quit: You can pretend to care about your users and help them run old versions of software or you can actually care about them and give them incentive to upgrade. Do the responsible thing, run supported software and encourage your users to as well. - ircmaxеll)
2016-12-13 15:22:13	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-13 15:22:14	◣	__Yiota (~textual@2607:fea8:3c9f:ffe9:bc8e:d52:c0a9:a795) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-13 15:23:34	◣	merzo (~merzo@93-60-92-178.pool.ukrtel.net) has quit (Remote host closed the connection)
2016-12-13 15:24:12	◣	cartan (~cartan@p4FEEAA67.dip0.t-ipconnect.de) has quit (Quit: Leaving)
2016-12-13 15:25:43	◣	puchacz (~puchacz@cpc96904-walt25-2-0-cust679.13-2.cable.virginm.net) has quit (Quit: Konversation terminated!)
2016-12-13 15:25:50	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 264 seconds)
2016-12-13 15:27:21	◣	zap0 (~moofy@14-201-222-143.tpgi.com.au) has quit (Quit: zap0)
2016-12-13 15:29:16	◥	DiegoMax (~diego@201.250.170.173) has joined #postgresql
2016-12-13 15:29:48	◥	dbn00b (~dbn00b@c-98-207-0-3.hsd1.ca.comcast.net) has joined #postgresql
2016-12-13 15:30:25	◣	dwsr (uid185230@gateway/web/irccloud.com/x-ylxkbvvjdeobvtlf) has quit (Quit: Connection closed for inactivity)
2016-12-13 15:30:34	dbn00b	if you are using postgres 9.6 with replication slots and you have A (master) -> B (slave of A) -> C (slave of B) where do you create the replication slot for C? Would that be on A?
2016-12-13 15:31:43	johto	on B?
2016-12-13 15:33:26	davidw	hrm.... any ideas about the security setup to allow one RDS pg instance to talk to another one? I can connect to server A from my machine, but not from another RDS instance :-/
2016-12-13 15:34:53	◣	fwiles (~frank@19.89.124.24.cm.sunflower.com) has quit (Quit: fwiles)
2016-12-13 15:35:03	◥	stephenjudkins (~stephenju@207.173.82.228) has joined #postgresql
2016-12-13 15:35:23	◣	metaresolve (~metaresol@2601:14d:8301:5aa0:f1e4:efb2:d7a4:bf54) has quit (Quit: Leaving)
2016-12-13 15:37:18	◣	mmello (Marcelo@nat/redhat/x-vusraoeyxtwiydqe) has quit (Quit: Leaving)
2016-12-13 15:39:03	◣	jayjo (~jayjo@unaffiliated/jayjo) has quit (Ping timeout: 268 seconds)
2016-12-13 15:39:30	◣	EyePulp (~eyepulp@107.152.3.83) has quit (Remote host closed the connection)
2016-12-13 15:45:06	◣	amathew (~amathew@208.185.185.131) has quit (Ping timeout: 258 seconds)
2016-12-13 15:47:21	◣	skyx (~skyx__@lk.46.182.229.73.dc.cable.static.lj-kabel.net) has quit (Quit: This computer has gone to sleep)
2016-12-13 15:47:53	StuckMojo	davidw: that's probably an amazon specific question
2016-12-13 15:48:12	◥	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has joined #postgresql
2016-12-13 15:48:40	◣	_william_ (~william@53.132.10.109.rev.sfr.net) has quit (Ping timeout: 256 seconds)
2016-12-13 15:49:50	◣	tozhu (~Thunderbi@220.166.250.168) has quit (Ping timeout: 264 seconds)
2016-12-13 15:50:55	◥	AdamTheExile (~textual@wsip-98-179-141-240.ri.ri.cox.net) has joined #postgresql
2016-12-13 15:52:40	dbn00b	even though B is a slave of A you can still create replication slots on it?
2016-12-13 15:53:48	◥	tozhu (~Thunderbi@220.166.250.168) has joined #postgresql
2016-12-13 15:53:55	macdice	whartung: if a vacuum of a 1M row table took 5 hours i'd want to know what was up...
2016-12-13 15:54:57	◥	jberkus (~smuxi@172.56.41.83) has joined #postgresql
2016-12-13 15:55:04	whartung	I thought it looked odd. Everything else seems "ok" (CPU is good on teh machine, most everything else is running "ok"). Any idea what I might be able to post mortem to find anything out?
2016-12-13 15:56:31	◣	orospakr (~orospakr@207.236.193.2) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-13 15:56:46	◣	Tykling (tykling@gibfest.dk) has quit (Ping timeout: 246 seconds)
2016-12-13 15:56:50	peerce	whats your maintenance_work_mem setting?   vacuum does much better on large tables if thats around 1G
2016-12-13 15:58:08	◣	tozhu (~Thunderbi@220.166.250.168) has quit (Ping timeout: 265 seconds)
2016-12-13 15:58:25	◣	yourname (~yourname@c-24-126-244-220.hsd1.ga.comcast.net) has quit (Quit: Lost terminal)
2016-12-13 16:00:10	◥	bfrog (~tburdick@unaffiliated/submersive) has joined #postgresql
2016-12-13 16:02:51	◥	rustyabe (~rustyabe@cpe-108-185-229-142.socal.res.rr.com) has joined #postgresql
2016-12-13 16:02:55	◣	unbalanced (~unbalance@181.229.133.6) has quit (Read error: Connection reset by peer)
2016-12-13 16:03:38	◣	banditron (~banditron@kohana/developer/banditron) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-13 16:04:01	◣	AdamTheExile (~textual@wsip-98-179-141-240.ri.ri.cox.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-13 16:04:17	◣	howitdo (~howitdo@unaffiliated/howitdo) has quit (Ping timeout: 240 seconds)
2016-12-13 16:05:33	◣	bfrog (~tburdick@unaffiliated/submersive) has quit (Quit: WeeChat 1.6)
2016-12-13 16:06:14	◣	izach (~izacht13@199.45.29.20) has quit (Ping timeout: 250 seconds)
2016-12-13 16:06:32	◣	tm604 (~tom@pdpc/supporter/professional/tm604) has quit (Ping timeout: 258 seconds)
2016-12-13 16:07:01	◥	zap0 (~moofy@14-201-222-143.tpgi.com.au) has joined #postgresql
2016-12-13 16:07:50	◣	justatheory (~justatheo@74.121.28.6) has quit (Quit: justatheory)
2016-12-13 16:08:11	◥	izach (~izacht13@199.45.29.20) has joined #postgresql
2016-12-13 16:08:19	◣	raspado (~raspado@198.8.80.150) has quit (Quit: Leaving...)
2016-12-13 16:08:26	◣	rocky (~rocky@crbknf0223w-156057210179.dhcp-dynamic.FibreOp.nl.bellaliant.net) has quit (Ping timeout: 264 seconds)
2016-12-13 16:08:29	◥	Bad_Advice_Cat (~Happy@unaffiliated/featheredserpent) has joined #postgresql
2016-12-13 16:08:52	◣	grayhemp_wh (~grayhemp_@12.33.220.130) has quit (Ping timeout: 258 seconds)
2016-12-13 16:09:38	⚡	Bad_Advice_Cat is now known as Happy_the_Exceed
2016-12-13 16:09:58	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Remote host closed the connection)
2016-12-13 16:10:08	◥	howitdo (~howitdo@unaffiliated/howitdo) has joined #postgresql
2016-12-13 16:11:21	◣	cJIaB (~cJIaB@109-92-206-254.dynamic.isp.telekom.rs) has quit (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
2016-12-13 16:11:42	◥	raspado (~raspado@198.8.80.150) has joined #postgresql
2016-12-13 16:11:42	◣	izach (~izacht13@199.45.29.20) has quit (Read error: Connection reset by peer)
2016-12-13 16:12:45	stephenjudkins	we have a table with a single live row that's updated frequently. vacuum, vacuum full, and cluster all report there are several million dead rows but that none are removable. this table is rarely, if ever read and frequently has its single row updated
2016-12-13 16:13:26	stephenjudkins	we don't see any long-running transactions on this database, but we do see millions of unremovable dead rows on this table
2016-12-13 16:13:42	stephenjudkins	does anyone have any tips to figure out why, exactly, these rows are nonremovable?
2016-12-13 16:13:48	◥	Tykling (tykling@gibfest.dk) has joined #postgresql
2016-12-13 16:16:48	◣	ascarter (~ascarter@50-248-196-145-static.hfc.comcastbusiness.net) has quit (Remote host closed the connection)
2016-12-13 16:18:17	◥	yourname (~yourname@c-24-126-244-220.hsd1.ga.comcast.net) has joined #postgresql
2016-12-13 16:18:25	◥	izach (~izacht13@199.45.29.20) has joined #postgresql
2016-12-13 16:18:35	◣	rustyabe (~rustyabe@cpe-108-185-229-142.socal.res.rr.com) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-13 16:18:39	macdice	a prepared transaction?
2016-12-13 16:20:19	◥	rocky (~rocky@crbknf0223w-156057210179.dhcp-dynamic.FibreOp.nl.bellaliant.net) has joined #postgresql
2016-12-13 16:20:55	macdice	or a long transaction on a replica, with standby feedback turned on?
2016-12-13 16:22:00	◥	OS-26360 (~Izzy@63-157-13-131.dia.static.qwest.net) has joined #postgresql
2016-12-13 16:23:49	◥	justatheory (~justatheo@74.121.28.6) has joined #postgresql
2016-12-13 16:24:15	stephenjudkins	there are no prepared transactions on the primary. "standby feedback" looks like a promising lead
2016-12-13 16:24:17	davidw	so I'm looking into FDW stuff... I had a really slow initial query that worries me some.  Subsequent (cached...?) queries were much faster.  I tried rebooting to see if I could replicate the slow query, but that didn't work.  Weird.
2016-12-13 16:25:02	◥	__Yiota (~textual@2607:fea8:56e0:407:dc04:823a:afa9:6261) has joined #postgresql
2016-12-13 16:25:18	stephenjudkins	we're on 9.3 BTW
2016-12-13 16:26:40	◥	rustyabe (~rustyabe@cpe-108-185-229-142.socal.res.rr.com) has joined #postgresql
2016-12-13 16:27:09	◣	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Ping timeout: 268 seconds)
2016-12-13 16:27:22	◣	al-damiri (uid142631@gateway/web/irccloud.com/x-obkvzcedgmszvmtf) has quit (Quit: Connection closed for inactivity)
2016-12-13 16:28:32	◣	OS-26360 (~Izzy@63-157-13-131.dia.static.qwest.net) has quit (Quit: Leaving.)
2016-12-13 16:28:32	◣	izach (~izacht13@199.45.29.20) has quit (Read error: Connection reset by peer)
2016-12-13 16:28:47	◣	justatheory (~justatheo@74.121.28.6) has quit (Quit: justatheory)
2016-12-13 16:29:18	◥	izach (~izacht13@199.45.29.20) has joined #postgresql
2016-12-13 16:30:07	◣	JSeymour (dircproxy@jimsun.linxnet.com) has quit (Quit: Leaving IRC - dircproxy 1.0.5)
2016-12-13 16:31:37	◥	fguillot (~fguillot@96.127.216.138) has joined #postgresql
2016-12-13 16:31:41	◣	chopin (~chopin@152.179.69.246) has quit (Remote host closed the connection)
2016-12-13 16:31:47	◣	nivag (~gavin@121.99.202.67) has quit (Remote host closed the connection)
2016-12-13 16:32:16	◥	chopin (~chopin@152.179.69.246) has joined #postgresql
2016-12-13 16:32:23	◣	Bradipo (~amb@22.16-28.45.70.166.in-addr.arpa) has quit (Remote host closed the connection)
2016-12-13 16:33:03	◣	eggyknap (~jtolley@unaffiliated/eggyknap) has quit (Quit: leaving)
2016-12-13 16:33:17	◥	sillyotter (~sillyotte@2607:fcc8:d486:7b02:7977:f6b9:f42f:5ba2) has joined #postgresql
2016-12-13 16:33:28	◥	Bradipo (~amb@22.16-28.45.70.166.in-addr.arpa) has joined #postgresql
2016-12-13 16:33:41	◥	nivag (~gavin@121.99.202.67) has joined #postgresql
2016-12-13 16:34:36	◥	macabre (~ibtjw@unaffiliated/macabre) has joined #postgresql
2016-12-13 16:34:58	◥	AdamTheExile (~textual@wsip-98-179-141-240.ri.ri.cox.net) has joined #postgresql
2016-12-13 16:36:49	◣	chopin (~chopin@152.179.69.246) has quit (Ping timeout: 258 seconds)
2016-12-13 16:38:31	stephenjudkins	macdice: there is a 5-day old open transaction on one of the replicas. this is looking promising, thank you for your help!
2016-12-13 16:38:36	◣	yourname (~yourname@c-24-126-244-220.hsd1.ga.comcast.net) has quit (Quit: leaving)
2016-12-13 16:38:53	◥	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2016-12-13 16:39:04	◥	yourname (~yourname@c-24-126-244-220.hsd1.ga.comcast.net) has joined #postgresql
2016-12-13 16:39:09	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Ping timeout: 258 seconds)
2016-12-13 16:39:37	◣	sillyotter (~sillyotte@2607:fcc8:d486:7b02:7977:f6b9:f42f:5ba2) has quit (Quit: WeeChat 1.4)
2016-12-13 16:39:53	xocolatl	stephenjudkins: hot_standby_feedback is usually a bad idea, for just this reason
2016-12-13 16:40:14	◥	tozhu (~Thunderbi@220.166.250.168) has joined #postgresql
2016-12-13 16:40:14	◥	Axy (~Mia@91.93.52.82) has joined #postgresql
2016-12-13 16:40:15	◣	Axy (~Mia@91.93.52.82) has quit (Changing host)
2016-12-13 16:40:15	◥	Axy (~Mia@unaffiliated/mia) has joined #postgresql
2016-12-13 16:41:07	◥	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has joined #postgresql
2016-12-13 16:41:37	◣	nbfuel (~nbfuel@v4020.ehdawgeh.com) has quit (Ping timeout: 240 seconds)
2016-12-13 16:42:23	◣	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has quit (Remote host closed the connection)
2016-12-13 16:42:40	◣	eb0t (~eblip@unaffiliated/eblip) has quit (Quit: WeeChat 1.4)
2016-12-13 16:42:49	ads	Did something serious change in the "make check" call in recent PostgreSQL versions?
2016-12-13 16:42:54	stephenjudkins	xocolatl: do you recommend a good resource for evaluating the tradeoffs? we have some very long-running queries running on one of the replicas
2016-12-13 16:43:06	ads	I have a Makefile which builds PG, and it fails with "initdb not found": http://pastebin.com/iq1c1tKj
2016-12-13 16:43:25	ads	It works fine in 9.2, as example
2016-12-13 16:43:43	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 258 seconds)
2016-12-13 16:43:49	xocolatl	stephenjudkins: I supposed you're worried about said queries being cancelled?
2016-12-13 16:44:11	◥	StomproJ (~stompro@mail.larl.org) has joined #postgresql
2016-12-13 16:44:17	stephenjudkins	yes. I would like to evaluate when and how often that would occur, and how to mitigate it with and without `hot_standby_feedback`
2016-12-13 16:44:29	◣	Mia (~Mia@unaffiliated/mia) has quit (Ping timeout: 258 seconds)
2016-12-13 16:44:44	macdice	you could turn on the thing that kills idle transactions on your standbies
2016-12-13 16:44:48	macdice	standbys*
2016-12-13 16:44:55	xocolatl	macdice: not on 9.3 :)
2016-12-13 16:45:24	xocolatl	stephenjudkins: are you expecting this standby to also take over primary duties should the primary fail?
2016-12-13 16:45:38	◣	skylar (~skylar2@gsits-a.gs.washington.edu) has quit (Ping timeout: 264 seconds)
2016-12-13 16:45:40	stephenjudkins	macdice: yep, a 9.6 feature (we are upgrading soon though)
2016-12-13 16:46:19	◣	Lipp_ (~Lipp@212.86.57.190) has quit (Remote host closed the connection)
2016-12-13 16:46:34	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-13 16:46:45	ads	9.3 still works fine, 9.5 and 9.6 can't be tested this way - something changed in the way "make check" is executed
2016-12-13 16:46:47	◥	Lipp (~Lipp@212.86.57.190) has joined #postgresql
2016-12-13 16:47:02	◣	davidw (~davidw@apache/committer/davidw) has quit (Ping timeout: 256 seconds)
2016-12-13 16:47:30	◣	Stompro (~stompro@mail.larl.org) has quit (Ping timeout: 268 seconds)
2016-12-13 16:47:31	◣	izach (~izacht13@199.45.29.20) has quit (Read error: Connection reset by peer)
2016-12-13 16:47:52	◥	izach (~izacht13@199.45.29.20) has joined #postgresql
2016-12-13 16:48:25	stephenjudkins	xocolatl: no. none of our replicas are "hot standbys". we use them for some slow queries and regular backups
2016-12-13 16:49:08	xocolatl	stephenjudkins: then you would be better served to turn off hot_standby_feedback and configure max_standby_*_delay instead
2016-12-13 16:49:51	◣	bordicon (~bordicon@50-247-102-73-static.hfc.comcastbusiness.net) has quit (Remote host closed the connection)
2016-12-13 16:49:59	◣	dbn00b (~dbn00b@c-98-207-0-3.hsd1.ca.comcast.net) has quit
2016-12-13 16:50:27	◥	eb0t (~eblip@unaffiliated/eblip) has joined #postgresql
2016-12-13 16:51:22	macdice	somewhat off topic, i hate that we have the word 'standby' sprinkled all over the place.  it's a terrible word
2016-12-13 16:52:10	◣	Lipp (~Lipp@212.86.57.190) has quit (Ping timeout: 250 seconds)
2016-12-13 16:52:26	macdice	but i guess that isn't going to be rebikeshedded
2016-12-13 16:52:41	xocolatl	nope
2016-12-13 16:52:43	◣	AdamTheExile (~textual@wsip-98-179-141-240.ri.ri.cox.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-13 16:52:48	◣	sr___ (uid5548@gateway/web/irccloud.com/x-lpxhzukqkaematqm) has quit (Quit: Connection closed for inactivity)
2016-12-13 16:53:13	stephenjudkins	xocolatl: OK. we're going to research this more and likely reconfigure when we have the opportunity. thank you for your help.
2016-12-13 16:53:20	◥	jooni (~jooni@58.17.01a8.ip4.static.sl-reverse.com) has joined #postgresql
2016-12-13 16:53:52	johto	I think I've said this before, but I wish there was a way to say "bloat the master for X minutes, and then switch to delaying replay if the query still isn't done"
2016-12-13 16:54:07	◥	Novynn (7decd8c2@gateway/web/cgi-irc/kiwiirc.com/ip.125.236.216.194) has joined #postgresql
2016-12-13 16:54:25	◣	Masterphi (~Masterphi@199.192.105.248) has quit (Quit: ZZZZzzzzz)
2016-12-13 16:54:58	◥	justatheory (~justatheo@74.121.28.6) has joined #postgresql
2016-12-13 16:55:03	◣	fatdragon (~fatdragon@cpe-107-184-105-188.socal.res.rr.com) has quit (Remote host closed the connection)
2016-12-13 16:55:06	macdice	how does old_snapshot_threshold interact with standbys?
2016-12-13 16:55:16	xocolatl	no idea :)
2016-12-13 16:55:40	◥	metaresolve (~metaresol@2601:14d:8301:5aa0:49f9:c7a5:78e8:83d7) has joined #postgresql
2016-12-13 16:55:41	◣	izach (~izacht13@199.45.29.20) has quit (Read error: Connection reset by peer)
2016-12-13 16:55:49	⚡	Happy_the_Exceed is now known as ChrisMcLean
2016-12-13 16:56:17	◥	izach (~izacht13@199.45.29.20) has joined #postgresql
2016-12-13 16:56:54	◣	stephenjudkins (~stephenju@207.173.82.228) has quit (Remote host closed the connection)
2016-12-13 16:57:31	◥	stephenjudkins (~stephenju@207.173.82.228) has joined #postgresql
2016-12-13 16:58:09	◥	jayjo (~jayjo@unaffiliated/jayjo) has joined #postgresql
2016-12-13 16:59:06	◣	__Yiota (~textual@2607:fea8:56e0:407:dc04:823a:afa9:6261) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-13 16:59:36	◥	fev3r101 (~fev3r101@5.134.116.205) has joined #postgresql
2016-12-13 16:59:50	◣	jberkus (~smuxi@172.56.41.83) has quit (Ping timeout: 258 seconds)
2016-12-13 16:59:58	macdice	hmm.  so i guess it might be interesting if an UNDO-based design could allow standbys to retain more UNDO than the master.  no 'feedback' required, and the amount of bloat-equivalent (UNDO data) would be independent on each replica and not affect the master
2016-12-13 17:01:04	◣	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Ping timeout: 268 seconds)
2016-12-13 17:01:06	◥	AdamTheExile (~textual@wsip-98-179-141-240.ri.ri.cox.net) has joined #postgresql
2016-12-13 17:01:22	johto	pglogical achieves that, too
2016-12-13 17:01:56	◣	stephenjudkins (~stephenju@207.173.82.228) has quit (Ping timeout: 265 seconds)
2016-12-13 17:02:00	xocolatl	but is it a less invasive patch?
2016-12-13 17:02:01	◥	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2016-12-13 17:03:09	◥	stephenjudkins (~stephenju@207.173.82.228) has joined #postgresql
2016-12-13 17:03:50	macdice	maybe what i just said doesn't work anyway, the way robert has described at least, because indexes still have traditional mvcc
2016-12-13 17:04:12	◣	fguillot (~fguillot@96.127.216.138) has quit (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
2016-12-13 17:04:23	◣	izach (~izacht13@199.45.29.20) has quit (Read error: Connection reset by peer)
2016-12-13 17:04:25	macdice	it's probably the mother of all patch invasions
2016-12-13 17:04:34	xocolatl	since when do indexes have mvcc?
2016-12-13 17:04:58	macdice	well they have multiple entries
2016-12-13 17:05:39	◣	Bradipo (~amb@22.16-28.45.70.166.in-addr.arpa) has quit (Remote host closed the connection)
2016-12-13 17:05:40	◥	izach (~izacht13@199.45.29.20) has joined #postgresql
2016-12-13 17:06:36	◥	dodobrain (~dodobrain@unaffiliated/freakabcd) has joined #postgresql
2016-12-13 17:06:36	◣	izach (~izacht13@199.45.29.20) has quit (Read error: Connection reset by peer)
2016-12-13 17:06:39	macdice	for someone on a replica with an old snapshot, you need to keep all the entries required by the old snapshot present, so you still need to send feedback to the master so it doesn't vacuum them away
2016-12-13 17:06:45	◣	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Ping timeout: 248 seconds)
2016-12-13 17:07:06	◣	cyphase (~cyphase@unaffiliated/cyphase) has quit (Ping timeout: 246 seconds)
2016-12-13 17:07:09	◣	brentd (~brentd@1.144.97.21) has quit (Remote host closed the connection)
2016-12-13 17:07:10	macdice	(i think oracle doesn't need that, because it can reconstruct old btree pages from undo log...  not sure though)
2016-12-13 17:07:16	◣	AdamTheExile (~textual@wsip-98-179-141-240.ri.ri.cox.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-13 17:07:43	◥	brentd (~brentd@1.144.97.21) has joined #postgresql
2016-12-13 17:07:53	◣	fev3r101 (~fev3r101@5.134.116.205) has quit (Ping timeout: 260 seconds)
2016-12-13 17:08:10	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-13 17:08:12	◣	madboxs (~madboxs@211.170.11.154) has quit (Remote host closed the connection)
2016-12-13 17:08:18	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-13 17:08:49	◣	jayjo (~jayjo@unaffiliated/jayjo) has quit (Ping timeout: 260 seconds)
2016-12-13 17:10:41	◥	izach (~izacht13@199.45.29.20) has joined #postgresql
2016-12-13 17:10:52	◥	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has joined #postgresql
2016-12-13 17:11:06	◣	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has quit (Remote host closed the connection)
2016-12-13 17:11:21	◥	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has joined #postgresql
2016-12-13 17:11:22	◣	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has quit (Remote host closed the connection)
2016-12-13 17:11:28	◣	sarmiena_ (~sarmiena_@wsip-98-191-206-182.oc.oc.cox.net) has quit (Quit: sarmiena_)
2016-12-13 17:11:55	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2016-12-13 17:11:57	◥	cyphase (~cyphase@unaffiliated/cyphase) has joined #postgresql
2016-12-13 17:12:05	◣	brentd (~brentd@1.144.97.21) has quit (Ping timeout: 260 seconds)
2016-12-13 17:12:08	◥	nettoweb (~nettoweb@177.97.185.55) has joined #postgresql
2016-12-13 17:14:06	◣	nettoweb_ (~nettoweb@177.96.162.120) has quit (Ping timeout: 246 seconds)
2016-12-13 17:14:40	◣	nivag (~gavin@121.99.202.67) has quit (Remote host closed the connection)
2016-12-13 17:14:41	◣	izach (~izacht13@199.45.29.20) has quit (Read error: Connection reset by peer)
2016-12-13 17:16:16	◣	zopsi (~zopsi@dir.ac) has quit (Quit: ZNC - http://znc.in)
2016-12-13 17:16:18	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 245 seconds)
2016-12-13 17:16:32	◣	dnicole (~dnicole@2602:30a:2e5d:1370:20b0:56f6:eafd:e4a5) has quit (Remote host closed the connection)
2016-12-13 17:16:58	◥	dnicole (~dnicole@2602:30a:2e5d:1370:20b0:56f6:eafd:e4a5) has joined #postgresql
2016-12-13 19:37:05	⚡	irc: disconnected from server
2016-12-13 19:37:28	◥	boon (~david@2601:602:8801:9c70::4426) has joined #postgresql
2016-12-13 19:37:28	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-13 19:37:28	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-13 19:37:28	⚡	Channel #postgresql: 976 nicks (0 ops, 0 voices, 976 normals)
2016-12-13 19:37:28	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-13 19:37:30	◥	raspado (~raspado@198.8.80.150) has joined #postgresql
2016-12-13 19:37:30	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-13 19:37:37	◥	Shells (~michelle@firewall.isux.com) has joined #postgresql
2016-12-13 19:37:44	◣	rjuju1 (~rjuju1@aur75-1-78-192-238-147.fbxo.proxad.net) has quit (Ping timeout: 258 seconds)
2016-12-13 19:38:01	raspado	hi all, I've got about 200 processes that look like this http://pastebin.com/10EL92Pv, is this normal for postgres to handle connections, in processes?
2016-12-13 19:38:05	◣	n0rther (~n0rther@c-73-97-229-156.hsd1.wa.comcast.net) has quit (Client Quit)
2016-12-13 19:38:31	johto	yes
2016-12-13 19:39:28	raspado	thx johto
2016-12-13 19:42:33	raspado	why is that the case?
2016-12-13 19:43:16	◥	rjuju1 (~rjuju1@aur75-1-78-192-238-147.fbxo.proxad.net) has joined #postgresql
2016-12-13 19:43:25	zap0	how else should it work?
2016-12-13 19:43:38	◥	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2016-12-13 19:43:54	raspado	so 1 connection = 1 process?
2016-12-13 19:44:26	Prof6ix	johto; do you think my issue has to due with versiions the data dump I created is form pgsql 9.4.5 and loading it to  9.6.1
2016-12-13 19:44:32	◣	mitnk (~mitnk@188.166.231.188) has quit (Remote host closed the connection)
2016-12-13 19:44:59	◥	mitnk (~mitnk@188.166.231.188) has joined #postgresql
2016-12-13 19:45:08	◣	Lipp (~Lipp@212.86.51.83) has quit (Ping timeout: 248 seconds)
2016-12-13 19:47:26	◥	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2016-12-13 19:48:04	◣	mitnk (~mitnk@188.166.231.188) has quit (Remote host closed the connection)
2016-12-13 19:48:15	◥	mitnk (~mitnk@188.166.231.188) has joined #postgresql
2016-12-13 19:48:49	◣	JamesBaxter (~JamesBaxt@unaffiliated/jamesbaxter) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-13 19:50:26	◥	fatdragon (~fatdragon@cpe-107-184-105-188.socal.res.rr.com) has joined #postgresql
2016-12-13 19:51:24	◥	tm604 (~tom@pdpc/supporter/professional/tm604) has joined #postgresql
2016-12-13 19:51:54	metaresolve	ok, made some progress. i decided screw pgadmin and to go back up to psql on my server. I see there is a user postgres
2016-12-13 19:51:57	◣	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Ping timeout: 258 seconds)
2016-12-13 19:52:10	◥	woltman4 (~woltman@180.sub-70-195-83.myvzw.com) has joined #postgresql
2016-12-13 19:52:49	◣	rjuju1 (~rjuju1@aur75-1-78-192-238-147.fbxo.proxad.net) has quit (Ping timeout: 264 seconds)
2016-12-13 19:52:55	Prof6ix	metaresolve; don't know if these links will help: http://stackoverflow.com/questions/5881845/how-to-manually-configure-and-start-postgresql-on-windows
2016-12-13 19:53:03	Prof6ix	https://www.postgresql.org/docs/9.3/static/app-pg-ctl.html
2016-12-13 19:53:17	Prof6ix	trying to resolve an issue im having
2016-12-13 19:53:34	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-13 19:53:49	metaresolve	oh thank you, pro
2016-12-13 19:54:13	metaresolve	i did manage to get myself into psql on my server on ramnode, though. i was pretty impressed with myself :)
2016-12-13 19:54:16	metaresolve	but i want to try pgadmin too
2016-12-13 19:54:20	◥	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has joined #postgresql
2016-12-13 19:54:25	◣	raspado (~raspado@198.8.80.150) has left #postgresql ("Leaving...")
2016-12-13 19:54:44	◣	fatdragon (~fatdragon@cpe-107-184-105-188.socal.res.rr.com) has quit (Ping timeout: 248 seconds)
2016-12-13 19:54:56	Prof6ix	kool
2016-12-13 19:56:17	metaresolve	kill me, search in windows sucks so badly
2016-12-13 19:56:43	◣	aristippos (~aristippo@c-73-222-39-214.hsd1.ca.comcast.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-13 19:57:18	^7heo	metaresolve: install find(1)
2016-12-13 19:57:29	metaresolve	how?
2016-12-13 19:57:42	metaresolve	or is that a program to google. what is it?
2016-12-13 19:58:20	^7heo	MinGW
2016-12-13 19:58:20	◣	chopin (~chopin@52.119.114.82) has quit (Remote host closed the connection)
2016-12-13 19:58:26	◣	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Quit: Leaving.)
2016-12-13 19:58:49	^7heo	I usually use https://git-for-windows.github.io/
2016-12-13 19:58:50	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 258 seconds)
2016-12-13 19:58:56	◥	chopin (~chopin@52.119.114.82) has joined #postgresql
2016-12-13 19:59:13	◥	rjuju1 (~rjuju1@aur75-1-78-192-238-147.fbxo.proxad.net) has joined #postgresql
2016-12-13 20:00:11	metaresolve	yeah, i haven't looked much into github. it hasn't really been necessary for my line of work
2016-12-13 20:00:34	threeminutemonta	I've been testing an postgresql upgrade by booting up an AWS RDS instance and upgrading it from 9.4.9 -> 9.5.X -> 9.6.1. The application is working, though its an alot slower an running through an custom importing process inserting data. When I browse this new server using pgadmin 3 it complains it needs to vacume each table.
2016-12-13 20:00:35	metaresolve	at least, my place in my field, which is more data qa than product development
2016-12-13 20:01:15	◥	xzi11a (~robert@pool-71-244-148-68.bltmmd.fios.verizon.net) has joined #postgresql
2016-12-13 20:02:55	charettes	Using row security policies is there a way to have a role see all columns of rows it owns (e.g. USING (owner = current_user)) and only a subset of columns of rows it doesn't own? I have this use case for an "accounts" table with a unique constraint on a "name" column and an "owner" one where I'd like the application to be able to perform a "name" unicity validation while using the "owner" role.
2016-12-13 20:03:16	◣	chopin (~chopin@52.119.114.82) has quit (Ping timeout: 250 seconds)
2016-12-13 20:03:43	charettes	I suspect I'll have to use a view for this case.
2016-12-13 20:04:16	◣	rjuju1 (~rjuju1@aur75-1-78-192-238-147.fbxo.proxad.net) has quit (Ping timeout: 240 seconds)
2016-12-13 20:04:52	◣	dys (~dys@x5f725187.dyn.telefonica.de) has quit (Ping timeout: 248 seconds)
2016-12-13 20:05:23	◥	davimore_ (~davimore@185.145.66.254) has joined #postgresql
2016-12-13 20:06:15	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Remote host closed the connection)
2016-12-13 20:07:09	◥	jayjo (~jayjo@unaffiliated/jayjo) has joined #postgresql
2016-12-13 20:07:25	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Remote host closed the connection)
2016-12-13 20:07:26	◣	catern (~catern@catern.com) has quit (Ping timeout: 250 seconds)
2016-12-13 20:07:54	threeminutemonta	Should I need to run VACUUM; after upgrading?
2016-12-13 20:07:54	◣	afx237 (~afx237@107.170.10.178) has quit (Read error: Connection reset by peer)
2016-12-13 20:08:18	◣	kitallis (~kitallis@162.243.30.122) has quit (Ping timeout: 250 seconds)
2016-12-13 20:08:30	◣	davimore__ (~davimore@185.145.66.254) has quit (Ping timeout: 265 seconds)
2016-12-13 20:09:01	◥	afx237 (~afx237@107.170.10.178) has joined #postgresql
2016-12-13 20:09:44	◣	vsg1990 (~vsg1990@static-72-88-80-103.bflony.fios.verizon.net) has quit (Quit: Leaving)
2016-12-13 20:09:47	◥	kitallis (~kitallis@162.243.30.122) has joined #postgresql
2016-12-13 20:10:02	◥	rjuju1 (~rjuju1@aur75-1-78-192-238-147.fbxo.proxad.net) has joined #postgresql
2016-12-13 20:10:31	◥	catern (~catern@catern.com) has joined #postgresql
2016-12-13 20:12:10	◣	jayjo (~jayjo@unaffiliated/jayjo) has quit (Ping timeout: 256 seconds)
2016-12-13 20:13:23	◣	ajw0100 (~ajw0100@c-24-62-66-197.hsd1.ma.comcast.net) has quit (Ping timeout: 245 seconds)
2016-12-13 20:14:27	◥	fstd_ (~fstd@unaffiliated/fisted) has joined #postgresql
2016-12-13 20:14:28	◣	fstd (~fstd@unaffiliated/fisted) has quit (Read error: Connection reset by peer)
2016-12-13 20:14:46	⚡	fstd_ is now known as fstd
2016-12-13 20:17:20	◣	rjuju1 (~rjuju1@aur75-1-78-192-238-147.fbxo.proxad.net) has quit (Ping timeout: 260 seconds)
2016-12-13 20:17:22	◥	macabre (~ibtjw@unaffiliated/macabre) has joined #postgresql
2016-12-13 20:17:31	◥	unbalanced (~unbalance@181.229.133.6) has joined #postgresql
2016-12-13 20:19:34	◥	djbkd (~djbkd@98.248.67.209) has joined #postgresql
2016-12-13 20:19:38	◣	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-13 20:21:19	◥	dnicole (~dnicole@2602:30a:2e5d:1370:20b0:56f6:eafd:e4a5) has joined #postgresql
2016-12-13 20:22:13	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Ping timeout: 258 seconds)
2016-12-13 20:22:58	◣	unbalanced (~unbalance@181.229.133.6) has quit (Ping timeout: 258 seconds)
2016-12-13 20:24:33	◥	rjuju1 (~rjuju1@aur75-1-78-192-238-147.fbxo.proxad.net) has joined #postgresql
2016-12-13 20:27:56	◥	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2016-12-13 20:28:42	◣	ascarter (~ascarter@c-24-16-31-112.hsd1.wa.comcast.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-13 20:28:47	◥	aristippos (~aristippo@172-6-191-58.lightspeed.sntcca.sbcglobal.net) has joined #postgresql
2016-12-13 20:28:57	◣	dnicole (~dnicole@2602:30a:2e5d:1370:20b0:56f6:eafd:e4a5) has quit (Remote host closed the connection)
2016-12-13 20:29:04	◥	dnicole (~dnicole@2602:30a:2e5d:1370:20b0:56f6:eafd:e4a5) has joined #postgresql
2016-12-13 20:30:32	◥	ascarter (~ascarter@c-24-16-31-112.hsd1.wa.comcast.net) has joined #postgresql
2016-12-13 20:30:42	◥	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has joined #postgresql
2016-12-14 10:13:04	⚡	irc: disconnected from server
2016-12-14 10:13:35	◥	boon (~david@66.195.46.242) has joined #postgresql
2016-12-14 10:13:35	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-14 10:13:35	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-14 10:13:35	⚡	Channel #postgresql: 1017 nicks (0 ops, 0 voices, 1017 normals)
2016-12-14 10:13:35	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-14 10:13:37	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-14 10:14:18	◣	bocaneri (~bocaneri@about/linux/staff/sauvin) has quit (Read error: Connection reset by peer)
2016-12-14 10:15:19	◥	olalonde (uid136@gateway/web/irccloud.com/x-kduargwhrbmhfgqu) has joined #postgresql
2016-12-14 10:15:25	◣	fordfrog (~fordfrog@gentoo/developer/fordfrog) has quit (Quit: Leaving)
2016-12-14 10:16:22	◥	RickDeckard (~tburringt@cpe-69-200-226-151.nyc.res.rr.com) has joined #postgresql
2016-12-14 10:17:05	◥	guzzlefry (~guzzlefry@adsl-068-209-129-166.sip.jax.bellsouth.net) has joined #postgresql
2016-12-14 10:17:51	◥	kacey (~kacey@c-50-132-2-197.hsd1.wa.comcast.net) has joined #postgresql
2016-12-14 10:18:45	◥	ajw0100 (~ajw0100@c-24-62-66-197.hsd1.ma.comcast.net) has joined #postgresql
2016-12-14 10:18:54	◥	Flotho66 (~florent@37.165.171.141) has joined #postgresql
2016-12-14 10:19:35	◥	bordicon (~bordicon@50-247-102-73-static.hfc.comcastbusiness.net) has joined #postgresql
2016-12-14 10:21:00	◥	sgfltx (~sgflt@pd95c6084.dip0.t-ipconnect.de) has joined #postgresql
2016-12-14 10:21:49	◥	Lordz (~Adium@186.215.116.176) has joined #postgresql
2016-12-14 10:21:57	◣	guzzlefry (~guzzlefry@adsl-068-209-129-166.sip.jax.bellsouth.net) has quit (Ping timeout: 248 seconds)
2016-12-14 10:23:25	◣	m4tProBZ (~svs@85.191.21.193) has quit (Ping timeout: 264 seconds)
2016-12-14 10:23:26	◥	edoardo (~edoardo@82.215.169.195) has joined #postgresql
2016-12-14 10:23:26	◣	edoardo (~edoardo@82.215.169.195) has quit (Changing host)
2016-12-14 10:23:26	◥	edoardo (~edoardo@unaffiliated/edoardo) has joined #postgresql
2016-12-14 10:24:02	◣	proteusguy (~proteus-g@14.207.2.161) has quit (Ping timeout: 258 seconds)
2016-12-14 10:24:22	◥	m451 (~m451@pD9FA4532.dip0.t-ipconnect.de) has joined #postgresql
2016-12-14 10:24:29	◥	proteusguy (~proteus-g@14.207.2.161) has joined #postgresql
2016-12-14 10:24:54	◥	sfkeller (~chatzilla@135.209.196.178.dynamic.wline.res.cust.swisscom.ch) has joined #postgresql
2016-12-14 10:25:09	◣	Hink (~Hink@hink.me) has quit (Read error: Connection reset by peer)
2016-12-14 10:25:13	◣	fees (~fees_@d54c22e1c.access.telenet.be) has quit (Remote host closed the connection)
2016-12-14 10:25:14	◥	cartan (~cartan@p4FEEAE2A.dip0.t-ipconnect.de) has joined #postgresql
2016-12-14 10:26:34	◣	dsantiago (~dsantiago@cpe-104-175-193-69.socal.res.rr.com) has quit (Quit: Computer has gone to sleep.)
2016-12-14 10:27:08	◥	guzzlefry (~guzzlefry@adsl-068-209-129-166.sip.jax.bellsouth.net) has joined #postgresql
2016-12-14 10:29:30	◣	uncleyear (~ian@unaffiliated/uncleyear) has quit (Disconnected by services)
2016-12-14 10:29:39	◥	uncleyear (~ian@unaffiliated/uncleyear) has joined #postgresql
2016-12-14 10:30:12	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-14 10:30:31	◣	edoardo (~edoardo@unaffiliated/edoardo) has quit (Quit: Quitting)
2016-12-14 10:30:51	◥	victor_lowther (~victor.lo@8.39.49.135) has joined #postgresql
2016-12-14 10:31:18	◣	metaresolve (~metaresol@2601:14d:8301:5aa0:d053:8db5:dfa0:f8b) has quit (Ping timeout: 258 seconds)
2016-12-14 10:31:31	◥	neoncontrails (~neoncontr@wsip-174-79-243-9.sd.sd.cox.net) has joined #postgresql
2016-12-14 10:31:41	◥	johnkeates (~johnkeate@86.92.128.79) has joined #postgresql
2016-12-14 10:32:27	RhodiumToad	yo johnkeates
2016-12-14 10:33:03	◣	justatheory (~justatheo@74.121.28.6) has quit (Quit: justatheory)
2016-12-14 10:33:24	◥	baldrick1 (~duncan@62.119.166.9) has joined #postgresql
2016-12-14 10:34:09	johnkeates	it is i, the one with the messed-up db
2016-12-14 10:34:09	◣	AdamTheExile (~textual@ps-relay-server.tolland.k12.ct.us) has quit (Remote host closed the connection)
2016-12-14 10:34:19	johnkeates	it's up, with dbg
2016-12-14 10:34:27	RhodiumToad	ok
2016-12-14 10:34:31	RhodiumToad	here's what to try
2016-12-14 10:34:38	◣	Flotho66 (~florent@37.165.171.141) has quit (Ping timeout: 256 seconds)
2016-12-14 10:34:48	RhodiumToad	first,  select pg_backend_pid();   to see the pid you're connected to
2016-12-14 10:35:02	johnkeates	okay
2016-12-14 10:35:04	RhodiumToad	then in another window, attach gdb to that process and do the commands:
2016-12-14 10:35:07	RhodiumToad	b errfinish
2016-12-14 10:35:08	RhodiumToad	c
2016-12-14 10:35:36	RhodiumToad	then run the failing query. gdb should then stop on the errfinish breakpoint, and you can do the command: bt
2016-12-14 10:35:41	RhodiumToad	(and pastebin the output)
2016-12-14 10:36:32	◥	woltman (~woltman@pool-71-123-61-113.phlapa.fios.verizon.net) has joined #postgresql
2016-12-14 10:36:48	◣	chris_dan (~chris_dan@ip72-197-189-52.sd.sd.cox.net) has quit (Quit: Went to sleep)
2016-12-14 10:37:03	◥	volga629 (~bendersky@CPE4c5e0cb3c2a0-CM0c473dd46e50.cpe.net.cable.rogers.com) has joined #postgresql
2016-12-14 10:37:39	volga629	Hello Everyone,  how I can convert unit time stamp to  formatted time
2016-12-14 10:37:42	volga629	SELECT to_char(to_timestamp(1481740185),'%M %D %Y %H:%i:%s') FROM
2016-12-14 10:37:54	volga629	unix
2016-12-14 10:37:59	◥	nivaldomjunior (sid98438@gateway/web/irccloud.com/x-mrpgpszyrqvitvwn) has joined #postgresql
2016-12-14 10:38:14	RhodiumToad	to_char(to_timestamp(1481740185), 'MM DD YYYY HH24:MI:SS')
2016-12-14 10:38:35	◣	Neo-- (~neo@193.189.168.74) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-14 10:38:43	RhodiumToad	but you're better off just using the ISO output format produced by  to_timestamp(1481740185)
2016-12-14 10:39:16	◣	nivaldomjunior (sid98438@gateway/web/irccloud.com/x-mrpgpszyrqvitvwn) has quit (Client Quit)
2016-12-14 10:39:18	◥	nivaldomjunior_ (sid98438@gateway/web/irccloud.com/x-mvtbpubglxpgulvn) has joined #postgresql
2016-12-14 10:39:34	volga629	let me try
2016-12-14 10:39:54	johnkeates	interesting: at /build/postgresql-9.2-GFpdtP/postgresql-9.2-9.2.19/build/../src/backend/utils/error/elog.c:406
2016-12-14 10:40:09	◣	bikeshedder (~bikeshedd@dslb-084-059-222-247.084.059.pools.vodafone-ip.de) has quit (Ping timeout: 258 seconds)
2016-12-14 10:40:15	volga629	that give 2016-12-14 13:29:45-05
2016-12-14 10:40:15	johnkeates	looks like i'll need src too on top of dbg
2016-12-14 10:40:20	RhodiumToad	johnkeates: no need
2016-12-14 10:40:22	johnkeates	because: /build/postgresql-9.2-GFpdtP/postgresql-9.2-9.2.19/build/../src/backend/utils/error/elog.c: No such file or directory.
2016-12-14 10:40:27	⚡	nivaldomjunior_ is now known as nivaldomjunior
2016-12-14 10:40:28	johnkeates	okay
2016-12-14 10:40:29	RhodiumToad	johnkeates: just ignore that
2016-12-14 10:40:30	johnkeates	okay
2016-12-14 10:40:34	johnkeates	i'm still at the bp
2016-12-14 10:40:54	volga629	is possible print like  Dec 14 2016  and time ?
2016-12-14 10:40:57	◥	AdamTheExile (~textual@ps-relay-server.tolland.k12.ct.us) has joined #postgresql
2016-12-14 10:41:00	◣	nivaldomjunior (sid98438@gateway/web/irccloud.com/x-mvtbpubglxpgulvn) has quit (Client Quit)
2016-12-14 10:41:14	RhodiumToad	volga629: to_char(to_timestamp(1481740185), 'Month DD YYYY HH24:MI:SS')
2016-12-14 10:41:20	◣	guzzlefry (~guzzlefry@adsl-068-209-129-166.sip.jax.bellsouth.net) has quit (Changing host)
2016-12-14 10:41:20	◥	guzzlefry (~guzzlefry@unaffiliated/guzzlefry) has joined #postgresql
2016-12-14 10:41:29	volga629	or that  way
2016-12-14 10:42:04	RhodiumToad	johnkeates: you just set the breakpoint? the next command is 'c' to continue running
2016-12-14 10:42:35	johnkeates	https://paste.fedoraproject.org/506477/81740951/
2016-12-14 10:42:38	volga629	RhodiumToad huge thank you it worked as required
2016-12-14 10:42:38	RhodiumToad	johnkeates: or do you mean it hit the breakpoint?
2016-12-14 10:42:42	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2016-12-14 10:42:56	◥	amadiro_ (~amadiro@77-40-243-78.dsl.no.powertech.net) has joined #postgresql
2016-12-14 10:43:18	RhodiumToad	johnkeates: okay... so this is definitely failing while trying to access pg_statistic
2016-12-14 10:43:27	johnkeates	yeah
2016-12-14 10:43:35	johnkeates	but also only on attname
2016-12-14 10:43:36	◥	thuvvik_ (~quassel@dispo-82-250-45-217.adsl.proxad.net) has joined #postgresql
2016-12-14 10:43:54	RhodiumToad	but pg_statistic is supposed to be empty now?
2016-12-14 10:43:57	johnkeates	yeah
2016-12-14 10:43:59	johnkeates	0 records
2016-12-14 10:44:06	johnkeates	ill empty it again just to be sure
2016-12-14 10:44:14	◣	thuvvik (~quassel@lns-bzn-44-82-249-246-144.adsl.proxad.net) has quit (Ping timeout: 250 seconds)
2016-12-14 10:44:33	◣	grayhem__ (~grayhemp_@12.33.220.130) has quit (Remote host closed the connection)
2016-12-14 10:44:41	johnkeates	still 0
2016-12-14 10:44:55	amadiro_	Evening. Does an "after update" trigger also fire when the row is first inserted? I'm testing something like "IF OLD.state <> 'complete' AND NEW.state = 'complete' THEN ..." to listen for a completion state transition, but it seems to complain that record OLD has no field 'state'.
2016-12-14 10:45:05	◥	grayhemp_wh (~grayhemp_@12.33.220.130) has joined #postgresql
2016-12-14 10:45:13	depesz	amadiro_: no.
2016-12-14 10:45:14	RhodiumToad	johnkeates: ok. b CatalogCacheCreateEntry   and  c
2016-12-14 10:45:20	RhodiumToad	johnkeates: and then try the query again
2016-12-14 10:45:29	depesz	amadiro_: after update runs, shockingly, after *UPDATE* commands. not after *INSERT* commands.
2016-12-14 10:45:54	RhodiumToad	amadiro_: did you specify AFTER INSERT OR UPDATE when creating the trigger?
2016-12-14 10:46:10	◥	nivaldomjunior (sid98438@gateway/web/irccloud.com/x-ujvbqntecgvxjvan) has joined #postgresql
2016-12-14 10:46:18	johnkeates	https://paste.fedoraproject.org/506479/17411731/
2016-12-14 10:46:43	RhodiumToad	johnkeates: print *ntp
2016-12-14 10:47:01	amadiro_	depesz, okay, thanks, that's what I thought -- then the error must be from somewhere else...
2016-12-14 10:47:02	johnkeates	$1 = {t_len = 1284, t_self = {ip_blkid = {bi_hi = 0, bi_lo = 32}, ip_posid = 4}, t_tableOid = 2619, t_data = 0x7fd10e2fa838}
2016-12-14 10:47:05	amadiro_	RhodiumToad, I'll double-check that.
2016-12-14 10:47:12	johnkeates	that's our oid
2016-12-14 10:47:21	◥	axl_ (~axl_@50-241-46-113-static.hfc.comcastbusiness.net) has joined #postgresql
2016-12-14 10:47:22	◣	axl_ (~axl_@50-241-46-113-static.hfc.comcastbusiness.net) has quit (Client Quit)
2016-12-14 10:47:44	RhodiumToad	johnkeates: print *ntp->t_data
2016-12-14 10:48:15	johnkeates	https://paste.fedoraproject.org/506481/41291148/
2016-12-14 10:48:22	RhodiumToad	johnkeates: the question is how did it find a valid row, given that pg_statistic is supposedly empty
2016-12-14 10:48:36	johnkeates	yeah
2016-12-14 10:48:41	johnkeates	and the caches are gone too
2016-12-14 10:48:41	◥	claudiuinberlin (~claudiuin@78.55.52.125) has joined #postgresql
2016-12-14 10:49:05	johnkeates	i also suspected something like fs permissions getting in the way, but that's not the case either and would probably result in different errors
2016-12-14 10:49:27	◣	dur-rand_ (~dur_randi@93.159.239.42) has quit (Remote host closed the connection)
2016-12-14 10:50:29	◣	banisterfiend (~textual@ruby/staff/banisterfiend) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-14 10:50:35	RhodiumToad	johnkeates: do the command 'up' and then print *scandesc
2016-12-14 10:51:01	◣	arndh (~arnd@163.172.214.46) has quit (Ping timeout: 252 seconds)
2016-12-14 10:51:05	◥	alioui_ (~alioui_al@197.1.12.20) has joined #postgresql
2016-12-14 10:52:06	johnkeates	$3 = {heap_rel = 0x7fd114e03060, irel = 0x7fd114e0cf10, scan = 0x0, iscan = 0x7fd116c99bb0}
2016-12-14 10:52:06	RhodiumToad	ah, hm
2016-12-14 10:53:44	◣	Nizumzen (~Nizumzen@97e10414.skybroadband.com) has quit (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
2016-12-14 10:53:59	RhodiumToad	so this is going to be a visibility thing
2016-12-14 10:54:27	johnkeates	would it be possible to figure out where on the fs the pg_statistic data is stored and just writing 0 to it?
2016-12-14 10:54:40	◥	justatheory (~justatheo@74.121.28.6) has joined #postgresql
2016-12-14 10:54:40	johnkeates	i'm sure pgsql wouldn't like that, but at least it'd have to give up looking for something that isn't there
2016-12-14 10:56:20	RhodiumToad	print RecentXmin
2016-12-14 10:56:28	johnkeates	on the same bt?
2016-12-14 10:56:32	RhodiumToad	ya
2016-12-14 10:56:37	johnkeates	$4 = 442295
2016-12-14 10:56:49	RhodiumToad	bingo
2016-12-14 10:57:12	johnkeates	did we win?
2016-12-14 10:57:21	RhodiumToad	you didn't run resetxlog on this database at any point, did you?
2016-12-14 10:57:44	johnkeates	not sure, but i kept history of everything, let me grep
2016-12-14 10:57:48	RhodiumToad	basically, there's a row in pg_statistic that was created in the future
2016-12-14 10:58:08	RhodiumToad	so select or delete don't see it, but the syscache does
2016-12-14 10:58:45	johnkeates	yes, it was, at some point; de xlog/wal was damaged so bad it wouldn't start with any option
2016-12-14 10:59:07	johnkeates	i seem to have tried a base backup first, but that didn't work
2016-12-14 10:59:08	RhodiumToad	aha. so most likely, you chose a too-small value of xid to reset to
2016-12-14 10:59:14	johnkeates	probably
2016-12-14 10:59:32	johnkeates	i still have the original fs tree, so i can copy the old dataset back and get a bigger xid
2016-12-14 10:59:33	RhodiumToad	so. 'c' in gdb and quit the psql session
2016-12-14 10:59:38	◥	chris_dan (~chris_dan@ip72-197-189-52.sd.sd.cox.net) has joined #postgresql
2016-12-14 10:59:44	johnkeates	closed
2016-12-14 10:59:46	RhodiumToad	the original tree from before doing resetxlog?
2016-12-14 10:59:48	johnkeates	yes
2016-12-14 11:00:03	RhodiumToad	ok, what resetxlog parameters did you actually use?
2016-12-14 11:00:16	▷	johnkeates digs back into history
2016-12-14 11:00:16	volga629	How I can select last row with ORDER BY id  -->  AND id IN(SELECT max(id) FROM location)
2016-12-14 11:00:34	RhodiumToad	volga629: what do you mean exactly?
2016-12-14 11:00:46	johnkeates	pg_resetxlog -f /path/to/data
2016-12-14 11:00:59	◥	xocolatl (~Vik@ath91-3-88-167-161-184.fbx.proxad.net) has joined #postgresql
2016-12-14 11:01:17	RhodiumToad	johnkeates: ok. in that original fs tree, what files existed in pg_clog?
2016-12-14 11:01:29	johnkeates	i'll untar, just a sec
2016-12-14 11:01:31	◥	MrXXIV__ (~MrXXIV@cpe-45-37-177-225.nc.res.rr.com) has joined #postgresql
2016-12-14 11:01:41	volga629	I am trying select last by id, but this way IN(SELECT max(id) FROM location) sometimes failing for some users
2016-12-14 11:01:46	volga629	row
2016-12-14 11:02:11	RhodiumToad	volga629: what is the query trying to _do_?
2016-12-14 11:02:25	buu	volga629: order by id desc limit 1; ?
2016-12-14 11:02:55	volga629	query SELECT contact FROM location WHERE username = '1200' AND id IN(SELECT max(id) FROM location);
2016-12-14 11:03:11	◣	sgfltx (~sgflt@pd95c6084.dip0.t-ipconnect.de) has quit (Quit: sgfltx)
2016-12-14 11:04:07	◣	Debnet`Laptop (~Marc@smtp2.sa-cim.fr) has quit (Read error: Connection reset by peer)
2016-12-14 11:04:29	RhodiumToad	volga629: that makes _absolutely no sense_
2016-12-14 11:04:38	◣	MrXXIV_ (~MrXXIV@cpe-2606-A000-4702-DB00-B5E2-2FA-626F-F462.dyn6.twc.com) has quit (Ping timeout: 245 seconds)
2016-12-14 11:04:41	volga629	why ?
2016-12-14 11:04:52	RhodiumToad	volga629: in particular it'll return no rows unless user 1200 was the person who inserted the highest id
2016-12-14 11:05:24	◥	Hawkerz (~Hawkerz@unaffiliated/hawkerz) has joined #postgresql
2016-12-14 11:05:25	RhodiumToad	volga629: are you trying to find the row with the largest id that was inserted by user 1200?
2016-12-14 11:05:52	RhodiumToad	volga629: because if so,  select contact from location where username = '1233' order by id desc limit 1;
2016-12-14 11:06:11	johnkeates	https://paste.fedoraproject.org/506486/48174236/
2016-12-14 11:06:24	johnkeates	oh, that's xlog, hang on
2016-12-14 11:06:25	volga629	yes
2016-12-14 11:06:47	johnkeates	clog only has: -rw------- 1 gitlab-psql root 114688 Dec  7 14:39 0000
2016-12-14 11:06:49	◣	ElectronicRU (~ksandra@93.191.19.208) has quit (Quit: This computer has gone to sleep)
2016-12-14 11:07:07	RhodiumToad	johnkeates: that's plausible (just means you haven't done a million transactions yet).
2016-12-14 11:07:20	RhodiumToad	johnkeates: so when running resetxlog, you should set the xid to 1048576
2016-12-14 11:07:36	johnkeates	the clog is filled with U, nothing else it seems
2016-12-14 11:07:43	johnkeates	i'll reset to that xid
2016-12-14 11:07:43	◥	hasegeli (~Adium@ipv6-ed9fc0f11d2c83c2.clients.hamburg.freifunk.net) has joined #postgresql
2016-12-14 11:07:55	◥	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has joined #postgresql
2016-12-14 11:08:01	◥	edoardo (~edoardo@82.215.169.195) has joined #postgresql
2016-12-14 11:08:01	◣	edoardo (~edoardo@82.215.169.195) has quit (Changing host)
2016-12-14 11:08:01	◥	edoardo (~edoardo@unaffiliated/edoardo) has joined #postgresql
2016-12-14 11:08:02	RhodiumToad	johnkeates: it's binary, 2 bits per xid, and the bit pattern 01 means "committed", so U is common (01010101)
2016-12-14 11:08:15	◣	Hawkrz (~Hawkerz@unaffiliated/hawkerz) has quit (Ping timeout: 268 seconds)
2016-12-14 11:08:18	johnkeates	ah, yes, that makes sense with ASCII
2016-12-14 11:08:38	◣	SteffanW (~steffanw@ip4da40774.direct-adsl.nl) has quit (Read error: Connection reset by peer)
2016-12-14 11:08:55	◥	ElectronicRU (~ksandra@93.191.19.208) has joined #postgresql
2016-12-14 11:09:06	◥	jward (~jward@ec2-52-8-119-239.us-west-1.compute.amazonaws.com) has joined #postgresql
2016-12-14 11:09:15	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2016-12-14 11:10:26	johnkeates	hang on, it's somewhat different now
2016-12-14 11:10:43	◣	somaReverse (~amos@124.16.128.66) has quit (Ping timeout: 268 seconds)
2016-12-14 11:10:48	johnkeates	maybe because the first time i started it, it was on the broken server before i found out about the raid0 swap
2016-12-14 11:10:52	johnkeates	it breaks at record with zero length at 0/3561D278
2016-12-14 11:10:55	johnkeates	in startup log
2016-12-14 11:10:59	RhodiumToad	breaks?
2016-12-14 11:11:05	RhodiumToad	that's a normal message
2016-12-14 11:11:24	RhodiumToad	is this trying to start without doing resetxlog?
2016-12-14 11:11:28	johnkeates	yeah
2016-12-14 11:11:32	johnkeates	or at least
2016-12-14 11:11:32	RhodiumToad	good idea
2016-12-14 11:11:39	johnkeates	thought i'd give it a go first
2016-12-14 11:11:39	◥	vuoto (~vuoto@80-71-135-9.u.parknet.dk) has joined #postgresql
2016-12-14 11:11:40	RhodiumToad	what happens after?
2016-12-14 11:11:50	johnkeates	bunch of postgres@postgres FATAL:  role "postgres" does not e
2016-12-14 11:11:56	johnkeates	and a incomplete startup packet
2016-12-14 11:12:01	RhodiumToad	resetxlog always corrupts things, it's just a matter of how badly, so it's always worth a try without
2016-12-14 11:12:06	johnkeates	i'll psql in, let's see what it does
2016-12-14 11:12:28	RhodiumToad	the original db didn't have a user named "postgres"?
2016-12-14 11:12:42	johnkeates	it did i think
2016-12-14 11:12:52	RhodiumToad	(the default superuser name tends to match the OS username that owns the db)
2016-12-14 11:12:53	johnkeates	but it's not in the cluster files
2016-12-14 11:12:55	johnkeates	yeah
2016-12-14 11:13:04	johnkeates	right now, there is a gitlab superuser that works
2016-12-14 11:13:06	johnkeates	so i'm in
2016-12-14 11:13:17	RhodiumToad	ok. try a pg_dump and see what breaks
2016-12-14 11:13:23	johnkeates	but every query results in one of this type of errors: could not read block 1 in file "base/16385/11844": read only 0 of 8192 bytes
2016-12-14 11:13:23	◣	edoardo (~edoardo@unaffiliated/edoardo) has quit (Ping timeout: 245 seconds)
2016-12-14 11:13:33	RhodiumToad	that's a system index
2016-12-14 11:13:41	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 248 seconds)
2016-12-14 11:13:46	RhodiumToad	try using the PGOPTIONS="-P" psql ...
2016-12-14 11:13:52	RhodiumToad	(which disables use of system indexes)
2016-12-14 11:14:09	johnkeates	using index "pg_toast_2619_index" despite IgnoreSystemIndexes
2016-12-14 11:14:12	johnkeates	heh.
2016-12-14 11:14:22	RhodiumToad	you can use that same PGOPTIONS= setting with pg_dump, too, btw
2016-12-14 11:14:27	johnkeates	also: invalid attribute number 76 for application_settings
2016-12-14 11:14:37	johnkeates	anyway, i'll pg_dump with -P
2016-12-14 11:14:41	johnkeates	imagine that...
2016-12-14 11:14:44	johnkeates	let's see what we get
2016-12-14 11:14:49	RhodiumToad	presumably application_settings doesn't have 76 columns?
2016-12-14 11:15:17	johnkeates	can't dump
2016-12-14 11:15:17	johnkeates	pg_dump: [archiver (db)] query failed: ERROR:  could not read block 34 in file "base/16385/11747": read only 0 of 8192 bytes
2016-12-14 11:15:41	johnkeates	stuck on a.attname anyway it seems
2016-12-14 11:15:58	johnkeates	i guess the corruption happened without resetting xlog
2016-12-14 11:16:04	◥	dsantiago (~dsantiago@40.141.55.70) has joined #postgresql
2016-12-14 11:16:05	RhodiumToad	that's still a system index, try this
2016-12-14 11:16:07	johnkeates	as in, it was on-disk corruption
2016-12-14 11:16:30	johnkeates	well, it's using the system index on that broken toast: pg_dump: WARNING:  using index "pg_toast_2619_index" despite IgnoreSystemIndexes
2016-12-14 11:16:31	RhodiumToad	PGOPTIONS="-P -c enable_indexscan=false -c enable_bitmapscan=false" pg_dump ...
2016-12-14 11:16:47	RhodiumToad	don't worry about the warnings
2016-12-14 11:16:48	johnkeates	ah yes, we still had those on
2016-12-14 11:17:11	johnkeates	still fails on bad file: pg_dump: [archiver (db)] query failed: ERROR:  could not read block 34 in file "base/16385/11747": read only 0 of 8192 bytes
2016-12-14 11:17:20	johnkeates	can i zero that on the fs?
2016-12-14 11:17:27	RhodiumToad	wait
2016-12-14 11:17:29	johnkeates	okay
2016-12-14 11:17:37	RhodiumToad	first let's see what file that actually is
2016-12-14 11:17:56	RhodiumToad	select oid::regclass from pg_class where pg_relation_filenode(oid) = 11747;
2016-12-14 11:18:15	johnkeates	guess what: pg_toast.pg_toast_2619
2016-12-14 11:18:39	RhodiumToad	ok
2016-12-14 11:19:31	◣	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has quit (Remote host closed the connection)
2016-12-14 11:19:36	RhodiumToad	what I'd do is go in in standalone mode and truncate pg_statistic
2016-12-14 11:19:59	◥	somaReverse (~amos@2400:dd01:1022:30:6af7:28ff:fe78:6901) has joined #postgresql
2016-12-14 11:20:02	RhodiumToad	if you stop pg, and run  postgres --single -D /path/to/datadir -O dbname
2016-12-14 11:20:19	RhodiumToad	then  truncate table pg_statistic;   at the backend> prompt
2016-12-14 11:20:28	RhodiumToad	then control-D out of that
2016-12-14 11:20:28	johnkeates	sounds magical, something i haven't done before (but was looking for! -- didn't know the name for it)
2016-12-14 11:20:37	johnkeates	i'll execute that
2016-12-14 11:21:40	RhodiumToad	the magic part there is the -O option, which allows you to mess with the system catalogs in normally forbidden ways
2016-12-14 11:21:40	johnkeates	probably best to run that as the postgres user?
2016-12-14 11:21:40	RhodiumToad	has to be run as the same OS user that owns the data directory
2016-12-14 11:21:40	RhodiumToad	(it'll refuse to run as root)
2016-12-14 11:22:01	◥	SteffanW (~Icedove@ip4da40774.direct-adsl.nl) has joined #postgresql
2016-12-14 11:22:09	◣	cartan (~cartan@p4FEEAE2A.dip0.t-ipconnect.de) has quit (Quit: Leaving)
2016-12-14 11:22:49	◣	alioui_ (~alioui_al@197.1.12.20) has left #postgresql
2016-12-14 11:22:49	◥	rajivr_ (~rajivr@103.205.218.243) has joined #postgresql
2016-12-14 11:22:52	◥	nanga (~nanga@unaffiliated/m0f0x) has joined #postgresql
2016-12-14 11:24:43	johnkeates	finally found the binary, was parked at /usr/lib/postgresql/9.2/bin/postgres
2016-12-14 11:24:51	johnkeates	alright, table truncated
2016-12-14 11:24:56	◣	Slashman (~Slash@cosium-152-18.fib.nerim.net) has quit (Ping timeout: 248 seconds)
2016-12-14 11:26:06	johnkeates	i'll start postgres again
2016-12-14 11:26:07	johnkeates	let's see what it thinks about that...
2016-12-14 11:26:07	◣	rajivr (~rajivr@103.205.219.10) has quit (Ping timeout: 252 seconds)
2016-12-14 11:26:07	tompaw	How is this possible: select count(1) from foo where x in (subquery) = a, select count(1) from foo where x not in (subquery) = 0, select count(1) from foo = much_more_than_a ???
2016-12-14 11:26:07	tompaw	For some reason "not in (subquery)" stopped working for me :/
2016-12-14 11:26:07	RhodiumToad	tompaw: NOT IN is stranger than you think
2016-12-14 11:26:08	◥	dur-randir (~dur_randi@93-80-107-98.broadband.corbina.ru) has joined #postgresql
2016-12-14 11:26:08	RhodiumToad	tompaw: if the subquery returns at least one null, then no rows match the condition
2016-12-14 11:26:09	johnkeates	select attname from pg_attribute; -- works now!
2016-12-14 11:26:15	tompaw	damn
2016-12-14 11:26:18	johnkeates	i'm going try a pg_dump
2016-12-14 11:26:23	tompaw	RhodiumToad: that's harsh
2016-12-14 11:26:28	◣	nanga (~nanga@unaffiliated/m0f0x) has quit (Max SendQ exceeded)
2016-12-14 11:26:33	RhodiumToad	tompaw: it's required by the logic
2016-12-14 11:26:38	RhodiumToad	tompaw: for example,
2016-12-14 11:26:39	◥	nanga (~nanga@unaffiliated/m0f0x) has joined #postgresql
2016-12-14 11:26:58	RhodiumToad	tompaw: a IN (1,2)  is equivalent to  (a = 1) OR (a = 2),  yes?
2016-12-14 11:27:02	◣	vuoto (~vuoto@80-71-135-9.u.parknet.dk) has quit (Remote host closed the connection)
2016-12-14 11:27:03	tompaw	yep
2016-12-14 11:27:20	RhodiumToad	tompaw: so,  a IN (1,null)   is equivalent to  (a = 1) OR (a = null)
2016-12-14 11:27:46	RhodiumToad	tompaw: but (a = null)  is always null, so it becomes  (a = 1) OR null   which is true if a = 1, and null otherwise
2016-12-14 11:27:46	◥	cartan (~cartan@p4FEEAE2A.dip0.t-ipconnect.de) has joined #postgresql
2016-12-14 11:28:05	◥	geo27 (~quassel@81.56.141.30) has joined #postgresql
2016-12-14 11:28:06	johnkeates	pg_dump no longer gets killed on the attrname! yay!
2016-12-14 11:28:10	johnkeates	but, still hangs on ERROR:  invalid attribute number 76 for application_settings
2016-12-14 11:28:21	RhodiumToad	tompaw: so,  NOT (a IN (1,null))   is  NOT (true)  if a=1,  and NOT (null)  otherwise
2016-12-14 11:28:21	johnkeates	but i guess cleaning up application_settings might fix that
2016-12-14 11:28:44	RhodiumToad	tompaw: but NOT (null)  is also null,  so the result of the NOT IN can either be false or null, but never true
2016-12-14 11:29:22	RhodiumToad	johnkeates: try excluding it from the dump, see if you can dump the rest
2016-12-14 11:29:40	tompaw	RhodiumToad: what do you mean by "(a = null) is always null" ?
2016-12-14 11:29:43	RhodiumToad	johnkeates: after extracting as much data as possible, _then_ you can try hacking on stuff to extract more :-)
2016-12-14 11:29:57	◣	somaReverse (~amos@2400:dd01:1022:30:6af7:28ff:fe78:6901) has quit (Ping timeout: 240 seconds)
2016-12-14 11:30:05	RhodiumToad	tompaw: all comparisons against null are null
2016-12-14 11:30:14	tompaw	ah... it should be a IS null
2016-12-14 11:30:27	RhodiumToad	tompaw: no, because IN always uses =
2016-12-14 11:30:59	tompaw	yeah, but I mean for a condition to return true on a null a, it would have to be "a IS NULL"
2016-12-14 11:31:00	RhodiumToad	tompaw: anyway, here's a trick you can use
2016-12-14 11:31:02	johnkeates	 missing chunk number 0 for toast value 68366 in pg_toast_16898
2016-12-14 11:31:06	johnkeates	no joy
2016-12-14 11:31:29	johnkeates	but since those numbers are oid's it would be possible to find the tables i suppose
2016-12-14 11:31:31	RhodiumToad	tompaw: WHERE (x)  can always be exactly complemented by writing  WHERE (x) IS NOT TRUE
2016-12-14 11:32:11	RhodiumToad	johnkeates: yes, that toast table is one of your application tables, not a catalog table
2016-12-14 11:32:25	◣	asymetrixs (~asymetrix@x4db9edbe.dyn.telefonica.de) has quit (Read error: Connection reset by peer)
2016-12-14 11:32:34	RhodiumToad	johnkeates: you may be able to locate the failing row and delete it or exclude it
2016-12-14 11:32:44	◥	ych (~horrror@93-173-27-85.bb.netvision.net.il) has joined #postgresql
2016-12-14 11:32:47	◣	SteffanW (~Icedove@ip4da40774.direct-adsl.nl) has quit (Remote host closed the connection)
2016-12-14 11:32:59	tompaw	RhodiumToad: hey, that worked
2016-12-14 11:33:11	RhodiumToad	tompaw: however, if this is a query you actually want to run in an application, the rule "never use NOT IN" applies
2016-12-14 11:33:27	johnkeates	i know which one it is, it's an event table, i've tracked and fixed that the last time around, i'll re-apply the same medicine
2016-12-14 11:33:37	tompaw	nope, it's a manual "database thinner" query to take a production DB and anonymize/thin it out for our devs
2016-12-14 11:33:50	◣	ych (~horrror@93-173-27-85.bb.netvision.net.il) has quit (Max SendQ exceeded)
2016-12-14 11:34:03	RhodiumToad	tompaw: ok, just be aware that NOT IN becomes impossibly slow if the subquery result size exceeds work_mem
2016-12-14 11:34:26	tompaw	RhodiumToad: what about IN ... IS NOT TRUE?
2016-12-14 11:34:42	RhodiumToad	tompaw: and that also applies to IN wrapped inside an IS NOT TRUE or any other conditional besides AND
2016-12-14 11:34:49	tompaw	roger that
2016-12-14 11:35:02	tompaw	RhodiumToad: thanks, great help as always.
2016-12-14 11:37:41	◣	acetakwas (~acetakwas@154.65.5.250) has quit (Ping timeout: 248 seconds)
2016-12-14 11:37:45	◥	somaReverse (~amos@2400:dd01:1022:30:6af7:28ff:fe78:6901) has joined #postgresql
2016-12-14 11:40:50	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2016-12-14 11:41:00	◥	Slashman (~Slash@cosium-152-18.fib.nerim.net) has joined #postgresql
2016-12-14 11:41:53	◣	Ergo (~ergo@91.238.59.144) has quit (Quit: WeeChat 1.4)
2016-12-14 11:43:47	◥	faw (~faw@unaffiliated/faw) has joined #postgresql
2016-12-14 11:46:28	◣	held (~heldchen@unaffiliated/held) has quit (Ping timeout: 258 seconds)
2016-12-14 11:46:28	◥	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has joined #postgresql
2016-12-14 11:47:29	◣	Slashman (~Slash@cosium-152-18.fib.nerim.net) has quit (Quit: Leaving)
2016-12-14 11:47:37	◣	therue (~therue@1-162-68-252.dynamic.hinet.net) has quit (Quit: WeeChat 1.6)
2016-12-14 11:48:35	◣	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has left #postgresql
2016-12-14 11:48:38	◥	pablo_s (~pablo_s@206-248-188-234.dsl.teksavvy.com) has joined #postgresql
2016-12-14 11:49:30	◥	Ravenmire (~Ravenmire@24-181-195-221.dhcp.hckr.nc.charter.com) has joined #postgresql
2016-12-14 11:49:35	◣	hasegeli (~Adium@ipv6-ed9fc0f11d2c83c2.clients.hamburg.freifunk.net) has quit (Quit: Leaving.)
2016-12-14 11:50:13	Ravenmire	What is the command to check key/reserved words?
2016-12-14 11:50:27	RhodiumToad	select * from pg_get_keywords();  -- lists all keywords
2016-12-14 11:51:02	Ravenmire	RhodiumToad, Thank you. That's exactly what I was looking for. I'll put it into an .sql file ;-)
2016-12-14 11:51:11	◥	Slashman (~Slash@cosium-152-18.fib.nerim.net) has joined #postgresql
2016-12-14 11:54:16	◣	kshah_ (~kshah@2604:2000:8058:2d00:40db:e80a:87df:166c) has quit
2016-12-14 11:54:27	◥	hasegeli (~Adium@193.96.224.18) has joined #postgresql
2016-12-14 11:54:27	johnkeates	it seems deleting rows isn't working as it can't write it back to the fs: :  xlog flush request 0/36340600 is not satisfied --- flushed only to 0/35646D80
2016-12-14 11:54:47	johnkeates	there are 5 bad rows, deleting them just makes 5 different rows show up, but at the same offsets
2016-12-14 11:55:18	◥	pjy (~pjy@2001:470:8:f7a:4511:6d16:bc15:f303) has joined #postgresql
2016-12-14 11:55:28	RhodiumToad	that error means that there are data blocks which are in the "future" relative to pg_xlog
2016-12-14 11:56:22	johnkeates	i guess that's why i actually went ahead and reset the xlog
2016-12-14 11:56:29	johnkeates	CONTEXT:  writing block 7 of relation base/16385/16906
2016-12-14 11:56:32	◥	nico103 (~nico@cpe-70-123-158-140.austin.res.rr.com) has joined #postgresql
2016-12-14 11:56:33	RhodiumToad	possibly.
2016-12-14 11:57:20	▷	RhodiumToad has to go afk for a bit now
2016-12-14 11:58:06	johnkeates	okay
2016-12-14 11:58:23	johnkeates	well, I exported pretty much 99% of the stuff, only 4 tables too mangled
2016-12-14 11:58:29	johnkeates	so thanks a ton so far!
2016-12-14 11:58:52	◥	held (~heldchen@unaffiliated/held) has joined #postgresql
2016-12-14 12:00:11	◣	hasegeli (~Adium@193.96.224.18) has quit (Quit: Leaving.)
2016-12-14 12:02:07	◣	felixn (~felixn@216.38.140.162) has quit (Ping timeout: 265 seconds)
2016-12-14 12:02:46	◣	johnmilton (~johnmilto@static-47-206-47-42.mias.fl.frontiernet.net) has quit (Remote host closed the connection)
2016-12-14 12:03:00	◣	baldrick1 (~duncan@62.119.166.9) has left #postgresql
2016-12-14 12:04:29	◥	Pr0f6ix (~jordonez@186.65.88.222) has joined #postgresql
2016-12-14 12:05:40	◣	Pr0f6ix (~jordonez@186.65.88.222) has quit (Client Quit)
2016-12-14 12:06:23	◣	Shells (~michelle@firewall.isux.com) has quit (Ping timeout: 258 seconds)
2016-12-14 12:07:35	◥	Shells (~michelle@firewall.isux.com) has joined #postgresql
2016-12-14 12:09:49	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2016-12-14 12:10:00	◣	sgflt (~sgflt@p54B21F0D.dip0.t-ipconnect.de) has quit (Quit: sgflt)
2016-12-14 12:10:10	◥	sgflt (~sgflt@p54B21F0D.dip0.t-ipconnect.de) has joined #postgresql
2016-12-14 12:11:05	◥	vuoto (~vuoto@80-71-135-9.u.parknet.dk) has joined #postgresql
2016-12-14 12:13:09	◣	ElectronicRU (~ksandra@93.191.19.208) has quit (Quit: This computer has gone to sleep)
2016-12-14 12:13:39	◥	mfournier (~marc@2001:4b98:dc2:41:216:3eff:fe6d:dc0b) has joined #postgresql
2016-12-14 12:13:53	◣	victor_lowther (~victor.lo@8.39.49.135) has quit (Ping timeout: 252 seconds)
2016-12-14 12:14:22	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 250 seconds)
2016-12-14 12:15:15	◥	priidu (~priidu@unaffiliated/priidu) has joined #postgresql
2016-12-14 12:15:41	◣	skylar (~skylar2@gsits-a.gs.washington.edu) has quit (Quit: Leaving.)
2016-12-14 12:20:05	◥	ElectronicRU (~ksandra@93.191.19.208) has joined #postgresql
2016-12-14 12:21:49	◣	claudiuinberlin (~claudiuin@78.55.52.125) has quit
2016-12-14 12:22:52	◣	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has quit (Quit: Lost terminal)
2016-12-14 12:23:43	◥	johnmilton (~johnmilto@96-58-242-186.res.bhn.net) has joined #postgresql
2016-12-14 12:23:45	◣	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-14 12:24:59	◣	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has quit (Quit: Textual IRC Client: www.textualapp.com)
2016-12-14 12:26:27	◥	baconoverflow_ (uid175297@gateway/web/irccloud.com/x-yxwkuifpnmhdlzyr) has joined #postgresql
2016-12-14 12:26:38	◥	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has joined #postgresql
2016-12-14 12:28:34	◣	stephenjudkins (~stephenju@c-73-240-71-155.hsd1.or.comcast.net) has quit (Remote host closed the connection)
2016-12-14 12:28:56	◥	markus3 (~markus@193.40.178.118) has joined #postgresql
2016-12-14 12:29:42	◥	linuxhiker1 (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2016-12-14 12:29:46	◣	johnkeates (~johnkeate@86.92.128.79) has quit (Quit: Leaving)
2016-12-14 12:30:42	◣	johnmilton (~johnmilto@96-58-242-186.res.bhn.net) has quit (Remote host closed the connection)
2016-12-14 12:32:31	◣	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Ping timeout: 256 seconds)
2016-12-14 12:32:33	◣	ElectronicRU (~ksandra@93.191.19.208) has quit (Quit: This computer has gone to sleep)
2016-12-14 12:33:35	◣	Klumben (Nsaiswatch@elmo.stole-your.pw) has quit (Ping timeout: 258 seconds)
2016-12-14 12:33:52	◥	lolek (~lolek@unaffiliated/marcin) has joined #postgresql
2016-12-14 12:35:25	◥	Cohedrin (~textual@192.77.237.205) has joined #postgresql
2016-12-14 12:35:55	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-14 12:37:07	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2016-12-14 12:38:08	baconoverflow_	Hi all, I'm working with a relatively large dataset and I'm trying to find a way to optimize a query. I've explained the problem here along with the schema, query, and explain:  https://gist.github.com/anonymous/16f852b02da3dc5efb379c333a9f4cd1 Any advice would be greatly appreciated, thanks!
2016-12-14 12:38:16	◥	Klumben (Nsaiswatch@elmo.stole-your.pw) has joined #postgresql
2016-12-14 12:38:29	◣	vuoto (~vuoto@80-71-135-9.u.parknet.dk) has quit (Remote host closed the connection)
2016-12-14 12:41:52	◥	hasegeli (~Adium@ipv6-7d1e61a619c95073.clients.hamburg.freifunk.net) has joined #postgresql
2016-12-14 12:42:01	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Ping timeout: 260 seconds)
2016-12-14 12:42:37	◥	Gloomy (~Gloomy@78-22-186-208.access.telenet.be) has joined #postgresql
2016-12-14 12:42:53	◣	hasegeli (~Adium@ipv6-7d1e61a619c95073.clients.hamburg.freifunk.net) has quit (Client Quit)
2016-12-14 12:44:01	◣	chris_dan (~chris_dan@ip72-197-189-52.sd.sd.cox.net) has quit (Quit: Went to sleep)
2016-12-14 12:44:02	baconoverflow_	What I am trying to achieve is a simple relationship. I need the last `agent_locations` row (based on `created_at` sorting) of each `agents` entry
2016-12-14 12:44:39	◣	Lordz (~Adium@186.215.116.176) has quit (Quit: Leaving.)
2016-12-14 12:44:40	◥	tfitts (uid158900@gateway/web/irccloud.com/x-qleskudaxiotqnvl) has joined #postgresql
2016-12-14 12:45:22	◥	xinming (~hyy@115.221.38.253) has joined #postgresql
2016-12-14 12:47:24	◣	nettoweb (~nettoweb@191.191.114.142) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-14 12:49:05	◥	Lordz (~Adium@186.215.116.176) has joined #postgresql
2016-12-14 12:50:36	◣	sergeyb[m] (sergeybmat@gateway/shell/matrix.org/x-esnzrbrekoopjljv) has quit (Quit: Client limit exceeded: 5000)
2016-12-14 12:53:14	◣	Slashman (~Slash@cosium-152-18.fib.nerim.net) has quit (Quit: Leaving)
2016-12-14 12:53:17	◣	pglife_bot (~pglife@momjian.us) has quit (Remote host closed the connection)
2016-12-14 12:55:15	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2016-12-14 12:55:24	◥	pglife_bot (~pglife@momjian.us) has joined #postgresql
2016-12-14 12:57:11	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-14 12:58:31	◣	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has quit (Ping timeout: 258 seconds)
2016-12-14 12:59:09	◣	ajw0100 (~ajw0100@c-24-62-66-197.hsd1.ma.comcast.net) has quit (Ping timeout: 256 seconds)
2016-12-14 12:59:16	◥	baldrick1 (~duncan@62.119.166.9) has joined #postgresql
2016-12-14 12:59:30	◣	baldrick1 (~duncan@62.119.166.9) has quit (Read error: Connection reset by peer)
2016-12-14 12:59:38	◥	Moonsilence (~Moonsilen@aftr-95-222-31-121.unity-media.net) has joined #postgresql
2016-12-14 12:59:46	StuckMojo	does recovery.conf work like postgres.conf in that repeated options are OK and last one wins?
2016-12-14 13:00:05	markus3	baconoverflow_: do you have an index for agent_id in agent_locations?
2016-12-14 13:00:06	StuckMojo	i.e. if i want to programatically change primary_conninfo, can i just append a new one?
2016-12-14 13:00:13	◣	Moonsilence (~Moonsilen@aftr-95-222-31-121.unity-media.net) has quit (Client Quit)
2016-12-14 13:00:19	◥	RichardJ (~richard@80.115.61.10) has joined #postgresql
2016-12-14 13:00:31	◥	grayhem__ (~grayhemp_@12.33.220.130) has joined #postgresql
2016-12-14 13:00:38	◥	Moonsilence (~Moonsilen@aftr-95-222-31-121.unity-media.net) has joined #postgresql
2016-12-14 13:01:33	◣	bberry (uid126853@gateway/web/irccloud.com/x-ozyknnyslmtedmhp) has quit (Quit: Connection closed for inactivity)
2016-12-14 13:01:57	baconoverflow_	@markus3 yes - a btree index - tack! :)
2016-12-14 13:02:13	markus3	baconoverflow_: I think you also don't need the distinct, since if the relation is correct (no duplicate tuples) then you shouldn't get duplicates anyway
2016-12-14 13:02:13	◣	RichardJ (~richard@80.115.61.10) has quit (Client Quit)
2016-12-14 13:02:32	markus3	and by correct I mean by theory -- ymmv
2016-12-14 13:02:43	◣	Moonsilence (~Moonsilen@aftr-95-222-31-121.unity-media.net) has quit (Client Quit)
2016-12-14 13:02:55	◣	grayhem__ (~grayhemp_@12.33.220.130) has quit (Remote host closed the connection)
2016-12-14 13:03:28	◥	grayhem__ (~grayhemp_@12.33.220.130) has joined #postgresql
2016-12-14 13:03:33	◣	grayhemp_wh (~grayhemp_@12.33.220.130) has quit (Ping timeout: 248 seconds)
2016-12-14 13:03:47	◥	Flotho66 (~florent@16.250.122.78.rev.sfr.net) has joined #postgresql
2016-12-14 13:04:41	markus3	baconoverflow_: it could be that the distinct messes up the id lookup, since the by the explain result the unique is done first, ond the id lookupl are done last
2016-12-14 13:04:57	◣	howitdo (~howitdo@unaffiliated/howitdo) has quit (Ping timeout: 265 seconds)
2016-12-14 13:07:40	markus3	.. but I'm no expert on postgres, better see if there is someone else who's answering ... or google :)
2016-12-14 13:07:54	baconoverflow_	markus3: agent_locations contains millions of results though
2016-12-14 13:08:18	baconoverflow_	In MySQL I'd use a simple GROUP BY clause, but this seems different in PostgreSQL :(
2016-12-14 13:08:46	RhodiumToad	mysql allows you to do things with group by that have undefined results, pg does not
2016-12-14 13:08:51	baconoverflow_	(and yes I realize the way PostgreSQL implements GROUP BY is SQL compliant unlike MySQL)
2016-12-14 13:08:56	RhodiumToad	well...
2016-12-14 13:09:00	◥	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has joined #postgresql
2016-12-14 13:09:13	RhodiumToad	pg doesn't do _all_ the functional dependency stuff that it ought to
2016-12-14 13:09:53	RhodiumToad	if I understand the problem, though, what you want is LATERAL
2016-12-14 13:10:11	◥	howitdo (~howitdo@unaffiliated/howitdo) has joined #postgresql
2016-12-14 13:10:22	RhodiumToad	given the list of agent_ids, you want the most recent location for each?
2016-12-14 13:10:35	baconoverflow_	@RhodiumToad: yup -- that's right
2016-12-14 13:10:47	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2016-12-14 13:10:53	◣	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has quit (Remote host closed the connection)
2016-12-14 13:11:06	◣	lolek (~lolek@unaffiliated/marcin) has left #postgresql
2016-12-14 13:11:21	RhodiumToad	select l.* from unnest(array[100,106,101,...]) u(agent_id), lateral (select * from agent_locations al2 where al2.agent_id=u.agent_id order by al2.created_at desc limit 1) l;
2016-12-14 13:11:45	RhodiumToad	needs index on agent_locations(agent_id,created_at)
2016-12-14 13:11:52	baconoverflow_	@RhodiumToad: okay, I'll definitely look into that, that's really helpful
2016-12-14 13:11:55	baconoverflow_	thanks! :)
2016-12-14 13:12:06	baconoverflow_	haven't heard of LATERAL joins before
2016-12-14 13:12:16	RhodiumToad	if there are many locations per agent, the performance will be orders of magnitude better than any other approach
2016-12-14 13:12:28	baconoverflow_	yeah, there are thousands
2016-12-14 13:12:49	RhodiumToad	it'll probably be about 1000 times faster than your existing query then :-)
2016-12-14 13:14:44	RhodiumToad	LATERAL allows the subquery in the join to reference columns from tables that are to its left in the query directly rather than via a join condition
2016-12-14 13:15:04	RhodiumToad	so  ... FROM a, LATERAL (b)  runs b once for each selected row of a
2016-12-14 13:15:18	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 240 seconds)
2016-12-14 13:15:32	◣	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has quit (Remote host closed the connection)
2016-12-14 13:15:38	◣	howitdo (~howitdo@unaffiliated/howitdo) has quit (Read error: Connection reset by peer)
2016-12-14 13:15:50	◥	quant (quant@bitsync.net) has joined #postgresql
2016-12-14 13:16:47	◣	Lordz (~Adium@186.215.116.176) has quit (Quit: Leaving.)
2016-12-14 13:18:26	◣	fguillot (~fguillot@2607:f748:9:1678:8081:bbd6:1cde:106a) has quit (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
2016-12-14 13:18:41	baconoverflow_	ah okay!
2016-12-14 13:18:41	baconoverflow_	great
2016-12-14 13:18:45	baconoverflow_	thanks @RhodiumToad
2016-12-14 13:18:46	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-14 13:19:09	◥	stephenjudkins (~stephenju@c-71-237-180-88.hsd1.or.comcast.net) has joined #postgresql
2016-12-14 13:19:23	erry	q
2016-12-14 13:19:31	◣	erry (~errietta@shadowcat/hyperactive-puppy/erry) has left #postgresql ("WeeChat 1.5")
2016-12-14 13:19:52	◥	davidw (~davidw@apache/committer/davidw) has joined #postgresql
2016-12-14 13:21:52	◥	gelignite (~gelignite@x4db5d9e8.dyn.telefonica.de) has joined #postgresql
2016-12-14 13:24:24	◣	dnicole (~dnicole@2602:30a:2e5d:1370:7c57:bd82:c7e4:5753) has quit (Remote host closed the connection)
2016-12-14 13:26:28	◣	markus3 (~markus@193.40.178.118) has quit (Quit: leaving)
2016-12-14 14:12:39	⚡	irc: disconnected from server
2016-12-14 14:13:03	◥	boon (~david@66.195.46.242) has joined #postgresql
2016-12-14 14:13:03	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-14 14:13:03	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-14 14:13:03	⚡	Channel #postgresql: 1015 nicks (0 ops, 0 voices, 1015 normals)
2016-12-14 14:13:03	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-14 14:13:06	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-14 14:13:22	◣	gelignite (~gelignite@x4db5d9e8.dyn.telefonica.de) has quit (Quit: http://bit.ly/1kso8Ta)
2016-12-14 14:14:17	◥	Cohedrin (~textual@c-73-170-239-253.hsd1.ca.comcast.net) has joined #postgresql
2016-12-14 14:14:18	Papierkorb	But then every text they contain is given in multiple languages and stuff, so I'll have to do something about that too. Somethings telling me that I'll have to move that thing to my HDD, my SSD may not have enough free space -.-; Ah well, first time handling this much data, gotta start somewhere :)
2016-12-14 14:14:24	◥	whartung (~whartung@wsip-70-183-27-154.oc.oc.cox.net) has joined #postgresql
2016-12-14 14:15:18	◥	chris_dan (~chris_dan@ip72-197-189-52.sd.sd.cox.net) has joined #postgresql
2016-12-14 14:16:46	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 256 seconds)
2016-12-14 14:17:22	◣	dnicole (~dnicole@2602:30a:2e5d:1370:7c57:bd82:c7e4:5753) has quit (Remote host closed the connection)
2016-12-14 14:17:51	◣	unbalanced (~unbalance@181.229.133.6) has quit (Ping timeout: 258 seconds)
2016-12-14 14:17:59	◥	dnicole (~dnicole@2602:30a:2e5d:1370:7c57:bd82:c7e4:5753) has joined #postgresql
2016-12-14 14:18:44	◣	cgar_ (~cgar@ool-4575d5c1.dyn.optonline.net) has quit (Quit: Leaving)
2016-12-14 14:19:40	◣	__Yiota (~textual@2607:fea8:56e0:407:6148:2734:61ff:8825) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-14 14:19:53	◥	dnicole_ (~dnicole@2602:30a:2e5d:1370:25e8:554e:259e:7f4) has joined #postgresql
2016-12-14 14:20:18	◥	XofP (~XofP@cpe-75-83-247-75.socal.res.rr.com) has joined #postgresql
2016-12-14 14:20:28	◥	iamnicknack_ (~Mutter@host86-139-2-18.range86-139.btcentralplus.com) has joined #postgresql
2016-12-14 14:20:35	◣	roolio (~roolio@62-129-6-66-bourdon.mfglabs.net) has quit (Quit: roolio)
2016-12-14 14:20:43	◣	iamnicknack_ (~Mutter@host86-139-2-18.range86-139.btcentralplus.com) has quit (Client Quit)
2016-12-14 14:20:54	◣	djbkd (~djbkd@2607:fb90:85b:aecd:c8f5:ba0f:118a:d90b) has quit (Quit: My people need me...)
2016-12-14 14:21:51	◣	RichardJ (~richard@80.115.61.10) has quit (Quit: My Mac has gone to sleep. ZZZzzz…)
2016-12-14 14:22:11	◥	RichardJ (~richard@80.115.61.10) has joined #postgresql
2016-12-14 14:22:27	◣	dnicole (~dnicole@2602:30a:2e5d:1370:7c57:bd82:c7e4:5753) has quit (Ping timeout: 258 seconds)
2016-12-14 14:24:43	◣	faw (~faw@unaffiliated/faw) has quit (Ping timeout: 256 seconds)
2016-12-14 14:24:46	◣	dnicole_ (~dnicole@2602:30a:2e5d:1370:25e8:554e:259e:7f4) has quit (Ping timeout: 258 seconds)
2016-12-14 14:25:11	◣	wam (~wam@unaffiliated/wam) has quit (Ping timeout: 265 seconds)
2016-12-14 14:25:22	◥	Ropeney (~Ropeney@tank.mindvision.com.au) has joined #postgresql
2016-12-14 14:26:20	◣	mizu_no_oto_work (~textual@104.207.209.180) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-14 14:27:35	◥	mrico (~quassel@p20030086244B4D52050E999D405F8A34.dip0.t-ipconnect.de) has joined #postgresql
2016-12-14 14:27:44	◥	Neo-- (~neo@internet-188-197-16-35.narocnik.mobitel.si) has joined #postgresql
2016-12-14 14:28:07	◥	blackwraith (~priidu@unaffiliated/priidu) has joined #postgresql
2016-12-14 14:29:17	◣	priidu (~priidu@unaffiliated/priidu) has quit (Ping timeout: 240 seconds)
2016-12-14 14:31:10	◣	Neo-- (~neo@internet-188-197-16-35.narocnik.mobitel.si) has quit (Client Quit)
2016-12-14 14:31:39	◣	chris_dan (~chris_dan@ip72-197-189-52.sd.sd.cox.net) has quit (Quit: Goodbye)
2016-12-14 14:32:19	◣	mrico (~quassel@p20030086244B4D52050E999D405F8A34.dip0.t-ipconnect.de) has quit (Remote host closed the connection)
2016-12-14 14:32:24	◣	Lipp (~Lipp@212.86.51.83) has quit (Remote host closed the connection)
2016-12-14 14:32:25	◣	RichardJ (~richard@80.115.61.10) has quit (Quit: My Mac has gone to sleep. ZZZzzz…)
2016-12-14 14:33:16	◥	Lipp (~Lipp@212.86.51.83) has joined #postgresql
2016-12-14 14:33:34	◣	dionysus69 (~Thunderbi@unaffiliated/dionysus69) has quit (Ping timeout: 260 seconds)
2016-12-14 14:34:24	◣	Flotho66 (~florent@16.250.122.78.rev.sfr.net) has quit (Ping timeout: 246 seconds)
2016-12-14 14:34:30	◥	mrico_ (~mrico@p20030086244B4D52050E999D405F8A34.dip0.t-ipconnect.de) has joined #postgresql
2016-12-14 14:36:08	◣	Lipp (~Lipp@212.86.51.83) has quit (Remote host closed the connection)
2016-12-14 14:36:12	◥	Lipp (~Lipp@212.86.51.83) has joined #postgresql
2016-12-14 14:36:25	◣	Lipp (~Lipp@212.86.51.83) has quit (Remote host closed the connection)
2016-12-14 14:38:16	◥	Twist (~twist@pile.pbp.net) has joined #postgresql
2016-12-14 14:39:43	◥	threeminutemonta (~dave@eth778.vic.adsl.internode.on.net) has joined #postgresql
2016-12-14 14:42:00	◣	evnmar (~MongooseW@12.104.179.154) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-14 14:45:25	◣	xzi11a (~robert@static-108-48-124-82.washdc.fios.verizon.net) has quit (Ping timeout: 248 seconds)
2016-12-14 14:46:39	◥	sausage_factory (~priidu@unaffiliated/priidu) has joined #postgresql
2016-12-14 14:47:01	◣	mrico_ (~mrico@p20030086244B4D52050E999D405F8A34.dip0.t-ipconnect.de) has quit (Ping timeout: 258 seconds)
2016-12-14 14:47:56	◣	blackwraith (~priidu@unaffiliated/priidu) has quit (Ping timeout: 256 seconds)
2016-12-14 14:47:57	◣	evol_monkey (~vasilis@athedsl-4502423.home.otenet.gr) has quit (Quit: Lost terminal)
2016-12-14 14:49:09	StuckMojo	??mvcc
2016-12-14 14:49:09	pg_docbot	http://www.postgresql.org/docs/current/static/mvcc.html :: http://en.wikipedia.org/wiki/Multiversion_concurrency_control
2016-12-14 14:49:09	pg_docbot	http://devcenter.heroku.com/articles/postgresql-concurrency :: http://momjian.us/main/presentations/internals.html#mvcc
2016-12-14 14:49:23	◥	a1fa (~a1fa@unaffiliated/a1fa) has joined #postgresql
2016-12-14 14:50:33	a1fa	hello.. has anyone seen a half encrypted postgresql dump?
2016-12-14 14:50:45	◣	victor_lowther (~victor.lo@8.39.49.135) has quit (Ping timeout: 248 seconds)
2016-12-14 14:50:51	◥	dodobrain (~dodobrain@unaffiliated/freakabcd) has joined #postgresql
2016-12-14 14:51:34	RhodiumToad	half encrypted?
2016-12-14 14:52:04	RhodiumToad	what are the first 5 bytes of the file?
2016-12-14 14:52:11	a1fa	RhodiumToad: the insert values are all garbled up.. and i got the encryption key along with it
2016-12-14 14:52:35	a1fa	is that normal postgress dump?
2016-12-14 14:53:07	RhodiumToad	no
2016-12-14 14:53:46	RhodiumToad	do you mean there are actual INSERT INTO foo  statements in the file?
2016-12-14 14:54:02	RhodiumToad	and if so, what do the statements look like?
2016-12-14 14:54:44	◣	zivester (~zivester@38.104.66.138) has quit (Remote host closed the connection)
2016-12-14 14:55:36	a1fa	its really hard to dell.. its all garbled up
2016-12-14 14:55:38	◣	RickDeckard (~tburringt@cpe-69-200-226-151.nyc.res.rr.com) has quit (Ping timeout: 265 seconds)
2016-12-14 14:56:19	RhodiumToad	what are the first 5 bytes of the file?
2016-12-14 14:56:26	◥	TMM (~hp@fsf/member/pdpc.professional.tmm) has joined #postgresql
2016-12-14 14:57:17	a1fa	PGDMP name of the database, 9.4.5 client_encoding = UTF8... with bunch of garbles in beween
2016-12-14 14:57:30	RhodiumToad	ok. that's a pg custom format dump
2016-12-14 14:57:37	RhodiumToad	you restore that with pg_restore
2016-12-14 14:58:05	a1fa	no way to read it without restoring first?
2016-12-14 14:58:08	RhodiumToad	the actual data is compressed, so you won't see that in clear
2016-12-14 14:58:22	RhodiumToad	you can convert it to a plain text dump by running pg_restore with no -d option
2016-12-14 14:58:30	RhodiumToad	i.e.  pg_restore file.dmp >file.sql
2016-12-14 14:58:34	a1fa	thank you
2016-12-14 14:58:54	RhodiumToad	the data will likely be in the form of COPY commands rather than INSERT
2016-12-14 14:59:13	◥	Norbyte (~Norbyte@178-164-192-218.pool.digikabel.hu) has joined #postgresql
2016-12-14 14:59:25	◣	nettoweb (~nettoweb@177.16.206.247) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-14 15:00:07	a1fa	thank you RhodiumToad - this is my first time touching postgress
2016-12-14 15:00:15	◥	__Yiota (~textual@2607:fea8:56e0:407:6572:dd2e:de66:43e5) has joined #postgresql
2016-12-14 15:00:31	a1fa	-s+ql .. i wodner where does this key come into play
2016-12-14 15:01:19	◥	dsantiag_ (~dsantiago@40.141.55.70) has joined #postgresql
2016-12-14 15:02:21	◥	eeriegeek (~eeriegeek@73.31.123.0) has joined #postgresql
2016-12-14 15:02:29	RhodiumToad	perhaps there are encrypted columns using the pgcrypto functions?
2016-12-14 15:02:41	◣	pjy (~pjy@2001:470:8:f7a:4511:6d16:bc15:f303) has left #postgresql
2016-12-14 15:03:13	RhodiumToad	if columns you expect to contain plain text actually have \x<long string of hex digits>  then that might be why
2016-12-14 15:03:17	Kobaz	izza broken
2016-12-14 15:03:20	Kobaz	pbx=# select * from live_queue.callers; ERROR:  could not open file "base/58171/65147": No such file or directory
2016-12-14 15:03:25	Kobaz	it's an unlogged table
2016-12-14 15:03:28	Kobaz	i forgot how to fix that
2016-12-14 15:03:29	a1fa	RhodiumToad: i think you are right
2016-12-14 15:03:30	Kobaz	truncate?
2016-12-14 15:03:41	RhodiumToad	truncate should fix it, yes; how did it get broken?
2016-12-14 15:03:43	a1fa	i just found a base64 encoded string thats also encrypted
2016-12-14 15:03:48	◣	aib (~marvin@unaffiliated/aib42) has quit (Ping timeout: 246 seconds)
2016-12-14 15:03:48	◣	dsantiago (~dsantiago@40.141.55.70) has quit (Ping timeout: 256 seconds)
2016-12-14 15:03:53	Kobaz	RhodiumToad: migrated pgdata dir to new box, rsync
2016-12-14 15:04:03	Kobaz	postgres was stopped at the time, not sure how it got mungled
2016-12-14 15:05:01	RhodiumToad	a1fa: so, it could have been encrypted with pgcrypto, but if it's base64 I think it's more likely that it was encrypted in the client
2016-12-14 15:05:07	◣	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has quit (Ping timeout: 252 seconds)
2016-12-14 15:05:13	Kobaz	yay, much less broken
2016-12-14 15:05:30	◣	zv (~zv@unaffiliated/zv) has quit (Ping timeout: 256 seconds)
2016-12-14 15:05:38	◥	blackwraith (~priidu@unaffiliated/priidu) has joined #postgresql
2016-12-14 15:05:40	Kobaz	postgres 9.5 is so sexy
2016-12-14 15:05:44	◥	alioui_ (~alioui_al@197.1.12.20) has joined #postgresql
2016-12-14 15:05:44	Kobaz	really happy moving up from 9.1
2016-12-14 15:05:47	◣	Norbyte (~Norbyte@178-164-192-218.pool.digikabel.hu) has quit (Ping timeout: 265 seconds)
2016-12-14 15:05:53	Kobaz	slow but steady moving everone over
2016-12-14 15:06:23	◣	alioui_ (~alioui_al@197.1.12.20) has left #postgresql
2016-12-14 15:06:50	◣	sausage_factory (~priidu@unaffiliated/priidu) has quit (Ping timeout: 250 seconds)
2016-12-14 15:08:05	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2016-12-14 15:08:37	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-14 15:08:39	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Remote host closed the connection)
2016-12-14 15:08:40	◥	RickDeckard (~tburringt@cpe-69-200-226-151.nyc.res.rr.com) has joined #postgresql
2016-12-14 15:11:47	◣	XofP (~XofP@cpe-75-83-247-75.socal.res.rr.com) has quit (Quit: XofP)
2016-12-14 15:12:33	◥	ononotofu (~ononotofu@2605:e000:1309:c0da:ed5d:c2a6:b56a:b8a8) has joined #postgresql
2016-12-14 15:12:45	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2016-12-14 15:13:03	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 258 seconds)
2016-12-14 15:16:39	◥	davidfetter_ge (~chatzilla@64.129.231.6) has joined #postgresql
2016-12-14 15:17:34	◣	orospakr_ (~orospakr@207.236.193.2) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-14 15:17:45	◥	howitdo (~howitdo@unaffiliated/howitdo) has joined #postgresql
2016-12-14 15:17:52	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 265 seconds)
2016-12-14 15:18:10	davidfetter_ge	hi
2016-12-14 15:18:45	Novynn	hello
2016-12-14 15:19:46	davidfetter_ge	anybody familiar with the golang driver? i was hoping to set transaction isolation, etc., in sql.Begin(), but apparently, i have to do it via Exec() afterwards. is setting that stuff just not something that sql.Begin() handles?
2016-12-14 15:20:44	johto	yeah, until Go 1.8 )I Think=
2016-12-14 15:20:57	◥	dnicole (~dnicole@2602:30a:2e5d:1370:25e8:554e:259e:7f4) has joined #postgresql
2016-12-14 15:21:09	◣	RickDeckard (~tburringt@cpe-69-200-226-151.nyc.res.rr.com) has quit (Ping timeout: 248 seconds)
2016-12-14 15:21:12	◣	skylar (~skylar2@gsits-a.gs.washington.edu) has quit (Quit: Leaving.)
2016-12-14 15:21:36	davidfetter_ge	ok, won't bother myself about it until then. :)
2016-12-14 15:24:53	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2016-12-14 15:25:19	◣	dnicole (~dnicole@2602:30a:2e5d:1370:25e8:554e:259e:7f4) has quit (Ping timeout: 258 seconds)
2016-12-14 15:26:11	◣	xemdetia (~xemdetia@129.42.208.167) has quit (Ping timeout: 250 seconds)
2016-12-14 15:26:11	lluad	davidfetter_ge: Look at https://godoc.org/github.com/jackc/pgx as an alternate driver, if database/sql compatibility isn't your primary need.
2016-12-14 15:26:26	◥	danieli (~duniel@unaffiliated/danieli) has joined #postgresql
2016-12-14 15:26:59	davidfetter_ge	we're already using database/sql for this project, but i'll definitely keep it in mind into the future
2016-12-14 15:27:30	lluad	Yeah. pgx does have a "pretend to be a database/sql driver" shim too, but you obviously lose much of the benefits.
2016-12-14 15:28:12	◣	TMM (~hp@fsf/member/pdpc.professional.tmm) has quit (Quit: Ex-Chat)
2016-12-14 15:28:40	◥	sausage_factory (~priidu@unaffiliated/priidu) has joined #postgresql
2016-12-14 15:29:28	◣	neoncontrails (~neoncontr@wsip-174-79-243-9.sd.sd.cox.net) has quit (Remote host closed the connection)
2016-12-14 15:30:13	◣	blackwraith (~priidu@unaffiliated/priidu) has quit (Ping timeout: 248 seconds)
2016-12-14 15:30:28	◣	Maxel (~Maxel@50-241-60-122-static.hfc.comcastbusiness.net) has quit (Ping timeout: 245 seconds)
2016-12-14 15:30:47	◣	doppleherz (uid178172@gateway/web/irccloud.com/x-cnisnavyvypovqtd) has quit (Quit: Connection closed for inactivity)
2016-12-14 15:30:59	◥	TMM (~hp@fsf/member/pdpc.professional.tmm) has joined #postgresql
2016-12-14 15:31:29	▷	davidfetter_ge really liking golang so far :)
2016-12-14 15:33:57	◣	guzzlefry (~guzzlefry@unaffiliated/guzzlefry) has quit (Ping timeout: 248 seconds)
2016-12-14 15:34:17	◣	pnhlantau (~Thunderbi@n219073012165.netvigator.com) has quit (Quit: pnhlantau)
2016-12-14 15:34:37	◣	ononotofu (~ononotofu@2605:e000:1309:c0da:ed5d:c2a6:b56a:b8a8) has quit (Ping timeout: 240 seconds)
2016-12-14 15:36:03	◥	RickDeckard (~tburringt@cpe-69-200-226-151.nyc.res.rr.com) has joined #postgresql
2016-12-14 15:39:25	lluad	It's a decent language, yeah.
2016-12-14 15:39:35	▷	lluad is retrofitting context.Context into his code today :)
2016-12-14 15:40:29	◣	fwiles (~frank@19.89.124.24.cm.sunflower.com) has quit (Quit: fwiles)
2016-12-14 15:40:35	◣	nwilson5 (~nwilson5@23-24-247-45-static.hfc.comcastbusiness.net) has quit (Ping timeout: 265 seconds)
2016-12-14 15:41:10	◥	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has joined #postgresql
2016-12-14 15:41:29	◥	guzzlefry (~guzzlefry@adsl-068-209-129-166.sip.jax.bellsouth.net) has joined #postgresql
2016-12-14 15:46:14	◥	Norbyte (~Norbyte@178-164-192-218.pool.digikabel.hu) has joined #postgresql
2016-12-14 15:46:58	◣	sausage_factory (~priidu@unaffiliated/priidu) has quit (Ping timeout: 250 seconds)
2016-12-14 15:47:54	◥	priidu (~priidu@unaffiliated/priidu) has joined #postgresql
2016-12-14 15:48:43	◥	iGeni (~textual@50702E2F.cm-14.dynamic.ziggo.nl) has joined #postgresql
2016-12-14 15:49:25	◣	guzzlefry (~guzzlefry@adsl-068-209-129-166.sip.jax.bellsouth.net) has quit (Ping timeout: 248 seconds)
2016-12-14 15:49:25	◥	pnhlantau (~Thunderbi@n219073012165.netvigator.com) has joined #postgresql
2016-12-14 15:53:14	◣	__Yiota (~textual@2607:fea8:56e0:407:6572:dd2e:de66:43e5) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-14 15:53:25	◥	nwilson5 (~nwilson5@23-24-247-45-static.hfc.comcastbusiness.net) has joined #postgresql
2016-12-14 15:53:38	◣	Norbyte (~Norbyte@178-164-192-218.pool.digikabel.hu) has quit (Ping timeout: 265 seconds)
2016-12-14 15:54:00	◥	guzzlefry (~guzzlefry@adsl-068-209-129-166.sip.jax.bellsouth.net) has joined #postgresql
2016-12-14 15:58:20	◣	eggyknap (~jtolley@unaffiliated/eggyknap) has quit (Quit: leaving)
2016-12-14 15:59:06	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Remote host closed the connection)
2016-12-14 15:59:23	◥	gist (~jack@p4FEDF7B7.dip0.t-ipconnect.de) has joined #postgresql
2016-12-14 15:59:36	◥	macabre (~ibtjw@unaffiliated/macabre) has joined #postgresql
2016-12-14 16:00:35	wyvern	I'm exploring the different scan types, and I can't seem to figure out how to trigger a bitmap index scan. I can trigger an bitmap index scan with a bitmap heap scan + recheck condition by selecting a large chunk of the rows in the table. Anyone know how to tickle the query planner to get just a bitmap index scan?
2016-12-15 10:59:04	◥	boon (~david@66.195.46.242) has joined #postgresql
2016-12-15 10:59:04	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-15 10:59:04	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-15 10:59:04	⚡	Channel #postgresql: 1042 nicks (0 ops, 0 voices, 1042 normals)
2016-12-15 10:59:05	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-15 10:59:05	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-15 10:59:36	◣	uncleyear (~ian@unaffiliated/uncleyear) has quit (Disconnected by services)
2016-12-15 10:59:44	◥	uncleyear (~ian@unaffiliated/uncleyear) has joined #postgresql
2016-12-15 10:59:58	buu	roger_padactor_w: ensure it is listening on the machine's lan address
2016-12-15 11:00:44	roger_padactor_w	and setup the correct ports in the container?
2016-12-15 11:01:09	◣	evnmar (~MongooseW@12.104.179.154) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-15 11:01:25	◣	lucian (~lucian@194.74.244.130) has quit (Ping timeout: 258 seconds)
2016-12-15 11:01:34	ningu	yeah, this seems like more of a docker question
2016-12-15 11:01:41	ningu	verify what ports pg is listening on
2016-12-15 11:01:48	ningu	and make those accessible from the container
2016-12-15 11:01:52	◥	TViernion (~TViernion@69.12.11.85) has joined #postgresql
2016-12-15 11:01:58	ningu	s/ports/ports and ips/
2016-12-15 11:02:29	ningu	I can't remember if docker can access localhost... maybe not?
2016-12-15 11:02:31	ningu	pg is usually port 5432
2016-12-15 11:03:04	◣	__Yiota (~textual@2607:fea8:3c9f:ffe9:5c02:2673:d5f5:3737) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 11:03:19	roger_padactor_w	ningu, docker has been quiet... but I think you are right.
2016-12-15 11:03:29	roger_padactor_w	thanks
2016-12-15 11:03:48	ningu	oh really? hmm, I went there a year or two ago and it was pretty active, figured it would be much busier now
2016-12-15 11:04:07	◣	nettoweb (~nettoweb@191.191.114.142) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 11:04:08	ningu	but who knows, I haven't kept up with the container ecosystem, I read complaints about docker all the time and now there is rkt... it's too much for me to follow
2016-12-15 11:04:11	ningu	since I don't use it day to day :)
2016-12-15 11:04:27	◥	dege (~dege@c-907ce555.027-294-73746f71.cust.bredbandsbolaget.se) has joined #postgresql
2016-12-15 11:05:28	ningu	I guess rocket would have been too slow to type, they had to call it rkt so you know it's fast
2016-12-15 11:06:22	◥	Debnet`Work (~Marc@145.86.2.93.rev.sfr.net) has joined #postgresql
2016-12-15 11:06:28	◥	held (~heldchen@unaffiliated/held) has joined #postgresql
2016-12-15 11:06:49	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2016-12-15 11:07:25	◥	Debnet`Laptop (~Marc@smtp2.sa-cim.fr) has joined #postgresql
2016-12-15 11:07:29	trailertrash	lluad: I could not figure out how match 'aabb' but your second attempt helped me solve it, thank you! here's the final solution: SELECT a FROM (SELECT unnest(ARRAY['aabbb','ccc','aabb','cccccdd']) a) t WHERE (a ~* '(?:(.)\1{1,}){2,}' OR a ~* '(.)\1{2,}')
2016-12-15 11:07:49	◥	madboxs_ (~madboxs@210.206.96.98) has joined #postgresql
2016-12-15 11:08:10	lluad	That looks good. I'm pretty sure you could wrap it into a single regexp, but that'd just be regex golfing. :)
2016-12-15 11:09:04	ningu	what's the club of choice for regex golfing?
2016-12-15 11:09:06	trailertrash	i agree, it would be nice to figure that out though... some day :)
2016-12-15 11:09:15	◣	Debnet (~Marc@smtp2.sa-cim.fr) has quit (Ping timeout: 250 seconds)
2016-12-15 11:09:46	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 265 seconds)
2016-12-15 11:09:51	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Client Quit)
2016-12-15 11:10:32	Snow-Man	oicu: I have a backup of praxis now running, expect it to complete in ~6 hrs.
2016-12-15 11:10:46	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Remote host closed the connection)
2016-12-15 11:10:57	◣	Debnet`Work (~Marc@145.86.2.93.rev.sfr.net) has quit (Ping timeout: 240 seconds)
2016-12-15 11:10:58	◣	roger_padactor_w (~roger_pad@is2021.deanoff.fmd.uwo.ca) has left #postgresql ("Leaving")
2016-12-15 11:11:15	◣	johnmilton (~johnmilto@107.144.63.210) has quit (Ping timeout: 268 seconds)
2016-12-15 11:11:29	trailertrash	ningu: >60 degree loft
2016-12-15 11:11:29	◣	bmomjian (~bmomjian@momjian.us) has quit (Quit: Leaving.)
2016-12-15 11:11:43	◥	baconoverflow_ (uid175297@gateway/web/irccloud.com/x-ihdfduzzrrlkjish) has joined #postgresql
2016-12-15 11:11:50	⚡	baconoverflow_ is now known as BaconOverflow
2016-12-15 11:12:21	ningu	trailertrash: so it's more of a short shot to the green, not a putt or a drive?
2016-12-15 11:12:28	ningu	I never tried to extend the metaphor that far :)
2016-12-15 11:12:38	lluad	ningu: Probably "match with explicit exclusions" :) - "foo"|'foo'|(foo)
2016-12-15 11:13:07	◥	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has joined #postgresql
2016-12-15 11:14:22	◥	evnmar (~MongooseW@96-64-202-230-static.hfc.comcastbusiness.net) has joined #postgresql
2016-12-15 11:15:05	◣	Lordz (~Adium@186.215.116.176) has quit (Quit: Leaving.)
2016-12-15 11:16:27	◣	Nizumzen (~Nizumzen@cpc2-reig5-2-0-cust667.6-3.cable.virginm.net) has quit (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
2016-12-15 11:17:06	◥	dsantiago (~dsantiago@40.141.55.70) has joined #postgresql
2016-12-15 11:19:28	◣	held (~heldchen@unaffiliated/held) has quit (Read error: Connection reset by peer)
2016-12-15 11:21:05	◥	evnmar_ (~MongooseW@142-254-102-34.dedicated.static.sonic.net) has joined #postgresql
2016-12-15 11:22:57	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2016-12-15 11:23:01	NeverDie	skylar: Is it not possible to have a table REFERENCE multiple other table SERIALs and to default to 0 a table SERIAL is not inserted?
2016-12-15 11:23:14	◥	rajivr_ (~rajivr@103.205.218.235) has joined #postgresql
2016-12-15 11:23:17	◣	evnmar (~MongooseW@96-64-202-230-static.hfc.comcastbusiness.net) has quit (Ping timeout: 248 seconds)
2016-12-15 11:23:50	NeverDie	Like if I want to have an images TABLE that has both user_id REFERENCES users(id) and post_id REFERENCES post(id), although the latter may or may not need to be inserted.
2016-12-15 11:23:52	◥	johnmilton (~johnmilto@static-47-206-47-42.mias.fl.frontiernet.net) has joined #postgresql
2016-12-15 11:24:28	ningu	NeverDie: you would use NULL for that
2016-12-15 11:24:38	NeverDie	ningu: DEFAULT NULL ?
2016-12-15 11:24:39	◣	bordicon (~bordicon@198.144.216.241) has quit (Remote host closed the connection)
2016-12-15 11:24:47	skylar	yeah, 0!=NULL (just as ''!=NULL)
2016-12-15 11:25:04	ningu	NeverDie: no need for a default, I think. just don't set NOT NULL
2016-12-15 11:25:22	skylar	you can reference multiple tables as long as you have a separate foreign key column for each one
2016-12-15 11:25:41	NeverDie	ningu: I didn't set NOT NULL and it still asks me to put in `posts(id)` or it won't insert the user image.
2016-12-15 11:25:57	◣	rajivr (~rajivr@103.205.218.243) has quit (Ping timeout: 248 seconds)
2016-12-15 11:26:18	ningu	NeverDie: what's the actual INSERT statement
2016-12-15 11:26:19	ningu	?
2016-12-15 11:27:07	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Ping timeout: 250 seconds)
2016-12-15 11:27:20	◥	held (~heldchen@unaffiliated/held) has joined #postgresql
2016-12-15 11:27:21	NeverDie	ningu: https://gist.github.com/RecursiveLogic/f3a23a65a1171d0ac9c2511bb5327642
2016-12-15 11:27:41	ningu	that is the table definition
2016-12-15 11:27:50	NeverDie	For example, it won't let me insert only a user image unless I insert both a post and comment image URL to it as well.
2016-12-15 11:27:59	ningu	what is your INSERT statement?
2016-12-15 11:28:08	NeverDie	ningu: I'm using a query builder for it, I know I have the syntax right, it's just the constraints that I'm not fully getting at the moment.
2016-12-15 11:28:13	◣	trailertrash (~trailertr@unaffiliated/trailertrash) has quit (Quit: Leaving)
2016-12-15 11:28:15	◣	byte512 (~user@h37n2-um-a32.ias.bredband.telia.com) has quit (Ping timeout: 250 seconds)
2016-12-15 11:28:20	skylar	I don't know that you would want SERIAL as a foreign key
2016-12-15 11:28:32	NeverDie	Just imagine an INSERT INTO images (user_id) VALUES (1);
2016-12-15 11:28:32	ningu	skylar: oh yes, good point
2016-12-15 11:28:34	skylar	you would use that on the referenced table; the referencing table should be integer
2016-12-15 11:28:46	NeverDie	Ahh.
2016-12-15 11:29:08	NeverDie	skylar: So turn all those SERIALs into INTEGERs instead?
2016-12-15 11:29:18	skylar	yeah, integer is the underlying data type for serial
2016-12-15 11:29:31	skylar	serial is integer + a rule to generate the sequence number
2016-12-15 11:29:42	ningu	hmm, yes, apparently REFERENCES implies NOT NULL
2016-12-15 11:29:49	◣	GodFather (~rcc@75-145-237-204-Michigan.hfc.comcastbusiness.net) has quit (Ping timeout: 252 seconds)
2016-12-15 11:29:55	ningu	oh, wait
2016-12-15 11:29:57	ningu	no it doesn't
2016-12-15 11:30:00	NeverDie	So in other words, I cannot REFERNCE?
2016-12-15 11:30:09	ningu	NeverDie: sorry, not enough coffee or something
2016-12-15 11:30:11	ningu	https://www.postgresql.org/docs/current/static/ddl-constraints.html
2016-12-15 11:30:15	◥	SteffanW (~steffanw@ip4da40774.direct-adsl.nl) has joined #postgresql
2016-12-15 11:30:38	NeverDie	skylar: In this case, I should REFERENCE the users(id) by TEXT instead of UUID? Since it might not let me add another image using that same UUID otherwise?
2016-12-15 11:31:11	◣	inkjetunito (~benny@unaffiliated/inkjetunit) has quit (Quit: q)
2016-12-15 11:31:21	ningu	NeverDie: if you change serial to integer it should be ok
2016-12-15 11:31:29	NeverDie	Like if the user has two profile images, I need to do user_id TEXT REFERENCES users(id)? Or is user_id UUID REFERENCES users(id); alright if I want to put two images with the same UUID?
2016-12-15 11:31:32	◥	svara1 (~oaao@2604:2000:820d:e00:6d50:2114:c59c:e191) has joined #postgresql
2016-12-15 11:31:35	ningu	the serial adds a default that will mess things up
2016-12-15 11:31:37	NeverDie	ningu: What about that ^
2016-12-15 11:32:01	ningu	if users(id) is UUID then user_id should be too
2016-12-15 11:32:07	◣	lnostdal (~lnostdal@62.90-149-73.nextgentel.com) has quit (Read error: Connection reset by peer)
2016-12-15 11:32:19	NeverDie	ningu: Yeah, but what if the images table has two rows with the same UUID.
2016-12-15 11:32:22	ningu	I don't really understand the question
2016-12-15 11:32:26	ningu	it isn't a primary key
2016-12-15 11:32:28	NeverDie	In this case as a references to the users(id)
2016-12-15 11:32:32	ningu	it doesn't have to be unique
2016-12-15 11:32:43	NeverDie	The UUID is a PRIMARY KEY in the users table though.
2016-12-15 11:32:50	ningu	we aren't talking about the users table
2016-12-15 11:32:50	NeverDie	Doesn't matter either way?
2016-12-15 11:33:05	ningu	all the matters is if user_id is unique/pk in the images table
2016-12-15 11:33:08	ningu	all that matters*
2016-12-15 11:33:11	NeverDie	Hmm, alright.
2016-12-15 11:33:13	NeverDie	Thanks!
2016-12-15 11:33:23	ningu	and foreign keys should match what they reference in type
2016-12-15 11:33:38	ningu	so, I think your whole issue basically was using serial instead of integer
2016-12-15 11:34:16	ningu	serial is good for a primary key but should never be used for a foreign key
2016-12-15 11:34:35	ningu	as skylar said, serial means integer + sequence default
2016-12-15 11:34:41	ningu	so serial is really of type integer
2016-12-15 11:34:48	ningu	and the fk should be
2016-12-15 11:35:06	◥	edoardo (~edoardo@unaffiliated/edoardo) has joined #postgresql
2016-12-15 11:35:07	◣	therue (~therue@1-162-68-252.dynamic.hinet.net) has quit (Quit: WeeChat 1.6)
2016-12-15 11:35:07	◣	oaaao (~oaao@2604:2000:820d:e00:ac89:e406:8a5:9dd) has quit (Ping timeout: 258 seconds)
2016-12-15 11:35:20	NeverDie	Going to try it out in a sec, just making some changes.
2016-12-15 11:37:03	NeverDie	ningu: So by having comment_id INTEGER REFERENCES comments(id), it only makes sure that the serial number exists in comments?
2016-12-15 11:37:13	◥	skyx (~skyx__@lk.46.182.229.73.dc.cable.static.lj-kabel.net) has joined #postgresql
2016-12-15 11:37:19	NeverDie	But allows it to not require for it to be inserted?
2016-12-15 11:37:23	ningu	right
2016-12-15 11:37:38	ningu	you'd have to add NOT NULL to make it required
2016-12-15 11:41:04	◥	nettoweb (~nettoweb@191.191.114.142) has joined #postgresql
2016-12-15 11:41:54	◣	sebastienbeausol (~sebbeauso@joltpq17-1176263021.sdsl.bell.ca) has quit (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
2016-12-15 11:41:57	◣	banisterfiend (~textual@ruby/staff/banisterfiend) has quit (Ping timeout: 260 seconds)
2016-12-15 11:42:28	◥	rgiscard (~rgiscard@c-73-78-219-60.hsd1.co.comcast.net) has joined #postgresql
2016-12-15 11:44:05	◣	`jpg (~jpg@jpg.id.au) has quit (Ping timeout: 248 seconds)
2016-12-15 11:44:12	NeverDie	Got it, awesome.
2016-12-15 11:44:52	◣	Slashman (~Slash@cosium-152-18.fib.nerim.net) has quit (Quit: Leaving)
2016-12-15 11:45:17	◥	hamersaw (~hamersaw@dhcp34.netsec.colostate.edu) has joined #postgresql
2016-12-15 11:45:22	⚡	Guest53116 is now known as someone
2016-12-15 11:47:15	hamersaw	i am currently looking to populate a postgres instance with bgp routing information. one record for each bgp update message. we're seeing ~200000 records for every 15 minute interval. I'm using the copy command and notice the times drastically slowing down as data is inserted. I'm assuming my issue is that i'm hitting the limits of the db?
2016-12-15 11:47:40	hamersaw	i've looked into partitioning data, but it doesn't seem like it will scale to the workload that i need.
2016-12-15 11:48:33	◥	irqq (~chatzilla@afcv195.neoplus.adsl.tpnet.pl) has joined #postgresql
2016-12-15 11:50:06	◥	mico__ (~mrico@p20030086244B4D027C2E06C456C9CF37.dip0.t-ipconnect.de) has joined #postgresql
2016-12-15 11:50:15	◣	acetakwas (~acetakwas@154.65.5.250) has quit (Read error: Connection reset by peer)
2016-12-15 11:50:45	◥	Cohedrin (~textual@192.77.237.205) has joined #postgresql
2016-12-15 11:50:49	Zr40	are you trying to store only the current state?
2016-12-15 11:51:23	hamersaw	we're trying to maintain a store of update messages in a query-able format.
2016-12-15 11:51:28	lluad	What are you querying for? And what's indexed?
2016-12-15 11:51:36	hamersaw	so we can analyze who advertised what when
2016-12-15 11:51:43	◣	victor_lowther (~victor.lo@8.39.49.135) has quit (Quit: Leaving.)
2016-12-15 11:52:05	hamersaw	we have around 15 collectors globally, the main goal is to monitor for prefix hijacks
2016-12-15 11:52:24	◣	mico__ (~mrico@p20030086244B4D027C2E06C456C9CF37.dip0.t-ipconnect.de) has quit (Client Quit)
2016-12-15 11:53:04	hamersaw	my question, moreso is focused on the insertion limitations and optimal record count in each table.
2016-12-15 11:53:15	◥	k3va (~k3va@wsip-70-165-48-210.oc.oc.cox.net) has joined #postgresql
2016-12-15 11:53:19	◥	palerider (~mjm@47.185.244.157) has joined #postgresql
2016-12-15 11:53:22	hamersaw	with the information i said earlir, we would be inserting around 19200000 records every day
2016-12-15 11:53:41	hamersaw	for a single collection point
2016-12-15 11:53:41	Zr40	how big is a single record?
2016-12-15 11:53:49	Zr40	and are you never removing anything?
2016-12-15 11:53:50	lluad	It's about 250 inserts a second. How big a batch are you inserting them in?
2016-12-15 11:53:53	◥	mico_ (~mrico@p20030086244B4D027C2E06C456C9CF37.dip0.t-ipconnect.de) has joined #postgresql
2016-12-15 11:54:45	Zr40	250 rows per second doesn't sound excessive - I believe the db at $work has bursts exceeding that (it's more or less idle outside of the bursts)
2016-12-15 11:54:52	hamersaw	contains 9 fields, a uuid, some text fields, ip address etc.
2016-12-15 11:55:09	hamersaw	we're currently using the COPY command with the golang driver
2016-12-15 11:55:18	hamersaw	and no, we don't plan to remove records ever
2016-12-15 11:55:45	Zr40	so that's like a growth of tens of gigabytes per day per collector
2016-12-15 11:56:01	◣	JamesBaxter (~JamesBaxt@unaffiliated/jamesbaxter) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 11:56:54	Zr40	even if performance weren't an issue right now, you will run out of space. And the solution to that would probably help your performance problem as well
2016-12-15 11:57:08	◣	johnmilton (~johnmilto@static-47-206-47-42.mias.fl.frontiernet.net) has quit (Quit: Namaste)
2016-12-15 11:57:39	hamersaw	i wouldn't think it would be that large. the raw binary files containig bgp messages are about 2.5G per day per collector.
2016-12-15 11:57:44	hamersaw	but i understand your point
2016-12-15 11:58:10	◣	skylar (~skylar2@gsits-a.gs.washington.edu) has quit (Quit: Leaving.)
2016-12-15 11:58:25	lluad	I'm pretty sure there's space for improvement.
2016-12-15 11:58:28	kurufu	id imagine partitioning and only creating indices afer the day is done (assuming you dont need queries in real time) could help maintain insert speed.
2016-12-15 11:58:38	Zr40	I assumed one record would take ~200 bytes given the fields you described
2016-12-15 11:59:06	◣	SteffanW (~steffanw@ip4da40774.direct-adsl.nl) has quit (Read error: Connection reset by peer)
2016-12-15 11:59:32	◣	evnmar_ (~MongooseW@142-254-102-34.dedicated.static.sonic.net) has quit (Ping timeout: 256 seconds)
2016-12-15 11:59:35	lluad	Before talking partitioning, though ... What's your table schema? What's your insert batch size? What're your query requirements? What IO subsystem do you have? How much RAM? How have you tuned your database so far?
2016-12-15 11:59:49	◣	djbkd (~djbkd@135.84.132.21) has quit (Remote host closed the connection)
2016-12-15 12:00:13	hamersaw	kurufu: we haven't gotten that far yet, just some preliminary analysis.
2016-12-15 12:00:19	◥	djbkd (~djbkd@135.84.132.21) has joined #postgresql
2016-12-15 12:00:23	lluad	Also, is this academic, ISP, commercial, government backed, or a hobby project? What resources you have - or may be able to scrounge - will affect what might be worth considering.
2016-12-15 12:00:29	◥	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has joined #postgresql
2016-12-15 12:00:33	hamersaw	playing around with postgres, cockroachdb and we've had a system working woth cassandra
2016-12-15 12:00:36	hamersaw	academic
2016-12-15 12:00:44	peerce	the 'how are you querying this data' question is the most important one.
2016-12-15 12:01:10	peerce	doing complex ad hoc time series sort of queries that have to read bajillions of rows each time will be painful
2016-12-15 12:01:23	Zr40	^ regardless of whatever database implementation you end up using
2016-12-15 12:01:40	hamersaw	peerce: yeah, i couldn't agree more
2016-12-15 12:02:04	◣	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has quit (Read error: Connection reset by peer)
2016-12-15 12:02:08	peerce	with time series data, doing a certain amount of preaggregation can make a huge difference in query performance, depending on the sorts of queries.
2016-12-15 12:02:16	hamersaw	when we were using cassandra, the limitations drove us crazy.
2016-12-15 12:02:18	peerce	with the extreme case being something like rrdtool
2016-12-15 12:02:27	◥	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has joined #postgresql
2016-12-15 12:02:35	peerce	where the data is bucketed by hour/day/week/month
2016-12-15 12:02:43	hamersaw	we basically queried everything as a time-series splitting the data into different time buckets to partition it differently
2016-12-15 12:02:49	hamersaw	yeah, that's exactly what we did
2016-12-15 12:02:50	Zr40	it might be worth considering condensing your data. I'm not too familiar with BGP but I'd imagine most announcements don't change
2016-12-15 12:02:51	peerce	with each interval carrying min/max/avg.
2016-12-15 12:03:44	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2016-12-15 12:03:44	◣	mrits (~textual@aus-server01.ziften.com) has quit (Read error: Connection reset by peer)
2016-12-15 12:04:01	◣	skyx (~skyx__@lk.46.182.229.73.dc.cable.static.lj-kabel.net) has quit (Quit: This computer has gone to sleep)
2016-12-15 12:04:10	◣	djbkd (~djbkd@135.84.132.21) has quit (Read error: Connection reset by peer)
2016-12-15 12:04:26	◣	Kaizervonmaanen (~Kaizervon@188.95.241.148) has quit (Ping timeout: 265 seconds)
2016-12-15 12:04:26	hamersaw	the flip side of data retrieval is that we're not going to be the only people using it. the idea, is that it will act as a repository of historical bgp data for other academic uses
2016-12-15 12:04:44	hamersaw	right now we have a file based approach to retrieve that data, but using a db sounds like a much more conveient approach
2016-12-15 12:04:57	lluad	How they're going to want to slice it will affect things too. By year, by IP, by ASN, ...
2016-12-15 12:04:58	◣	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has quit (Read error: Connection reset by peer)
2016-12-15 12:05:06	◣	Cohedrin (~textual@192.77.237.205) has quit (Quit: My Mac has gone to sleep. ZZZzzz…)
2016-12-15 12:05:13	peerce	allowing an unlimited number of users the ability to do badly formed adhoc queries that might run hours each is a recipe fro disaster
2016-12-15 12:05:43	◥	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has joined #postgresql
2016-12-15 12:06:25	hamersaw	lluad: definitely, the idea is that we have a frontend over the db to control what they can retrieve. obviously we'd like to provide as much as possible but obviously that will be pretty limited.
2016-12-15 12:06:30	◣	MrXXIV (~MrXXIV@cpe-2606-A000-4702-DB00-A8C6-CE90-B5BA-EA58.dyn6.twc.com) has quit (Quit: My Mac Mini has gone to sleep. ZZZzzz…)
2016-12-15 12:06:42	hamersaw	for example, time-based queryies, source as, particular prefixes.
2016-12-15 12:06:53	hamersaw	there's a lot that could be useful, but we have to work with limitations.
2016-12-15 12:07:18	hamersaw	right now we're only offering time range selection. so anything else is a step up
2016-12-15 12:07:29	◥	MrXXIV (~MrXXIV@cpe-2606-A000-4702-DB00-20C1-7A07-2A54-D269.dyn6.twc.com) has joined #postgresql
2016-12-15 12:07:44	peerce	was gonna say, taht could be done with flat files :D
2016-12-15 12:08:34	lluad	My first thought would be one database server per collector. It reduces your load requirements by a factor of 15, many queries don't need data from multiple collectors and those that do can probably be parallelized.
2016-12-15 12:08:36	peerce	a whole lot less overhead.    store each hour of each major category in a different file in a structured directory tree, when someone queries, you just sequential read the files that overlap their query, and return them the matching data.
2016-12-15 12:08:46	Zr40	hamersaw: perhaps you could collaborate with RIPE? I believe they also track historic announcements - check https://stat.ripe.net, enter a prefix, select the Routing tab
2016-12-15 12:08:52	◣	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has quit (Read error: Connection reset by peer)
2016-12-15 12:08:58	lluad	I'd also think about doing batch aggregation from those 15 databases to a single one, without the real-time update requirement.
2016-12-15 12:09:00	◥	evnmar (~MongooseW@96-64-202-230-static.hfc.comcastbusiness.net) has joined #postgresql
2016-12-15 12:09:16	◥	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has joined #postgresql
2016-12-15 12:09:29	◣	evnmar (~MongooseW@96-64-202-230-static.hfc.comcastbusiness.net) has quit (Client Quit)
2016-12-15 12:09:36	◣	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has quit (Client Quit)
2016-12-15 12:09:40	lluad	(I did a much smaller scale version of this a few years back, with just a single BGP feed. Didn't go very far with it.)
2016-12-15 12:09:48	◥	banisterfiend (~textual@ruby/staff/banisterfiend) has joined #postgresql
2016-12-15 12:10:15	hamersaw	Zr40: we do have some level of collaboration with ripe. we work very closely with the route-views project (based a UOregon).
2016-12-15 12:11:07	◣	MrXXIV_ (~MrXXIV@cpe-2606-A000-4702-DB00-F978-AEEF-4F37-9A1E.dyn6.twc.com) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 12:11:46	◣	treehug88 (~textual@cpe-68-173-227-135.nyc.res.rr.com) has quit (Quit: Textual IRC Client: www.textualapp.com)
2016-12-15 12:12:04	◥	johnmilton (~johnmilto@96-58-242-186.res.bhn.net) has joined #postgresql
2016-12-15 12:12:53	lluad	hamersaw: What are you indexing, and how? Actually, can you share a \d of your table on a paste site?
2016-12-15 12:13:03	◣	stephenjudkins (~stephenju@c-73-240-71-155.hsd1.or.comcast.net) has quit (Remote host closed the connection)
2016-12-15 12:13:37	◥	vuoto (~vuoto@80-71-135-9.u.parknet.dk) has joined #postgresql
2016-12-15 12:14:41	◥	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has joined #postgresql
2016-12-15 12:15:55	◣	koobs (~koobs@freebsd/developer/koobs) has quit (Ping timeout: 250 seconds)
2016-12-15 12:15:58	◥	pramsky (~pramodv@static-50-125-167-106.krld.wa.frontiernet.net) has joined #postgresql
2016-12-15 12:16:27	◣	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has quit (Client Quit)
2016-12-15 12:18:41	◣	wsieroci (~wsieroci@095160155090.dynamic-ww-12.vectranet.pl) has quit (Read error: Connection reset by peer)
2016-12-15 12:19:17	◥	wsieroci (~wsieroci@095160155090.dynamic-ww-12.vectranet.pl) has joined #postgresql
2016-12-15 12:19:30	◥	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has joined #postgresql
2016-12-15 12:19:46	◣	puchacz (~puchacz@cpc96904-walt25-2-0-cust679.13-2.cable.virginm.net) has quit (Read error: Connection reset by peer)
2016-12-15 12:19:59	◥	filiprem (~filip@188.146.18.44.nat.umts.dynamic.t-mobile.pl) has joined #postgresql
2016-12-15 12:20:12	◥	dodobrain (~dodobrain@unaffiliated/freakabcd) has joined #postgresql
2016-12-15 12:20:25	◥	usr_ (~usr@84-114-84-181.cable.dynamic.surfer.at) has joined #postgresql
2016-12-15 12:21:20	◥	puchacz (~puchacz@cpc96904-walt25-2-0-cust679.13-2.cable.virginm.net) has joined #postgresql
2016-12-15 12:22:02	usr_	Hey folks are there any simple native open source Postgres GUI clients for Linux you can recommend?
2016-12-15 12:23:11	◥	ningu_ (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has joined #postgresql
2016-12-15 12:23:17	Snow-Man	uh
2016-12-15 12:23:19	Snow-Man	psql?
2016-12-15 12:23:26	lluad	pgadmin is one option. That's an observation more than a recommendation.
2016-12-15 12:23:28	◣	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has quit (Read error: Connection reset by peer)
2016-12-15 12:23:29	peerce	for databased administration?  pgadmin is the defacto standard admin client
2016-12-15 12:23:34	◣	ningu_ (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has quit (Client Quit)
2016-12-15 12:23:42	lluad	??gui
2016-12-15 12:23:43	pg_docbot	http://www.databaseanswers.com/modelling_tools.htm :: http://www.minq.se/products/dbvis/
2016-12-15 12:23:43	pg_docbot	http://www.pgadmin.org/ :: http://pgdesigner.sourceforge.net/en/index.html
2016-12-15 12:23:43	pg_docbot	http://www.sqlmaestro.com/products/postgresql/maestro/ :: http://www.nucleonsoftware.com/
2016-12-15 12:23:43	pg_docbot	http://wiki.postgresql.org/wiki/Community_Guide_to_PostgreSQL_GUI_Tools :: http://www.modelsphere.org/
2016-12-15 12:23:45	pg_docbot	http://wiki.postgresql.org/wiki/GUI_Database_Design_Tools :: http://sidu.sf.net
2016-12-15 12:23:48	Snow-Man	I'm not sure I'd call it 'simple' or 'native', hah
2016-12-15 12:23:49	pg_docbot	3 more results
2016-12-15 12:23:52	peerce	otherwise, a database gui is something of an application specific thing.
2016-12-15 12:24:01	kurufu	well pgsql is the defacto standard client. but its not a gui.
2016-12-15 12:24:01	◥	PityDaFool (~AfroThund@c-73-39-115-171.hsd1.md.comcast.net) has joined #postgresql
2016-12-15 12:24:01	kurufu	per say.
2016-12-15 12:24:05	lluad	"crap" might be a word that sprung to mind. Possibly along with "bug-ridden".
2016-12-15 12:24:06	◥	NCS_One (~NCS_One@dsl-178-106.bl26.telepac.pt) has joined #postgresql
2016-12-15 12:24:09	Snow-Man	hahahaha
2016-12-15 12:24:21	peerce	kurufu you mean psql ?  pgsql is a shorter version of postgresql
2016-12-15 12:24:21	◣	TMM (~hp@fsf/member/pdpc.professional.tmm) has quit (Ping timeout: 258 seconds)
2016-12-15 12:24:31	kurufu	woops yea my typo.
2016-12-15 12:24:32	hamersaw	lluad: http://pastebin.com/LrP4yMHc
2016-12-15 12:24:33	lluad	There are two versions of pgadmin. "3" is wxwindows based, "4" is a not exactly feature-complete nor stable webapp.
2016-12-15 12:24:37	◣	AfroThundr (~AfroThund@2601:147:c000:b824:5cbe:f59:bd0f:9ba) has quit (Ping timeout: 258 seconds)
2016-12-15 12:24:37	kurufu	I should know better since I have the command typed on the terminal below this one :)
2016-12-15 12:25:15	hamersaw	therers our very basic, starting point, table structure. it's actually 2 tables, at the different granularity
2016-12-15 12:25:20	lluad	Sure. What's in update_id?
2016-12-15 12:25:32	◥	JamesBaxter (~JamesBaxt@unaffiliated/jamesbaxter) has joined #postgresql
2016-12-15 12:25:40	hamersaw	lluad: user generated uuid to uniquely identify the message
2016-12-15 12:25:46	hamersaw	same with prefix_id
2016-12-15 12:26:06	◣	xaxa (~darius@Bourg-1-pt.tunnel.tserv14.sea1.ipv6.he.net) has quit (Ping timeout: 258 seconds)
2016-12-15 12:26:24	◣	ChrisMcLean (~Happy@unaffiliated/featheredserpent) has quit (Quit: You can pretend to care about your users and help them run old versions of software or you can actually care about them and give them incentive to upgrade. Do the responsible thing, run supported software and encourage your users to as well. - ircmaxеll)
2016-12-15 12:26:37	◣	johnkeates (~johnkeate@92.66.153.6) has quit (Quit: This computer has gone to sleep)
2016-12-15 12:27:03	hamersaw	my main interest is detecting prefix hijacks (including sub prefixes) in "near real time". so we need the lower granularity to query that data.
2016-12-15 12:27:07	◥	TMM (~hp@fsf/member/pdpc.professional.tmm) has joined #postgresql
2016-12-15 12:27:55	lluad	The first thing I might try would be converting some of those fields to something a bit less texty, and see how that affected things.
2016-12-15 12:28:11	◥	wam (~wam@unaffiliated/wam) has joined #postgresql
2016-12-15 12:28:23	lluad	That will reduce the size, and maybe the index complexity.
2016-12-15 12:28:38	Snow-Man	there are days when I hate that uuids are a thing
2016-12-15 12:28:51	◣	edoardo (~edoardo@unaffiliated/edoardo) has quit (Remote host closed the connection)
2016-12-15 12:29:01	lluad	e.g. uuid for the uuids, inet (or one of the ip4r types) for the ips, int[] for the as_path and so on
2016-12-15 12:29:22	lluad	Also, yeah, uuids can be vile^W expensive to index.
2016-12-15 12:29:24	◥	gcfhvjbkn (~okw@unaffiliated/gcfhvjbkn) has joined #postgresql
2016-12-15 12:29:50	adamg	you almost certainly want ip4r
2016-12-15 12:30:09	Snow-Man	ip4r does kick much ass
2016-12-15 12:30:16	lluad	??ip4r
2016-12-15 12:30:16	pg_docbot	https://github.com/RhodiumToad/ip4r
2016-12-15 12:30:22	◥	johnkeates (~johnkeate@92.66.153.6) has joined #postgresql
2016-12-15 12:30:33	hamersaw	sure. this structure was initially created for cross compatability with cockroachdb (https://www.cockroachlabs.com) which is in infancy, but should support those types in the future.
2016-12-15 12:30:34	◥	xaxa (~darius@Bourg-1-pt.tunnel.tserv14.sea1.ipv6.he.net) has joined #postgresql
2016-12-15 12:30:42	hamersaw	we've just started taking a look at postgres
2016-12-15 12:30:49	Snow-Man	uggghhh
2016-12-15 12:30:55	◥	Bad_Advice_Cat (~Happy@unaffiliated/featheredserpent) has joined #postgresql
2016-12-15 12:31:06	Snow-Man	nothing worse than cross-database "compatability" to destroy any hope for a performant solution
2016-12-15 12:31:10	lluad	+1
2016-12-15 12:31:30	hamersaw	Snow-Man: yeah, i've been pushing against the rest of the team on that very issue.
2016-12-15 12:31:33	johnkeates	 +9001 (over nine thousand)
2016-12-15 12:31:35	hamersaw	i'm fighting a loosing battle though
2016-12-15 12:31:39	◣	prestorium (~davividal@187.95.104.34) has quit (Read error: Connection reset by peer)
2016-12-15 12:32:39	◥	mochiyoda_ (~my@2601:1c0:cb03:87fd:44a4:14db:6d70:ff3b) has joined #postgresql
2016-12-15 12:32:46	kurufu	is there any difference between `interval '1 day'` and `'1 day'::interval` if I want a constant that doesnt have to be evaluated every run inside a function?
2016-12-15 12:33:37	◣	mochiyoda_ (~my@2601:1c0:cb03:87fd:44a4:14db:6d70:ff3b) has left #postgresql
2016-12-15 12:33:45	lluad	Probably not. I'd guess they're optimized to the same thing. If either is faster, I'd expect it to be the first.
2016-12-15 12:33:57	Zr40	either would be constants, but even if it would not be, you probably won't notice except in microbenchmarks
2016-12-15 12:34:32	◥	mikec_64 (~mcavalier@rrcs-173-197-13-98.west.biz.rr.com) has joined #postgresql
2016-12-15 12:34:45	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Remote host closed the connection)
2016-12-15 12:34:45	◣	Xanather (~xanather@unaffiliated/xanather) has quit (Quit: Leaving)
2016-12-15 12:34:46	kurufu	Sounds good. explain gives them same costs so ill just do the first.
2016-12-15 12:35:46	◣	_djbkd (~djbkd@135.84.132.21) has quit (Remote host closed the connection)
2016-12-15 12:36:13	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2016-12-15 12:36:40	◣	k3va (~k3va@wsip-70-165-48-210.oc.oc.cox.net) has quit (Remote host closed the connection)
2016-12-15 12:37:06	◣	_djbkd (~djbkd@135.84.132.21) has quit (Read error: Connection reset by peer)
2016-12-15 12:37:25	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2016-12-15 12:37:25	mikec_64	anyone with experience using aws rds postgres and pgbouncer?  I would like to figure out a way to use auth_query even though pg_shadow in inaccessible.  Maybe something like maintaining a pgbouncer_pg_shadow table?
2016-12-15 12:38:52	◣	_djbkd (~djbkd@135.84.132.21) has quit (Remote host closed the connection)
2016-12-15 12:39:20	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2016-12-15 12:39:24	◥	markus3_ (~markus@193.40.178.118) has joined #postgresql
2016-12-15 12:40:59	◣	lluad (~lluad@204.11.227.194.static.etheric.net) has quit (Quit: lluad)
2016-12-15 12:41:51	◣	markus3 (~markus@193.40.178.118) has quit (Ping timeout: 258 seconds)
2016-12-15 12:42:34	◥	mochiyoda_ (~my@2601:1c0:cb03:87fd:44a4:14db:6d70:ff3b) has joined #postgresql
2016-12-15 12:43:20	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 12:43:21	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Excess Flood)
2016-12-15 12:43:39	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 12:43:52	◣	_djbkd (~djbkd@135.84.132.21) has quit (Ping timeout: 252 seconds)
2016-12-15 12:44:48	◣	gcfhvjbkn (~okw@unaffiliated/gcfhvjbkn) has quit (Quit: Leaving.)
2016-12-15 12:46:40	◣	andlabs (~pietro@adfb395a.cst.lightpath.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 12:47:49	◣	hamersaw (~hamersaw@dhcp34.netsec.colostate.edu) has left #postgresql ("WeeChat 1.6")
2016-12-15 12:48:40	◥	macabre (~ibtjw@unaffiliated/macabre) has joined #postgresql
2016-12-15 12:48:41	◥	nineinchnick (~jwas@109.231.18.27) has joined #postgresql
2016-12-15 12:48:54	◥	andlabs (~pietro@adfb395a.cst.lightpath.net) has joined #postgresql
2016-12-15 12:50:06	◣	johnmilton (~johnmilto@96-58-242-186.res.bhn.net) has quit (Ping timeout: 252 seconds)
2016-12-15 12:51:21	◣	iGeni (~textual@50702E2F.cm-14.dynamic.ziggo.nl) has quit (Quit: My iMac has gone to sleep. ZZZzzz…)
2016-12-15 12:51:42	◣	MrLawrence (~mitaton@31.205.164.170) has quit (Quit: Leaving)
2016-12-15 12:52:17	◥	johnmilton (~johnmilto@96-58-242-186.res.bhn.net) has joined #postgresql
2016-12-15 12:52:29	◥	victor_lowther (~victor.lo@8.39.49.135) has joined #postgresql
2016-12-15 12:52:57	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Ping timeout: 240 seconds)
2016-12-15 12:54:07	◣	johnmilton (~johnmilto@96-58-242-186.res.bhn.net) has quit (Remote host closed the connection)
2016-12-15 12:55:02	◥	k3va (~k3va@wsip-70-165-48-210.oc.oc.cox.net) has joined #postgresql
2016-12-15 12:55:07	◥	macabre (~ibtjw@unaffiliated/macabre) has joined #postgresql
2016-12-15 12:55:43	◣	nettoweb (~nettoweb@191.191.114.142) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 12:56:39	◥	MrXXIV_ (~MrXXIV@12.39.195.132) has joined #postgresql
2016-12-15 12:58:39	◣	usr_ (~usr@84-114-84-181.cable.dynamic.surfer.at) has quit (Remote host closed the connection)
2016-12-15 12:59:40	◣	mmello (Marcelo@nat/redhat/x-izzzwvziwpggwmng) has quit (Ping timeout: 250 seconds)
2016-12-15 13:00:37	◥	mmello (Marcelo@nat/redhat/x-lecnavgefpawrpbv) has joined #postgresql
2016-12-15 13:00:56	◣	MrXXIV_ (~MrXXIV@12.39.195.132) has quit (Client Quit)
2016-12-15 13:02:54	◣	mico_ (~mrico@p20030086244B4D027C2E06C456C9CF37.dip0.t-ipconnect.de) has quit (Ping timeout: 258 seconds)
2016-12-15 13:03:46	◥	stephenjudkins (~stephenju@73.96.105.67) has joined #postgresql
2016-12-15 13:04:33	◣	howitdo (~howitdo@unaffiliated/howitdo) has quit (Ping timeout: 260 seconds)
2016-12-15 13:04:42	◣	Nitax (~Nitax@dhcp-411-171.atdc.gatech.edu) has quit (Quit: Textual IRC Client: www.textualapp.com)
2016-12-15 13:05:26	◣	dobber_ (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2016-12-15 13:06:14	◣	Norbyte_ (~Norbyte@94-21-72-159.pool.digikabel.hu) has quit (Read error: Connection reset by peer)
2016-12-15 13:07:56	◥	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has joined #postgresql
2016-12-15 13:08:33	◣	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has quit (Client Quit)
2016-12-15 13:08:43	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2016-12-15 13:08:53	◥	gheegh (~textual@static.84.254.201.138.clients.your-server.de) has joined #postgresql
2016-12-15 13:08:56	◣	johnkeates (~johnkeate@92.66.153.6) has left #postgresql ("Leaving")
2016-12-15 13:09:24	◥	MrXXIV_ (~MrXXIV@12.39.195.132) has joined #postgresql
2016-12-15 13:09:43	◥	gelignite (~gelignite@x4db6d58e.dyn.telefonica.de) has joined #postgresql
2016-12-15 13:10:36	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 265 seconds)
2016-12-15 13:10:46	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 13:11:17	◥	Norbyte (~Norbyte@94-21-72-159.pool.digikabel.hu) has joined #postgresql
2016-12-15 13:12:04	◥	howitdo (~howitdo@unaffiliated/howitdo) has joined #postgresql
2016-12-15 13:12:26	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-15 13:13:26	◥	guest_160319 (~textual@unaffiliated/guest-160319/x-6969399) has joined #postgresql
2016-12-15 13:13:27	◥	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has joined #postgresql
2016-12-15 13:15:24	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 252 seconds)
2016-12-15 13:15:38	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 13:15:49	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2016-12-15 13:16:15	◣	howitdo (~howitdo@unaffiliated/howitdo) has quit (Max SendQ exceeded)
2016-12-15 13:16:29	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2016-12-15 13:16:59	◥	howitdo (~howitdo@unaffiliated/howitdo) has joined #postgresql
2016-12-15 13:17:02	◥	lluad (~lluad@204.11.227.194.static.etheric.net) has joined #postgresql
2016-12-15 13:17:51	◣	guest_160319 (~textual@unaffiliated/guest-160319/x-6969399) has quit (Client Quit)
2016-12-15 13:19:47	◣	chichikov (~chichikov@96.47.70.66.static.nyinternet.net) has quit (Ping timeout: 258 seconds)
2016-12-15 13:20:02	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 250 seconds)
2016-12-15 13:22:21	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 13:22:27	◥	aron_kexp (~aron_kexp@50-234-71-226-static.hfc.comcastbusiness.net) has joined #postgresql
2016-12-15 13:22:54	◥	paridae (~idae_@c-50-189-147-41.hsd1.ct.comcast.net) has joined #postgresql
2016-12-15 13:24:57	◥	sgflt (~sgflt@p54B2175A.dip0.t-ipconnect.de) has joined #postgresql
2016-12-15 13:25:30	◥	jpeura (~jpeura@dsl-pribrasgw1-58c309-121.dhcp.inet.fi) has joined #postgresql
2016-12-15 13:26:33	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 250 seconds)
2016-12-15 13:27:06	⚡	markus3_ is now known as markus3
2016-12-15 13:27:14	◣	markus3 (~markus@193.40.178.118) has quit (Quit: leaving)
2016-12-15 13:27:16	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2016-12-15 13:29:08	◣	JohanW_Home (~opera@h-217-96.a260.priv.bahnhof.se) has left #postgresql
2016-12-15 13:29:35	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 13:30:50	◥	Michael-Dot (Michael-Do@202.131.75.94) has joined #postgresql
2016-12-15 13:30:53	Michael-Dot	https://drive.google.com/open?id=0B9cg8ZXscw-bVGtpRjREbFYzZDA
2016-12-15 13:31:07	StuckMojo	??fts
2016-12-15 13:31:07	pg_docbot	http://www.sai.msu.su/~megera/postgres/gist/tsearch/V2/ :: http://www.postgresql.org/docs/current/static/textsearch.html
2016-12-15 13:31:12	StuckMojo	??sphinx
2016-12-15 13:31:12	pg_docbot	Nothing found
2016-12-15 13:31:17	StuckMojo	??full text
2016-12-15 13:31:18	pg_docbot	http://www.sai.msu.su/~megera/postgres/gist/tsearch/V2/ :: http://www.postgresql.org/docs/current/static/textsearch.html
2016-12-15 13:31:21	StuckMojo	hmm
2016-12-15 13:31:47	◥	ramfjord (~tramfjord@12.202.171.242) has joined #postgresql
2016-12-15 13:32:53	◥	cJIaB (~cJIaB@178-221-185-136.dynamic.isp.telekom.rs) has joined #postgresql
2016-12-15 13:33:32	◥	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has joined #postgresql
2016-12-15 13:33:36	◣	k3va (~k3va@wsip-70-165-48-210.oc.oc.cox.net) has quit (Remote host closed the connection)
2016-12-15 13:34:04	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 250 seconds)
2016-12-15 13:34:39	◣	MrXXIV_ (~MrXXIV@12.39.195.132) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 13:34:56	◥	Cohedrin (~textual@c-73-170-239-253.hsd1.ca.comcast.net) has joined #postgresql
2016-12-15 13:35:53	◥	MrXXIV_ (~MrXXIV@12.39.195.132) has joined #postgresql
2016-12-15 13:36:51	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 13:37:11	◣	fguillot (~fguillot@2607:f748:9:1678:a89f:473d:6fa2:17af) has quit (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
2016-12-15 13:38:23	◣	MrXXIV_ (~MrXXIV@12.39.195.132) has quit (Client Quit)
2016-12-15 13:39:14	◣	AdamTheExile (~textual@ps-relay-server.tolland.k12.ct.us) has quit (Ping timeout: 252 seconds)
2016-12-15 13:39:15	◥	MrXXIV_ (~MrXXIV@12.39.195.132) has joined #postgresql
2016-12-15 13:39:51	◣	MrXXIV_ (~MrXXIV@12.39.195.132) has quit (Client Quit)
2016-12-15 13:39:54	◥	Lordz (~Adium@186.215.116.176) has joined #postgresql
2016-12-15 13:41:14	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 258 seconds)
2016-12-15 13:41:27	◥	benlieb (~benlieb@24-140-227-62.cpe.teksavvy.com) has joined #postgresql
2016-12-15 13:41:30	◥	MrXXIV_ (~MrXXIV@12.39.195.132) has joined #postgresql
2016-12-15 13:41:31	benlieb	hi all
2016-12-15 13:41:34	◣	paridae (~idae_@c-50-189-147-41.hsd1.ct.comcast.net) has quit (Quit: Leaving)
2016-12-15 13:41:44	benlieb	can someone help me troubleshoot this query that isn’t working: https://gist.github.com/anonymous/b9300ec10b4e65c40f0a5a0808d4f314
2016-12-15 13:42:04	◥	re1 (~reiser@cable-24-135-13-113.dynamic.sbb.rs) has joined #postgresql
2016-12-15 13:42:17	benlieb	ActiveRecord::StatementInvalid: PG::SyntaxError: ERROR:  syntax error at or near "UNION" LINE 4:         UNION
2016-12-15 13:42:29	benlieb	the query works fine without the order by clause
2016-12-15 13:43:24	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 13:43:24	◣	MrXXIV_ (~MrXXIV@12.39.195.132) has quit (Client Quit)
2016-12-15 13:43:28	◥	Kaizervonmaanen (~Kaizervon@169.118.9.46.customer.cdi.no) has joined #postgresql
2016-12-15 13:44:37	◣	Michael-Dot (Michael-Do@202.131.75.94) has quit
2016-12-15 13:46:21	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2016-12-15 13:46:40	ilmari	you can't use order by in a union subclause
2016-12-15 13:47:01	ilmari	as documented: https://www.postgresql.org/docs/current/static/sql-select.html#SQL-UNION
2016-12-15 13:47:04	benlieb	ilmari: just figured it out it is this: SELECT DISTINCT, ORDER BY expressions must appear in select list
2016-12-15 13:47:28	◣	wsieroci (~wsieroci@095160155090.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2016-12-15 13:47:47	benlieb	or maybe not?
2016-12-15 13:47:48	benlieb	hm
2016-12-15 13:47:50	◥	k3va (~k3va@wsip-70-165-48-210.oc.oc.cox.net) has joined #postgresql
2016-12-15 13:48:17	benlieb	ilmari: ok, you’re right too
2016-12-15 13:48:22	benlieb	two problems with that then
2016-12-15 13:48:31	◣	latk (~textual@global-184-3.nat-1.net.cam.ac.uk) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 13:48:41	benlieb	the first of the selects fails when on it’s own with distinct
2016-12-15 13:48:41	ilmari	ah, you can use order by if you parenthesise the subexpression
2016-12-15 13:49:15	◣	Lordz (~Adium@186.215.116.176) has quit (Quit: Leaving.)
2016-12-15 13:49:28	benlieb	ilmari: which subexpression? I’d like to have order by in both sub expressions
2016-12-15 13:49:32	◥	wsieroci (~wsieroci@095160155090.dynamic-ww-12.vectranet.pl) has joined #postgresql
2016-12-15 13:49:39	◥	jabakobob (~textual@cpe90-146-57-147.liwest.at) has joined #postgresql
2016-12-15 13:49:44	◣	mizu_no_oto_work (~textual@104.207.209.180) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 13:50:43	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 265 seconds)
2016-12-15 13:50:48	◥	msd (ms@196.219.72.128) has joined #postgresql
2016-12-15 13:51:08	benlieb	ok, that worked
2016-12-15 13:51:19	benlieb	I had tried it before, but I guess I was bitten by the unique issue
2016-12-15 13:51:24	◣	msd (ms@196.219.72.128) has left #postgresql
2016-12-15 13:52:38	◣	kacey (~kacey@c-50-132-2-197.hsd1.wa.comcast.net) has quit (Quit: kacey)
2016-12-15 13:52:46	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 13:54:58	◥	bordicon (~bordicon@50-247-102-73-static.hfc.comcastbusiness.net) has joined #postgresql
2016-12-15 13:55:11	◣	yieldsfalsehood (~elliot@phl-nat.afilias.info) has quit (Remote host closed the connection)
2016-12-15 13:55:51	◥	nettoweb (~nettoweb@177.96.34.35) has joined #postgresql
2016-12-15 13:56:49	◣	eeriegeek (~eeriegeek@73.31.123.0) has quit (Read error: Connection reset by peer)
2016-12-15 13:57:08	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 245 seconds)
2016-12-15 13:57:26	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 13:57:54	◣	tharkun_ (~tharkun@kvm5.telegraphics.com.au) has quit (Ping timeout: 250 seconds)
2016-12-15 13:58:13	IonutVan_	any idea if flyway as migration tool, supports composite types and also views?
2016-12-15 13:58:42	IonutVan_	I was thinking about using alembic for my migrations but I also check/read about flyway and liquibase
2016-12-15 13:59:13	◣	vuoto (~vuoto@80-71-135-9.u.parknet.dk) has quit (Remote host closed the connection)
2016-12-15 13:59:30	◥	eeriegeek (~eeriegeek@73.31.123.0) has joined #postgresql
2016-12-15 14:00:23	◥	skylar (~skylar2@gsits-a.gs.washington.edu) has joined #postgresql
2016-12-15 14:00:33	◣	nettoweb (~nettoweb@177.96.34.35) has quit (Ping timeout: 260 seconds)
2016-12-15 14:01:43	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 245 seconds)
2016-12-15 14:02:16	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 14:02:52	◣	fordfrog (~fordfrog@gentoo/developer/fordfrog) has quit (Quit: Leaving)
2016-12-15 14:04:38	◣	bordicon (~bordicon@50-247-102-73-static.hfc.comcastbusiness.net) has quit (Ping timeout: 245 seconds)
2016-12-15 14:05:26	◣	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has quit (Ping timeout: 264 seconds)
2016-12-15 14:05:38	◥	gheegh_ (~textual@pool-173-79-73-194.washdc.fios.verizon.net) has joined #postgresql
2016-12-15 14:05:46	◣	xzi11a (~robert@static-108-48-124-82.washdc.fios.verizon.net) has quit (Ping timeout: 258 seconds)
2016-12-15 14:06:35	◥	johnkeates (~johnkeate@86.92.128.79) has joined #postgresql
2016-12-15 14:06:45	◥	sfkeller (~chatzilla@135.209.196.178.dynamic.wline.res.cust.swisscom.ch) has joined #postgresql
2016-12-15 14:06:56	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 258 seconds)
2016-12-15 14:07:05	◣	gheegh (~textual@static.84.254.201.138.clients.your-server.de) has quit (Ping timeout: 260 seconds)
2016-12-15 14:07:51	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 14:08:23	◣	underhunden (~underhund@87.237.213.103) has quit (Ping timeout: 245 seconds)
2016-12-15 14:08:54	◣	nineinchnick (~jwas@109.231.18.27) has quit (Remote host closed the connection)
2016-12-15 14:09:17	◣	victor_lowther (~victor.lo@8.39.49.135) has quit (Ping timeout: 240 seconds)
2016-12-15 14:09:33	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-15 14:10:13	◣	wsieroci (~wsieroci@095160155090.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2016-12-15 14:11:02	◣	gowen (~gowen@83.173.187.50.dyn.user.ono.com) has quit (Quit: Leaving)
2016-12-15 14:11:09	◥	MrXXIV_ (~MrXXIV@12.39.195.132) has joined #postgresql
2016-12-15 14:11:57	◣	jpeura (~jpeura@dsl-pribrasgw1-58c309-121.dhcp.inet.fi) has quit (Quit: Leaving)
2016-12-15 14:12:02	◣	jlaffaye_ (~jlaffaye@orilla.jlaffaye.net) has quit (Read error: Connection reset by peer)
2016-12-15 14:12:43	◣	ramfjord (~tramfjord@12.202.171.242) has quit (Ping timeout: 256 seconds)
2016-12-15 14:13:24	◣	dav1d (~dav1d@volt/developer/dav1d) has quit (Ping timeout: 245 seconds)
2016-12-15 14:13:26	◣	PJMODOS (~pjmodos@alien.is) has quit (Ping timeout: 265 seconds)
2016-12-15 14:13:47	◣	pokoli (~pokoli@mail.koolpi.com) has quit (Ping timeout: 268 seconds)
2016-12-15 14:13:48	◣	blueskin (~blueskin@unaffiliated/blueskin) has quit (Ping timeout: 245 seconds)
2016-12-15 14:14:04	◣	Pheimors (~Pheimors@ns302333.ip-91-121-134.eu) has quit (Ping timeout: 252 seconds)
2016-12-15 14:14:58	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 258 seconds)
2016-12-15 14:15:01	◣	CustosLimen (~CustosLim@unaffiliated/cust0slim3n) has quit (Ping timeout: 268 seconds)
2016-12-15 14:15:22	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 14:16:23	◥	bwr (~bwr@93-103-215-22.dynamic.t-2.net) has joined #postgresql
2016-12-15 14:17:33	◥	underhunden (~underhund@87.237.213.103) has joined #postgresql
2016-12-15 14:18:51	◥	pokoli (~pokoli@mail.koolpi.com) has joined #postgresql
2016-12-15 14:18:55	◣	_Tenchi_ (~phil@207-255-68-080-dhcp.aoo.pa.atlanticbb.net) has quit (Quit: Textual IRC Client: www.textualapp.com)
2016-12-15 14:19:26	◥	CustosLimen (~CustosLim@unaffiliated/cust0slim3n) has joined #postgresql
2016-12-15 14:19:41	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 260 seconds)
2016-12-15 14:19:42	◥	blueskin (~blueskin@unaffiliated/blueskin) has joined #postgresql
2016-12-15 14:20:08	◥	dav1d (~dav1d@volt/developer/dav1d) has joined #postgresql
2016-12-15 14:20:24	◥	ononotofu (~ononotofu@2605:e000:1309:c0da:1d63:42e6:ff9e:f2d6) has joined #postgresql
2016-12-15 14:20:38	◥	PJMODOS (~pjmodos@alien.is) has joined #postgresql
2016-12-15 14:20:46	◥	bordicon (~bordicon@50-247-102-73-static.hfc.comcastbusiness.net) has joined #postgresql
2016-12-15 14:20:47	◥	Pheimors (~Pheimors@ns302333.ip-91-121-134.eu) has joined #postgresql
2016-12-15 14:20:51	◣	stephenjudkins (~stephenju@73.96.105.67) has quit (Remote host closed the connection)
2016-12-15 14:21:39	◥	aristippos (~aristippo@2601:640:103:249d:574:b01:7b14:c4f8) has joined #postgresql
2016-12-15 14:21:41	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 14:22:30	◥	jlaffaye (~jlaffaye@orilla.jlaffaye.net) has joined #postgresql
2016-12-15 14:22:40	◥	mochiyoda (~my@2601:1c0:cb03:87fd:44a4:14db:6d70:ff3b) has joined #postgresql
2016-12-15 14:25:13	◥	nettoweb (~nettoweb@2804:7f5:f080:2e0f::4) has joined #postgresql
2016-12-15 14:25:44	◣	dionysus69 (~Thunderbi@unaffiliated/dionysus69) has quit (Ping timeout: 256 seconds)
2016-12-15 14:26:52	◣	mochiyoda_ (~my@2601:1c0:cb03:87fd:44a4:14db:6d70:ff3b) has quit (Ping timeout: 258 seconds)
2016-12-15 14:27:16	◣	ajw0100 (~ajw0100@c-24-62-66-197.hsd1.ma.comcast.net) has quit (Ping timeout: 252 seconds)
2016-12-15 14:27:38	◣	MrXXIV_ (~MrXXIV@12.39.195.132) has quit (Ping timeout: 258 seconds)
2016-12-15 14:27:54	◣	andlabs (~pietro@adfb395a.cst.lightpath.net) has quit (Read error: Connection reset by peer)
2016-12-15 14:28:25	◣	aristippos (~aristippo@2601:640:103:249d:574:b01:7b14:c4f8) has quit (Ping timeout: 258 seconds)
2016-12-15 14:29:12	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 268 seconds)
2016-12-15 14:29:29	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 14:29:48	◥	MrXXIV_ (~MrXXIV@12.39.195.132) has joined #postgresql
2016-12-15 14:29:53	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 14:30:25	◥	SEQUEL_TECH (~sequel@46.238.55.126) has joined #postgresql
2016-12-15 14:30:33	◥	aristippos (~aristippo@73.93.155.13) has joined #postgresql
2016-12-15 14:30:38	◣	echlebek (~echlebek@50.64.119.210) has quit (Ping timeout: 264 seconds)
2016-12-15 14:30:41	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Client Quit)
2016-12-15 14:31:49	◣	dnicole (~dnicole@2602:30a:2e5d:1370:25e8:554e:259e:7f4) has quit (Remote host closed the connection)
2016-12-15 14:32:17	◣	conorh (~conorh@conorh.net) has quit (Quit: ZNC - http://znc.in)
2016-12-15 14:32:20	◥	dnicole (~dnicole@2602:30a:2e5d:1370:25e8:554e:259e:7f4) has joined #postgresql
2016-12-15 14:33:56	◥	joelt_ (~joelt@rrcs-67-79-6-115.sw.biz.rr.com) has joined #postgresql
2016-12-15 14:36:19	◣	joelt (~joelt@rrcs-67-79-6-115.sw.biz.rr.com) has quit (Ping timeout: 250 seconds)
2016-12-15 14:36:51	◣	dnicole (~dnicole@2602:30a:2e5d:1370:25e8:554e:259e:7f4) has quit (Ping timeout: 258 seconds)
2016-12-15 14:36:52	◣	Cohedrin (~textual@c-73-170-239-253.hsd1.ca.comcast.net) has quit (Quit: My Mac has gone to sleep. ZZZzzz…)
2016-12-15 14:37:28	◣	svara1 (~oaao@2604:2000:820d:e00:6d50:2114:c59c:e191) has quit (Read error: Connection reset by peer)
2016-12-15 14:37:34	◥	Cohedrin (~textual@c-73-170-239-253.hsd1.ca.comcast.net) has joined #postgresql
2016-12-15 14:38:01	◣	EyePulp (~eyepulp@107.152.3.83) has quit (Remote host closed the connection)
2016-12-15 14:38:16	◣	joelt_ (~joelt@rrcs-67-79-6-115.sw.biz.rr.com) has quit (Ping timeout: 252 seconds)
2016-12-15 14:38:28	◣	mikec_64 (~mcavalier@rrcs-173-197-13-98.west.biz.rr.com) has quit (Quit: Leaving)
2016-12-15 14:39:35	◣	sgflt (~sgflt@p54B2175A.dip0.t-ipconnect.de) has quit (Quit: sgflt)
2016-12-15 14:40:55	◣	Cohedrin (~textual@c-73-170-239-253.hsd1.ca.comcast.net) has quit (Client Quit)
2016-12-15 14:41:29	◣	BaconOverflow (uid175297@gateway/web/irccloud.com/x-ihdfduzzrrlkjish) has quit (Quit: Connection closed for inactivity)
2016-12-15 14:42:20	◥	stephenjudkins (~stephenju@c-73-11-56-221.hsd1.or.comcast.net) has joined #postgresql
2016-12-15 14:42:29	◣	stephenjudkins (~stephenju@c-73-11-56-221.hsd1.or.comcast.net) has quit (Remote host closed the connection)
2016-12-15 14:42:56	◥	stephenjudkins (~stephenju@c-73-11-56-221.hsd1.or.comcast.net) has joined #postgresql
2016-12-15 14:44:21	◣	benlieb (~benlieb@24-140-227-62.cpe.teksavvy.com) has quit (Quit: benlieb)
2016-12-15 14:44:37	◥	kacey (~kacey@c-50-132-2-197.hsd1.wa.comcast.net) has joined #postgresql
2016-12-15 14:45:00	◥	oaao (~oaao@2604:2000:820d:e00:f976:227a:8f08:6845) has joined #postgresql
2016-12-15 14:46:37	◥	Cohedrin (~textual@c-73-170-239-253.hsd1.ca.comcast.net) has joined #postgresql
2016-12-15 14:46:51	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-15 14:47:12	◣	claudiuinberlin (~claudiuin@78.53.140.180) has quit
2016-12-15 14:47:42	◣	neoncontrails (~neoncontr@76-196-232-33.lightspeed.sndgca.sbcglobal.net) has quit (Remote host closed the connection)
2016-12-15 14:49:08	◣	ogradyd (~Thunderbi@HSI-KBW-046-005-205-144.hsi8.kabel-badenwuerttemberg.de) has quit (Quit: ogradyd)
2016-12-15 14:49:22	◥	anomaly44 (~fees@d54c22e1c.access.telenet.be) has joined #postgresql
2016-12-15 14:49:24	◥	boson (~boson@cpe-174-100-64-46.neo.res.rr.com) has joined #postgresql
2016-12-15 14:50:06	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 256 seconds)
2016-12-15 14:51:02	anomaly44	rob@rmint ~ $ psql
2016-12-15 14:51:03	anomaly44	psql (9.5.5, server 9.3.15)
2016-12-15 14:51:06	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 14:51:23	anomaly44	how can i update this server version to 9.5.5 ?
2016-12-15 14:51:29	anomaly44	having problems with dump mismatch
2016-12-15 14:51:45	johnkeates	dump it, import it
2016-12-15 14:52:03	anomaly44	i know
2016-12-15 14:52:08	anomaly44	but want the same version
2016-12-15 14:52:11	anomaly44	so easy to just pull
2016-12-15 14:52:21	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 260 seconds)
2016-12-15 14:53:16	◣	NCS_One (~NCS_One@dsl-178-106.bl26.telepac.pt) has quit (Quit: Lost terminal)
2016-12-15 14:53:26	◣	wam (~wam@unaffiliated/wam) has quit (Ping timeout: 264 seconds)
2016-12-15 14:54:30	◣	skylar (~skylar2@gsits-a.gs.washington.edu) has quit (Quit: Leaving.)
2016-12-15 14:56:05	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 260 seconds)
2016-12-15 14:56:17	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 14:56:23	◥	dnicole (~dnicole@2602:30a:2e5d:1370:25e8:554e:259e:7f4) has joined #postgresql
2016-12-15 14:56:32	◣	tiwula (~lane@70.89.246.241-Busname-UT.hfc.comcastbusiness.net) has quit (Quit: Leaving)
2016-12-15 14:57:07	◣	re1 (~reiser@cable-24-135-13-113.dynamic.sbb.rs) has quit (Read error: Connection reset by peer)
2016-12-15 14:59:18	◣	madsj (~madsj@130.227.120.134) has quit (Quit: leaving)
2016-12-15 15:00:10	◣	anomaly44 (~fees@d54c22e1c.access.telenet.be) has quit (Remote host closed the connection)
2016-12-15 15:00:52	◣	JamesBaxter (~JamesBaxt@unaffiliated/jamesbaxter) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 15:01:38	◣	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 15:01:59	◥	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has joined #postgresql
2016-12-15 15:02:05	◣	MrXXIV_ (~MrXXIV@12.39.195.132) has quit (Read error: Connection reset by peer)
2016-12-15 15:02:25	◣	cartan (~cartan@p4FEEAC3D.dip0.t-ipconnect.de) has quit (Quit: Leaving)
2016-12-15 15:02:58	◥	cartan (~cartan@p4FEEAC3D.dip0.t-ipconnect.de) has joined #postgresql
2016-12-15 15:03:09	◣	dnicole (~dnicole@2602:30a:2e5d:1370:25e8:554e:259e:7f4) has quit (Remote host closed the connection)
2016-12-15 15:03:38	◣	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has quit (Ping timeout: 264 seconds)
2016-12-15 15:04:05	◥	szymon (~szymon@staticline-31-182-67-100.toya.net.pl) has joined #postgresql
2016-12-15 15:04:22	◥	Orbitrix (~Huevos@c-76-113-42-18.hsd1.nm.comcast.net) has joined #postgresql
2016-12-15 15:05:12	◣	YS (~Yaroslav@176.194.242.234) has quit (Read error: Connection reset by peer)
2016-12-15 15:05:31	◥	YS (~Yaroslav@176.194.242.234) has joined #postgresql
2016-12-15 15:06:34	◥	Human_G33k (~Human_G33@62.147.242.8) has joined #postgresql
2016-12-15 15:06:35	◥	victor_lowther (~victor.lo@8.39.49.135) has joined #postgresql
2016-12-15 15:06:38	◣	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has quit (Ping timeout: 264 seconds)
2016-12-15 15:09:12	◣	k3va (~k3va@wsip-70-165-48-210.oc.oc.cox.net) has quit
2016-12-15 15:09:51	⚡	lavalike_ is now known as lavalike
2016-12-15 15:10:25	◥	andlabs (~pietro@ool-44c669cd.dyn.optonline.net) has joined #postgresql
2016-12-15 15:11:10	◥	aristipp_ (~aristippo@2601:640:103:f49b:ed36:5bf8:7009:86b0) has joined #postgresql
2016-12-15 15:11:26	◣	aristippos (~aristippo@73.93.155.13) has quit (Ping timeout: 265 seconds)
2016-12-15 15:13:13	◥	Maxel_ (~Maxel@50-241-60-122-static.hfc.comcastbusiness.net) has joined #postgresql
2016-12-15 15:14:00	◣	Kaizervonmaanen (~Kaizervon@169.118.9.46.customer.cdi.no) has quit (Ping timeout: 258 seconds)
2016-12-15 15:14:27	◥	AdamTheExile (~textual@wsip-98-179-141-240.ri.ri.cox.net) has joined #postgresql
2016-12-15 15:14:51	◥	tozhu (~Thunderbi@220.166.250.168) has joined #postgresql
2016-12-15 15:16:17	◥	Kaizervonmaanen (~Kaizervon@169.118.9.46.customer.cdi.no) has joined #postgresql
2016-12-15 15:16:45	◣	Maxel (~Maxel@50-241-60-122-static.hfc.comcastbusiness.net) has quit (Ping timeout: 265 seconds)
2016-12-15 15:17:55	◣	Maxel_ (~Maxel@50-241-60-122-static.hfc.comcastbusiness.net) has quit (Ping timeout: 268 seconds)
2016-12-15 15:18:16	◥	aristippos (~aristippo@73.93.154.203) has joined #postgresql
2016-12-15 15:19:17	◣	aristipp_ (~aristippo@2601:640:103:f49b:ed36:5bf8:7009:86b0) has quit (Ping timeout: 240 seconds)
2016-12-15 15:22:26	◥	linuxhiker1 (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2016-12-15 15:22:31	◣	linuxhiker1 (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has left #postgresql
2016-12-15 15:24:38	◣	underhunden (~underhund@87.237.213.103) has quit (Ping timeout: 245 seconds)
2016-12-15 15:24:57	◣	PityDaFool (~AfroThund@c-73-39-115-171.hsd1.md.comcast.net) has quit (Read error: Connection reset by peer)
2016-12-15 15:25:54	◣	mmello (Marcelo@nat/redhat/x-lecnavgefpawrpbv) has quit (Quit: Leaving)
2016-12-15 15:26:09	◣	cJIaB (~cJIaB@178-221-185-136.dynamic.isp.telekom.rs) has quit (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
2016-12-15 15:26:27	◣	lluad (~lluad@204.11.227.194.static.etheric.net) has quit (Quit: lluad)
2016-12-15 15:26:42	◥	underhunden (~underhund@87.237.213.103) has joined #postgresql
2016-12-15 15:30:22	◥	lluad (~lluad@204.11.227.194.static.etheric.net) has joined #postgresql
2016-12-15 15:30:48	◣	doppleherz (uid178172@gateway/web/irccloud.com/x-ugamlqcibeigzwkd) has quit (Quit: Connection closed for inactivity)
2016-12-15 15:32:03	◣	aron_kexp (~aron_kexp@50-234-71-226-static.hfc.comcastbusiness.net) has quit (Quit: quit)
2016-12-15 15:32:48	◣	Debnet`Laptop (~Marc@smtp2.sa-cim.fr) has quit (Quit: Leaving)
2016-12-15 15:32:56	◣	AdamTheExile (~textual@wsip-98-179-141-240.ri.ri.cox.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 15:33:02	◣	banditron (~banditron@kohana/developer/banditron) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 15:33:02	◣	aristippos (~aristippo@73.93.154.203) has quit (Read error: Connection reset by peer)
2016-12-15 15:33:25	◣	underhunden (~underhund@87.237.213.103) has quit (Ping timeout: 260 seconds)
2016-12-15 15:34:51	◥	underhunden (~underhund@87.237.213.103) has joined #postgresql
2016-12-15 15:34:54	◥	aristippos (~aristippo@207.62.246.42) has joined #postgresql
2016-12-15 15:35:24	◥	harikb (uid137943@gateway/web/irccloud.com/x-eevotjoeiofwocoq) has joined #postgresql
2016-12-15 15:35:51	◣	fwiles (~frank@19.89.124.24.cm.sunflower.com) has quit (Quit: fwiles)
2016-12-15 15:36:06	◣	zivester (~zivester@38.104.66.138) has quit (Remote host closed the connection)
2016-12-15 15:36:34	◣	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has quit (Ping timeout: 252 seconds)
2016-12-15 15:36:58	◥	AfroThundr (~AfroThund@2601:147:c000:b824:e5e2:b6c7:fbd4:51fa) has joined #postgresql
2016-12-15 15:36:58	◣	AfroThundr (~AfroThund@2601:147:c000:b824:e5e2:b6c7:fbd4:51fa) has quit (Max SendQ exceeded)
2016-12-15 15:37:23	◣	al-damiri (uid142631@gateway/web/irccloud.com/x-woinhnzvdzkpzyvm) has quit (Quit: Connection closed for inactivity)
2016-12-15 15:38:08	◣	nettoweb (~nettoweb@2804:7f5:f080:2e0f::4) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 15:39:24	◣	lluad (~lluad@204.11.227.194.static.etheric.net) has quit (Quit: lluad)
2016-12-15 15:39:34	◥	bpmedley (~bpm@rrcs-24-199-194-124.midsouth.biz.rr.com) has joined #postgresql
2016-12-15 15:40:00	◣	zxq9 (~ceverett@FL1-60-239-69-125.okn.mesh.ad.jp) has quit (Quit: Konversation terminated!)
2016-12-15 15:41:06	◥	AfroThundr (~AfroThund@2601:147:c000:b824:e5e2:b6c7:fbd4:51fa) has joined #postgresql
2016-12-15 15:41:47	◣	AfroThundr (~AfroThund@2601:147:c000:b824:e5e2:b6c7:fbd4:51fa) has quit (Max SendQ exceeded)
2016-12-15 15:41:50	◥	neoncontrails (~neoncontr@wsip-72-196-168-39.sd.sd.cox.net) has joined #postgresql
2016-12-15 15:42:21	◥	AfroThundr (~AfroThund@2601:147:c000:b824:e5e2:b6c7:fbd4:51fa) has joined #postgresql
2016-12-15 15:43:15	◥	Yiota (~textual@2607:fea8:56e0:407:3505:ced9:9ad:9c1c) has joined #postgresql
2016-12-15 15:44:21	◣	underhunden (~underhund@87.237.213.103) has quit (Ping timeout: 250 seconds)
2016-12-15 15:46:02	◥	underhunden (~underhund@87.237.213.103) has joined #postgresql
2016-12-15 15:46:52	◥	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has joined #postgresql
2016-12-15 15:47:04	◣	bwr (~bwr@93-103-215-22.dynamic.t-2.net) has quit (Quit: Going offline, see ya! (www.adiirc.com))
2016-12-15 15:47:05	◣	Kaizervonmaanen (~Kaizervon@169.118.9.46.customer.cdi.no) has quit (Read error: Connection reset by peer)
2016-12-15 15:47:16	◣	Yiota (~textual@2607:fea8:56e0:407:3505:ced9:9ad:9c1c) has quit (Client Quit)
2016-12-15 15:47:47	◥	Yiota (~textual@2607:fea8:56e0:407:3505:ced9:9ad:9c1c) has joined #postgresql
2016-12-15 15:48:50	◣	tozhu (~Thunderbi@220.166.250.168) has quit (Ping timeout: 250 seconds)
2016-12-15 15:50:39	◥	__Yiota (~textual@2607:fea8:56e0:407:ace1:cbf3:98ea:32d1) has joined #postgresql
2016-12-15 15:51:08	◥	tozhu (~Thunderbi@220.166.250.168) has joined #postgresql
2016-12-15 15:52:09	◣	Yiota (~textual@2607:fea8:56e0:407:3505:ced9:9ad:9c1c) has quit (Ping timeout: 245 seconds)
2016-12-15 15:52:48	◥	anomaly (~fees@d54c22e1c.access.telenet.be) has joined #postgresql
2016-12-15 15:53:12	⚡	anomaly is now known as Guest77445
2016-12-15 15:55:36	◥	fees (~fees@d54c22e1c.access.telenet.be) has joined #postgresql
2016-12-15 15:56:34	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Remote host closed the connection)
2016-12-15 15:56:38	◣	underhunden (~underhund@87.237.213.103) has quit (Ping timeout: 250 seconds)
2016-12-15 15:56:43	◣	Guest77445 (~fees@d54c22e1c.access.telenet.be) has quit (Client Quit)
2016-12-15 15:56:45	◥	arescorpio (~arescorpi@87-205-17-190.fibertel.com.ar) has joined #postgresql
2016-12-15 15:56:59	◥	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has joined #postgresql
2016-12-15 15:57:10	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2016-12-15 15:58:15	◥	underhunden (~underhund@87.237.213.103) has joined #postgresql
2016-12-15 15:59:39	◣	sz0 (uid110435@gateway/web/irccloud.com/x-bhaciqvlhrsibnff) has quit (Quit: Connection closed for inactivity)
2016-12-15 16:00:00	◣	victor_lowther (~victor.lo@8.39.49.135) has quit (Quit: Leaving.)
2016-12-15 16:01:30	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Ping timeout: 256 seconds)
2016-12-15 16:02:18	◣	amathew (~amathew@208.185.185.131) has quit (Ping timeout: 258 seconds)
2016-12-15 16:02:33	◣	tm604 (~tom@pdpc/supporter/professional/tm604) has quit (Ping timeout: 245 seconds)
2016-12-15 16:03:05	◥	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has joined #postgresql
2016-12-15 16:03:32	◥	dnicole (~dnicole@2602:30a:2e5d:1370:25e8:554e:259e:7f4) has joined #postgresql
2016-12-15 16:04:01	◣	puchacz (~puchacz@cpc96904-walt25-2-0-cust679.13-2.cable.virginm.net) has quit (Quit: Konversation terminated!)
2016-12-15 16:04:36	◣	howitdo (~howitdo@unaffiliated/howitdo) has quit (Ping timeout: 258 seconds)
2016-12-15 16:05:13	◥	amathew (~amathew@208.185.185.131) has joined #postgresql
2016-12-15 16:08:03	◣	dnicole (~dnicole@2602:30a:2e5d:1370:25e8:554e:259e:7f4) has quit (Ping timeout: 258 seconds)
2016-12-15 16:08:24	◣	Ravenmire (~Ravenmire@24-181-195-221.dhcp.hckr.nc.charter.com) has quit (Remote host closed the connection)
2016-12-15 16:08:42	◣	sjoos (~jlammrs@a111225.upc-a.chello.nl) has quit (Quit: Leaving)
2016-12-15 16:08:47	◥	Ravenmire (~Ravenmire@24-181-195-221.dhcp.hckr.nc.charter.com) has joined #postgresql
2016-12-15 16:10:22	◣	held (~heldchen@unaffiliated/held) has quit (Remote host closed the connection)
2016-12-15 16:11:14	◥	howitdo (~howitdo@unaffiliated/howitdo) has joined #postgresql
2016-12-15 16:12:59	◣	Ravenmire (~Ravenmire@24-181-195-221.dhcp.hckr.nc.charter.com) has quit (Remote host closed the connection)
2016-12-15 16:13:18	◣	Levure (~quassel@109.132.56.75) has quit (Remote host closed the connection)
2016-12-15 16:13:26	◥	Ravenmire (~Ravenmire@24-181-195-221.dhcp.hckr.nc.charter.com) has joined #postgresql
2016-12-15 16:13:38	◥	Nizumzen (~Nizumzen@cpc2-reig5-2-0-cust667.6-3.cable.virginm.net) has joined #postgresql
2016-12-15 16:13:48	◥	held (~heldchen@unaffiliated/held) has joined #postgresql
2016-12-15 16:13:51	◣	rgiscard (~rgiscard@c-73-78-219-60.hsd1.co.comcast.net) has quit (Quit: Cheers)
2016-12-15 16:14:59	◥	hakunin (~hakunin@ool-2f128a58.dyn.optonline.net) has joined #postgresql
2016-12-15 16:15:17	◣	fees (~fees@d54c22e1c.access.telenet.be) has quit (Remote host closed the connection)
2016-12-15 16:15:37	◣	howitdo (~howitdo@unaffiliated/howitdo) has quit (Read error: Connection reset by peer)
2016-12-15 16:15:38	hakunin	is there a single clear example of getting a time range from beginning to end of last week in specific timezone?
2016-12-15 16:15:54	◣	jabakobob (~textual@cpe90-146-57-147.liwest.at) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-15 16:16:12	◥	fees (~fees@d54c22e1c.access.telenet.be) has joined #postgresql
2016-12-15 16:16:26	◥	howitdo (~howitdo@unaffiliated/howitdo) has joined #postgresql
2016-12-15 16:16:37	◥	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has joined #postgresql
2016-12-15 16:16:41	johto	one can certainly be written
2016-12-15 16:16:42	hakunin	last week = calendar, monday 00:00 to sunday 11:59:59 (or can also be < next monday 00:00)
2016-12-15 16:16:52	johto	it'a a timestamptz column, yes?
2016-12-15 16:17:18	hakunin	time without time zone
2016-12-15 16:17:30	xocolatl	boo
2016-12-15 16:18:07	hakunin	but i know what's the timezone i'd like everything in terms of
2016-12-15 16:18:36	hakunin	so i only ever run this view refresh 30 minutes after week is over in my target timezone, but wouldn't want to rely on that
2016-12-15 16:18:40	◥	ramfjord (~tramfjord@12.202.171.242) has joined #postgresql
2016-12-15 16:19:03	hakunin	just need a way to grab "beginning of last week" and "end of last week" in "MST"
2016-12-15 16:19:18	◣	held (~heldchen@unaffiliated/held) has quit (Remote host closed the connection)
2016-12-15 16:19:46	◥	held (~heldchen@unaffiliated/held) has joined #postgresql
2016-12-15 16:19:55	◣	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has quit (Ping timeout: 265 seconds)
2016-12-15 16:20:24	hakunin	we can assume it's stored in utc
2016-12-15 16:21:03	hakunin	I was thinking this: select date_trunc('week', NOW() at time zone 'mst' - interval '1 week') as start, (date_trunc('week', NOW() at time zone 'mst' - interval '1 week') + interval '1 week') as end;
2016-12-15 16:21:53	hakunin	i guess i just subtract offset from them and call it a day
2016-12-15 16:22:11	johto	which offset though? don't you have DST?
2016-12-15 16:22:18	hakunin	…
2016-12-15 16:22:26	hakunin	MST probably does
2016-12-15 16:22:31	hakunin	damn it
2016-12-15 16:22:37	◥	kuSuSE (~khada@pool-98-109-119-45.nwrknj.fios.verizon.net) has joined #postgresql
2016-12-15 16:23:26	hakunin	so i would have to add the whole `without time zone at time zone` thing?
2016-12-15 16:23:57	johto	date_trunc('week', (now() at time zone 'US/Mountain') - interval '1 week') at time zone 'US/Mountain' at time zone 'Etc/UTC'    would be the beginning
2016-12-15 16:23:59	xocolatl	you really should just use timestamptz
2016-12-15 16:24:11	▷	xocolatl curses the universe that it isn't the default
2016-12-15 16:24:38	hakunin	xocolatl: you're probably right, but i'm frankly used to thinking of times in terms of utc only…
2016-12-15 16:24:50	johto	the "at time zone 'Etc/UTC'" could be omitted if you'd used timestamptz
2016-12-15 16:24:54	hakunin	but not familiar with postgres time handling stuff
2016-12-15 16:25:02	◣	szymon (~szymon@staticline-31-182-67-100.toya.net.pl) has quit (Remote host closed the connection)
2016-12-15 16:25:04	RhodiumToad	well, if the choice is between timestamp w/o tz and the spec's version of timestamptz, making the default be "without" is possibly sane
2016-12-15 16:25:05	hakunin	johto: reading
2016-12-15 16:25:30	xocolatl	what is the spec's version?
2016-12-15 16:25:43	◣	amathew (~amathew@208.185.185.131) has quit (Ping timeout: 258 seconds)
2016-12-15 16:25:47	RhodiumToad	US/Mountain isn't a canonical time zone, avoid it
2016-12-15 16:25:49	◣	pvh (uid717@gateway/web/irccloud.com/x-xyryegbpeciqmxfv) has quit (Quit: Connection closed for inactivity)
2016-12-15 16:25:59	RhodiumToad	America/Colorado instead
2016-12-15 16:26:36	RhodiumToad	xocolatl: the spec's timestamptz stores a UTC timestamp and a separate offset
2016-12-15 16:26:46	xocolatl	ah, right
2016-12-15 16:27:12	hakunin	RhodiumToad: is 'MST' safe to use?
2016-12-15 16:27:13	xocolatl	it would be nice if we remembered the zone (but not via offset)
2016-12-15 16:27:22	hakunin	johto: thank you looks like it might do the trick
2016-12-15 16:27:23	RhodiumToad	hakunin: no
2016-12-15 16:27:51	hakunin	RhodiumToad: gotcha, will use 'American/Colorado'
2016-12-15 16:27:56	hakunin	ca
2016-12-15 16:28:58	RhodiumToad	America/Denver, sorry
2016-12-15 16:29:05	◣	evol_monkey (~vasilis@athedsl-4502423.home.otenet.gr) has quit (Quit: Lost terminal)
2016-12-15 16:29:07	hakunin	yep just checked
2016-12-15 16:29:29	◣	bendem (bendem@bendem.be) has quit (Remote host closed the connection)
2016-12-15 16:29:42	◥	kuiber (~kuiber@2602:ffc5:20::1:2ab5) has joined #postgresql
2016-12-15 16:29:58	RhodiumToad	that's for the mountain time zone _with_ DST. for mountain time without DST, use America/Phoenix
2016-12-15 16:30:22	RhodiumToad	consult zone.tab for the canonical list
2016-12-15 16:30:32	kuiber	Hi there - I have a few questions regarding pg_repack. mainly - do people use it in production?
2016-12-15 16:30:44	hakunin	RhodiumToad: hm, good call about with/without dst
2016-12-15 16:30:57	hakunin	will double check the requirements there
2016-12-15 16:31:32	RhodiumToad	as far as I recall, Arizona is the only place to use mountain time without DST
2016-12-15 16:32:11	johnkeates	Hi everyone, I'm in the process of recovering a database copied from a bad RAID setup, I've got nearly everything dumped except three tables due to a missing chunk number in one case and invalid attributes in another
2016-12-15 16:32:12	RhodiumToad	of course checking zone.tab (or zone1970.tab) is now made more difficult by its complete absence from the distribution
2016-12-15 16:33:05	◣	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has quit (Remote host closed the connection)
2016-12-15 16:33:17	hakunin	RhodiumToad: we already use MST as an approximation, maybe it's best to avoid dst, since this is for weekly/monthly/etc leaderboard boundaries
2016-12-15 16:33:19	RhodiumToad	johnkeates: ok, and you want to try and dump as much data as possible?
2016-12-15 16:33:27	johnkeates	yes
2016-12-15 16:34:07	johnkeates	two tables won't dump at all due to invalid attribute numbers, and one has about 5 bad rows that seem to migrate to other rows on deletion
2016-12-15 16:34:36	johnkeates	I managed (with your help, RhodiumToad) to get pretty much everything else out of the DB, so that was awesome already
2016-12-15 16:34:43	RhodiumToad	johnkeates: how did you identify the rows to delete?
2016-12-15 16:35:20	johnkeates	I ran SELECT * FROM events LIMIT 1 offset $i with $i incrementing on every query
2016-12-15 16:35:35	johnkeates	and reporting $i if there was an error
2016-12-15 16:35:38	◥	bronson (~bronson@142-254-109-229.dsl.dynamic.sonic.net) has joined #postgresql
2016-12-15 16:35:43	RhodiumToad	that's really not a good idea
2016-12-15 16:35:45	johnkeates	then I deleted the ID from the same offsets to get the row ID
2016-12-15 16:35:51	johnkeates	okay
2016-12-15 16:35:58	RhodiumToad	you may have deleted the wrong rows
2016-12-15 16:36:04	johnkeates	I have backups
2016-12-15 16:36:17	RhodiumToad	the way to do it is to identify rows by ctid, not by offset which can change arbitrarily
2016-12-15 16:36:29	◥	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has joined #postgresql
2016-12-15 16:36:50	johnkeates	should I loop selecting on ctid and delete on that?
2016-12-15 16:37:07	RhodiumToad	you should be able to do this:
2016-12-15 16:37:37	◣	davidw (~davidw@apache/committer/davidw) has quit (Ping timeout: 240 seconds)
2016-12-15 16:37:50	◣	pnhlantau (~Thunderbi@n219073012165.netvigator.com) has quit (Ping timeout: 264 seconds)
2016-12-15 16:38:50	RhodiumToad	create function chk(tid) returns boolean language plpgsql as $f$ declare r text; begin r := (select t::text from tablename t where t.ctid = $1); return false; exception when others then return true; end; $f$;
2016-12-15 16:39:02	RhodiumToad	select ctid from tablename where chk(ctid);
2016-12-15 16:39:38	johnkeates	gives me (671 rows)
2016-12-15 16:40:16	johnkeates	selecting events on id gives me (556 rows), so i suppose something is wrong there ;-)
2016-12-15 16:40:57	◣	phuff (~Adium@unaffiliated/phuff) has quit (Quit: Leaving.)
2016-12-15 16:41:10	RhodiumToad	um
2016-12-15 16:41:29	RhodiumToad	just  select ctid from tablename;   gives what?
2016-12-15 16:41:44	johnkeates	also (671 rows)
2016-12-15 16:42:03	RhodiumToad	so what exact select did you do that gave 556?
2016-12-15 16:42:10	RhodiumToad	select id from tablename;  ?
2016-12-15 16:42:19	RhodiumToad	that might have used an index-only scan, I guess
2016-12-15 16:42:22	johnkeates	yes
2016-12-15 16:42:37	johnkeates	select ctid, id from events; gave 671
2016-12-15 16:42:39	RhodiumToad	does that change if you do  set enable_indexscan=false;
2016-12-15 16:43:05	johnkeates	yes, disabling indexscan fixed that
2016-12-15 16:43:17	◣	massudaw (~massudaw@201.47.176.162.dynamic.adsl.gvt.net.br) has quit (Ping timeout: 248 seconds)
2016-12-15 16:43:41	RhodiumToad	ok. but the chk() condition returned true on all the rows?
2016-12-15 16:43:47	johnkeates	yep, all of them
2016-12-15 16:44:05	RhodiumToad	that seems unlikely
2016-12-15 16:44:20	johnkeates	indeed, i'm thinking a pg_catalog issue, or at least a toast issue with that missing chunk number 0 for toast value 68366 in pg_toast_16898
2016-12-15 16:44:21	RhodiumToad	redefine the function to leave out the "exception when others then return true;" and see what it does
2016-12-15 16:44:27	johnkeates	okay
2016-12-16 08:21:35	⚡	irc: disconnected from server
2016-12-16 08:21:52	◥	boon (~david@173-160-173-150-Washington.hfc.comcastbusiness.net) has joined #postgresql
2016-12-16 08:21:52	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-16 08:21:52	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-16 08:21:52	⚡	Channel #postgresql: 1028 nicks (0 ops, 0 voices, 1028 normals)
2016-12-16 08:21:52	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-16 08:21:54	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-16 08:21:56	◥	iGeni (~textual@50702E2F.cm-14.dynamic.ziggo.nl) has joined #postgresql
2016-12-16 08:22:05	richsql	RhodiumToad: is there anything to do make it BitmapHeapScan instead of IndexScan, if thats preferable?
2016-12-16 08:22:18	◥	ogradyd (~Thunderbi@HSI-KBW-046-005-205-144.hsi8.kabel-badenwuerttemberg.de) has joined #postgresql
2016-12-16 08:23:17	therue	ilmari: thanks :)
2016-12-16 08:23:39	◣	rajivr (~rajivr@106.51.129.243) has quit (Remote host closed the connection)
2016-12-16 08:23:40	^7heo	RhodiumToad: I have solved that problem by putting the array in a tmp table
2016-12-16 08:23:40	◣	Balliad (~textual@80.79.35.95) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-16 08:23:53	◣	albertid (~albertid_@p5DC4DE6F.dip0.t-ipconnect.de) has quit (Remote host closed the connection)
2016-12-16 08:24:24	RhodiumToad	richsql: first test out if it actually helps at all by trying it with  set enable_indexscan=false;  which should get you the bitmapscan plan
2016-12-16 08:25:09	richsql	ok
2016-12-16 10:02:35	⚡	irc: disconnected from server
2016-12-16 10:03:05	◥	boon (~david@66.195.46.242) has joined #postgresql
2016-12-16 10:03:05	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-16 10:03:05	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-16 10:03:05	⚡	Channel #postgresql: 1033 nicks (0 ops, 0 voices, 1033 normals)
2016-12-16 10:03:05	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-16 10:03:06	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-16 10:03:10	◥	nettoweb (~nettoweb@200.146.58.138.dynamic.dialup.gvt.net.br) has joined #postgresql
2016-12-16 10:03:43	◣	Diemuzi (~IceChat9@unaffiliated/diemuzi) has quit (Quit: See you on the flip side)
2016-12-16 10:04:07	◥	gheegh (~textual@static.84.254.201.138.clients.your-server.de) has joined #postgresql
2016-12-16 10:04:23	◥	filiprem (~filip@188.146.95.162.nat.umts.dynamic.t-mobile.pl) has joined #postgresql
2016-12-16 10:05:43	lluad	I'd missed that. Yeah, don't use char for that.
2016-12-16 10:05:43	◣	david__ (~david@203-158-35-175.dyn.iinet.net.au) has quit (Ping timeout: 248 seconds)
2016-12-16 10:05:43	◥	netameta (~netameta@24-158-128-88.dhcp.kgpt.tn.charter.com) has joined #postgresql
2016-12-16 10:05:43	◥	nicoulaj (~nicoulaj@nicoulaj.net) has joined #postgresql
2016-12-16 10:05:57	richsql	RhodiumToad: I bounced the server, and it took 35s with a bitmap heap scan.  I don't quite understand why it was even faster. Buffers: shared hit=74857 read=15854
2016-12-16 10:06:52	richsql	i feel like it was still cached somehow
2016-12-16 10:07:14	RhodiumToad	richsql: how big is your shared_buffers?
2016-12-16 10:07:17	◣	netameta__ (~netameta@24-158-128-88.dhcp.kgpt.tn.charter.com) has quit (Ping timeout: 240 seconds)
2016-12-16 10:07:40	◥	dmlloyd (~dmlloyd@redhat/jboss/dmlloyd) has joined #postgresql
2016-12-16 10:08:04	◥	evnmar (~MongooseW@12.104.179.154) has joined #postgresql
2016-12-16 10:08:05	richsql	RhodiumToad: 62927184kB
2016-12-16 10:08:10	◣	therue (~therue@1-162-43-38.dynamic.hinet.net) has quit (Quit: WeeChat 1.6)
2016-12-16 10:08:56	RhodiumToad	richsql: index scans can reference more buffers than bitmap scans because indexscans might visit the same block of the table more than once,
2016-12-16 10:09:14	RhodiumToad	richsql: but in such cases, the second and following references should be "hit" not "read"
2016-12-16 10:09:21	richsql	are buffers not in memory?
2016-12-16 10:09:33	◣	evnmar (~MongooseW@12.104.179.154) has quit (Client Quit)
2016-12-16 10:09:37	RhodiumToad	richsql: buffers are in memory
2016-12-16 10:10:58	◥	XofP (~XofP@sfosj0215mups301.wiline.com) has joined #postgresql
2016-12-16 10:11:23	◥	TechnoCrunch (~Tech@101.100.137.146) has joined #postgresql
2016-12-16 10:11:23	◥	bronson (~bronson@142-254-109-229.dsl.dynamic.sonic.net) has joined #postgresql
2016-12-16 10:11:35	richsql	RhodiumToad: i'm trying on a different set of ids and its taking a while. Would I see any benefit from the concurrency introduced in 9.6 in this case?
2016-12-16 10:11:47	◣	esran (~shamus150@46.17.164.68) has quit (Quit: Heading Home!)
2016-12-16 10:13:14	◥	grayhem__ (~grayhemp_@12.33.220.130) has joined #postgresql
2016-12-16 10:13:17	◣	grayhemp_wh (~grayhemp_@12.33.220.130) has quit (Read error: Connection reset by peer)
2016-12-16 10:13:18	◣	grayhem__ (~grayhemp_@12.33.220.130) has quit (Read error: Connection reset by peer)
2016-12-16 10:13:51	◥	grayhemp_wh (~grayhemp_@12.33.220.130) has joined #postgresql
2016-12-16 10:14:38	◣	bocaneri (~bocaneri@about/linux/staff/sauvin) has quit (Read error: Connection reset by peer)
2016-12-16 10:14:46	◣	israelzuniga (~israel@189.207.235.112) has quit (Quit: israelzuniga)
2016-12-16 10:15:28	richsql	RhodiumToad: this second set was on 41000 ids and took 4min, so definitely this is an improvement.
2016-12-16 10:15:41	◣	django_ (~django_@unaffiliated/django-/x-8345756) has quit (Quit: Leaving)
2016-12-16 10:16:00	◣	bronson (~bronson@142-254-109-229.dsl.dynamic.sonic.net) has quit (Ping timeout: 250 seconds)
2016-12-16 10:16:50	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-16 10:17:42	◥	domovoy (~domovoy@37.167.8.91) has joined #postgresql
2016-12-16 10:18:12	◥	nivag_ (~nivag@222.155.247.44) has joined #postgresql
2016-12-16 10:18:24	◥	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has joined #postgresql
2016-12-16 10:18:47	richsql	RhodiumToad: 1min 10s for 74,000 ids Buffers: shared hit=263147 read=35224
2016-12-16 10:21:36	richsql	??
2016-12-16 10:21:40	◣	bn-7bc (~bn-7bc@tmux.holmedal.net) has quit (Quit: leaving)
2016-12-16 10:22:01	richsql	ignore ?? ^^^
2016-12-16 10:22:07	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 250 seconds)
2016-12-16 10:23:11	◣	skyx (~skyx__@lk.84.20.225.68.dc.cable.static.lj-kabel.net) has quit (Quit: This computer has gone to sleep)
2016-12-16 10:23:21	RhodiumToad	richsql: 9.6's concurrency won't help you in this case
2016-12-16 10:24:03	◥	al-damiri (uid142631@gateway/web/irccloud.com/x-tmrxeeibhjrennap) has joined #postgresql
2016-12-16 10:25:00	◣	irqq (~chatzilla@78-11-36-98.cmr.net.pl) has quit (Ping timeout: 246 seconds)
2016-12-16 10:25:31	◥	TMM (~hp@fsf/member/pdpc.professional.tmm) has joined #postgresql
2016-12-16 10:27:01	◥	dwsr (uid185230@gateway/web/irccloud.com/x-ibgcijphkipjyxza) has joined #postgresql
2016-12-16 10:27:48	◥	johnkeates (~johnkeate@86.92.128.79) has joined #postgresql
2016-12-16 10:28:53	◣	davimore (~davimore@185.145.66.254) has quit (Quit: Leaving)
2016-12-16 10:29:31	◥	davimore (~davimore@185.145.66.254) has joined #postgresql
2016-12-16 10:31:37	◣	Hink (~Hink@hink.me) has quit (Ping timeout: 240 seconds)
2016-12-16 10:32:47	◣	Mike11 (~Mike@unaffiliated/mike11) has quit (Quit: Leaving.)
2016-12-16 10:32:50	◣	lucian (~lucian@194.74.244.130) has quit (Ping timeout: 258 seconds)
2016-12-16 10:33:13	johnkeates	hi everyone, i'm recovering a db, and i'm down to the last 2 tables, with both tables having invalid attribute numbers. pg_attributes does have a atrium with that attribute number, so i'm somewhat confused as to how it would be invalid
2016-12-16 10:34:19	◥	jabakobob (~textual@cpe90-146-57-147.liwest.at) has joined #postgresql
2016-12-16 10:35:43	◥	bn-7bc (~bn-7bc@tmux.holmedal.net) has joined #postgresql
2016-12-16 10:36:27	◥	tejasmanohar (~tejasmano@67.207.109.102) has joined #postgresql
2016-12-16 10:36:55	◣	massudaw (~massudaw@189.123.161.57) has quit (Ping timeout: 246 seconds)
2016-12-16 10:37:01	◥	crazyvasa (~schandra@cpe-67-246-133-99.stny.res.rr.com) has joined #postgresql
2016-12-16 10:37:07	◣	bn-7bc (~bn-7bc@tmux.holmedal.net) has quit (Client Quit)
2016-12-16 10:37:34	◥	timvisher (~tim.vishe@pool-72-94-54-98.phlapa.fios.verizon.net) has joined #postgresql
2016-12-16 10:37:56	◥	NCS_One (~NCS_One@176.78.178.106) has joined #postgresql
2016-12-16 10:38:12	◥	bn-7bc (~bn-7bc@tmux.holmedal.net) has joined #postgresql
2016-12-16 10:38:32	◣	jabakobob (~textual@cpe90-146-57-147.liwest.at) has quit (Ping timeout: 250 seconds)
2016-12-16 10:38:48	◣	banita (~banita@avs66.neoplus.adsl.tpnet.pl) has quit (Ping timeout: 245 seconds)
2016-12-16 10:39:33	◣	Flotho66 (~florent@2a01:e35:8ae3:b2f0:aadf:7f06:4372:61c3) has quit (Ping timeout: 260 seconds)
2016-12-16 10:40:04	◥	priidu (~priidu@unaffiliated/priidu) has joined #postgresql
2016-12-16 10:41:00	◥	thuvvik__ (~quassel@lns-bzn-61-82-250-127-53.adsl.proxad.net) has joined #postgresql
2016-12-16 10:41:01	◥	danecando (~danecando@c-71-226-85-169.hsd1.fl.comcast.net) has joined #postgresql
2016-12-16 10:41:11	richsql	RhodiumToad: I rebooted the server one last time and got 33sec for the query, Buffers: shared hit=74857 read=15854
2016-12-16 10:41:17	◣	prestorium (~davividal@187.95.104.34) has quit (Ping timeout: 240 seconds)
2016-12-16 10:41:18	richsql	dont understand how it hit the buffers though
2016-12-16 10:41:36	crazyvasa	Is there a way to figure out what query plans were generated for a parsed query?
2016-12-16 10:42:02	◥	kevinburke (uid56852@gateway/web/irccloud.com/x-sydfeweinjdetwqe) has joined #postgresql
2016-12-16 10:42:02	kevinburke	Hi there
2016-12-16 10:42:04	◣	wsieroci (~wsieroci@095160155020.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2016-12-16 10:42:14	◥	banita (~banita@avs66.neoplus.adsl.tpnet.pl) has joined #postgresql
2016-12-16 10:42:15	kevinburke	I tried to run CREATE INDEX CONCURRENTLY and was told that my index was INVALID - like a day after I created it it was still invalid
2016-12-16 10:42:21	◣	pablo_s (~pablo_s@206-248-188-234.dsl.teksavvy.com) has quit (Ping timeout: 260 seconds)
2016-12-16 10:42:27	kevinburke	How can I figure out why the index is invalid?
2016-12-16 10:42:30	◥	pablo_s (~pablo_s@206-248-188-234.dsl.teksavvy.com) has joined #postgresql
2016-12-16 10:42:34	kevinburke	CREATE INDEX CONCURRENTLY didn't return any error output
2016-12-16 10:43:19	◥	zivester (~zivester@38.104.66.138) has joined #postgresql
2016-12-16 10:44:33	◥	d3vnull (~d3vnull@41.207.252.170) has joined #postgresql
2016-12-16 10:45:07	◣	thuvvik_ (~quassel@lns-bzn-43-82-249-166-185.adsl.proxad.net) has quit (Ping timeout: 258 seconds)
2016-12-16 10:45:59	◥	themsay (~themsay@188.29.164.95.threembb.co.uk) has joined #postgresql
2016-12-16 10:46:19	crazyvasa	Is there anyone here who understands pgsql backend especially related to plan generation??
2016-12-16 10:46:19	themsay	ghddhb
2016-12-16 10:46:33	◥	neoncontrails (~neoncontr@76-196-232-33.lightspeed.sndgca.sbcglobal.net) has joined #postgresql
2016-12-16 10:46:38	Snow-Man	hahaha
2016-12-16 10:46:40	Snow-Man	crazyvasa: yes.
2016-12-16 10:47:03	crazyvasa	sweet !
2016-12-16 10:47:03	Snow-Man	crazyvasa: and plans aren't all generated and then compared at the end, really.
2016-12-16 10:47:31	Snow-Man	crazyvasa: so there's no easy way to just "see all query plans that were generated"
2016-12-16 10:47:36	◥	danecando_ (~danecando@c-71-226-85-169.hsd1.fl.comcast.net) has joined #postgresql
2016-12-16 10:47:54	crazyvasa	Snow-Man: what is the closest alternative?
2016-12-16 10:48:05	crazyvasa	Snow-Man: maybe all the paths?
2016-12-16 10:48:15	richsql	Can postgres performantly (<1min) handle large random id lookups where the table can't fit in memory and set of ids can be in the hundred of thousands?
2016-12-16 10:48:40	Snow-Man	crazyvasa: Kind of depends on what you're prepared to do.
2016-12-16 10:48:43	◣	jberkus (~smuxi@c-98-246-109-153.hsd1.or.comcast.net) has quit (Read error: Connection reset by peer)
2016-12-16 10:49:06	Snow-Man	crazyvasa: You could build PG with debugging symbols and see what it's doing at each step and what options are available at each step …
2016-12-16 10:49:15	Snow-Man	crazyvasa: with, you know, gdb
2016-12-16 10:49:38	Snow-Man	crazyvasa: If you want to do something in psql then you'll have to go changing the enable_* parameters and the various costing options
2016-12-16 10:49:47	◣	Lordz (~Adium@186.215.116.176) has quit (Quit: Leaving.)
2016-12-16 10:50:01	crazyvasa	ok.
2016-12-16 10:50:21	crazyvasa	Maybe I can explain the problem that I am trying to solve
2016-12-16 10:50:21	◥	evnmar (~MongooseW@12.104.179.154) has joined #postgresql
2016-12-16 10:50:21	◣	nicoulaj (~nicoulaj@nicoulaj.net) has quit (Remote host closed the connection)
2016-12-16 10:50:22	Snow-Man	That might actually allow for some progress to be made. :)
2016-12-16 10:50:54	◣	danecando (~danecando@c-71-226-85-169.hsd1.fl.comcast.net) has quit (Ping timeout: 246 seconds)
2016-12-16 10:51:20	crazyvasa	I am trying to see if there are other plans that are more energy efficient
2016-12-16 10:51:23	◥	nicoulaj (~nicoulaj@nicoulaj.net) has joined #postgresql
2016-12-16 10:51:37	masterkorp	hello, everyone, I am trying to recover from a backup, but when starting the cluster I get "could not locate a valid checkpoint record" and the cluster does not start
2016-12-16 10:52:31	crazyvasa	so assuming I can figure out the energy used by a plan ...
2016-12-16 10:52:38	crazyvasa	I need to know the list of plans ...
2016-12-16 10:53:13	richsql	also why would I see buffer hits on the first query after restarting a server?
2016-12-16 10:53:16	ningu	crazyvasa: not sure if that will work or be possible, but you can tweak some of pg's cost parameters if you know certain things will take more energy (as opposed to time)
2016-12-16 10:53:34	Snow-Man	crazyvasa: there is no 'list of plans'
2016-12-16 10:53:35	◣	tejasmanohar (~tejasmano@67.207.109.102) has quit (Quit: tejasmanohar)
2016-12-16 10:53:58	ningu	cost is meant to be in terms of time, right?
2016-12-16 10:54:01	riceandbeans	when you replicate a DB from a master to a slave, do you always end up getting ALL tables or can you say you don't want to replicate table foo
2016-12-16 10:54:10	◥	prestorium (~davividal@177.92.53.48) has joined #postgresql
2016-12-16 10:54:21	crazyvasa	Snow-Man: understood, but pgsql does evaluate different paths right?
2016-12-16 10:54:25	ningu	so I am not sure if you can really change pg's idea of what cost is
2016-12-16 10:54:26	Snow-Man	ningu: the cost model in PG is intended to be about minimizing time, yes.  The cost values are not actual 'time' though.
2016-12-16 10:54:37	crazyvasa	ningu, Snow-Man: in order to get to the optimized plan?
2016-12-16 10:54:39	ningu	Snow-Man: right, I just meant cost is meant to be equivalent to time, more or less
2016-12-16 10:54:40	Snow-Man	crazyvasa: There's an optimizer, yes.
2016-12-16 10:54:50	ningu	not sure if it's linear or what
2016-12-16 10:54:59	ningu	but larger cost = more time
2016-12-16 10:55:02	◥	Lordz (~Adium@186.215.116.176) has joined #postgresql
2016-12-16 10:55:03	crazyvasa	ningu: That makes sense ...
2016-12-16 10:55:26	ningu	crazyvasa: but you can influence the planner with various params in terms of the cost of retrieving from disk and what not
2016-12-16 10:55:28	ningu	it's possible those could correlate with energy use
2016-12-16 10:55:42	Snow-Man	crazyvasa: The cost model in PG is based on the cost of different operations wrt time, so you could adjust the values of the cost parameters to be based around the cost in terms of power, if that's what you're looking to do.
2016-12-16 10:55:46	ningu	yeah
2016-12-16 10:55:49	Snow-Man	crazyvasa: I don't know that you'd really end up changing very many of the values tho..
2016-12-16 10:56:13	Snow-Man	crazyvasa: but the cost model is based on how expensive operations are with regard to CPU and I/O, primairly.
2016-12-16 10:56:20	◥	xzi11a (~robert@static-108-48-124-82.washdc.fios.verizon.net) has joined #postgresql
2016-12-16 10:56:27	Snow-Man	crazyvasa: With memory being more of a 'gating factor' for certain paths than actually costed into the model formally.
2016-12-16 10:56:30	crazyvasa	ningu, Snow-Man: What you guys say make sense to me ...
2016-12-16 10:56:31	◥	chucky_z (uid135747@gateway/web/irccloud.com/x-wtksiqglhxqnmifn) has joined #postgresql
2016-12-16 10:57:07	ningu	crazyvasa: see various *_cost params at https://www.postgresql.org/docs/current/static/runtime-config-query.html
2016-12-16 10:57:16	Snow-Man	ningu: You can't really relate cost values and actual time..
2016-12-16 10:57:32	crazyvasa	ningu, Snow-Man: Makes sense ..
2016-12-16 10:57:35	Snow-Man	just to be clear on that
2016-12-16 10:57:38	ningu	Snow-Man: I know, all I meant was cost is meant to indicate time and nothing else, afaik
2016-12-16 10:58:04	crazyvasa	ningu, Snow-Man: I understand that the cost is only time and nothing else ...
2016-12-16 10:58:07	◣	themsay (~themsay@188.29.164.95.threembb.co.uk) has quit (Ping timeout: 258 seconds)
2016-12-16 10:58:08	Snow-Man	ningu: ok. :)  Talking about some kind of 'linear' or whatever relationship doesn't make sense though, that's all I was trying to point out.
2016-12-16 10:58:35	◥	themsay (~themsay@188.29.164.95.threembb.co.uk) has joined #postgresql
2016-12-16 10:58:52	◣	themsay (~themsay@188.29.164.95.threembb.co.uk) has quit (Client Quit)
2016-12-16 10:59:06	crazyvasa	ningu, Snow-Man: But doesnt the optimizer evaluate different ways to get the data?
2016-12-16 10:59:11	◥	themsay (~themsay@188.29.164.95.threembb.co.uk) has joined #postgresql
2016-12-16 10:59:11	masterkorp	Any help please?
2016-12-16 10:59:14	crazyvasa	ningu, Snow-Man: at real time?
2016-12-16 10:59:40	Snow-Man	crazyvasa: yes, but it's going to eliminate paths very early on before they're even fully formed.
2016-12-16 10:59:50	◣	themsay (~themsay@188.29.164.95.threembb.co.uk) has quit (Client Quit)
2016-12-16 11:00:04	crazyvasa	Snow-Man: aahhh
2016-12-16 11:00:13	◥	davimore_ (~davimore@185.145.66.254) has joined #postgresql
2016-12-16 11:00:14	ningu	also, depending on the complexity of the query, there may only be a small number of possible plans
2016-12-16 11:00:20	crazyvasa	Snow-Man: that makes a lot of sense
2016-12-16 11:00:21	ningu	the more joins and other things you add, the more possible plans
2016-12-16 11:00:39	crazyvasa	ningu: Makes sense
2016-12-16 11:00:40	Snow-Man	there's no point actually spending the effort to flesh out every possible plan when you know a bunch of them are just going to suck early on
2016-12-16 11:01:11	ningu	Snow-Man: for a simple query like, say, SELECT * FROM foo where id = 10; is it possible to quantity how many plans are ever considered?
2016-12-16 11:01:12	crazyvasa	ningu, Snow-Man: Arent there plans that are close in cost or does it keep eliminating till it gets to the last one?
2016-12-16 11:01:21	Snow-Man	ningu: maybe with a debugger
2016-12-16 11:01:38	ningu	I would think the number of even possible plans is fairly small. like, 2-3
2016-12-16 11:01:39	◣	elmy (~elmy@43.243.20.132) has quit (Remote host closed the connection)
2016-12-16 11:01:48	◥	jberkus (~smuxi@c-98-246-109-153.hsd1.or.comcast.net) has joined #postgresql
2016-12-16 11:01:52	◥	themsay (~themsay@188.29.164.95.threembb.co.uk) has joined #postgresql
2016-12-16 11:01:58	◣	pablo_s (~pablo_s@206-248-188-234.dsl.teksavvy.com) has quit (Ping timeout: 258 seconds)
2016-12-16 11:02:02	Snow-Man	well, there's only a few ways to get data out of a table, yes.
2016-12-16 11:02:06	crazyvasa	ningu: The question is how do I know what the 2-3 are
2016-12-16 11:02:16	ningu	seq scan vs. index scan being the only ones I can think of, and if there's an index on id, you wouldn't do seq scan unless maybe the table has a very small number of rows
2016-12-16 11:02:21	Snow-Man	but looking at just the paths for a single relation query is pretty uninteresting.
2016-12-16 11:02:29	Snow-Man	uh
2016-12-16 11:02:38	crazyvasa	hmmm
2016-12-16 11:02:49	◣	Nizumzen (~Nizumzen@cpc2-reig5-2-0-cust667.6-3.cable.virginm.net) has quit (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
2016-12-16 11:02:50	Snow-Man	seq scan, bitmap scan, index scan, index-only scan, probably something else I'm not remembering offhand
2016-12-16 11:02:53	◣	davimore (~davimore@185.145.66.254) has quit (Ping timeout: 260 seconds)
2016-12-16 11:02:56	ningu	ok
2016-12-16 11:03:05	Snow-Man	oh
2016-12-16 11:03:08	Snow-Man	and it depends on how many and what kind of indexes you have
2016-12-16 11:03:15	Snow-Man	as a given column could have a bunch of indexes on it
2016-12-16 11:03:18	ningu	yeah, that's true
2016-12-16 11:03:22	crazyvasa	Snow-Man: makes sense
2016-12-16 11:03:23	◥	rpg (~rpg@sift.net) has joined #postgresql
2016-12-16 11:03:26	ningu	bitmap scan would come up even for a simple query of that sort?
2016-12-16 11:03:31	ningu	I can't remember what bitmap scan is used for
2016-12-16 11:03:32	Snow-Man	yes
2016-12-16 11:03:35	Snow-Man	bitmap heap scan
2016-12-16 11:03:46	ningu	I read about it but I've now forgotten :)
2016-12-16 11:03:56	Snow-Man	ningu: it's also known as a 'skipping scan'
2016-12-16 11:04:01	crazyvasa	So the optimizer is fundamentally different from MySQL .. where a lot of plans are generated and then one is selected...
2016-12-16 11:04:06	Snow-Man	really depends on how much of the table is going to be visited
2016-12-16 11:04:07	ningu	and yeah, index-only scan if it's select id from foo where id = 10; but presumably not select *
2016-12-16 11:04:19	crazyvasa	select * will get seq-scan
2016-12-16 11:04:21	Snow-Man	ningu: depends on how many columns there are. ;)
2016-12-16 11:04:23	◥	aboudreault_ (~alanb@ltvlpq0403w-lp140-02-174-93-156-208.dsl.bell.ca) has joined #postgresql
2016-12-16 11:04:30	ningu	Snow-Man: haha true
2016-12-16 11:04:40	◣	themsay (~themsay@188.29.164.95.threembb.co.uk) has quit (Client Quit)
2016-12-16 11:04:58	Snow-Man	crazyvasa: I don't know how mysql does it.  I seriously doubt they actually construct every possible plan completely and then choose one.
2016-12-16 11:05:10	crazyvasa	Snow-Man: ok ...
2016-12-16 11:05:16	ningu	yes, that seems like a bad idea for any db, since planning time adds to total execution time
2016-12-16 11:05:22	◥	themsay (~themsay@188.29.164.95.threembb.co.uk) has joined #postgresql
2016-12-16 11:05:22	Snow-Man	yup
2016-12-16 11:05:22	◥	mikec_64 (~mcavalier@rrcs-173-197-13-98.west.biz.rr.com) has joined #postgresql
2016-12-16 11:05:31	crazyvasa	ningu, Snow-Man: makes sense
2016-12-16 11:05:43	ningu	it might be useful for debugging purposes to have a mode where you can ask for all possible plans and costs
2016-12-16 11:05:50	ningu	but not for normal execution
2016-12-16 11:06:03	◣	themsay (~themsay@188.29.164.95.threembb.co.uk) has quit (Client Quit)
2016-12-16 11:06:04	ningu	I haven't seen anything like that for pg though
2016-12-16 11:06:12	Snow-Man	ugh, that's just a bunch of annoying and mostly useless code then tho.
2016-12-16 11:06:15	masterkorp	Guys is it possible to get the postgres-xc for postgres-95 ?
2016-12-16 11:06:22	ningu	Snow-Man: yeah, probably :)
2016-12-16 11:06:22	◥	alioui_ (~alioui_al@197.1.151.179) has joined #postgresql
2016-12-16 11:06:26	masterkorp	i just need the pg_resetxlog
2016-12-16 11:06:38	◥	ononotofu (~ononotofu@2605:e000:1309:c0da:441a:e255:16a8:1c32) has joined #postgresql
2016-12-16 11:06:46	ningu	Snow-Man: but for tweaking those *_cost params it would actually be useful so you have some clue how much they influence actual costs for actual queries
2016-12-16 11:06:50	Snow-Man	uh, pg_resetxlog is *very* likely to result in a corrupt system
2016-12-16 11:07:15	Snow-Man	ningu: not really.
2016-12-16 11:07:19	◥	Hink (~Hink@hink.me) has joined #postgresql
2016-12-16 11:08:58	Zr40	especially if you use pg_resetxlog from a completely different fork
2016-12-16 11:09:30	◥	david__ (~david@203-158-35-175.dyn.iinet.net.au) has joined #postgresql
2016-12-16 11:09:41	crazyvasa	ningu, Snow-Man: Thank you both ... The discussion helped..
2016-12-16 11:09:49	mikec_64	Anyone with experience using aws rds postgres and pgbouncer?  I would like to figure out a way to use auth_query even though pg_shadow in inaccessible.  Maybe something like maintaining a pgbouncer_pg_shadow table?
2016-12-16 11:10:05	◣	lluad (~lluad@204.11.227.194.static.etheric.net) has quit (Quit: lluad)
2016-12-16 11:10:46	◥	mah454 (~quassel@5.113.174.232) has joined #postgresql
2016-12-16 11:10:55	◣	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has quit (Quit: Lost terminal)
2016-12-16 11:11:11	◣	ononotofu (~ononotofu@2605:e000:1309:c0da:441a:e255:16a8:1c32) has quit (Ping timeout: 258 seconds)
2016-12-16 11:11:11	rightfold	Zr40: do backends restart periodically? Because most entries in pg_stat_activity are really empty :/
2016-12-16 11:11:17	◣	evnmar (~MongooseW@12.104.179.154) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-16 11:11:30	richsql	Snowman: is there a reason i would still have buffer hits after restarting the server?
2016-12-16 11:11:39	rightfold	Hmm, backend_start is two hours ago though
2016-12-16 11:11:39	Zr40	rightfold: they don't restart by themselves. One is started when a client connects, and when it disconnect it exits
2016-12-16 11:12:00	◣	Slashman (~Slash@cosium-152-18.fib.nerim.net) has quit (Quit: Leaving)
2016-12-16 11:12:14	rightfold	Zr40: ooh. we don't use connection pooling
2016-12-16 11:13:39	◥	themsay (~themsay@188.29.164.95.threembb.co.uk) has joined #postgresql
2016-12-16 11:14:21	rightfold	so I have to run the pg_stat_activity query at exactly a time when someone does a request
2016-12-16 11:14:33	◣	themsay (~themsay@188.29.164.95.threembb.co.uk) has quit (Client Quit)
2016-12-16 11:15:26	masterkorp	Snow-Man: well, i need to get this backup running, do you have any more ideas??
2016-12-16 11:15:30	Snow-Man	richsql: eh?  probably
2016-12-16 11:15:32	◥	dbh613 (~dbh613@cpe-104-173-225-132.socal.res.rr.com) has joined #postgresql
2016-12-16 11:15:45	◥	themsay (~themsay@188.29.164.95.threembb.co.uk) has joined #postgresql
2016-12-16 11:15:53	Snow-Man	masterkorp: lots of ideas, but not time to spend going through them really, sorry.
2016-12-16 11:16:29	Zr40	richsql: if the query needs to read the same block twice, the second time is always registered as a hit
2016-12-16 11:16:32	masterkorp	Snow-Man: please
2016-12-16 11:16:36	masterkorp	https://www.postgresql.org/message-id/64A7F4285BB8D8449430A4A467A363334C1AC9%40CORP-CLT-EXB04.ds
2016-12-16 11:16:40	masterkorp	i need to recover this backup
2016-12-16 11:17:59	Snow-Man	masterkorp: If it's that critical, you might want to look into the PG professional services that places offer.
2016-12-16 11:18:11	richsql	Zr40: ok, so sorry for repeating but can postgres performantly (<1min) handle large random id lookups where the table can't fit in memory and set of ids can be in the hundred of thousands?
2016-12-16 11:18:22	Snow-Man	someone might come along who can spend time to help too, but that may take a while, heh.
2016-12-16 11:19:35	Zr40	richsql: in a single query?
2016-12-16 11:19:42	◣	kuSuSE (~khada@pool-98-109-119-45.nwrknj.fios.verizon.net) has quit (Quit: Konversation terminated!)
2016-12-16 11:19:54	richsql	Zr40: yes
2016-12-16 11:20:47	◥	Nouyan (~Nouyan@151.245.129.13) has joined #postgresql
2016-12-16 11:21:15	Snow-Man	richsql: If the I/O is fast enough, I don't see why it couldn't.
2016-12-16 11:21:23	◣	mah454 (~quassel@5.113.174.232) has quit (Remote host closed the connection)
2016-12-16 11:21:27	◣	Chepra (~chepra@summer.c137.eu) has quit (Quit: WeeChat 1.6)
2016-12-16 11:21:57	◥	mah454 (~quassel@5.113.174.232) has joined #postgresql
2016-12-16 11:21:59	◣	Nouyan (~Nouyan@151.245.129.13) has left #postgresql
2016-12-16 11:22:14	Snow-Man	You might be better off using a temp table that you analyze tho.
2016-12-16 11:22:18	◥	ramfjord (~tramfjord@12.202.171.242) has joined #postgresql
2016-12-16 11:22:29	◣	TMM (~hp@fsf/member/pdpc.professional.tmm) has quit (Quit: Ex-Chat)
2016-12-16 11:22:52	Zr40	masterkorp: if you want help, perhaps you should describe your problem
2016-12-16 11:22:52	Snow-Man	Shouldn't be that big of an issue.
2016-12-16 11:23:24	◣	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has quit (Read error: Connection reset by peer)
2016-12-16 11:23:25	Zr40	masterkorp: if you did before I apologize, but it's not in my irc buffer
2016-12-16 11:23:40	◥	rajivr_ (~rajivr@103.205.218.222) has joined #postgresql
2016-12-16 11:23:58	◥	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has joined #postgresql
2016-12-16 11:24:01	richsql	Snow-Man: i have 6000 IOPS on AWS though I don't think a single user sees that, I saw it pushing 1100 iops on a query.  effective_io_concurrency set at 500.
2016-12-16 11:24:05	◥	Chepra (~chepra@summer.c137.eu) has joined #postgresql
2016-12-16 11:24:16	◥	wsieroci (~wsieroci@095160155020.dynamic-ww-12.vectranet.pl) has joined #postgresql
2016-12-16 11:24:17	Snow-Man	ok
2016-12-16 11:24:17	◣	Neo-- (~neo@BSN-142-62-172.dynamic.siol.net) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-16 11:24:55	johnkeates	i'm recovering 2 tables, with both tables having invalid attribute numbers. pg_attributes does have a atrium with that attribute number, so i'm somewhat confused as to how it would be invalid.. any ideas?
2016-12-16 11:24:55	◥	TMM (~hp@fsf/member/pdpc.professional.tmm) has joined #postgresql
2016-12-16 11:25:03	◣	fordfrog (~fordfrog@gentoo/developer/fordfrog) has quit (Quit: Leaving)
2016-12-16 11:26:29	◥	irqq (~chatzilla@afdc16.neoplus.adsl.tpnet.pl) has joined #postgresql
2016-12-16 11:26:32	◣	rajivr (~rajivr@103.205.218.235) has quit (Ping timeout: 265 seconds)
2016-12-16 11:27:06	richsql	Snow-Man: using a temp table was giving me a nested loop with a seqscan and indexscan.  Doing a ANY = (ids...) yielded a single Bitmap Heap Scan with indexscan disabled
2016-12-16 11:27:19	Snow-Man	richsql: not sure off-hand, but if you really think the problem is that there's only a single thread running, you could try out 9.6's parallel query
2016-12-16 11:27:32	Snow-Man	richsql: so, uh, use whichever was faster?
2016-12-16 11:27:57	Snow-Man	and a bitmap heap scan is going to have a bitmap index scan under it..
2016-12-16 11:28:11	Snow-Man	you might want to increase work_mem in that case tho, otherwise the bitmap could be lossy
2016-12-16 11:28:16	richsql	but takes advantage of high effective_io_concurrency
2016-12-16 11:28:39	◣	inkjetunito (~benny@unaffiliated/inkjetunit) has quit (Quit: q)
2016-12-16 11:29:48	◣	uncleyear (~ian@unaffiliated/uncleyear) has quit (Disconnected by services)
2016-12-16 11:29:55	◥	uncleyear (~ian@unaffiliated/uncleyear) has joined #postgresql
2016-12-16 11:29:58	◣	mah454 (~quassel@5.113.174.232) has quit (Ping timeout: 258 seconds)
2016-12-16 11:30:15	◥	mah454 (~quassel@178.33.187.205) has joined #postgresql
2016-12-16 11:30:17	◣	johnkeates (~johnkeate@86.92.128.79) has quit (Quit: Leaving)
2016-12-16 11:30:49	Snow-Man	I wonder how smart we are there
2016-12-16 11:31:13	Snow-Man	I mean, there's no point in prefetching a bunch of blocks that we aren't gonna use
2016-12-16 11:31:15	mikec_64	is there an easy way to use a superadmin to restore a database but have all the objects owned by another role?
2016-12-16 11:31:47	◣	dsantiago (~dsantiago@cpe-104-175-193-69.socal.res.rr.com) has quit (Quit: Computer has gone to sleep.)
2016-12-16 11:31:52	Snow-Man	Not sure if the prefetch stuff considers that and lseek's to the next actual set of blocks we want or not.  Hopefully it does, heh.
2016-12-16 11:31:57	▷	Snow-Man shrugs.
2016-12-16 11:33:38	◣	amathew (~amathew@208.185.185.131) has quit (Ping timeout: 264 seconds)
2016-12-16 13:13:26	⚡	irc: disconnected from server
2016-12-16 13:13:49	◥	boon (~david@66.195.46.242) has joined #postgresql
2016-12-16 13:13:49	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-16 13:13:49	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-16 13:13:49	⚡	Channel #postgresql: 1028 nicks (0 ops, 0 voices, 1028 normals)
2016-12-16 13:13:49	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-16 13:13:51	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-16 13:14:02	Snow-Man	hrmmmm.  I dunno.
2016-12-16 13:14:03	xocolatl	tsvectors are dictionary-specific
2016-12-16 13:14:35	Snow-Man	I'd think it could work but you'd need different indexes maybe?  something like that?
2016-12-16 13:14:36	xocolatl	so you could use the simple dictionary for all that, but you're giving up stemming
2016-12-16 13:15:05	◥	massudaw (~massudaw@191.33.196.30) has joined #postgresql
2016-12-16 13:15:53	◣	_djbkd (~djbkd@135.84.132.21) has quit (Remote host closed the connection)
2016-12-16 13:16:20	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2016-12-16 13:16:49	◣	_djbkd (~djbkd@135.84.132.21) has quit (Read error: Connection reset by peer)
2016-12-16 13:16:54	◣	dionysus69 (~Thunderbi@unaffiliated/dionysus69) has quit (Ping timeout: 258 seconds)
2016-12-16 13:17:15	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2016-12-16 13:17:30	◣	ReptilianBrain (~Reptilian@224-30.mg.cgocable.ca) has quit (Quit: Leaving)
2016-12-16 13:17:58	Papierkorb	xocolatl: Mh, stemming would be nice. The strings are names though, so I'm not sure how much I'll lose
2016-12-16 13:18:21	◣	XofP (~XofP@sfosj0215mups301.wiline.com) has quit (Quit: XofP)
2016-12-16 13:20:04	◣	gleu (~guillaume@LFbn-1-8419-93.w81-254.abo.wanadoo.fr) has quit (Quit: gleu)
2016-12-16 13:22:50	◣	massudaw (~massudaw@191.33.196.30) has quit (Ping timeout: 264 seconds)
2016-12-16 13:22:56	◣	david__ (~david@203-158-35-175.dyn.iinet.net.au) has quit (Remote host closed the connection)
2016-12-16 13:23:33	buu	Papierkorb: can you just use that as a literal json structure?
2016-12-16 13:23:50	Papierkorb	buu: ?
2016-12-16 13:24:28	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2016-12-16 13:24:28	Papierkorb	Btw it's the wikidata.org data if anyone ever did something with it
2016-12-16 13:24:29	buu	Papierkorb: {en:[foo,bar]...}
2016-12-16 13:24:41	Papierkorb	That's not valid JSON
2016-12-16 13:24:48	buu	eh
2016-12-16 13:25:01	buu	you mean my example code?
2016-12-16 13:25:02	◥	david__ (~david@203-158-35-175.dyn.iinet.net.au) has joined #postgresql
2016-12-16 13:25:04	Papierkorb	Yes
2016-12-16 13:25:08	buu	... ok anyways
2016-12-16 13:25:18	buu	I'm asking why you can't just index that structure instead of using tsvector
2016-12-16 13:25:39	◥	wildlander (~wildlande@244.83-213-162.dynamic.clientes.euskaltel.es) has joined #postgresql
2016-12-16 13:25:44	◣	wildlander (~wildlande@244.83-213-162.dynamic.clientes.euskaltel.es) has quit (Changing host)
2016-12-16 13:25:45	◥	wildlander (~wildlande@unaffiliated/wildlander) has joined #postgresql
2016-12-16 13:26:56	◣	vuoto (~vuoto@80-71-135-9.u.parknet.dk) has quit (Remote host closed the connection)
2016-12-16 13:26:56	Papierkorb	I want to have a fast text search, while being clever enough to find "berlin government" when searching for "berlin"
2016-12-16 13:26:56	◣	begriffs (~begriffs@104.156.228.183) has quit (Quit: Leaving...)
2016-12-16 13:26:56	◣	howitdo (~howitdo@unaffiliated/howitdo) has quit (Ping timeout: 258 seconds)
2016-12-16 13:27:15	Papierkorb	Without further testing I guess a LIKE would be horribly slow, and a plain = test not "smart" enough
2016-12-16 13:27:44	◥	nettoweb (~nettoweb@2804:7f5:f180:2648::2) has joined #postgresql
2016-12-16 13:28:48	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Ping timeout: 245 seconds)
2016-12-16 13:28:53	◣	dtcrshr (~datacrush@unaffiliated/datacrusher) has quit (Quit: Saindo)
2016-12-16 13:29:36	⚡	lavalike_ is now known as lavalike
2016-12-16 13:29:54	◣	mikec_64 (~mcavalier@rrcs-173-197-13-98.west.biz.rr.com) has quit (Read error: No route to host)
2016-12-16 13:30:18	◥	mikec_64 (~mcavalier@rrcs-173-197-13-98.west.biz.rr.com) has joined #postgresql
2016-12-16 13:30:49	◣	_djbkd (~djbkd@135.84.132.21) has quit (Remote host closed the connection)
2016-12-16 13:30:56	◣	yieldsfalsehood (~elliot@phl-nat.afilias.info) has quit (Remote host closed the connection)
2016-12-16 13:31:01	◣	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has quit (Quit: Ex-Chat)
2016-12-16 13:31:16	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2016-12-16 13:31:17	◥	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has joined #postgresql
2016-12-16 13:31:42	◣	dbh613 (~dbh613@cpe-104-173-225-132.socal.res.rr.com) has quit
2016-12-16 13:32:38	◥	dsantiago (~dsantiago@40.141.55.70) has joined #postgresql
2016-12-16 13:32:43	◥	howitdo (~howitdo@unaffiliated/howitdo) has joined #postgresql
2016-12-16 13:32:45	◣	_djbkd (~djbkd@135.84.132.21) has quit (Read error: Connection reset by peer)
2016-12-16 13:33:04	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2016-12-16 13:33:16	◥	elmy (~elmy@43.243.20.132) has joined #postgresql
2016-12-16 13:34:02	ningu	Papierkorb: as I understand it, indexes can be used when you search for something from the beginning, so 'Berlin%' could use the index but '%Berlin' could not
2016-12-16 13:34:04	◥	linuxhiker1 (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2016-12-16 13:34:07	ningu	I mean a regular btree index
2016-12-16 13:34:16	◣	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has quit (Remote host closed the connection)
2016-12-16 13:34:23	ningu	there are also ngram indexes, full text indexes, and whatnot
2016-12-16 13:34:36	◥	neoncontrails (~neoncontr@76-196-232-33.lightspeed.sndgca.sbcglobal.net) has joined #postgresql
2016-12-16 13:34:50	ningu	someone who knows the details better can elaborate or explain
2016-12-16 13:35:22	◣	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has quit (Remote host closed the connection)
2016-12-16 13:35:57	◥	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has joined #postgresql
2016-12-16 13:36:20	◣	dsantiago (~dsantiago@40.141.55.70) has quit (Client Quit)
2016-12-16 13:37:09	◥	jccn (~jccn@184.67.245.254) has joined #postgresql
2016-12-16 13:37:13	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Remote host closed the connection)
2016-12-16 13:40:17	◣	nanga (~nanga@unaffiliated/m0f0x) has quit (Ping timeout: 258 seconds)
2016-12-16 13:40:21	◣	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has quit (Ping timeout: 248 seconds)
2016-12-16 13:40:40	◣	AdamTheExile (~textual@ps-relay-server.tolland.k12.ct.us) has quit (Ping timeout: 258 seconds)
2016-12-16 13:41:25	◥	nanga (~nanga@191.96.4.30) has joined #postgresql
2016-12-16 13:41:43	◣	fguillot (~fguillot@2607:f748:9:1678:1434:e03a:2065:4834) has quit (Quit: Textual IRC Client: www.textualapp.com)
2016-12-16 13:42:24	◣	wsieroci (~wsieroci@095160155020.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2016-12-16 13:44:26	◣	Maxel_ (~Maxel@50-241-60-122-static.hfc.comcastbusiness.net) has quit (Ping timeout: 250 seconds)
2016-12-16 13:48:51	◥	dsantiago (~dsantiago@40.141.55.70) has joined #postgresql
2016-12-16 13:49:18	◣	grayhem__ (~grayhemp_@12.33.220.130) has quit (Remote host closed the connection)
2016-12-16 13:49:53	◥	grayhemp_wh (~grayhemp_@12.33.220.130) has joined #postgresql
2016-12-16 13:50:03	◣	richsql (c7f4d669@gateway/web/freenode/ip.199.244.214.105) has quit (Quit: Page closed)
2016-12-16 13:50:25	◣	dsantiago (~dsantiago@40.141.55.70) has quit (Client Quit)
2016-12-16 13:51:38	◣	nanga (~nanga@191.96.4.30) has quit (Quit: Dang!)
2016-12-16 13:52:39	◥	ascarter (~ascarter@c-24-16-31-112.hsd1.wa.comcast.net) has joined #postgresql
2016-12-16 13:54:24	◣	elmy (~elmy@43.243.20.132) has quit (Ping timeout: 250 seconds)
2016-12-16 13:54:38	◣	Lordz (~Adium@186.215.116.176) has quit (Quit: Leaving.)
2016-12-16 13:56:02	◥	Lordz (~Adium@186.215.116.176) has joined #postgresql
2016-12-16 13:57:06	◥	dsantiago (~dsantiago@40.141.55.70) has joined #postgresql
2016-12-16 13:57:13	◣	dsantiago (~dsantiago@40.141.55.70) has quit (Client Quit)
2016-12-16 13:57:46	◣	Lordz (~Adium@186.215.116.176) has quit (Client Quit)
2016-12-16 13:58:38	◥	lluad (~lluad@204.11.227.194.static.etheric.net) has joined #postgresql
2016-12-16 14:00:40	◥	dsantiago (~dsantiago@40.141.55.70) has joined #postgresql
2016-12-16 14:01:02	◥	ash_workz (~chatzilla@2601:681:300:30d0:8c3b:f050:13ed:b9c1) has joined #postgresql
2016-12-16 14:01:18	◣	neoncontrails (~neoncontr@76-196-232-33.lightspeed.sndgca.sbcglobal.net) has quit (Remote host closed the connection)
2016-12-16 14:01:56	◥	neoncontrails (~neoncontr@76-196-232-33.lightspeed.sndgca.sbcglobal.net) has joined #postgresql
2016-12-16 14:03:34	◣	david__ (~david@203-158-35-175.dyn.iinet.net.au) has quit (Remote host closed the connection)
2016-12-16 14:04:00	◥	david__ (~david@203-158-35-175.dyn.iinet.net.au) has joined #postgresql
2016-12-16 14:04:59	◥	ramfjord_ (~tramfjord@12.202.171.242) has joined #postgresql
2016-12-16 14:06:12	◣	XxElendiLxX (~elendil@unaffiliated/xxelendilxx) has quit (Ping timeout: 246 seconds)
2016-12-16 14:06:44	◣	linuxhiker1 (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Ping timeout: 258 seconds)
2016-12-16 14:07:41	◣	ramfjord (~tramfjord@12.202.171.242) has quit (Ping timeout: 260 seconds)
2016-12-16 14:08:13	◣	TechnoCrunch (~Tech@101.100.137.146) has quit (Read error: Connection reset by peer)
2016-12-16 14:10:22	◣	__Yiota (~textual@2607:fea8:3c9f:ffe9:583c:45c9:f849:248a) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-16 14:11:32	◣	bberry (uid126853@gateway/web/irccloud.com/x-xqtsxqhxtkuojqny) has quit (Quit: Connection closed for inactivity)
2016-12-16 14:11:43	◣	cadams (~clintonad@portal.ateb.com) has quit (Quit: leaving)
2016-12-16 14:13:08	◥	bronson (~bronson@142-254-109-229.dsl.dynamic.sonic.net) has joined #postgresql
2016-12-16 14:15:59	◥	elmy (~elmy@43.243.20.132) has joined #postgresql
2016-12-16 14:17:04	◥	jabakobob (~textual@cpe90-146-57-147.liwest.at) has joined #postgresql
2016-12-16 14:18:21	◣	mizu_no_oto_work (~textual@c-50-177-170-9.hsd1.ma.comcast.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-16 14:18:21	◣	bronson (~bronson@142-254-109-229.dsl.dynamic.sonic.net) has quit (Ping timeout: 260 seconds)
2016-12-16 14:18:21	◥	realg0ld (9315a005@gateway/web/freenode/ip.147.21.160.5) has joined #postgresql
2016-12-16 14:18:21	◣	sanjeev_ (~sanjeev@103.196.79.204) has quit (Ping timeout: 246 seconds)
2016-12-16 14:18:44	realg0ld	Hello all, hope your Friday is going well.
2016-12-16 14:19:07	realg0ld	I was wondering if there is any kind of limitations on the size of a string to be stored in postgres
2016-12-16 14:19:30	kurufu	about 1GB
2016-12-16 14:20:49	realg0ld	oh damn, will performance start to suffer at any point?
2016-12-16 14:20:56	⚡	KellerKatze is now known as KellerFuchs
2016-12-16 14:21:32	kurufu	i think the cutoffs are 128bytes for it being a "short string", then some cutoff before it gets stored in toast and compressed.
2016-12-16 14:21:41	lluad	realg0ld: Depends on exactly what you're doing.
2016-12-16 14:22:22	◥	sausage_factory (~priidu@unaffiliated/priidu) has joined #postgresql
2016-12-16 14:22:25	kurufu	true, getting it put in toast could be a perf bonus!
2016-12-16 14:22:31	lluad	If you're just storing and retrieving it, no problem. If you're searching based on the contents of it you'll need to index it appropriately.
2016-12-16 14:22:58	◣	alioui_ (~alioui_al@197.1.151.179) has quit (Quit: alioui_)
2016-12-16 14:23:01	lluad	For a lot of uses storing the big blob of data on the filesystem and keeping just the metadata about it in the database can be a better approach.
2016-12-16 14:23:03	realg0ld	ok so I have a 7,000 line flat text mapping file, say each line has 30 chars.  I'm gonna read all those lines into a string or JSON and store it in a single row
2016-12-16 14:23:06	◣	pigeon1 (~pigeon@P5106.pallas.wh.tu-darmstadt.de) has left #postgresql ("WeeChat 1.5")
2016-12-16 14:23:33	◣	blackwraith (~priidu@unaffiliated/priidu) has quit (Ping timeout: 248 seconds)
2016-12-16 14:23:37	◣	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has quit (Ping timeout: 240 seconds)
2016-12-16 14:24:22	kevinburke	hi
2016-12-16 14:24:25	◥	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has joined #postgresql
2016-12-16 14:24:30	◣	iasai (~iasai@cpe-94-253-178-95.zg.cable.xnet.hr) has quit (Ping timeout: 256 seconds)
2016-12-16 14:24:38	kevinburke	I have a 40gb table and adding new indexes is really slow, even with CREATE INDEX CONCURRENTLY
2016-12-16 14:24:42	◣	artige (~artige@rhythm.derphost.com) has quit (Quit: Left to eat corn)
2016-12-16 14:24:43	realg0ld	I don't need to do ANY kind of querying or manipulation of that data until I get the JSON into my front-end client app
2016-12-16 14:24:49	kevinburke	any tips/resources I should read to make index addition go faster?
2016-12-16 14:24:49	◥	artige (artige@2604:180::eb4e:753e) has joined #postgresql
2016-12-16 14:25:11	lluad	kevinburke: Increase work mem.
2016-12-16 14:25:21	lluad	Is this part of a bulk load, or adding indexes to an existing table?
2016-12-16 14:25:26	kevinburke	Work mem or maintenance_work_mem?
2016-12-16 14:25:30	kevinburke	Adding indexes to an existing table.
2016-12-16 14:25:33	◥	simonlast (36441bcf@gateway/web/freenode/ip.54.68.27.207) has joined #postgresql
2016-12-16 14:26:19	lluad	I'd bump up maintenance_work_mem a lot (like gigabytes) and see if that speeds things up.
2016-12-16 14:26:45	lluad	I believe, though, that create index concurrently can be slower than create index - the tradeoff being it doesn't lock you out of the table as it runs.
2016-12-16 14:26:46	kurufu	also create index concurrently runs slower than without concurrently. But without concurrently your table is write locked(right?)
2016-12-16 14:26:59	kevinburke	We set maintenance_work_mem to 6GB and adding an index was still taking an hour on RDS
2016-12-16 14:27:02	◣	david__ (~david@203-158-35-175.dyn.iinet.net.au) has quit (Remote host closed the connection)
2016-12-16 14:27:10	lluad	What data type are you indexing?
2016-12-16 14:27:10	kurufu	what kind of index?
2016-12-16 14:27:23	kevinburke	We're trying to add a partial index to a JSONB column
2016-12-16 14:27:42	artige	Hi everyone. I'm trying to write a query to lookup tickets and ticket responses in the same query and I'm having trouble. Basically, I want to be able to find the ticket by the unique ID that I use as the URL slug, and retrieve both data from the ticket table (like the initial complaint, the user ID of who made it, etc) and all of the responses to the ticket ordered by date
2016-12-16 14:27:48	kevinburke	CREATE INDEX CONCURRENTLY blocks_expr_idx5 ON blocks USING btree (((data ->> 'email'::text))) WHERE ((data ->> 'type'::text) = 'user'::text);
2016-12-16 14:28:09	◣	StomproJ (~stompro@mail.larl.org) has quit (Quit: Leaving)
2016-12-16 14:28:15	artige	The problem I'm having is the ordering part for the responses
2016-12-16 14:28:28	lluad	kevinburke: Are bottlenecked on CPU or IO, can you tell?
2016-12-16 14:28:37	kevinburke	No the CPU load on the machine is about 5%
2016-12-16 14:28:49	kevinburke	(as far as we can tell, observing the metrics in the RDS portal)
2016-12-16 14:28:51	lluad	OK, so no need to worry about collation, then.
2016-12-16 14:29:01	◥	cartan (~cartan@p4FEEAB87.dip0.t-ipconnect.de) has joined #postgresql
2016-12-16 14:29:28	lluad	I don't think there's any magic bullet beyond what you have, then.
2016-12-16 14:29:56	kevinburke	Ok
2016-12-16 14:30:14	◥	MrXXIV_ (~MrXXIV@12.39.195.132) has joined #postgresql
2016-12-16 14:30:24	kevinburke	out of curiosity, how long would you guess index creation would take? we've never seen it finish, but longest we ran it for was 75 minutse.
2016-12-16 14:30:39	◥	bfrog (~tburdick@unaffiliated/submersive) has joined #postgresql
2016-12-16 14:31:31	lluad	I don't have any direct experience with RDS, so don't know how crappy it is compared to a real server. That still seems very slow to me, though.
2016-12-16 14:32:25	kevinburke	ok
2016-12-16 14:33:09	lluad	You've read the concurrently caveats, I presume?
2016-12-16 14:33:39	◥	davimore__ (~davimore@185.145.66.254) has joined #postgresql
2016-12-16 14:33:50	lluad	Only one build at a time, multiple scans of the table, and it needs to wait for other operations to complete before it finishes.
2016-12-16 14:33:54	◣	ascarter (~ascarter@c-24-16-31-112.hsd1.wa.comcast.net) has quit (Quit: Textual IRC Client: www.textualapp.com)
2016-12-16 14:34:13	◣	andlabs (~pietro@adfb395a.cst.lightpath.net) has quit (Ping timeout: 248 seconds)
2016-12-16 14:34:30	lluad	If you had a long running transaction (even if it' open and idle) the build would get stuck behind that.
2016-12-16 14:34:30	simonlast	Hey there, I'm with kevinburke :)
2016-12-16 14:34:38	▷	lluad waves
2016-12-16 14:34:44	kevinburke	fair enough, we'll double check
2016-12-16 14:34:44	simonlast	Are there other parameters other than maintenance_work_mem that we can tweak
2016-12-16 14:34:55	simonlast	that are related to index creation
2016-12-16 14:35:03	◣	sjoos (~jlammrs@a111225.upc-a.chello.nl) has quit (Quit: Leaving)
2016-12-16 14:35:08	lluad	Not that you'd want to use on an existing database, really.
2016-12-16 14:35:27	◣	TraceEv (~TraceEv@mail.eclipse-online.com) has quit (Quit: My Mac has gone to sleep. ZZZzzz…)
2016-12-16 14:35:50	lluad	I'm no expert at this end of things, so beyond suggesting you look at the process and see if it's stuck behind something else you've probably used up my useful knowledge.
2016-12-16 14:36:24	mikec_64	kevinburke, if needed you can scale the res instance up to a better performance type then scale it back down
2016-12-16 14:36:29	◣	davimore_ (~davimore@185.145.66.254) has quit (Ping timeout: 265 seconds)
2016-12-16 14:37:00	lluad	If you have a development / staging copy of the DB I might run a create index and a create index concurrently there on an otherwise idle database to give you some idea of what a reasonable length of time is.
2016-12-16 14:37:48	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2016-12-16 14:37:48	simonlast	That's what we are doing now. We tried creating the index without concurrently and waited an hour before quitting it
2016-12-16 14:37:59	◣	nivag (~gavin@121.99.202.67) has quit (Remote host closed the connection)
2016-12-16 14:39:21	lluad	That seems like something isn't right. I don't think RDS gives you any visibility into what the VM is actually doing, though, so I'm not sure where you'd start on diagnosing it.
2016-12-16 14:40:41	kevinburke	yeah, we get metrics on CPU/RAM/storage and read/write iops
2016-12-16 14:41:00	◥	mikec_64_ (~mcavalier@rrcs-173-197-13-98.west.biz.rr.com) has joined #postgresql
2016-12-16 14:41:20	lluad	I'm not sure how much impact the multi-az and backups stuff of RDS would have on an index build, but I know they advise turning that off for bulk loads.
2016-12-16 14:41:59	◣	mikec_64_ (~mcavalier@rrcs-173-197-13-98.west.biz.rr.com) has quit (Client Quit)
2016-12-16 14:42:01	IonutVan_	any user of flyway?
2016-12-16 14:42:46	◣	puchacz (~puchacz@cpc96904-walt25-2-0-cust679.13-2.cable.virginm.net) has quit (Quit: Konversation terminated!)
2016-12-16 14:42:55	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 252 seconds)
2016-12-16 14:43:34	◥	johnkeates (~johnkeate@86.92.128.79) has joined #postgresql
2016-12-16 14:43:48	◣	mikec_64 (~mcavalier@rrcs-173-197-13-98.west.biz.rr.com) has quit (Ping timeout: 250 seconds)
2016-12-16 14:43:58	johnkeates	does someone know how to repair invalid attribute number errors?
2016-12-16 14:44:13	◣	ygeLN (~zeMMRTTso@cpe-104-34-38-136.socal.res.rr.com) has quit (Ping timeout: 245 seconds)
2016-12-16 14:47:33	◥	ascarter (~ascarter@c-24-16-31-112.hsd1.wa.comcast.net) has joined #postgresql
2016-12-16 14:48:04	◣	KnownSyntax (~KnownSynt@unaffiliated/knownsyntax) has quit (Ping timeout: 252 seconds)
2016-12-16 14:48:30	◣	markus3 (~markus@193.40.178.118) has quit (Quit: leaving)
2016-12-16 14:49:16	simonlast	do you know of any ways we could estimate the progress of a create index?
2016-12-16 14:49:32	◥	KnownSyntax (~KnownSynt@unaffiliated/knownsyntax) has joined #postgresql
2016-12-16 14:49:54	◥	nivag (~gavin@121.99.202.67) has joined #postgresql
2016-12-16 14:50:06	◥	ygeLN (~zeMMRTTso@cpe-104-34-38-136.socal.res.rr.com) has joined #postgresql
2016-12-16 14:50:13	◣	cJIaB (~cJIaB@178.220.190.5) has quit (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
2016-12-16 14:52:43	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2016-12-16 14:53:02	kevinburke	should it be faster to create a partial index?
2016-12-16 14:53:23	kevinburke	say there are only a few thousand rows out of millions that match the index? or is the slow part the scan
2016-12-16 14:54:32	◣	elmy (~elmy@43.243.20.132) has quit (Remote host closed the connection)
2016-12-16 14:54:32	◥	nepictaz (~nepiktaz@cE33C5AC1.dhcp.as2116.net) has joined #postgresql
2016-12-16 14:56:14	◣	Human_G33k (~Human_G33@62.147.242.8) has quit (Ping timeout: 256 seconds)
2016-12-16 14:56:37	◥	andlabs (~pietro@ool-44c669cd.dyn.optonline.net) has joined #postgresql
2016-12-16 14:56:37	lluad	It's going to have to scan the whole table twice, and build an index on the matching rows.
2016-12-16 14:57:11	lluad	So I'd expect a partial index on just a few thousand rows to be pretty fast to create, roughly 2x the time to seq scan the table.
2016-12-16 14:57:35	ningu	lluad: the time to write the index is also relevant, isn't it?
2016-12-16 14:57:45	lluad	simonlast: Not on RDS. On a real server you can peek at the process and the tables to get some vague idea, but even there it's a bit opaque.
2016-12-16 14:57:49	ningu	oh, if just a few thousand rows, then not much time for that
2016-12-16 14:57:52	◣	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-16 14:57:54	lluad	ningu: Sure. But ... yeah, that. :)
2016-12-16 14:58:01	◥	__Yiota (~textual@2607:fea8:56e0:407:4d67:1226:ee7a:7b27) has joined #postgresql
2016-12-16 14:58:30	ningu	lluad: for large tables, how does it work, is the index ever all in memory/swap or is it just written out in reasonable chunks that can fit in memory?
2016-12-16 14:58:35	lluad	You could look at pg_locks to see if the create index command is stuck behind something.
2016-12-16 14:58:46	◣	evnmar (~MongooseW@12.104.179.154) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-16 14:59:14	kevinburke	lluad: thanks very much for your help!
2016-12-16 14:59:56	◥	evnmar (~MongooseW@12.104.179.154) has joined #postgresql
2016-12-16 15:00:00	lluad	ningu: For bulk index builds the main cost is sorting the data, before creating the index from the sorted data. If it'll fit in maintenance_work_mem it'll sort it in-memory. If not, it'll do a multi-pass sort on disk (using an algorithm that treats the intermediate data as virtual tapes, so it reads and writes the temp files sequentially).
2016-12-16 15:00:08	◣	_djbkd (~djbkd@135.84.132.21) has quit (Quit: My people need me...)
2016-12-16 15:00:13	lluad	kevinburke: Wish I could have helped more.
2016-12-16 15:00:48	ningu	lluad: ah right. so basically very similar to a query requiring a large sort, that will go to disk too if it won't fit in work_mem
2016-12-16 15:00:58	◥	XofP (~XofP@sfosj0215mups301.wiline.com) has joined #postgresql
2016-12-16 15:01:14	lluad	kevinburke: You might want to ask on the -general mailing list. You'll get a broader audience there, including some who know RDS and some who know index creation better than I do.
2016-12-16 15:01:21	◣	KnownSyntax (~KnownSynt@unaffiliated/knownsyntax) has quit (Ping timeout: 260 seconds)
2016-12-16 15:01:38	lluad	ningu: Exactly the same. There's some overhead for the actual index creation too, but it's mostly the sort I think.
2016-12-16 15:01:42	kevinburke	we ran it on dev which has about 300k rows, our best estimate for index creation is 6-7 hours right now
2016-12-16 15:02:17	lluad	And it uses maintenance_work_mem, rather than work_mem, as it assumes it'll only be doing it one at a time (or if not, it's your fault).
2016-12-16 15:02:49	◥	KnownSyntax (~KnownSynt@unaffiliated/knownsyntax) has joined #postgresql
2016-12-16 15:02:56	ningu	lluad: yeah
2016-12-16 15:02:57	lluad	That seems really dubious preformance. Is it a data-set you can share? It'd need anonymizing, I guess, if it has emails and other PII in it.
2016-12-16 15:03:24	◥	merzo (~merzo@93-60-92-178.pool.ukrtel.net) has joined #postgresql
2016-12-16 15:03:37	ningu	yeah, 300k rows should be indexed very quickly
2016-12-16 15:03:45	◣	orospakr (~orospakr@207.236.193.2) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-16 15:03:50	ningu	like, seconds or low number of minutes
2016-12-16 15:03:53	lluad	But if the index creation takes a couple of minutes on a laptop that'd be a useful datapoint.
2016-12-16 15:05:53	◣	boson (~boson@cpe-174-100-64-46.neo.res.rr.com) has left #postgresql
2016-12-16 15:08:53	◥	Human_G33k (~Human_G33@62.147.242.8) has joined #postgresql
2016-12-16 15:08:57	◣	merzo (~merzo@93-60-92-178.pool.ukrtel.net) has quit (Ping timeout: 252 seconds)
2016-12-16 15:10:04	◣	amathew (~amathew@208.185.185.131) has quit (Ping timeout: 250 seconds)
2016-12-16 15:10:19	◣	zivester (~zivester@38.104.66.138) has quit (Remote host closed the connection)
2016-12-16 15:10:22	◥	merzo (~merzo@93-60-92-178.pool.ukrtel.net) has joined #postgresql
2016-12-16 15:10:27	simonlast	can postgres create multiple indexes at once using concurrently
2016-12-16 15:10:28	simonlast	?
2016-12-16 15:10:34	simonlast	(on the same table)
2016-12-16 15:10:39	johnkeates	is there a way to dump a table while ignoring pg_attribute relations?
2016-12-16 15:12:09	xocolatl	simonlast: no
2016-12-16 15:12:48	◥	quup_ (~McDoodle@155.4.14.39) has joined #postgresql
2016-12-16 15:12:58	◣	EyePulp (~eyepulp@107.152.3.83) has quit (Remote host closed the connection)
2016-12-16 15:12:59	xocolatl	simonlast: CREATE INDEX can be run concurrently, but CREATE INDEX CONCURRENTLY cannot.  The Great PostgreSQL Paradox
2016-12-16 15:13:00	◣	quup (~McDoodle@unaffiliated/quup) has quit (Disconnected by services)
2016-12-16 15:13:02	◥	iasai (~iasai@94.253.178.95) has joined #postgresql
2016-12-16 15:13:03	⚡	quup_ is now known as quup
2016-12-16 15:13:08	◣	quup (~McDoodle@155.4.14.39) has quit (Changing host)
2016-12-16 15:13:08	◥	quup (~McDoodle@unaffiliated/quup) has joined #postgresql
2016-12-16 15:13:27	◥	Ob0111 (~0b0111@202.38.182.4) has joined #postgresql
2016-12-16 15:16:25	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2016-12-16 15:17:46	◣	iasai (~iasai@94.253.178.95) has quit (Ping timeout: 256 seconds)
2016-12-16 15:17:47	◣	kith_ (~kith@unaffiliated/kith) has quit (Read error: Connection reset by peer)
2016-12-16 15:19:01	◥	rgiscard (~rgiscard@c-73-78-219-60.hsd1.co.comcast.net) has joined #postgresql
2016-12-16 15:19:05	◣	jccn (~jccn@184.67.245.254) has quit (Quit: My Mac has gone to sleep. ZZZzzz…)
2016-12-16 15:19:13	◣	ramfjord_ (~tramfjord@12.202.171.242) has quit (Ping timeout: 245 seconds)
2016-12-16 15:19:59	◣	skylar (~skylar2@gsits-a.gs.washington.edu) has quit (Quit: Leaving.)
2016-12-16 15:20:46	◣	realg0ld (9315a005@gateway/web/freenode/ip.147.21.160.5) has quit (Quit: Page closed)
2016-12-16 15:21:12	◣	MrXXIV_ (~MrXXIV@12.39.195.132) has quit (Quit: Look. Guys)
2016-12-16 15:21:34	◥	MrXXIV_ (~MrXXIV@12.39.195.132) has joined #postgresql
2016-12-16 15:22:47	◥	Guedes (~guedes@179.223.152.169) has joined #postgresql
2016-12-16 15:22:47	◣	Guedes (~guedes@179.223.152.169) has quit (Changing host)
2016-12-16 15:22:47	◥	Guedes (~guedes@unaffiliated/guedes) has joined #postgresql
2016-12-16 15:22:50	◥	QualityAddict (~QualityAd@ip68-102-38-171.ks.ok.cox.net) has joined #postgresql
2016-12-16 15:22:51	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-16 15:26:14	◥	ramfjord (~tramfjord@12.202.171.242) has joined #postgresql
2016-12-16 15:26:36	◣	justatheory (~justatheo@c-73-164-241-57.hsd1.or.comcast.net) has quit (Quit: justatheory)
2016-12-16 15:27:33	◥	david__ (~david@203-158-35-175.dyn.iinet.net.au) has joined #postgresql
2016-12-16 15:28:14	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 264 seconds)
2016-12-16 15:28:49	kevinburke	Sorry I wasn't clear - We extrapolated out to 6-7 hours in prod from the short amount of time that it took to index 300,000 rows.
2016-12-16 15:30:50	◣	rpg (~rpg@sift.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-16 15:31:57	◣	david__ (~david@203-158-35-175.dyn.iinet.net.au) has quit (Ping timeout: 246 seconds)
2016-12-16 15:32:23	◥	TMM (~hp@fsf/member/pdpc.professional.tmm) has joined #postgresql
2016-12-16 15:33:59	◣	gelignite (~gelignite@x4db6bf21.dyn.telefonica.de) has quit (Quit: http://bit.ly/1kso8Ta)
2016-12-16 15:34:24	◣	aristippos (~aristippo@2601:646:c003:3d5f:c4f1:93be:c3b0:165c) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-16 15:35:03	◥	rpg (~rpg@sift.net) has joined #postgresql
2016-12-16 15:38:24	◣	xzi11a (~robert@static-108-48-124-82.washdc.fios.verizon.net) has quit (Ping timeout: 250 seconds)
2016-12-16 15:39:20	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2016-12-16 15:40:14	◥	Ridout (~coffee@unaffiliated/ridout) has joined #postgresql
2016-12-16 15:41:30	◥	Ozd (~ozd@unaffiliated/ozd) has joined #postgresql
2016-12-16 15:42:00	◥	dealy663 (~kvirc@rrcs-173-196-52-74.west.biz.rr.com) has joined #postgresql
2016-12-16 15:42:58	◣	evnmar (~MongooseW@12.104.179.154) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-16 15:43:24	◥	evnmar (~MongooseW@12.104.179.154) has joined #postgresql
2016-12-16 15:43:52	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 250 seconds)
2016-12-16 15:44:00	◣	re1 (~reiser@cable-24-135-13-113.dynamic.sbb.rs) has quit (Read error: Connection reset by peer)
2016-12-16 15:44:26	◥	ononotofu (~ononotofu@cpe-76-91-33-241.socal.res.rr.com) has joined #postgresql
2016-12-16 15:44:53	◥	blackwraith (~priidu@unaffiliated/priidu) has joined #postgresql
2016-12-16 15:44:54	◥	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has joined #postgresql
2016-12-16 15:45:55	dealy663	Hello everyone. I've been having some kinda weird problems with Listen/Notify on Postgres 9.5. There are occasions where my listen connection gets lost. If the network is broken or postgres restarts, stuff like that. My app needs to be able to detect when this happens and register a new listener. Originally I was using pg_listening_channels(), but found that sometimes the function wouldn't return
2016-12-16 15:46:18	StuckMojo	what's the current advisable maxiumum number for constants in an IN() list?
2016-12-16 15:47:38	◣	sausage_factory (~priidu@unaffiliated/priidu) has quit (Ping timeout: 256 seconds)
2016-12-16 15:47:38	dealy663	So I rewrote part of my app to send out a test notification and wait for it for 2 secs and then if not received, it would re-register the listener function
2016-12-16 15:48:01	dealy663	Again, I've found that sometimes my call to pg_notify() is not returning, currently I have one instance of that running for 8 min now, any idea what could be causing this behavior?
2016-12-16 15:49:24	◣	fwiles (~frank@19.89.124.24.cm.sunflower.com) has quit (Quit: fwiles)
2016-12-16 15:49:28	◣	__Yiota (~textual@2607:fea8:56e0:407:4d67:1226:ee7a:7b27) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-16 15:50:28	◥	pedahzur (~jkugler@216-67-98-32.static.acsalaska.net) has joined #postgresql
2016-12-16 15:50:46	◥	xzi11a (~robert@static-108-48-124-82.washdc.fios.verizon.net) has joined #postgresql
2016-12-16 15:51:54	◣	_djbkd (~djbkd@135.84.132.21) has quit (Remote host closed the connection)
2016-12-16 15:52:33	◣	xapiens (~xapiens@2001:1388:2485:f5ff:b0bd:9d0:cbf1:f1a1) has quit (Ping timeout: 245 seconds)
2016-12-16 15:53:25	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-16 15:53:29	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2016-12-16 15:54:23	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2016-12-16 15:55:52	◣	Teraii (~Teraii@vip-s1-l1.teraii.net) has quit (Read error: Connection reset by peer)
2016-12-16 15:55:59	◣	ramfjord (~tramfjord@12.202.171.242) has quit (Ping timeout: 258 seconds)
2016-12-16 15:56:23	◥	Teraii (~Teraii@vip-s1-l1.teraii.net) has joined #postgresql
2016-12-16 15:56:31	◥	xapiens (~xapiens@2001:1388:2485:f5ff:b0bd:9d0:cbf1:f1a1) has joined #postgresql
2016-12-16 15:58:39	kevinburke	random question
2016-12-16 15:58:45	kevinburke	I want to add a BIGSERIAL to a table
2016-12-16 15:58:46	◣	_djbkd (~djbkd@135.84.132.21) has quit (Ping timeout: 250 seconds)
2016-12-16 15:58:49	kevinburke	but the table's really big
2016-12-16 15:59:05	kevinburke	is there a way I can run ALTER TABLE on a replica and then promote it, or will Postgres replication not allow that
2016-12-16 16:01:27	◥	david__ (~david@203-158-35-175.dyn.iinet.net.au) has joined #postgresql
2016-12-16 16:01:28	◣	david__ (~david@203-158-35-175.dyn.iinet.net.au) has quit (Read error: Connection reset by peer)
2016-12-16 16:01:52	◥	david__ (~david@203-158-35-175.dyn.iinet.net.au) has joined #postgresql
2016-12-16 16:03:28	◣	SpeakerToMeat (~SpeakerTo@prgmr/customer/SpeakerToMeat) has quit (Ping timeout: 268 seconds)
2016-12-16 16:04:01	◣	david__ (~david@203-158-35-175.dyn.iinet.net.au) has quit (Remote host closed the connection)
2016-12-16 16:04:15	◣	howitdo (~howitdo@unaffiliated/howitdo) has quit (Ping timeout: 250 seconds)
2016-12-16 16:04:29	◣	rpg (~rpg@sift.net) has quit (Quit: Textual IRC Client: www.textualapp.com)
2016-12-16 16:04:57	◣	KaliLinuxGR (~alexandro@unaffiliated/kalilinuxgr) has quit (Read error: Connection reset by peer)
2016-12-16 16:05:16	peerce	kevinburke; you can not make changes on a streaming replica/slave, they are by architecture read only.
2016-12-16 16:05:23	kevinburke	yuck, ok
2016-12-16 16:05:54	peerce	the replication is done at a file/block level... so the idea of changing the slave just doesn't make any sense
2016-12-16 16:05:57	◣	tm604 (~tom@pdpc/supporter/professional/tm604) has quit (Ping timeout: 258 seconds)
2016-12-16 16:06:52	peerce	now, if that bigserial has a default value of NULL, I think that alter is quite fast as it doesn't have to rewrite all the tuples to add a null to the end.
2016-12-16 16:07:28	◣	xemdetia (~xemdetia@129.42.208.174) has quit (Ping timeout: 258 seconds)
2016-12-16 16:07:30	peerce	but if you want that serial populated with sequenced values, well, thats going to take as many operations as there are rows, rewriting every tuple of the table
2016-12-16 16:07:39	◥	iasai (~iasai@94.253.178.95) has joined #postgresql
2016-12-16 16:08:13	◥	__Yiota (~textual@2607:fea8:56e0:407:98b1:5b97:9e95:d0e7) has joined #postgresql
2016-12-16 16:09:05	◥	david__ (~david@203-158-35-175.dyn.iinet.net.au) has joined #postgresql
2016-12-16 16:09:16	◣	MrXXIV_ (~MrXXIV@12.39.195.132) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-18 17:35:39	⚡	irc: disconnected from server
2016-12-18 17:36:03	◥	boon (~david@2601:602:8801:9c70::4426) has joined #postgresql
2016-12-18 17:36:03	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-18 17:36:03	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-18 17:36:03	⚡	Channel #postgresql: 964 nicks (0 ops, 0 voices, 964 normals)
2016-12-18 17:36:03	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-18 17:36:05	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-18 17:37:17	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-18 17:37:19	◣	crazyhorse18 (~GregThieb@198.144.159.224) has quit (Ping timeout: 244 seconds)
2016-12-18 17:41:41	◣	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has quit (Quit: Ex-Chat)
2016-12-18 17:41:54	◥	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has joined #postgresql
2016-12-18 17:43:22	◥	madboxs_ (~madboxs@106.247.231.34) has joined #postgresql
2016-12-18 17:43:59	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-18 17:45:26	◣	wildlander (~wildlande@unaffiliated/wildlander) has quit (Quit: Saliendo)
2016-12-18 17:45:41	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 248 seconds)
2016-12-18 17:47:26	◣	brentd (~brentd@116.251.41.103) has quit (Remote host closed the connection)
2016-12-18 17:49:37	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 260 seconds)
2016-12-18 17:55:32	◣	faw (~faw@unaffiliated/faw) has quit (Ping timeout: 268 seconds)
2016-12-18 17:56:43	◣	Anton_ (~aaaa@185.9.184.62) has quit (Ping timeout: 245 seconds)
2016-12-18 17:58:17	◣	anojack (~anojack@104.114-67-202.dynamic.dsl.mel.iprimus.net.au) has quit (Ping timeout: 240 seconds)
2016-12-18 17:58:31	◥	zxq9 (~ceverett@FL1-60-239-69-125.okn.mesh.ad.jp) has joined #postgresql
2016-12-18 17:58:35	◥	crazyhorse18 (~GregThieb@27.19.172.50) has joined #postgresql
2016-12-18 18:00:11	◥	shangxiao (~shangxiao@103.224.86.17) has joined #postgresql
2016-12-18 18:00:58	◥	Anton_ (~aaaa@185.9.184.62) has joined #postgresql
2016-12-18 18:04:13	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2016-12-18 18:04:30	◣	grayhemp_wh (~grayhemp_@99-46-142-34.lightspeed.sntcca.sbcglobal.net) has quit (Remote host closed the connection)
2016-12-18 18:06:52	◣	dmlloyd (~dmlloyd@redhat/jboss/dmlloyd) has quit (Ping timeout: 268 seconds)
2016-12-18 18:07:31	◥	jayjo (~jayjo@unaffiliated/jayjo) has joined #postgresql
2016-12-18 18:08:42	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 250 seconds)
2016-12-18 18:08:43	◥	dmlloyd (~dmlloyd@redhat/jboss/dmlloyd) has joined #postgresql
2016-12-18 18:09:16	◣	gentoo (~gentoo@95-31-103-98.broadband.corbina.ru) has quit (Quit: Konversation terminated!)
2016-12-18 18:09:18	◥	iasai (~iasai@cpe-94-253-152-172.zg.cable.xnet.hr) has joined #postgresql
2016-12-18 18:09:35	◥	gentoo (~gentoo@95-31-103-98.broadband.corbina.ru) has joined #postgresql
2016-12-18 18:09:35	◣	gentoo (~gentoo@95-31-103-98.broadband.corbina.ru) has quit (Max SendQ exceeded)
2016-12-18 18:10:00	◥	gentoo (~gentoo@95-31-103-98.broadband.corbina.ru) has joined #postgresql
2016-12-18 18:10:00	◣	gentoo (~gentoo@95-31-103-98.broadband.corbina.ru) has quit (Max SendQ exceeded)
2016-12-18 18:10:25	◥	gentoo (~gentoo@95-31-103-98.broadband.corbina.ru) has joined #postgresql
2016-12-18 18:10:25	◣	gentoo (~gentoo@95-31-103-98.broadband.corbina.ru) has quit (Max SendQ exceeded)
2016-12-18 18:10:48	◥	gentoo (~gentoo@95-31-103-98.broadband.corbina.ru) has joined #postgresql
2016-12-18 18:10:49	◣	gentoo (~gentoo@95-31-103-98.broadband.corbina.ru) has quit (Max SendQ exceeded)
2016-12-18 18:10:57	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 268 seconds)
2016-12-18 18:11:13	◥	gentoo (~gentoo@95-31-103-98.broadband.corbina.ru) has joined #postgresql
2016-12-18 18:12:21	◣	jayjo (~jayjo@unaffiliated/jayjo) has quit (Ping timeout: 248 seconds)
2016-12-18 18:13:14	◣	VeXocide (vexocide@toad.stack.nl) has quit (Changing host)
2016-12-18 18:13:14	◥	VeXocide (vexocide@unaffiliated/vexocide) has joined #postgresql
2016-12-18 18:13:50	◣	iasai (~iasai@cpe-94-253-152-172.zg.cable.xnet.hr) has quit (Ping timeout: 264 seconds)
2016-12-18 18:15:27	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2016-12-18 18:15:50	◥	jayjo (~jayjo@unaffiliated/jayjo) has joined #postgresql
2016-12-18 18:20:51	◣	jayjo (~jayjo@unaffiliated/jayjo) has quit (Ping timeout: 258 seconds)
2016-12-18 18:21:27	◣	neoncontrails (~neoncontr@wsip-72-196-168-39.sd.sd.cox.net) has quit (Read error: Connection reset by peer)
2016-12-18 18:22:23	◥	neoncontrails (~neoncontr@wsip-72-196-168-39.sd.sd.cox.net) has joined #postgresql
2016-12-18 18:23:21	◥	therue (~therue@1-162-43-38.dynamic.hinet.net) has joined #postgresql
2016-12-18 18:24:07	◣	madboxs_ (~madboxs@106.247.231.34) has quit (Remote host closed the connection)
2016-12-18 18:27:36	◣	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has quit (Ping timeout: 250 seconds)
2016-12-18 18:29:20	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2016-12-18 18:31:35	◥	gentoo_ (~gentoo@95-31-83-28.broadband.corbina.ru) has joined #postgresql
2016-12-18 18:33:02	◣	gentoo (~gentoo@95-31-103-98.broadband.corbina.ru) has quit (Ping timeout: 264 seconds)
2016-12-18 18:33:39	◥	elpoptardo (~elpoptard@gateway/vpn/privateinternetaccess/elpoptardo) has joined #postgresql
2016-12-18 18:34:11	elpoptardo	SELECT exists(SELECT 1 FROM items WHERE timestamp > now() - INTERVAL '1 year' AND is_green = false ORDER BY timestamp DESC LIMIT 25); -- This query runs, but gives the wrong answer because it ignores the LIMIT 25 and the ORDER BY. How come?
2016-12-18 18:34:57	elpoptardo	I'm simply trying to figure out if there is an item in the last year which wasn't green, but only if it's in the 25 latest ones.
2016-12-18 18:36:27	RhodiumToad	the order by / limit is applied after the where clause
2016-12-18 18:36:48	◥	bronson (~bronson@142-254-101-34.dsl.dynamic.fusionbroadband.com) has joined #postgresql
2016-12-18 18:37:09	RhodiumToad	sounds like you wanted another level of subquery:
2016-12-18 18:37:13	◥	grayhemp_wh (~grayhemp_@99-46-142-34.lightspeed.sntcca.sbcglobal.net) has joined #postgresql
2016-12-18 18:37:35	RhodiumToad	exists(select 1 from (select is_green from items where ... order by ... limit ...) as s where s.is_green)
2016-12-18 18:37:43	RhodiumToad	er
2016-12-18 18:37:49	RhodiumToad	where s.is_green = false
2016-12-18 18:37:52	RhodiumToad	YKWIM
2016-12-18 18:38:08	elpoptardo	Confusing, but thanks. Trying that now.
2016-12-18 18:38:25	RhodiumToad	that said, the requirement makes _absolutely_ no sense
2016-12-18 18:41:14	elpoptardo	It makes a lot of sense because not all items are displayed.
2016-12-18 18:41:17	◥	TechCrunch (~Tech@101.100.137.146) has joined #postgresql
2016-12-18 18:41:22	◥	MrXXIV__ (~MrXXIV@cpe-45-37-177-225.nc.res.rr.com) has joined #postgresql
2016-12-18 18:41:34	◣	bronson (~bronson@142-254-101-34.dsl.dynamic.fusionbroadband.com) has quit (Ping timeout: 258 seconds)
2016-12-18 18:42:16	◥	shyu (~shyu@106.38.122.4) has joined #postgresql
2016-12-18 18:44:17	◣	MrXXIV_ (~MrXXIV@cpe-45-37-177-225.nc.res.rr.com) has quit (Ping timeout: 240 seconds)
2016-12-18 18:44:17	◣	TechnoCrunch (~Tech@101.100.137.146) has quit (Ping timeout: 240 seconds)
2016-12-18 18:46:09	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-18 18:47:51	◣	dodobrain (~dodobrain@unaffiliated/freakabcd) has quit (Remote host closed the connection)
2016-12-18 18:47:56	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-18 18:49:21	◣	andlabs (~pietro@ool-4357627d.dyn.optonline.net) has quit (Ping timeout: 260 seconds)
2016-12-18 18:50:02	RhodiumToad	you're selecting a set of items, and you want to know if any of the items in the list is not green?
2016-12-18 18:50:26	RhodiumToad	I'd use a window function rather than a separate exists() query
2016-12-18 18:50:30	◣	jtv (~jtv@jtv.xs4all.nl) has quit (Remote host closed the connection)
2016-12-18 18:51:19	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 252 seconds)
2016-12-18 18:51:54	◥	bdunavant (~bdunavant@pool-100-15-154-213.washdc.fios.verizon.net) has joined #postgresql
2016-12-18 18:53:08	◥	dodobrain (~dodobrain@unaffiliated/freakabcd) has joined #postgresql
2016-12-18 18:53:48	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 265 seconds)
2016-12-18 18:55:09	elpoptardo	Your method works. I verified.
2016-12-18 18:55:20	◣	gentoo_ (~gentoo@95-31-83-28.broadband.corbina.ru) has quit (Read error: Connection reset by peer)
2016-12-18 18:55:36	◥	gentoo_ (~gentoo@95-31-83-28.broadband.corbina.ru) has joined #postgresql
2016-12-18 18:57:04	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2016-12-18 18:57:41	◣	gentoo_ (~gentoo@95-31-83-28.broadband.corbina.ru) has quit (Client Quit)
2016-12-18 18:58:07	◣	dodobrain (~dodobrain@unaffiliated/freakabcd) has quit (Quit: boo)
2016-12-18 18:58:34	◥	pnhlantau1 (~Thunderbi@121.202.81.58) has joined #postgresql
2016-12-18 18:58:34	◣	Qria (uid25348@gateway/web/irccloud.com/x-ghfunitwfvvocuiv) has quit (Quit: Connection closed for inactivity)
2016-12-18 18:58:43	◣	Su-Shee (~Susanne@p549FD383.dip0.t-ipconnect.de) has quit (Disconnected by services)
2016-12-18 18:58:51	◥	Su-Shee_ (~Susanne@p549FD5B2.dip0.t-ipconnect.de) has joined #postgresql
2016-12-18 18:58:58	◥	rgiscard (~rgiscard@71.56.239.215) has joined #postgresql
2016-12-18 18:59:40	◣	xzi11a (~robert@pool-71-244-148-68.bltmmd.fios.verizon.net) has quit (Ping timeout: 268 seconds)
2016-12-18 18:59:44	◣	bdunavant (~bdunavant@pool-100-15-154-213.washdc.fios.verizon.net) has quit (Remote host closed the connection)
2016-12-18 19:00:00	◣	pnhlantau (~Thunderbi@n219079191046.netvigator.com) has quit (Ping timeout: 246 seconds)
2016-12-18 19:00:00	⚡	pnhlantau1 is now known as pnhlantau
2016-12-18 19:00:18	◥	bdunavant (~bdunavant@pool-100-15-154-213.washdc.fios.verizon.net) has joined #postgresql
2016-12-18 19:00:37	◣	Klumben (Nsaiswatch@elmo.stole-your.pw) has quit (Ping timeout: 240 seconds)
2016-12-18 19:00:37	◣	fiatjaf (~fiatjaf@162.243.220.95) has quit (Ping timeout: 240 seconds)
2016-12-18 19:00:46	◥	Norbyte__ (~Norbyte@94-21-143-253.pool.digikabel.hu) has joined #postgresql
2016-12-18 19:00:51	◣	Norbyte_ (~Norbyte@94-21-143-253.pool.digikabel.hu) has quit (Read error: Connection reset by peer)
2016-12-18 19:01:04	◣	cultavix (~cultavix@unaffiliated/cultavix) has quit (Ping timeout: 240 seconds)
2016-12-18 19:01:14	◥	fiatjaf (~fiatjaf@162.243.220.95) has joined #postgresql
2016-12-18 19:03:02	◥	cultavix (~cultavix@unaffiliated/cultavix) has joined #postgresql
2016-12-18 19:03:13	◣	skeezix-hf (~skeezix-h@2001:4980:1000:1f01:ffff:49:52:43) has quit (Ping timeout: 240 seconds)
2016-12-18 19:04:00	◥	skeezix-hf (~skeezix-h@2001:4980:1000:1f01:ffff:49:52:43) has joined #postgresql
2016-12-18 19:04:15	◥	samwise[m]1 (samwisemat@gateway/shell/matrix.org/x-kgjqweaubpzzkwfa) has joined #postgresql
2016-12-18 19:04:57	◣	bdunavant (~bdunavant@pool-100-15-154-213.washdc.fios.verizon.net) has quit (Ping timeout: 258 seconds)
2016-12-18 19:05:03	◣	ianconnolly (~ianconnol@192.241.194.91) has quit (Ping timeout: 240 seconds)
2016-12-18 19:05:03	◥	robinho86 (~robsonjf@201.22.86.124.static.gvt.net.br) has joined #postgresql
2016-12-18 19:05:03	◣	Fire-Dragon-DoL (~Fire-Drag@2607:f0d0:1104:4:3a::12c) has quit (Ping timeout: 240 seconds)
2016-12-18 19:05:03	◣	robinho86 (~robsonjf@201.22.86.124.static.gvt.net.br) has quit (Max SendQ exceeded)
2016-12-18 19:05:03	◥	iasai (~iasai@cpe-94-253-152-172.zg.cable.xnet.hr) has joined #postgresql
2016-12-18 19:05:03	◣	samwise[m] (samwisemat@gateway/shell/matrix.org/x-caspaukynwatqise) has quit (Ping timeout: 240 seconds)
2016-12-18 19:05:03	◣	elmcrest (sid46763@gateway/web/irccloud.com/x-stkeqlsjtzopnchn) has quit (Ping timeout: 240 seconds)
2016-12-18 19:05:08	◥	Fire-Dragon-DoL- (~Fire-Drag@2607:f0d0:1104:4:3a::12c) has joined #postgresql
2016-12-18 19:05:09	◥	pokoli_ (~pokoli@mail.koolpi.com) has joined #postgresql
2016-12-18 19:05:22	◥	robinho86 (~robsonjf@201.22.86.124.static.gvt.net.br) has joined #postgresql
2016-12-18 19:05:22	◣	pokoli (~pokoli@mail.koolpi.com) has quit (Ping timeout: 240 seconds)
2016-12-18 19:05:22	◣	machty (sid13535@gateway/web/irccloud.com/x-dlijzexgxybdmmgr) has quit (Ping timeout: 240 seconds)
2016-12-18 19:05:23	◣	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has quit (Read error: Connection reset by peer)
2016-12-18 19:05:32	⚡	Fire-Dragon-DoL- is now known as Fire-Dragon-DoL
2016-12-18 19:05:43	◥	brentd (~brentd@1.129.96.221) has joined #postgresql
2016-12-18 19:06:10	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 250 seconds)
2016-12-18 19:06:24	◥	ianconnolly (~ianconnol@192.241.194.91) has joined #postgresql
2016-12-18 19:06:33	◥	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has joined #postgresql
2016-12-18 19:06:40	◥	machty (sid13535@gateway/web/irccloud.com/x-hntkjcgpwxnrwtxf) has joined #postgresql
2016-12-18 19:06:58	◥	schinckel_ (sid38120@gateway/web/irccloud.com/x-tkpiqkjaxgncwcja) has joined #postgresql
2016-12-18 19:07:15	◣	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has quit (Remote host closed the connection)
2016-12-18 19:07:19	◣	rgiscard (~rgiscard@71.56.239.215) has quit (Quit: Gone fishing)
2016-12-18 19:07:26	◥	Klumben (Nsaiswatch@elmo.stole-your.pw) has joined #postgresql
2016-12-18 19:07:38	◣	KaliLinuxGR (~alexandro@unaffiliated/kalilinuxgr) has quit (Ping timeout: 240 seconds)
2016-12-18 19:07:38	◣	ChrisHC (~quassel@2001:41d0:8:7ad8::1) has quit (Ping timeout: 240 seconds)
2016-12-18 19:07:38	◣	schinckel (sid38120@gateway/web/irccloud.com/x-ghftorbzrudynrqz) has quit (Ping timeout: 240 seconds)
2016-12-18 19:07:38	◣	Bigcheese (~quassel@unaffiliated/bigcheese) has quit (Ping timeout: 240 seconds)
2016-12-18 19:07:38	◣	Xarodon (~znc@128.199.39.94) has quit (Ping timeout: 240 seconds)
2016-12-18 19:07:41	◥	Happy_the_Exceed (~Happy@unaffiliated/featheredserpent) has joined #postgresql
2016-12-18 19:07:42	⚡	schinckel_ is now known as schinckel
2016-12-18 19:07:48	◥	Bigcheese_ (~quassel@unaffiliated/bigcheese) has joined #postgresql
2016-12-18 19:07:49	◥	ChrisHC (~quassel@2001:41d0:8:7ad8::1) has joined #postgresql
2016-12-18 19:07:49	◥	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has joined #postgresql
2016-12-18 19:07:59	◣	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has quit (Remote host closed the connection)
2016-12-18 19:08:18	◣	iasai (~iasai@cpe-94-253-152-172.zg.cable.xnet.hr) has quit (Ping timeout: 240 seconds)
2016-12-18 19:08:18	◣	dys (~dys@ip-109-44-3-163.web.vodafone.de) has quit (Ping timeout: 240 seconds)
2016-12-18 19:08:18	◣	Bad_Advice_Cat (~Happy@unaffiliated/featheredserpent) has quit (Ping timeout: 240 seconds)
2016-12-18 19:08:18	◣	cyphase (~cyphase@unaffiliated/cyphase) has quit (Ping timeout: 240 seconds)
2016-12-18 19:08:19	◥	jayjo (~jayjo@unaffiliated/jayjo) has joined #postgresql
2016-12-18 19:08:36	◥	cyphase (~cyphase@unaffiliated/cyphase) has joined #postgresql
2016-12-18 19:08:37	◣	ikanobori (sid187663@python/site-packages/ikanobori) has quit (Ping timeout: 240 seconds)
2016-12-18 19:09:24	◣	robinho86 (~robsonjf@201.22.86.124.static.gvt.net.br) has quit (Ping timeout: 240 seconds)
2016-12-18 19:09:46	◣	asabil- (asabil@gateway/shell/fnordserver.eu/x-wbfnnbbjixumnwla) has quit (Ping timeout: 240 seconds)
2016-12-18 19:09:59	◣	gowthamraam[m] (gowthamraa@gateway/shell/matrix.org/x-hwwqdcsjrzrinegr) has quit (Ping timeout: 240 seconds)
2016-12-18 19:10:06	◥	gowthamraam[m]1 (gowthamraa@gateway/shell/matrix.org/x-wozkkjwgbbzwfcfr) has joined #postgresql
2016-12-18 19:10:17	◣	gamingrobot (sid10990@gateway/web/irccloud.com/x-komsewqwuontodgm) has quit (Ping timeout: 240 seconds)
2016-12-18 19:10:20	◥	Xarodon (~znc@128.199.39.94) has joined #postgresql
2016-12-18 19:10:23	◣	krainboltgreene (sid5202@gateway/web/irccloud.com/x-nqvouacljymltalt) has quit (Ping timeout: 240 seconds)
2016-12-18 19:10:58	◣	jef (fischer@qgis/developer/jef) has quit (Ping timeout: 240 seconds)
2016-12-18 19:10:58	◣	futuredale (sid147118@gateway/web/irccloud.com/x-vofllheufzqutrhp) has quit (Ping timeout: 240 seconds)
2016-12-18 19:10:58	◣	mcrane (sid38959@gateway/web/irccloud.com/x-evnwyyrmjebwelwf) has quit (Ping timeout: 240 seconds)
2016-12-18 19:11:01	◣	alxgsv (alxgsv@gateway/shell/fnordserver.eu/x-iacrogtaunrljgbr) has quit (Quit: https://fnordserver.eu)
2016-12-18 19:11:05	◥	jef (fischer@gloin.linux-buechse.de) has joined #postgresql
2016-12-18 19:11:17	◥	mcrane (sid38959@gateway/web/irccloud.com/x-rlzyxbjurkhjjczc) has joined #postgresql
2016-12-18 19:12:02	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2016-12-18 19:12:06	◥	ikanobori (sid187663@python/site-packages/ikanobori) has joined #postgresql
2016-12-18 19:12:15	◣	TechCrunch (~Tech@101.100.137.146) has quit (Ping timeout: 240 seconds)
2016-12-18 19:12:18	◣	ChrisHC (~quassel@2001:41d0:8:7ad8::1) has quit (Ping timeout: 241 seconds)
2016-12-18 19:12:36	⚡	def_jam is now known as eb0t
2016-12-18 19:12:37	◣	eribeiro (sid12454@gateway/web/irccloud.com/x-upquzaqidopybpkb) has quit (Ping timeout: 240 seconds)
2016-12-18 19:12:47	◥	krainboltgreene (sid5202@gateway/web/irccloud.com/x-pnaajqewutfsckdy) has joined #postgresql
2016-12-18 19:12:58	◥	futuredale (sid147118@gateway/web/irccloud.com/x-kkmpadzdywtsqbnh) has joined #postgresql
2016-12-18 19:13:21	⚡	Happy_the_Exceed is now known as Bad_Advice_Cat
2016-12-18 19:13:50	◥	ChrisHC (~quassel@2001:41d0:8:7ad8::1) has joined #postgresql
2016-12-18 19:13:51	◣	jayjo (~jayjo@unaffiliated/jayjo) has quit (Ping timeout: 268 seconds)
2016-12-18 19:17:33	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 268 seconds)
2016-12-18 19:18:08	◥	lolmac_ (sid171216@gateway/web/irccloud.com/x-xnadrraoyhnqwjdw) has joined #postgresql
2016-12-18 19:18:41	◣	lolmac (sid171216@gateway/web/irccloud.com/x-pdvuqqmezogysbxr) has quit (Ping timeout: 240 seconds)
2016-12-18 19:18:42	◥	threeminutemonta (~dave@eth778.vic.adsl.internode.on.net) has joined #postgresql
2016-12-18 19:21:25	◥	andlabs (~pietro@ool-44c669cd.dyn.optonline.net) has joined #postgresql
2016-12-18 19:21:27	◥	QualityAddict (~QualityAd@ip68-102-38-171.ks.ok.cox.net) has joined #postgresql
2016-12-18 19:21:57	◣	sz0 (uid110435@gateway/web/irccloud.com/x-nwqaonzstbulvecr) has quit (Ping timeout: 240 seconds)
2016-12-18 19:22:06	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2016-12-18 19:24:39	◥	sz0 (uid110435@gateway/web/irccloud.com/x-rdgdgwxcqemloktr) has joined #postgresql
2016-12-18 19:25:38	◣	geoffb (~geoffb@ppp59-167-167-145.static.internode.on.net) has quit (Ping timeout: 240 seconds)
2016-12-18 19:25:54	◥	geoffb (~geoffb@ppp59-167-167-145.static.internode.on.net) has joined #postgresql
2016-12-18 19:26:11	◣	brentd (~brentd@1.129.96.221) has quit (Remote host closed the connection)
2016-12-18 19:26:30	◥	gmcharlt_ (~quassel@www.librarypolice.com) has joined #postgresql
2016-12-18 19:26:57	◣	mattl (sid14229@gnu/mattl) has quit (Ping timeout: 240 seconds)
2016-12-18 19:27:06	◣	gmcharlt (~quassel@www.librarypolice.com) has quit (Read error: Connection reset by peer)
2016-12-18 19:27:48	◥	Qria (uid25348@gateway/web/irccloud.com/x-kgdargyhnnlhftxz) has joined #postgresql
2016-12-18 19:27:58	◥	krainboltgreene_ (sid5202@gateway/web/irccloud.com/x-niqvhgtvvnfxtlte) has joined #postgresql
2016-12-18 19:28:06	◣	krainboltgreene (sid5202@gateway/web/irccloud.com/x-pnaajqewutfsckdy) has quit (Ping timeout: 240 seconds)
2016-12-18 19:28:08	⚡	krainboltgreene_ is now known as krainboltgreene
2016-12-18 19:28:43	◥	filiprem (~filip@176.111.231.193) has joined #postgresql
2016-12-18 19:29:56	◥	gamingrobot (sid10990@gateway/web/irccloud.com/x-zctsmyonertigyro) has joined #postgresql
2016-12-18 19:31:09	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 246 seconds)
2016-12-18 19:31:18	◣	dim (~dim@prometheus.naquadah.org) has quit (Ping timeout: 245 seconds)
2016-12-18 19:32:22	◥	dim (~dim@prometheus.naquadah.org) has joined #postgresql
2016-12-18 19:34:32	◥	cpc26 (~cpc26@fsf/member/cpc26) has joined #postgresql
2016-12-18 19:35:24	◥	ht_ (7666fea2@gateway/web/freenode/ip.118.102.254.162) has joined #postgresql
2016-12-18 19:38:48	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2016-12-18 19:39:24	◣	MrXXIV__ (~MrXXIV@cpe-45-37-177-225.nc.res.rr.com) has quit (Read error: Connection reset by peer)
2016-12-18 19:39:40	◣	b (~coffee@unaffiliated/ridout) has quit (Quit: Lost terminal)
2016-12-18 19:40:56	◥	MrXXIV_ (~MrXXIV@cpe-45-37-177-225.nc.res.rr.com) has joined #postgresql
2016-12-18 19:42:45	◥	dodobrain (~dodobrain@unaffiliated/freakabcd) has joined #postgresql
2016-12-18 19:42:54	◥	madboxs_ (~madboxs@211.170.11.154) has joined #postgresql
2016-12-18 19:44:23	◥	TechnoCrunch (~Tech@101.100.137.146) has joined #postgresql
2016-12-18 19:44:41	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 268 seconds)
2016-12-18 19:45:09	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 248 seconds)
2016-12-18 19:45:21	◣	ChrisJames02170 (~py@ool-1826eaa1.dyn.optonline.net) has quit (Remote host closed the connection)
2016-12-18 19:45:40	RhodiumToad	ERROR:  cannot extract attribute from empty tuple slot
2016-12-18 19:45:47	RhodiumToad	still some work to do there I think.
2016-12-18 19:47:02	◥	ChrisJames02170 (~py@ool-1826eaa1.dyn.optonline.net) has joined #postgresql
2016-12-18 19:47:34	elpoptardo	RhodiumToad: Is that related to me?
2016-12-18 19:47:38	RhodiumToad	no
2016-12-18 19:47:45	▷	RhodiumToad is hacking
2016-12-18 19:48:30	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-18 19:49:30	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2016-12-18 19:52:51	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 246 seconds)
2016-12-18 19:53:14	◥	Gavinduan (~PalPV4@119.165.191.170) has joined #postgresql
2016-12-18 19:53:39	◣	Gavinduan (~PalPV4@119.165.191.170) has quit (Remote host closed the connection)
2016-12-18 19:54:52	◥	ron_frown (~ronnyfro@24-176-228-82.static.snlo.ca.charter.com) has joined #postgresql
2016-12-18 19:56:15	◥	sanjeev (~sanjeev@103.196.79.148) has joined #postgresql
2016-12-18 19:57:55	◥	iasai (~iasai@cpe-94-253-152-172.zg.cable.xnet.hr) has joined #postgresql
2016-12-18 19:58:25	◣	windsok (~windsok@45.63.59.8) has quit (Ping timeout: 260 seconds)
2016-12-18 20:02:13	◣	cpc26 (~cpc26@fsf/member/cpc26) has quit
2016-12-18 20:02:30	◣	iasai (~iasai@cpe-94-253-152-172.zg.cable.xnet.hr) has quit (Ping timeout: 250 seconds)
2016-12-18 20:03:17	⚡	Bigcheese_ is now known as Bigcheese
2016-12-18 20:03:48	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 250 seconds)
2016-12-18 20:04:13	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2016-12-18 20:04:29	◣	fstd (~fstd@unaffiliated/fisted) has quit (Read error: Connection reset by peer)
2016-12-18 20:04:37	◥	fstd (~fstd@unaffiliated/fisted) has joined #postgresql
2016-12-18 20:06:01	◥	fatdragon (~fatdragon@cpe-107-184-105-188.socal.res.rr.com) has joined #postgresql
2016-12-18 20:09:07	◥	jayjo (~jayjo@unaffiliated/jayjo) has joined #postgresql
2016-12-18 20:09:25	◣	MrXXIV_ (~MrXXIV@cpe-45-37-177-225.nc.res.rr.com) has quit (Read error: Connection reset by peer)
2016-12-18 20:09:29	▷	RhodiumToad grumbles at regression tests that are sensitive to the order of results
2016-12-18 20:10:56	◥	MrXXIV_ (~MrXXIV@cpe-45-37-177-225.nc.res.rr.com) has joined #postgresql
2016-12-18 20:11:19	◣	Alex` (~alex@textual/helper/Alex) has left #postgresql ("Textual IRC Client: www.textualapp.com")
2016-12-18 20:14:12	◣	jayjo (~jayjo@unaffiliated/jayjo) has quit (Ping timeout: 246 seconds)
2016-12-18 20:20:18	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-18 20:20:52	◣	cgar (~cgar@ool-4575d5c1.dyn.optonline.net) has quit (Quit: Leaving)
2016-12-18 20:21:17	◥	TraceEv (~TraceEv@d118-75-160-251.clv.wideopenwest.com) has joined #postgresql
2016-12-18 20:24:46	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 250 seconds)
2016-12-18 20:25:17	ht_	guys need to send a mail from postgres as HTML along-with attachments. pls can yu help.
2016-12-18 20:25:27	◣	MrXXIV_ (~MrXXIV@cpe-45-37-177-225.nc.res.rr.com) has quit (Read error: Connection reset by peer)
2016-12-18 20:25:41	peerce	postgres is a sql relational database server, not a mail server.
2016-12-18 20:26:05	◥	MrXXIV_ (~MrXXIV@cpe-2606-A000-4702-DB00-FD1B-EBB1-1C4F-3CBC.dyn6.twc.com) has joined #postgresql
2016-12-18 20:28:23	◥	brentd (~brentd@116.251.41.103) has joined #postgresql
2016-12-18 20:29:18	◥	Devastator (~devas@2804:7f1:2280:367:bde3:f81f:e1d:a50e) has joined #postgresql
2016-12-18 20:29:18	◣	Devastator (~devas@2804:7f1:2280:367:bde3:f81f:e1d:a50e) has quit (Changing host)
2016-12-18 20:29:18	◥	Devastator (~devas@unaffiliated/devastator) has joined #postgresql
2016-12-18 20:29:32	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2016-12-18 20:30:41	◣	Anton_ (~aaaa@185.9.184.62) has quit (Ping timeout: 252 seconds)
2016-12-18 20:32:14	RhodiumToad	grr. I knew this was looking too easy.
2016-12-18 20:34:40	◥	Anton_ (~aaaa@185.9.184.62) has joined #postgresql
2016-12-18 20:36:12	◣	rajivr (~rajivr@103.205.218.165) has quit (Remote host closed the connection)
2016-12-18 20:37:34	◥	bronson (~bronson@142-254-101-34.dsl.dynamic.fusionbroadband.com) has joined #postgresql
2016-12-18 20:38:05	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 260 seconds)
2016-12-18 20:38:27	ht_	peerce: I have heard of scripts / functions that can do it. any idea
2016-12-18 20:39:52	peerce	ht_; better woudl be to send mail from an application server, which perhaps is listening for a notify, if this mail is being triggered by an event in the database.
2016-12-18 20:40:05	◣	shangxiao (~shangxiao@103.224.86.17) has quit (Quit: WeeChat 1.5)
2016-12-18 20:40:07	◣	cJIaB (~cJIaB@178.220.189.101) has quit (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
2016-12-18 20:40:13	peerce	to send html mail with attachments, you need to mime encode and wrap it, thats fairly involved.
2016-12-18 20:40:19	◥	hoe` (~hoe@c-71-237-236-28.hsd1.or.comcast.net) has joined #postgresql
2016-12-18 20:40:35	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2016-12-18 20:41:20	◣	proteusguy (~proteus-g@14.207.2.161) has quit (Quit: Leaving)
2016-12-18 20:42:12	RhodiumToad	well, there are libraries for constructing mail, which you could invoke from pl/perlU or pl/python
2016-12-18 20:42:13	◣	bronson (~bronson@142-254-101-34.dsl.dynamic.fusionbroadband.com) has quit (Ping timeout: 248 seconds)
2016-12-18 20:42:28	◥	phnix (~phnix@c-73-158-101-61.hsd1.ca.comcast.net) has joined #postgresql
2016-12-18 20:43:51	◣	ron_frown (~ronnyfro@24-176-228-82.static.snlo.ca.charter.com) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-18 20:45:07	◣	fstd (~fstd@unaffiliated/fisted) has quit (Ping timeout: 268 seconds)
2016-12-18 20:45:15	◥	fstd (~fstd@unaffiliated/fisted) has joined #postgresql
2016-12-18 20:45:21	peerce	IMHO, still better off doing it in an app service outside the database server
2016-12-18 20:45:44	ht_	truely speaking the current project is migrating from Oracle to Postgres (free & community) hence they want similar functionalities.. pls can I get some examples to check upon
2016-12-18 20:46:05	peerce	oracle is chock full of stuff that isn't core database.
2016-12-18 20:46:46	◥	AfroThundr (~AfroThund@2601:147:c000:b824:bcfe:4588:bef3:1469) has joined #postgresql
2016-12-18 20:46:46	◣	AfroThundr (~AfroThund@2601:147:c000:b824:bcfe:4588:bef3:1469) has quit (Max SendQ exceeded)
2016-12-18 20:46:48	ht_	I know. but clients expect the same when they migrate to FOSS
2016-12-18 20:47:09	peerce	really.  they expect free to be the same as $millions/year software, hokay.
2016-12-18 20:47:24	ht_	any samples in HTML + attachments
2016-12-18 20:47:41	peerce	whats your preferred programming language ?
2016-12-18 20:47:56	◥	rgiscard (~rgiscard@71.56.239.215) has joined #postgresql
2016-12-18 20:48:22	RhodiumToad	are you sending mail from actually inside the oracle server?
2016-12-18 20:48:26	◣	unbalanced (~unbalance@181.229.133.6) has quit (Ping timeout: 258 seconds)
2016-12-18 20:49:37	peerce	where are these attachment files coming from?
2016-12-18 20:49:42	◥	azeem (~mbanck@ppp-46-244-173-245.dynamic.mnet-online.de) has joined #postgresql
2016-12-18 20:49:59	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 258 seconds)
2016-12-18 20:50:12	◥	_torc_ (~textual@2601:201:4300:2160:6450:109:1dd:c740) has joined #postgresql
2016-12-18 20:50:17	threeminutemonta	probably csv exports from queries i'd imagine!
2016-12-18 20:50:35	peerce	but those are normally client side, not server side.
2016-12-18 20:50:47	peerce	[noting that the client might not even be on the same host as the database server]
2016-12-18 20:51:04	threeminutemonta	I know that. I use python for just this!
2016-12-18 20:51:59	◥	iasai (~iasai@cpe-94-253-152-172.zg.cable.xnet.hr) has joined #postgresql
2016-12-18 20:52:15	◣	SteeleNivenson (~SteeleNiv@2601:646:4201:be30:498:31c3:d6f5:32fc) has quit (Quit: This computer has gone to sleep)
2016-12-18 20:52:31	◥	babak (uid19622@gateway/web/irccloud.com/x-cwyaudniyvbxqyvq) has joined #postgresql
2016-12-18 20:53:45	◣	azeem_ (~mbanck@ppp-46-244-182-8.dynamic.mnet-online.de) has quit (Ping timeout: 268 seconds)
2016-12-18 20:56:12	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2016-12-18 20:56:26	◣	iasai (~iasai@cpe-94-253-152-172.zg.cable.xnet.hr) has quit (Ping timeout: 256 seconds)
2016-12-18 20:57:28	◥	justatheory (~justatheo@73.164.241.57) has joined #postgresql
2016-12-18 20:58:08	◣	atchuthan (~atchuthan@103.54.222.203) has quit (Ping timeout: 256 seconds)
2016-12-18 20:59:02	◣	bocaneri (~bocaneri@about/linux/staff/sauvin) has quit (Quit: Leaving)
2016-12-18 20:59:17	◣	TechnoCrunch (~Tech@101.100.137.146) has quit (Ping timeout: 240 seconds)
2016-12-18 20:59:28	◥	Hacker01 (~Haxker01@158.255.0.34) has joined #postgresql
2016-12-18 20:59:43	◣	trustyhank (~trustyhan@ool-43500679.dyn.optonline.net) has quit (Quit: Textual IRC Client: www.textualapp.com)
2016-12-18 21:00:22	◣	crazyhorse18 (~GregThieb@27.19.172.50) has quit (Ping timeout: 244 seconds)
2016-12-18 21:00:30	◥	wolfwood_ (~shashwat@42.109.202.181) has joined #postgresql
2016-12-18 21:00:44	ht_	reports are outputs of some queries, functions. client says Oracle sends mails; though I could not verify it myself on their setup. I can try python even though thats an entirely new language for me. JAVA I can write 5-6 lines
2016-12-18 21:01:25	peerce	knowing oracle, 'sending email' is probably a $5000 extra feature
2016-12-18 21:01:30	wolfwood_	If a project have multiple tasks and a task can be linked with multiple projects thereby making it a many-to-many relationship, can I get help on schema or any example as such ?
2016-12-18 21:02:03	◥	TechnoCrunch (~Tech@101.100.137.146) has joined #postgresql
2016-12-18 21:02:59	◥	elmcrest (sid46763@gateway/web/irccloud.com/x-dcsrbthirrizakmf) has joined #postgresql
2016-12-18 21:04:38	◣	TechnoCrunch (~Tech@101.100.137.146) has quit (Read error: Connection reset by peer)
2016-12-18 21:07:46	◣	Hacker01 (~Haxker01@158.255.0.34) has quit (Ping timeout: 256 seconds)
2016-12-18 21:08:18	mattmcc	Oracle Java EE Mail Framework 10.1.6.8?
2016-12-18 21:08:19	◥	dka (~dka@1.52.58.194) has joined #postgresql
2016-12-18 21:08:34	◥	TechnoCrunch (~Tech@101.100.137.146) has joined #postgresql
2016-12-18 21:08:34	dka	Does postgresql have a default engine ?
2016-12-18 21:08:37	dka	like myisam ?
2016-12-18 21:08:46	◣	dviola (~diego@unaffiliated/diegoviola) has quit (Quit: WeeChat 1.6)
2016-12-18 21:09:24	ht_	wolfwood_ : you could have tables like http://pastebin.com/azKnNfUP
2016-12-18 21:09:51	dka	What's the difference between BLOB and BYTEA?
2016-12-18 21:10:07	RhodiumToad	dka: pg only has one "engine"
2016-12-18 21:10:08	◥	jayjo (~jayjo@unaffiliated/jayjo) has joined #postgresql
2016-12-18 21:10:09	peerce	BLOB is not postgres.   BYTEA is postgres's datatype for binary data
2016-12-18 21:10:18	peerce	and yeah, postgres's engine is postgres.
2016-12-18 21:10:24	◥	atchuthan (~atchuthan@14.102.27.223) has joined #postgresql
2016-12-18 21:10:33	dka	So I don't need to worry about myisam or innodb ?N
2016-12-18 21:10:44	peerce	those are purely mysql-isms
2016-12-18 21:10:54	mattmcc	dka: Refreshing, eh?  One set of features, not six disjoint ones?
2016-12-18 21:10:59	RhodiumToad	bytea is just a normal column value that can contain arbitrary bytes up to 1GB (though you shouldn't push over about 100MB unless you know where the pitfalls are)
2016-12-18 21:11:32	◣	wolfwood_ (~shashwat@42.109.202.181) has quit (Quit: wolfwood_)
2016-12-18 21:11:39	RhodiumToad	pg also has a separate large-object interface, where the large objects are identified by OIDs rather than being stored in columns, using the lo_* functions
2016-12-18 21:12:25	◥	eribeiro (sid12454@gateway/web/irccloud.com/x-btstdrgpsststcsa) has joined #postgresql
2016-12-18 21:12:29	◥	crazyhorse18 (~GregThieb@198.144.159.224) has joined #postgresql
2016-12-18 21:12:50	◥	TechCrunch (~Tech@101.100.137.146) has joined #postgresql
2016-12-18 21:12:58	peerce	personally, anything much over 1 megabyte, I'd be looking at using nFS file system storage, and just storing the path in the database, but thats me.
2016-12-18 21:13:34	◥	roand (~roand@2a01:4f8:161:640a::5) has joined #postgresql
2016-12-18 21:14:00	◥	wolfwood_ (~shashwat@42.109.202.181) has joined #postgresql
2016-12-18 21:14:45	◣	jayjo (~jayjo@unaffiliated/jayjo) has quit (Ping timeout: 248 seconds)
2016-12-18 21:16:03	◥	windsok (~windsok@45.63.59.8) has joined #postgresql
2016-12-18 21:16:10	◣	TechnoCrunch (~Tech@101.100.137.146) has quit (Ping timeout: 252 seconds)
2016-12-18 21:16:49	dka	I struggle with pgsql syntax error
2016-12-18 21:17:05	dka	Can anyone help me correct this create table creation statement ? http://pastebin.com/W0HX5cdc
2016-12-18 21:17:32	RhodiumToad	you're trying to use mysql syntax
2016-12-18 21:18:01	RhodiumToad	pg doesn't have "unsigned", and it doesn't have ON UPDATE in that form, and it doesn't have tinyint
2016-12-18 21:18:05	◥	KaliLinuxGR (~alexandro@unaffiliated/kalilinuxgr) has joined #postgresql
2016-12-18 21:18:16	RhodiumToad	also you don't put lengths like (20) after bigint
2016-12-18 21:18:55	RhodiumToad	also anything where the default is CURRENT_TIMESTAMP should be timestamp WITH time zone, not without
2016-12-18 21:18:56	peerce	dka; have you looked at the syntax in the rather excellent postgresql documentation?
2016-12-18 21:19:02	peerce	??create table
2016-12-18 21:19:02	pg_docbot	http://www.postgresql.org/docs/current/static/sql-createtable.html :: http://www.postgresql.org/docs/current/static/sql-createtableas.html
2016-12-18 21:19:41	dka	peerce, is it possible to have a PDF documentation ?
2016-12-18 21:19:56	dka	I hate these hyper important documentation when you can't print them: /
2016-12-18 21:19:57	peerce	sure, linked on the home odcumenation page, in a4 or us letter page format
2016-12-18 21:20:04	peerce	i hate wasting paper
2016-12-18 21:20:10	dka	it's not wasting
2016-12-18 21:20:17	◣	TechCrunch (~Tech@101.100.137.146) has quit (Ping timeout: 240 seconds)
2016-12-18 21:20:32	peerce	its far faster to find stuff thats hyperlinked them flipping through a 600 page looseleaf binder.
2016-12-18 21:20:33	◣	windsok (~windsok@45.63.59.8) has quit (Ping timeout: 260 seconds)
2016-12-18 21:20:50	◥	aidalgol (~aidalgol@pdpc/supporter/student/aidalgol) has joined #postgresql
2016-12-18 21:21:08	dka	not the same usage of course
2016-12-18 21:21:09	peerce	pdf's linked here, https://www.postgresql.org/docs/manuals/
2016-12-18 21:21:11	dka	not useless
2016-12-18 21:21:26	RhodiumToad	the PDFs are MASSIVE, check the page count before printing
2016-12-18 21:21:49	peerce	the US PDF for pg 9.6 is 3508 pages.
2016-12-18 21:21:54	peerce	thats some serious dead tree
2016-12-18 21:21:59	dka	ok
2016-12-18 21:22:03	dka	I won't print it
2016-12-18 21:22:04	dka	:]
2016-12-18 21:22:48	peerce	even double sided, that would be what, 3 reams of paper ?
2016-12-18 21:23:35	dka	what should I replace tinyint for ?
2016-12-18 21:23:45	dka	and how can I have an equivalent of this ?  TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
2016-12-18 21:23:52	RhodiumToad	boolean if you want boolean, smallint if you just want a small number
2016-12-18 21:24:01	dka	ops from #java told me to throw away mariadb to postgresql
2016-12-18 21:24:05	RhodiumToad	to get the effect of ON UPDATE, use a trigger
2016-12-18 21:24:07	◥	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has joined #postgresql
2016-12-18 21:24:18	dka	Can I have an example ?
2016-12-18 21:24:20	RhodiumToad	there's an example in the manual
2016-12-18 21:24:22	RhodiumToad	??trigger
2016-12-18 21:24:23	pg_docbot	http://www.postgresql.org/docs/current/static/plpgsql-trigger.html :: http://www.postgresql.org/docs/current/static/sql-createtrigger.html
2016-12-18 21:24:23	pg_docbot	http://www.postgresql.org/docs/current/static/sql-droptrigger.html :: http://www.postgresql.org/docs/current/static/plperl-triggers.html
2016-12-18 21:24:23	pg_docbot	http://www.postgresql.org/docs/current/static/triggers.html :: http://www.postgresql.org/docs/current/static/plpython-trigger.html
2016-12-18 21:24:23	pg_docbot	http://people.planetpostgresql.org/dfetter/index.php?/archives/71-Querying-Rows-in-Statement-Triggers.html :: http://www.postgresql.org/docs/current/static/event-triggers.html
2016-12-18 21:24:26	pg_docbot	http://blog.endpoint.com/2015/07/selectively-firing-postgres-triggers.html
2016-12-18 21:24:36	RhodiumToad	first of the links above: http://www.postgresql.org/docs/current/static/plpgsql-trigger.html
2016-12-18 21:26:23	◣	Xgc (~Xgc@p-69-195-59-185.dsl1.rtr.chat.fpma.frpt.net) has quit (Ping timeout: 258 seconds)
2016-12-18 21:26:47	◥	mattl (sid14229@gnu/mattl) has joined #postgresql
2016-12-18 21:29:52	◣	howitdo (~howitdo@unaffiliated/howitdo) has quit (Ping timeout: 256 seconds)
2016-12-18 21:31:20	◣	wolfwood_ (~shashwat@42.109.202.181) has quit (Ping timeout: 250 seconds)
2016-12-18 21:32:49	◥	ogradyd (~Thunderbi@HSI-KBW-046-005-205-144.hsi8.kabel-badenwuerttemberg.de) has joined #postgresql
2016-12-18 21:33:18	◥	wolfwood_ (~shashwat@106.51.64.49) has joined #postgresql
2016-12-18 21:34:18	◣	arescorpio (~arescorpi@56-239-16-190.fibertel.com.ar) has quit (Quit: Leaving.)
2016-12-18 21:34:53	◥	bocaneri (~bocaneri@about/linux/staff/sauvin) has joined #postgresql
2016-12-18 21:35:19	◥	howitdo (~howitdo@unaffiliated/howitdo) has joined #postgresql
2016-12-18 21:36:12	◣	neoncontrails (~neoncontr@wsip-72-196-168-39.sd.sd.cox.net) has quit (Remote host closed the connection)
2016-12-18 21:36:41	◥	neoncontrails (~neoncontr@wsip-72-196-168-39.sd.sd.cox.net) has joined #postgresql
2016-12-22 09:26:17	◥	boon (~david@75-165-41-91.tukw.qwest.net) has joined #postgresql
2016-12-22 09:26:17	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-22 09:26:17	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-22 09:26:17	⚡	Channel #postgresql: 1003 nicks (0 ops, 0 voices, 1003 normals)
2016-12-22 09:26:17	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-22 09:26:17	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-22 09:26:18	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2016-12-22 09:26:24	◣	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has quit (Ping timeout: 256 seconds)
2016-12-22 09:26:25	◣	Soopaman (~soopaman@108-198-40-250.lightspeed.rcsntx.sbcglobal.net) has quit (Ping timeout: 264 seconds)
2016-12-22 09:26:51	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-22 09:29:08	◣	ramfjord (~tramfjord@c-73-164-141-205.hsd1.or.comcast.net) has quit (Ping timeout: 248 seconds)
2016-12-22 09:29:28	◣	bronson (~bronson@142-254-101-34.dsl.dynamic.fusionbroadband.com) has quit (Remote host closed the connection)
2016-12-22 09:30:12	◥	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has joined #postgresql
2016-12-22 09:30:41	◥	held (~heldchen@unaffiliated/held) has joined #postgresql
2016-12-22 09:31:02	◣	Xgc (~Xgc@p-69-195-59-185.dsl1.rtr.chat.fpma.frpt.net) has quit (Ping timeout: 258 seconds)
2016-12-22 09:31:25	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 258 seconds)
2016-12-22 09:32:52	◣	SEQUEL_TECH (~sequel@85.118.82.79) has quit (Ping timeout: 248 seconds)
2016-12-22 09:33:28	◣	jpa (~jpa@sar84-1-78-229-44-71.fbx.proxad.net) has left #postgresql
2016-12-22 09:35:15	◣	Circuitsoft (6b02642a@gateway/web/freenode/ip.107.2.100.42) has quit (Ping timeout: 260 seconds)
2016-12-22 09:35:36	◥	autrilla (~autrilla@python/site-packages/autrilla) has joined #postgresql
2016-12-22 09:36:06	◣	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has quit (Remote host closed the connection)
2016-12-22 09:36:56	◣	dur-randir (~dur_randi@93.159.239.42) has quit (Remote host closed the connection)
2016-12-22 09:38:05	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-22 09:41:14	StuckMojo	apollo13: yeah
2016-12-22 09:41:25	◥	grayhemp_wh (~grayhemp_@12.33.220.130) has joined #postgresql
2016-12-22 09:42:01	◣	troulouliou_div2 (~troulouli@unaffiliated/troulouliou-div2/x-0271439) has quit (Ping timeout: 252 seconds)
2016-12-22 09:42:09	◣	ayogi (~yogesh@223.186.70.87) has quit (Ping timeout: 258 seconds)
2016-12-22 09:42:16	◥	SEQUEL_TECH (~sequel@85.118.82.219) has joined #postgresql
2016-12-22 09:42:31	StuckMojo	apollo13: what do you need?
2016-12-22 09:42:52	apollo13	so, I am currently working on adding UNION etc support to Django, is there anything you could think of (be it postgres or django) I should be cautious about?
2016-12-22 09:42:56	◥	Xgc (~Xgc@p-68-237-139-15.dsl1.rtr.chat.fpma.frpt.net) has joined #postgresql
2016-12-22 09:43:08	◥	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has joined #postgresql
2016-12-22 09:43:14	StuckMojo	well, first thing is that there is a different between UNION and UNION ALL
2016-12-22 09:43:37	StuckMojo	the former does a DISTINCT operation, so is more expensive, because that involves a sort
2016-12-22 09:43:54	StuckMojo	??union
2016-12-22 09:43:55	pg_docbot	http://www.postgresql.org/docs/current/static/queries-union.html
2016-12-22 09:44:16	apollo13	right, I read those docs, ALL will be represented as distinct=False/True to the relevant function call most likely
2016-12-22 09:44:27	StuckMojo	sweet
2016-12-22 09:44:28	◥	pedahzur (~jkugler@216-67-98-32.static.acsalaska.net) has joined #postgresql
2016-12-22 09:44:29	apollo13	opting for more performance, ie =False
2016-12-22 09:44:36	StuckMojo	for my purposes, i rarely want plain UNION
2016-12-22 09:44:55	StuckMojo	but most people are unaware of the difference and use the more expensive one by default
2016-12-22 09:45:20	apollo13	right, I will probably go with performance by default here -- though I will definitelly provide the option to switch
2016-12-22 09:45:34	StuckMojo	umm...i'd say why not also do EXCEPT and INTERSECT too while you're at it
2016-12-22 09:45:42	StuckMojo	prolly basically the same code for you
2016-12-22 09:45:44	apollo13	yes that was my "etc" in support
2016-12-22 09:45:46	apollo13	exactly
2016-12-22 09:45:49	StuckMojo	nice
2016-12-22 09:46:12	◥	proteusguy (~proteus-g@node-yqc.pool-125-24.dynamic.totbb.net) has joined #postgresql
2016-12-22 09:46:12	StuckMojo	hmmm...oh, ORDER BY with union
2016-12-22 09:46:16	◣	Giorgio (~georgi@213.167.15.65) has quit (Remote host closed the connection)
2016-12-22 09:46:29	StuckMojo	only the bottom one counts i think
2016-12-22 09:46:29	apollo13	My endgoal is probably to have functions (I think they make sense as free functions), union/intersct/except which take two querysets
2016-12-22 09:46:32	StuckMojo	IIRC
2016-12-22 09:46:47	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2016-12-22 09:46:48	apollo13	and return a new (limited) one, which you then can for instance reuse with the new features from: https://github.com/django/django/pull/6478
2016-12-22 09:46:53	◣	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-22 09:46:55	◥	tiwula (~lane@70.89.246.241-Busname-UT.hfc.comcastbusiness.net) has joined #postgresql
2016-12-22 09:47:27	◥	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has joined #postgresql
2016-12-22 09:47:38	◣	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has quit (Client Quit)
2016-12-22 09:47:57	StuckMojo	this will be sweet
2016-12-22 09:47:58	apollo13	so in the end, your issue from yesterday would be doable ala: YourModel.objects.filter(pk__in =union(qs1,qs2))
2016-12-22 09:48:23	StuckMojo	apollo13: ok yeah:
2016-12-22 09:48:24	apollo13	maybe even allow more than two query sets to union so you do not have to manually nest with union(qs1, union(qs2,qs3))
2016-12-22 09:48:33	◣	filiprem (~filip@188.146.91.157.nat.umts.dynamic.t-mobile.pl) has quit (Remote host closed the connection)
2016-12-22 09:48:34	apollo13	implementation wise it won't matter
2016-12-22 09:48:35	StuckMojo	ERROR:  syntax error at or near "union"
2016-12-22 09:48:35	StuckMojo	LINE 1: select 1 order by 1 union all select 2 order by 1; ^
2016-12-22 09:48:51	StuckMojo	i was confirming that you can only have ORDER BY at the end
2016-12-22 09:48:58	◣	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Quit: Leaving.)
2016-12-22 09:48:59	◥	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has joined #postgresql
2016-12-22 09:49:07	StuckMojo	i was pretty sure only the last one counted, but not sure if it was a syntax error to have it in there, and it is
2016-12-22 09:49:08	apollo13	ok, that is good to know
2016-12-22 09:49:16	◣	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has quit (Client Quit)
2016-12-22 09:49:18	apollo13	but the last one will order the whole?
2016-12-22 09:49:30	Zr40	you can in fact order by in the union arms, you just need parens
2016-12-22 09:49:34	◥	Circuitsoft (6b02642a@gateway/web/freenode/ip.107.2.100.42) has joined #postgresql
2016-12-22 09:49:39	apollo13	makes sense
2016-12-22 09:49:44	◥	filiprem (~filip@188.146.91.157.nat.umts.dynamic.t-mobile.pl) has joined #postgresql
2016-12-22 09:49:49	Zr40	(select ... order by ...) union all (select ... order by ...)
2016-12-22 09:49:51	StuckMojo	that would apply to limit as well, without parens
2016-12-22 09:49:52	◣	thuvvik_ (~quassel@lns-bzn-22-82-249-73-220.adsl.proxad.net) has quit (Read error: Connection reset by peer)
2016-12-22 09:49:55	StuckMojo	yeah
2016-12-22 09:50:10	apollo13	so basically: (select 1 order by 1) union all (select 2 order by 1) order by 1;
2016-12-22 09:50:14	jf02jfv	RhodiumToad, hey there, right now I'm using a jsonb_each_text but sometimes I only want 4/7 or 5/7 of the values etc. what would be the best way to sum over only some of the values?  gist: https://gist.github.com/anonymous/57dfde2047ef071a8a07955c717122bb thanks
2016-12-22 09:50:19	apollo13	this would order internally and then reorder the whole result?
2016-12-22 09:50:26	StuckMojo	so if you wanna be very generic (which you likely do with an ORM and to make your life easy) you'd just always wrap the two in ()s so UNION will always work
2016-12-22 09:50:36	apollo13	absolutely
2016-12-22 09:50:40	Tuju	INSERT INTO %s RETURNING rid                   doesnt seem to work.
2016-12-22 09:50:43	StuckMojo	apollo13: yeah it would
2016-12-22 09:50:43	◣	OnkelTem (~onkeltem@pppoe-62-84-112-224.dubna.ru) has quit (Quit: WeeChat 1.6)
2016-12-22 09:50:48	RhodiumToad	jf02jfv: add a WHERE clause in the appropriate place?
2016-12-22 09:50:52	StuckMojo	so it's silly performance wise, but it works
2016-12-22 09:51:02	StuckMojo	the limit inside is useful though
2016-12-22 09:51:03	Tuju	i have row key rid that is SERIAL, so i shouldn't pass anything into it.
2016-12-22 09:51:06	Zr40	Tuju: what does it do differently than what you have expected?
2016-12-22 09:51:10	RhodiumToad	jf02jfv: or indeed a FILTER clause if you want to keep the extra rows but just not sum them
2016-12-22 09:51:12	apollo13	right, I am just sketching up API, so I am playing a bit
2016-12-22 09:51:19	StuckMojo	apollo13: so, you'll have a bit of a "sticky" in adding a final ORDER BY
2016-12-22 09:51:33	Tuju	Zr40: what i should pass to it as values?
2016-12-22 09:51:54	StuckMojo	i.e. it's probably easy to combine two ORM queries, using your union, but the final result will also have to be able to be ordered and limited
2016-12-22 09:51:54	Zr40	Tuju: well, what do you want to insert?
2016-12-22 09:51:55	◥	Nizumzen (~Nizumzen@cpc2-reig5-2-0-cust667.6-3.cable.virginm.net) has joined #postgresql
2016-12-22 09:52:07	Tuju	empty row and that rid serial
2016-12-22 09:52:22	Zr40	Tuju: INSERT INTO tbl DEFAULT VALUES RETURNING rid;
2016-12-22 09:52:32	StuckMojo	apollo13: well, not *have* to be, but it would be much more useful if it could
2016-12-22 09:52:33	Tuju	Zr40: ack, i try that
2016-12-22 09:52:38	apollo13	StuckMojo: absolutely
2016-12-22 09:52:50	◥	Ravenmire (~stercor@24-181-195-221.dhcp.hckr.nc.charter.com) has joined #postgresql
2016-12-22 09:53:00	◥	thuvvik (~quassel@lns-bzn-22-82-249-73-220.adsl.proxad.net) has joined #postgresql
2016-12-22 09:53:03	StuckMojo	brb
2016-12-22 09:53:30	◥	wsieroci (~wsieroci@095160155131.dynamic-ww-12.vectranet.pl) has joined #postgresql
2016-12-22 09:54:04	◣	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has quit (Remote host closed the connection)
2016-12-22 09:54:37	apollo13	StuckMojo: coming from the django side, the ORM has a lot of logic to "relabel" aliases and table names, ie if they appear two times in a query and need different aliases, sides of union should not need any relabeling right? ie they cannot conflict
2016-12-22 09:55:25	◥	MarkyC (~MarkyC@184.151.190.25) has joined #postgresql
2016-12-22 09:55:29	apollo13	(not sure how I can express that better)
2016-12-22 09:55:53	◣	clmsy (~eoz@ringring.dpl.mendix.net) has quit (Remote host closed the connection)
2016-12-22 09:56:11	StuckMojo	ah man this is sweet, we've got a hot cocoa bar at work this morning, and chicken and waffles for lunch
2016-12-22 09:56:23	StuckMojo	and they're screening xmas movies all day in the main room
2016-12-22 09:56:26	◥	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has joined #postgresql
2016-12-22 09:56:28	StuckMojo	currenly Home Alone
2016-12-22 09:56:40	RhodiumToad	you can't alias the sides of a union directly
2016-12-22 09:56:56	Tuju	Zr40: it seems to work, thanks. that was new for me.
2016-12-22 09:56:59	StuckMojo	i think he means the inside of them
2016-12-22 09:57:01	RhodiumToad	but the table names and so on in each branch don't conflict
2016-12-22 09:57:13	StuckMojo	select * from foo a  union all select * from bar a
2016-12-22 09:57:44	apollo13	lovely it doesn't even seem to conflict with outer stuff
2016-12-22 09:57:50	apollo13	that should make it easy (tm)
2016-12-22 09:58:24	StuckMojo	yeah
2016-12-22 09:58:46	◥	macabre (~ibtjw@unaffiliated/macabre) has joined #postgresql
2016-12-22 09:59:23	◣	andlabs (~pietro@adfb395a.cst.lightpath.net) has quit (Remote host closed the connection)
2016-12-22 10:00:19	apollo13	ok, thank you so far! I'll see if I can get that into the next LTS, gives me another 20 days to do it or so :D
2016-12-22 10:01:52	◥	bordicon (~bordicon@50-247-102-73-static.hfc.comcastbusiness.net) has joined #postgresql
2016-12-22 10:02:26	◥	andlabs (~pietro@adfb395a.cst.lightpath.net) has joined #postgresql
2016-12-22 10:03:49	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Ping timeout: 248 seconds)
2016-12-22 10:04:22	◣	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has quit (Ping timeout: 256 seconds)
2016-12-22 10:04:33	◥	Lordz (~Adium@186.215.116.176) has joined #postgresql
2016-12-22 10:04:40	◥	TMM (~hp@fsf/member/pdpc.professional.tmm) has joined #postgresql
2016-12-22 10:05:57	◥	hoe` (~hoe@c-71-237-236-28.hsd1.or.comcast.net) has joined #postgresql
2016-12-22 10:06:45	◥	horatioh1 (~irssi@159.203.125.156) has joined #postgresql
2016-12-22 10:07:38	horatioh1	In a before trigger, it's permissible to do NEW.a = NEW.b, right?
2016-12-22 10:07:43	◥	A_Drone (~a_drone@202.73.38.221) has joined #postgresql
2016-12-22 10:07:46	RhodiumToad	yes
2016-12-22 10:07:59	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2016-12-22 10:08:05	horatioh1	RhodiumToad: thank you (assuming your 'yes' was meant for me)
2016-12-22 10:08:13	RhodiumToad	yes, it was
2016-12-22 10:08:44	◥	dur-randir (~dur_randi@93-80-107-98.broadband.corbina.ru) has joined #postgresql
2016-12-22 10:08:58	RhodiumToad	andres: if you're around, there is an updated patch (still WIP) at the same place
2016-12-22 10:09:33	◣	MarkyC (~MarkyC@184.151.190.25) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-22 10:09:33	◣	SEQUEL_TECH (~sequel@85.118.82.219) has quit (Read error: Connection reset by peer)
2016-12-22 10:09:38	◥	inkjetunito (~benny@unaffiliated/inkjetunit) has joined #postgresql
2016-12-22 10:10:02	◥	asymetrixs (~asymetrix@x4db9cee3.dyn.telefonica.de) has joined #postgresql
2016-12-22 10:10:07	◥	evnmar (~MongooseW@12.104.179.154) has joined #postgresql
2016-12-22 10:10:25	◣	evnmar (~MongooseW@12.104.179.154) has quit (Client Quit)
2016-12-22 10:10:56	jf02jfv	RhodiumToad, for doing the WHERE not the filter how can I set the multiple values for the json key gist: https://gist.github.com/anonymous/1817caf0856f06ce89c0a2678e246f0f
2016-12-22 10:10:57	◥	evnmar (~MongooseW@12.104.179.154) has joined #postgresql
2016-12-22 10:11:58	RhodiumToad	half your query seems to be missing (both FROM clauses)
2016-12-22 10:12:08	◣	evnmar (~MongooseW@12.104.179.154) has quit (Client Quit)
2016-12-22 10:12:20	◣	A_Drone (~a_drone@202.73.38.221) has quit (Ping timeout: 250 seconds)
2016-12-22 10:12:22	RhodiumToad	oh, one's there the other is missing
2016-12-22 10:12:27	◥	dviola (~diego@unaffiliated/diegoviola) has joined #postgresql
2016-12-22 10:12:27	◣	dionysus69 (~Thunderbi@unaffiliated/dionysus69) has quit (Ping timeout: 258 seconds)
2016-12-22 10:12:57	RhodiumToad	... from posts, lateral (select sum(...) as hours_value from jsonb_each_text(...) e where e.key IN ('1','2','3','4')) s
2016-12-22 10:13:20	◥	evnmar (~MongooseW@12.104.179.154) has joined #postgresql
2016-12-22 10:14:07	◥	MarkyC (~MarkyC@184.151.190.25) has joined #postgresql
2016-12-22 10:14:11	◥	dionysus69 (~Thunderbi@unaffiliated/dionysus69) has joined #postgresql
2016-12-22 10:14:13	◣	inkjetunito (~benny@unaffiliated/inkjetunit) has quit (Ping timeout: 245 seconds)
2016-12-22 10:14:38	jf02jfv	RhodiumToad, ahh thanks! I was just pasting back an edited version of abridged version you last sent me :( thoguht it might make it easier
2016-12-22 10:15:44	◥	stephenjudkins (~stephenju@c-73-240-71-155.hsd1.or.comcast.net) has joined #postgresql
2016-12-22 10:15:47	◥	triplicate (3fe1c7b2@gateway/web/freenode/ip.63.225.199.178) has joined #postgresql
2016-12-22 10:15:51	◣	bocaneri (~bocaneri@about/linux/staff/sauvin) has quit (Read error: Connection reset by peer)
2016-12-22 10:15:54	◣	SpeakerToMeat (~SpeakerTo@prgmr/customer/SpeakerToMeat) has quit (Ping timeout: 258 seconds)
2016-12-22 10:17:26	◥	code_zombie (~code_zomb@2605:a601:aa1:5c00:55d7:7b7f:7404:1f13) has joined #postgresql
2016-12-22 10:17:34	◣	MarkyC (~MarkyC@184.151.190.25) has quit (Client Quit)
2016-12-22 10:19:13	◥	travisjeffery (~textual@CPE84948c593ec1-CM84948c593ec0.cpe.net.cable.rogers.com) has joined #postgresql
2016-12-22 10:19:49	◥	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has joined #postgresql
2016-12-22 10:19:51	◣	held (~heldchen@unaffiliated/held) has quit (Read error: Connection reset by peer)
2016-12-22 10:20:08	◥	xocolatl (~Vik@ath91-3-88-167-161-184.fbx.proxad.net) has joined #postgresql
2016-12-22 10:20:40	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-22 10:21:41	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2016-12-22 10:21:48	◣	Su-Shee (~Susanne@p5B375539.dip0.t-ipconnect.de) has quit (Disconnected by services)
2016-12-22 10:21:56	◥	Su-Shee (~Susanne@p549FD0FE.dip0.t-ipconnect.de) has joined #postgresql
2016-12-22 10:22:23	andres	RhodiumToad: Cool - there's a list of patches I promised to look at first though :(
2016-12-22 10:23:07	◥	MarkyC (~MarkyC@2607:fea8:23df:fe26:bcd9:1f42:6861:e469) has joined #postgresql
2016-12-22 10:23:10	◥	skyx (~skyx__@lk.84.20.233.181.dc.cable.static.lj-kabel.net) has joined #postgresql
2016-12-22 10:23:37	◣	dys (~dys@2003:5b:203b:100:6af7:28ff:fe06:801) has quit (Ping timeout: 240 seconds)
2016-12-22 10:24:16	◥	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has joined #postgresql
2016-12-22 10:24:33	◣	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has quit (Ping timeout: 252 seconds)
2016-12-22 10:25:38	◣	b00tstr4p (~textual@181.211.39.124) has quit (Quit: My iMac has gone to sleep. ZZZzzz…)
2016-12-22 10:26:31	◣	kacey (~kacey@c-50-132-2-197.hsd1.wa.comcast.net) has quit (Quit: kacey)
2016-12-22 10:26:42	◣	dfg (~xp@177.19.230.172) has quit (Read error: Connection reset by peer)
2016-12-22 10:26:54	◥	dfg (~xp@177.19.230.172) has joined #postgresql
2016-12-22 10:28:34	◣	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has quit (Ping timeout: 258 seconds)
2016-12-22 10:29:03	◣	Slashman (~Slash@cosium-152-18.fib.nerim.net) has quit (Quit: Leaving)
2016-12-22 10:30:41	◥	kacey (~kacey@c-50-132-2-197.hsd1.wa.comcast.net) has joined #postgresql
2016-12-22 10:30:54	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2016-12-22 10:30:54	◥	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has joined #postgresql
2016-12-22 10:32:23	◣	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has quit (Ping timeout: 258 seconds)
2016-12-22 10:32:24	◣	jonez (~jam@unaffiliated/jonez) has quit (Ping timeout: 258 seconds)
2016-12-22 10:32:31	◥	banita (~banita@178.159.162.193) has joined #postgresql
2016-12-22 10:33:03	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-22 10:33:26	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2016-12-22 10:34:04	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Client Quit)
2016-12-22 10:34:07	◥	slentzen (~slentzen@89.238.186.80) has joined #postgresql
2016-12-22 10:35:27	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-22 10:35:45	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2016-12-22 10:35:58	◥	djbkd (~djbkd@135.84.132.21) has joined #postgresql
2016-12-22 10:36:55	◥	sfkeller (~chatzilla@135.209.196.178.dynamic.wline.res.cust.swisscom.ch) has joined #postgresql
2016-12-22 10:37:07	◥	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has joined #postgresql
2016-12-22 10:37:33	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 260 seconds)
2016-12-22 10:38:16	◥	ghostwalker (~rhonabwy@95.157.58.47.dynamic.cablesurf.de) has joined #postgresql
2016-12-22 10:39:05	◥	vuoto (~vuoto@adsl-89-217-211-221.adslplus.ch) has joined #postgresql
2016-12-22 10:39:48	◣	slentzen (~slentzen@89.238.186.80) has quit (Quit: Leaving)
2016-12-22 10:40:08	◥	ktoverso (~ktoverso@95.161.222.64) has joined #postgresql
2016-12-22 10:40:21	◣	rhonabwy (~rhonabwy@95.157.58.47.dynamic.cablesurf.de) has quit (Ping timeout: 260 seconds)
2016-12-22 10:42:57	◣	fordfrog (~fordfrog@gentoo/developer/fordfrog) has quit (Quit: Leaving)
2016-12-22 10:43:01	◥	SpeakerToMeat (~SpeakerTo@prgmr/customer/SpeakerToMeat) has joined #postgresql
2016-12-22 10:45:03	◥	wolfwood_ (~shashwat@59.94.72.209) has joined #postgresql
2016-12-22 10:45:15	◥	thuvvik_ (~quassel@dispo-82-248-184-156.adsl.proxad.net) has joined #postgresql
2016-12-22 10:45:23	◥	jonez (~jam@unaffiliated/jonez) has joined #postgresql
2016-12-22 10:45:44	◣	thuvvik (~quassel@lns-bzn-22-82-249-73-220.adsl.proxad.net) has quit (Ping timeout: 256 seconds)
2016-12-22 10:48:27	wolfwood_	I have a table called tags with attributes (id, name, todo_id).  I have another table todos which earlier had an array of strings named tags as attribute which I changed in favour of creating a new table.  Now issue is if I get a todo with say tags (a, b, c) I need to make three entries in tags tables first and then one in todos table.  Is that ideal behaviour ?
2016-12-22 10:48:39	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-22 10:50:38	◥	mbroadhead (~mbroadhea@host-98-127-233-186.static.bresnan.net) has joined #postgresql
2016-12-22 10:50:47	◣	linuxhiker1 (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Ping timeout: 258 seconds)
2016-12-22 10:51:25	◣	skyx (~skyx__@lk.84.20.233.181.dc.cable.static.lj-kabel.net) has quit (Quit: This computer has gone to sleep)
2016-12-22 10:53:26	◥	SpNg (~ARolek@wsip-70-167-118-33.sd.sd.cox.net) has joined #postgresql
2016-12-22 10:53:26	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 250 seconds)
2016-12-22 10:54:21	◥	inkjetunito (~benny@unaffiliated/inkjetunit) has joined #postgresql
2016-12-22 10:54:46	◣	Lordz (~Adium@186.215.116.176) has left #postgresql
2016-12-22 10:55:16	◣	MarkyC (~MarkyC@2607:fea8:23df:fe26:bcd9:1f42:6861:e469) has quit (Remote host closed the connection)
2016-12-22 10:55:35	SpNg	I’m working with transactions on a junction table. My current strategy is to delete every record where rec_id=[provided id] and then insert several new rows for the updated relationship. This is now causing concurrency problems with my transactions (currently Read Committed) where a second concurrent transaction is not aware of the new rows inserted by the first concurrent transaction. Is there a best practice for addressing this proble
2016-12-22 10:58:28	◣	mbroadhead (~mbroadhea@host-98-127-233-186.static.bresnan.net) has quit (Ping timeout: 258 seconds)
2016-12-22 10:59:24	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2016-12-22 11:00:10	◥	raynold (uid201163@gateway/web/irccloud.com/x-seqtjoivzgehhmjz) has joined #postgresql
2016-12-22 11:01:05	◣	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has quit (Quit: Lost terminal)
2016-12-22 11:04:25	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-22 11:05:14	jf02jfv	RhodiumToad, is there a way to get rid of this union? gist: https://gist.github.com/anonymous/1ac967a02f9abdba81f306fc0cd2a43b thanks
2016-12-22 11:05:33	◣	cur8or (~cur8or@105.18.business-adsl.cybersmart.co.za) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-22 11:06:08	◥	ktoverso_ (~ktoverso@185.86.106.160) has joined #postgresql
2016-12-22 11:06:21	◣	ktoverso (~ktoverso@95.161.222.64) has quit (Ping timeout: 252 seconds)
2016-12-22 11:06:46	◥	NCS_One (~NCS_One@176.78.178.106) has joined #postgresql
2016-12-22 11:06:57	◣	Kaizervonmaanen (~Kaizervon@188.95.241.148) has quit (Ping timeout: 260 seconds)
2016-12-22 11:06:58	◣	jpeura (~jpeura@dsl-pribrasgw1-58c309-121.dhcp.inet.fi) has quit (Quit: Leaving)
2016-12-22 11:08:22	◥	A_Drone (~a_drone@202.73.38.221) has joined #postgresql
2016-12-22 11:09:26	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 268 seconds)
2016-12-22 11:11:49	◥	Lordz (~Adium@186.215.116.176) has joined #postgresql
2016-12-22 11:12:39	◥	macabre (~ibtjw@unaffiliated/macabre) has joined #postgresql
2016-12-22 11:12:58	◣	A_Drone (~a_drone@202.73.38.221) has quit (Ping timeout: 245 seconds)
2016-12-22 11:14:02	StuckMojo	anyone know of a script or tool for doing live index maintenance?
2016-12-22 11:14:17	StuckMojo	i.e. reindexing PKs and such
2016-12-22 11:14:39	StuckMojo	for a plain index, simple to just create a new one concurrently with a different name and drop the old
2016-12-22 11:14:53	◣	Lordz (~Adium@186.215.116.176) has left #postgresql
2016-12-22 11:14:56	StuckMojo	'tho a script or tool that also told you which needed it would be nice
2016-12-22 11:15:01	◥	cJIaB (~cJIaB@178.220.188.67) has joined #postgresql
2016-12-22 11:16:11	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2016-12-22 11:18:30	◣	triplicate (3fe1c7b2@gateway/web/freenode/ip.63.225.199.178) has quit (Ping timeout: 260 seconds)
2016-12-22 11:20:08	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-22 11:20:37	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 248 seconds)
2016-12-22 11:21:13	◥	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has joined #postgresql
2016-12-22 11:23:37	⚡	xemdetia_ is now known as xemdetia
2016-12-22 11:23:40	◣	eatkin (~eatkin@166.70.31.36) has quit (Excess Flood)
2016-12-22 11:24:19	◥	eatkin (~eatkin@166.70.31.36) has joined #postgresql
2016-12-22 11:24:41	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 252 seconds)
2016-12-22 11:25:20	◥	JanC_ (~janc@ip-62-235-208-189.dsl.scarlet.be) has joined #postgresql
2016-12-22 11:25:20	◥	rajivr_ (~rajivr@103.205.218.134) has joined #postgresql
2016-12-22 11:25:29	◣	wolfwood_ (~shashwat@59.94.72.209) has quit (Quit: wolfwood_)
2016-12-22 11:25:51	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Read error: Connection reset by peer)
2016-12-22 11:25:56	⚡	JanC_ is now known as Guest35600
2016-12-22 11:25:57	◣	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has quit (Ping timeout: 248 seconds)
2016-12-22 11:26:19	◣	Guest35600 (~janc@ip-62-235-208-189.dsl.scarlet.be) has quit (Remote host closed the connection)
2016-12-22 11:26:35	◥	XofP (~XofP@sfosj0215mups301.wiline.com) has joined #postgresql
2016-12-22 11:26:40	◥	JanC__ (~janc@lugwv/member/JanC) has joined #postgresql
2016-12-22 11:27:40	◣	JanC (~janc@lugwv/member/JanC) has quit (Ping timeout: 256 seconds)
2016-12-22 11:27:58	⚡	JanC__ is now known as JanC
2016-12-22 11:27:58	◣	rajivr (~rajivr@103.205.218.142) has quit (Ping timeout: 245 seconds)
2016-12-22 11:28:31	◣	vuoto (~vuoto@adsl-89-217-211-221.adslplus.ch) has quit (Remote host closed the connection)
2016-12-22 11:30:13	◥	bronson (~bronson@142-254-101-34.dsl.dynamic.fusionbroadband.com) has joined #postgresql
2016-12-22 11:30:14	RhodiumToad	jf02jfv: that query isn't valid; what are you actually trying to do?
2016-12-22 11:30:22	◥	robotonic (~rob@ext.nulogy.com) has joined #postgresql
2016-12-22 11:30:25	◥	dege (~dege@c-907ce555.027-294-73746f71.cust.bredbandsbolaget.se) has joined #postgresql
2016-12-22 11:30:33	robotonic	how do I list templates?
2016-12-22 11:30:41	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2016-12-22 11:30:44	robotonic	or more specifically is it possible to list extension in a template?
2016-12-22 11:30:44	jf02jfv	RhodiumToad, ah sorry 1 sec
2016-12-22 11:30:45	◥	macabre (~ibtjw@unaffiliated/macabre) has joined #postgresql
2016-12-22 11:30:49	◣	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has quit (Quit: Leaving)
2016-12-22 11:31:14	RhodiumToad	robotonic: unless you explicitly disabled the ability to connect, you can just connect to the template db and look
2016-12-22 11:33:49	robotonic	RhodiumToad: Thank you kindly
2016-12-22 11:34:45	◣	bronson (~bronson@142-254-101-34.dsl.dynamic.fusionbroadband.com) has quit (Ping timeout: 246 seconds)
2016-12-22 11:35:47	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-22 11:36:34	◣	BitWhisperer (~BitWhispe@pool-96-227-235-90.phlapa.fios.verizon.net) has quit (Ping timeout: 268 seconds)
2016-12-22 11:37:03	◥	dys` (~dys@ip-109-44-3-163.web.vodafone.de) has joined #postgresql
2016-12-22 11:38:33	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2016-12-22 11:39:44	◥	GodFather (~rcc@96-35-101-212.dhcp.bycy.mi.charter.com) has joined #postgresql
2016-12-22 11:40:21	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 248 seconds)
2016-12-22 11:40:53	◥	SEQUEL_TECH (~sequel@85.118.82.219) has joined #postgresql
2016-12-22 11:40:57	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Read error: Connection reset by peer)
2016-12-22 11:41:02	◥	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2016-12-22 11:41:14	jf02jfv	RhodiumToad, basically the upper part of the union is going on the first 2 weeks, and the union part is the on the next week gist: https://gist.github.com/anonymous/ba22bf500481f13b99a97d390ff3797f
2016-12-22 11:42:12	RhodiumToad	the query still isn't valid, the two branches of the union have different numbers of columns
2016-12-22 11:42:39	◣	ktoverso_ (~ktoverso@185.86.106.160) has quit (Ping timeout: 252 seconds)
2016-12-22 11:43:30	RhodiumToad	you want the sum of "all_hours" for weeks 1 and 2, but for week 3 the sum of some individual elements of "hours"?
2016-12-22 11:43:32	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Ping timeout: 256 seconds)
2016-12-22 11:43:34	jf02jfv	ah sorry the second branch doesnt have all_hours
2016-12-22 11:43:37	jf02jfv	:(
2016-12-22 11:43:48	jf02jfv	RhodiumToad, exactly ;/
2016-12-22 11:44:54	◥	mlt- (~user@unaffiliated/mlt-) has joined #postgresql
2016-12-22 11:45:07	RhodiumToad	at this point it's probably worth switching from lateral to using a scalar subselect
2016-12-22 11:45:27	◥	ktoverso (~ktoverso@185.86.106.165) has joined #postgresql
2016-12-22 11:46:17	◥	Papierkorb (papierkorb@endless-aerospace.de) has joined #postgresql
2016-12-22 11:47:10	Papierkorb	Hello. Say I have an index on a VARCHAR column, and then do a LIKE "foo%" on this query (leading string set, trailing not), does the index speed this up?
2016-12-22 11:47:39	◥	kamil (~kamil@user-109-243-255-178.play-internet.pl) has joined #postgresql
2016-12-22 11:47:52	◣	mlt- (~user@unaffiliated/mlt-) has quit (Read error: Connection reset by peer)
2016-12-22 11:49:06	◣	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has left #postgresql
2016-12-22 11:49:09	◥	mlt- (~user@unaffiliated/mlt-) has joined #postgresql
2016-12-22 11:49:28	RhodiumToad	select name, sum(hours) from (select data->>'name' as name, case when data->>'week' = '3' then (select sum(round(e.value::numeric,1)) from jsonb_each_text(...) e where ...) else (data->>'all_hours')::numeric end as hours from posts where ... group by name;
2016-12-22 11:49:42	jf02jfv	RhodiumToad, :) thanks
2016-12-22 11:49:58	RhodiumToad	Papierkorb: if and only if either: lc_collate is 'C', or the index was created with the varchar_pattern_ops opclass
2016-12-22 11:50:07	◥	held (~heldchen@unaffiliated/held) has joined #postgresql
2016-12-22 11:50:10	◥	macabre (~ibtjw@unaffiliated/macabre) has joined #postgresql
2016-12-22 11:51:30	apollo13	StuckMojo: https://twitter.com/fapolloner/status/812022583277350913
2016-12-22 11:52:30	Papierkorb	RhodiumToad: Thank you as always
2016-12-22 11:52:36	◣	kamil (~kamil@user-109-243-255-178.play-internet.pl) has quit (Ping timeout: 268 seconds)
2016-12-22 11:53:39	◣	SEQUEL_TECH (~sequel@85.118.82.219) has quit (Read error: Connection reset by peer)
2016-12-22 11:54:40	◣	SpNg (~ARolek@wsip-70-167-118-33.sd.sd.cox.net) has quit (Quit: SpNg)
2016-12-22 11:54:51	Papierkorb	Is it possible to have a 'reference counting' cascading delete? So in a 1:n mapping, if the count of n drops to 0, remove the referenced 1 row?
2016-12-22 11:54:56	◥	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has joined #postgresql
2016-12-22 11:55:38	◣	robotonic (~rob@ext.nulogy.com) has quit (Quit: robotonic)
2016-12-22 11:58:00	Jongee	I'm planning a project using Doctrine2 and Postgresql, I'm making heavy use of Class Table Inheritance - which doctrine implements by using JOINs using FKs and a 'dtype' column to tell it which table to reference... Since postgresql has its own table inheritance, I was going to use that as well - but given that doctrine constructs queries with JOINs, erm... how does postgresql optimize behind the scenes in this kind of situation, if at all?
2016-12-22 11:58:31	lluad	I would avoid postgresql inheritance and just let Doctrine2 do it's thing.
2016-12-22 11:58:58	lluad	Postgresql inheritance is a useful toolbox for implementing some sorts of table partitioning, but pretty much a footgun outside that niche.
2016-12-22 12:00:25	Jongee	so just let doctrine2 create its own queries and not use postgresql's inheritance features at all?
2016-12-22 12:00:30	lluad	Yup.
2016-12-22 12:00:35	StuckMojo	apollo13: ++++ :)
2016-12-22 12:00:35	Jongee	even if it ends up creating queries with like 6 joins? lol
2016-12-22 12:00:37	◣	joelt (~joelt@75-27-137-228.lightspeed.austtx.sbcglobal.net) has quit (Ping timeout: 260 seconds)
2016-12-22 12:00:47	◣	ktoverso (~ktoverso@185.86.106.165) has quit (Quit: Sleep quit)
2016-12-22 12:00:51	lluad	Joins are just fine, they're the thing an rdbms is designed to do well.
2016-12-22 12:01:35	apollo13	StuckMojo: wow, limit/offset and order_by are coming for free, thanks to the orm
2016-12-22 12:01:49	lluad	This is the first I've heard of Doctrine2, but if it creates the schema for you I'd hope it'd include appropriate keys and indexes to make it all work smoothly.
2016-12-22 12:01:52	StuckMojo	apollo13: nice
2016-12-22 12:01:53	Jongee	does postgresql create a sort of cache or anything like that behind the scenes for a situation like that? I still have horror stories of queries taking 5+ seconds when I designed an entity attribute value database
2016-12-22 12:02:01	pstef_	Jongee: for FKs keep in mind that they don't create indexes behind the scenes, like PKs do.
2016-12-22 12:02:35	lluad	It just does the queries. If the table schema is sane and has appropriate indexes and the queries aren't ridiculous it'll be fast.
2016-12-22 12:02:50	lluad	There are a lot of "ifs" in there, but, eh, that's reality. :)
2016-12-22 12:02:52	Jongee	http://dba.stackexchange.com/q/158234/64569 I linked this before, but it bears repeating in case you hadn't seen it - this is my roughly my design (I've added an extra column to the main table)
2016-12-22 12:03:12	◥	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has joined #postgresql
2016-12-22 12:03:25	StuckMojo	apollo13: tossed your tweet up onto my FB page. that'll get it out to a lot of PG people at least
2016-12-22 12:03:31	Jongee	yeah, I'm just paranoid and like to overplan :P like I said, 5+ second long queries to poll <100k rows still gives me nightmares
2016-12-22 12:03:36	apollo13	StuckMojo: <3
2016-12-22 12:04:03	◥	robotonic (~rob@ext.nulogy.com) has joined #postgresql
2016-12-22 12:05:59	lluad	apollo13: Rather nice, as generated queries go.
2016-12-22 12:06:12	◣	skylar (~skylar2@gsits-a.gs.washington.edu) has quit (Quit: Leaving.)
2016-12-22 12:06:19	◣	akretschmer (~akretschm@p4FCCB631.dip0.t-ipconnect.de) has quit (Quit: Lost terminal)
2016-12-22 12:06:45	apollo13	lluad: thanks, yes the exclude could be better, the full select list and prefix is by design though
2016-12-22 12:07:17	apollo13	uhm, order_by in that context only makes sense with a number, right?
2016-12-22 12:07:19	▷	lluad would vote for a "fewer double quotes" option, but apart from that it even looks kinda like hand-written sql
2016-12-22 12:07:42	apollo13	oh "ORDER BY", sorry for talking in django terms
2016-12-22 12:07:50	◣	kacey (~kacey@c-50-132-2-197.hsd1.wa.comcast.net) has quit (Read error: Connection reset by peer)
2016-12-22 12:08:01	◣	dionysus69 (~Thunderbi@unaffiliated/dionysus69) has quit (Ping timeout: 268 seconds)
2016-12-22 12:09:05	apollo13	ah no, I need to dump the table prefix *hmm*
2016-12-22 12:09:11	◥	priidu (~priidu@unaffiliated/priidu) has joined #postgresql
2016-12-22 13:00:08	⚡	irc: disconnected from server
2016-12-22 13:00:31	◥	boon (~david@c-50-170-110-190.hsd1.wa.comcast.net) has joined #postgresql
2016-12-22 13:00:31	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-22 13:00:31	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-22 13:00:31	⚡	Channel #postgresql: 1007 nicks (0 ops, 0 voices, 1007 normals)
2016-12-22 13:00:31	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-22 13:00:33	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-22 13:00:59	StuckMojo	might want to be able to do that too, let me see if it's syntactically correct to do so
2016-12-22 13:01:12	apollo13	I couldn't get it working before, so I assume no, or I am dumb
2016-12-22 13:01:17	apollo13	the nice thing is that we get SubQuery as expression in the ORM, so basically you can do like SomeModel.objects.filter(your_field = SubQuery(M1.objects.all().union(M2.objects.all())[:1])) :D
2016-12-22 13:01:49	StuckMojo	yeah that'll solve my performance issues
2016-12-22 13:02:05	StuckMojo	what version is (or will be) SubQuery() in?
2016-12-22 13:02:09	apollo13	1.11
2016-12-22 13:02:23	StuckMojo	i wonder how hard it would be to backport...
2016-12-22 13:03:00	apollo13	literally c&p of 4 classes
2016-12-22 13:03:08	apollo13	4 new classes
2016-12-22 13:03:17	apollo13	no changes to existing ones, the expression system allows all that already
2016-12-22 13:03:18	StuckMojo	looks like you can't have a group by on the union result, without doing a table alias of the whole thing
2016-12-22 13:03:19	apollo13	https://github.com/django/django/pull/6478/files
2016-12-22 13:03:41	StuckMojo	bookmarked.
2016-12-22 13:03:46	◥	djbkd (~djbkd@135.84.132.21) has joined #postgresql
2016-12-22 13:04:19	apollo13	though I am not sure which expression stuff that needs
2016-12-22 13:04:28	apollo13	might be that you have to be on 1.8 or 1.9 for those classes to work
2016-12-22 13:04:28	◥	MrLawrence (~mitaton@31.205.164.170) has joined #postgresql
2016-12-22 13:04:28	StuckMojo	just PMed you my email
2016-12-22 13:04:28	StuckMojo	we're in the process of upgrading from 1.7 to 1.9 right now
2016-12-22 13:04:28	apollo13	ah that should help, unless 1.10 had breaking changes
2016-12-22 13:04:38	apollo13	but you should be able to copy those classes and see for yourself on 1.9
2016-12-22 13:04:49	◣	howitdo (~howitdo@unaffiliated/howitdo) has quit (Ping timeout: 264 seconds)
2016-12-22 13:04:53	apollo13	StuckMojo: oh, and something else you might like
2016-12-22 13:04:56	StuckMojo	when you get a PR going for this, email me the url so i can follow it
2016-12-22 13:05:06	apollo13	1.11 is getting server side cursors for postgres
2016-12-22 13:05:11	apollo13	(hopefully)
2016-12-22 13:05:22	StuckMojo	nice. we don't really use them here, and in fact i really rarely do
2016-12-22 13:05:27	StuckMojo	anywhere
2016-12-22 13:05:34	apollo13	my PR is already there https://github.com/django/django/pull/7727
2016-12-22 13:05:46	StuckMojo	for that i usually move into a plpgsql function and iterate there, however, they'll be nice to have
2016-12-22 13:05:49	apollo13	it is WIP, but it will probably stay that 7727 since I can force push…
2016-12-22 13:06:07	apollo13	I think they will even on by default, is that a good idea?
2016-12-22 13:06:07	StuckMojo	cool beans
2016-12-22 13:06:12	◣	gleu (~guillaume@LFbn-1-8419-93.w81-254.abo.wanadoo.fr) has quit (Ping timeout: 248 seconds)
2016-12-22 13:06:24	StuckMojo	cursors? mmm...i wouldn't think so
2016-12-22 13:06:44	apollo13	https://github.com/django/django/pull/7587/files#diff-31a704a6df3324116cc53d7b91855fbeR265
2016-12-22 13:06:47	◣	fguillot (~fguillot@2607:f748:9:1678:18f6:9835:3393:5bc1) has quit (Quit: Textual IRC Client: www.textualapp.com)
2016-12-22 13:06:55	apollo13	good :D
2016-12-22 13:06:58	StuckMojo	they're not as expensive in PG as other RDBMSes, but the multiple network round trips would make them slower overall than a plain query
2016-12-22 13:07:22	apollo13	mhm, I wonder what the default fetch size for psycopg2 is for server side cursors
2016-12-22 13:07:50	◥	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has joined #postgresql
2016-12-22 13:08:27	◥	SEQUEL_TECH (~sequel@85-118-76-153.mtel.net) has joined #postgresql
2016-12-22 13:08:45	StuckMojo	as to whether it's a good idea to always use a cursor (i'm assuming that's what you mean by "on by default"), i'd open that discussion up to the channel at large here
2016-12-22 13:08:58	StuckMojo	RhodiumToad: can you opine on this?
2016-12-22 13:09:10	RhodiumToad	there's the issue of cursor_tuple_fraction to watch out for
2016-12-22 13:09:30	RhodiumToad	by default, when pg plans a cursor query, it assumes that only the first 10% of the result will be fetched
2016-12-22 13:09:33	◥	A_Drone (~a_drone@202.73.38.221) has joined #postgresql
2016-12-22 13:09:39	StuckMojo	oh right
2016-12-22 13:09:44	◥	r_hector (~richard@203-97-170-14.cable.telstraclear.net) has joined #postgresql
2016-12-22 13:09:54	apollo13	oh, that is a good point, may I just quote you on that?
2016-12-22 13:09:55	RhodiumToad	that can get you a fast-start plan, but one that takes excessive time if you actually fetch the whole result
2016-12-22 13:10:06	RhodiumToad	sure
2016-12-22 13:10:14	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-22 13:10:18	◥	Cred1 (ac3828cf@gateway/web/freenode/ip.172.56.40.207) has joined #postgresql
2016-12-22 13:10:18	RhodiumToad	look up the cursor_tuple_fraction setting in the docs
2016-12-22 13:10:19	◥	ktoverso (~ktoverso@95.161.222.84) has joined #postgresql
2016-12-22 13:10:21	◥	howitdo (~howitdo@unaffiliated/howitdo) has joined #postgresql
2016-12-22 13:10:23	apollo13	thanks
2016-12-22 13:10:59	StuckMojo	RhodiumToad: by only the first 10%, do you mean initially, or it assumes that you'll actually never fetch the full result?
2016-12-22 13:11:06	RhodiumToad	you can (and should) set that to 1 if you're declaring a cursor where you plan to fetch all the rows
2016-12-22 13:11:16	StuckMojo	i think that's my answer
2016-12-22 13:11:19	RhodiumToad	it assumes you'll stop fetching after 10%
2016-12-22 13:11:22	◥	b00tstr4p (~textual@181.211.39.124) has joined #postgresql
2016-12-22 13:11:25	◣	skyx (~skyx__@lk.84.20.233.181.dc.cable.static.lj-kabel.net) has quit (Quit: This computer has gone to sleep)
2016-12-22 13:11:55	RhodiumToad	it has the same effect on the plan choice as having a LIMIT clause for 10% of the rows, though it doesn't actually limit the result
2016-12-22 13:12:08	◣	flying (~flying@90.216.134.197) has quit
2016-12-22 13:12:31	▷	StuckMojo hugs open source projects collaborating with each other
2016-12-22 13:12:43	RhodiumToad	i.e. the query does still _work_, it's just optimized on the assumption that you want the first rows quickly and the later rows not at all
2016-12-22 13:13:06	◣	r_hector (~richard@203-97-170-14.cable.telstraclear.net) has quit (Client Quit)
2016-12-22 13:13:59	apollo13	I wonder if similar things are the case for informix
2016-12-22 13:14:11	▷	RhodiumToad wots not of informix
2016-12-22 13:14:13	apollo13	if yes, that might offer a nice speedup :D
2016-12-22 13:14:20	◣	A_Drone (~a_drone@202.73.38.221) has quit (Ping timeout: 250 seconds)
2016-12-22 13:14:36	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 250 seconds)
2016-12-22 13:14:42	rightfold	Can DML statements appear in a prepared statement?
2016-12-22 13:14:48	◣	inkjetunito (~benny@unaffiliated/inkjetunit) has quit (Quit: q)
2016-12-22 13:15:00	rightfold	I mean DDL
2016-12-22 13:15:33	rightfold	seems not :)
2016-12-22 13:15:52	◣	ron_frown (~ronnyfro@24-176-228-82.static.snlo.ca.charter.com) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-22 13:16:51	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2016-12-22 13:17:05	◣	AdamTheExile (~textual@ps-relay-server.tolland.k12.ct.us) has quit (Ping timeout: 268 seconds)
2016-12-22 13:17:23	Cred1	Hi. I'm trying to do UPDATE with WHERE ((EXISTS...) OR (EXISTS...)) but I get "table row type and query-specified row type do not match". If I remove those exists then update works.
2016-12-22 13:17:45	◥	RichardJ (~richard@80.115.61.10) has joined #postgresql
2016-12-22 13:17:49	MatheusOl	Cred1: can you show the code?
2016-12-22 13:17:55	MatheusOl	rightfold: no
2016-12-22 13:18:08	Cred1	??paste
2016-12-22 13:18:08	pg_docbot	http://explain.depesz.com/ :: http://fpaste.org
2016-12-22 13:18:08	pg_docbot	http://sqlfiddle.com/ :: http://dpaste.com/
2016-12-22 13:18:16	◣	m451 (~m451@pD9FA4329.dip0.t-ipconnect.de) has quit (Read error: Connection reset by peer)
2016-12-22 13:18:22	Cred1	MatheusOl: just a moment..
2016-12-22 13:18:35	◣	Qria (uid25348@gateway/web/irccloud.com/x-ifeepcistveeqpqh) has quit (Quit: Connection closed for inactivity)
2016-12-22 13:20:33	◥	inkjetunito (~benny@unaffiliated/inkjetunit) has joined #postgresql
2016-12-22 13:20:50	xocolatl	what would be a good way to keep a cache warm (pg's or system's) on a standby so that it's ready in case of failover?
2016-12-22 13:20:53	◣	TraceEv (~TraceEv@d4-50-58-23.try.wideopenwest.com) has quit (Read error: Connection reset by peer)
2016-12-22 13:20:59	◣	SEQUEL_TECH (~sequel@85-118-76-153.mtel.net) has quit (Read error: No route to host)
2016-12-22 13:21:36	◥	SEQUEL_TECH (~sequel@85-118-76-153.mtel.net) has joined #postgresql
2016-12-22 13:21:40	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 248 seconds)
2016-12-22 13:22:03	◣	rjuju (~rjuju@bur91-1-82-230-68-10.fbx.proxad.net) has quit (Quit: Leaving)
2016-12-22 13:22:32	◣	Nizumzen (~Nizumzen@cpc2-reig5-2-0-cust667.6-3.cable.virginm.net) has quit (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
2016-12-22 13:23:56	MatheusOl	pg_prewarm works on standby, no?
2016-12-22 15:04:00	⚡	irc: disconnected from server
2016-12-22 15:04:23	◥	boon (~david@66.195.46.242) has joined #postgresql
2016-12-22 15:04:23	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-22 15:04:23	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-22 15:04:23	⚡	Channel #postgresql: 995 nicks (0 ops, 0 voices, 995 normals)
2016-12-22 15:04:23	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-22 15:04:23	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-22 15:04:37	wfpkhc	ok
2016-12-22 15:04:58	wfpkhc	never knew that :P
2016-12-22 15:05:04	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 265 seconds)
2016-12-22 15:05:07	RhodiumToad	if there are more, then it will only consider joining in the order given in the query, but even then it will try both join orders for each pair
2016-12-22 15:05:18	wfpkhc	ah well that wont happen with me
2016-12-22 15:05:23	wfpkhc	i have difficulties with left joins :P
2016-12-22 15:05:48	RhodiumToad	left joins do constrain the join order somewhat, though even those can be rearranged in some cases
2016-12-22 15:06:29	wfpkhc	meh - "here postgresql, here is my sql, you do something with it, please give me the right answer"  - is usually what i do :P
2016-12-22 15:08:29	wfpkhc	is there anything for you, RhodiumToad, that i can help with?
2016-12-22 15:08:35	wfpkhc	to repay the favour?
2016-12-22 15:08:50	RhodiumToad	no need
2016-12-22 15:08:55	wfpkhc	ok
2016-12-22 15:09:00	wfpkhc	if i do not see you before xmas
2016-12-22 15:09:08	wfpkhc	all the best and may all your wishes come true
2016-12-22 15:09:29	RhodiumToad	likewise to you :-)
2016-12-22 15:09:36	wfpkhc	thank you
2016-12-22 15:09:43	◣	wfpkhc (~wfpkhc@unaffiliated/wfpkhc) has quit (Quit:  HydraIRC -> http://www.hydrairc.com <- Chicks dig it)
2016-12-22 15:10:17	rightfold	Is count(*) special syntax? Can I create a custom aggregate function that takes *?
2016-12-22 15:10:45	RhodiumToad	aggregate functions that take no arguments at all are always called as func(*)
2016-12-22 15:10:56	◣	darkbit (~darkbit@49.147.128.19) has quit (Ping timeout: 256 seconds)
2016-12-22 15:10:58	RhodiumToad	so yes, you can
2016-12-22 15:11:04	◥	A_Drone (~a_drone@202.73.38.221) has joined #postgresql
2016-12-22 15:11:28	◣	aristippos (~aristippo@2601:646:c003:3d5f:892a:751e:89bf:4b15) has quit (Quit: Textual IRC Client: www.textualapp.com)
2016-12-22 15:12:37	rightfold	Ah :)
2016-12-22 15:13:41	◥	travisjeffery (~textual@CPE84948c593ec1-CM84948c593ec0.cpe.net.cable.rogers.com) has joined #postgresql
2016-12-22 15:13:51	◣	bdunavant (~bdunavant@static-108-48-124-82.washdc.fios.verizon.net) has quit (Remote host closed the connection)
2016-12-22 15:14:26	◥	bdunavant (~bdunavant@static-108-48-124-82.washdc.fios.verizon.net) has joined #postgresql
2016-12-22 15:14:40	◣	nettoweb (~nettoweb@2804:7f5:f180:662f::6) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-22 15:16:01	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-22 15:17:16	◥	TechnoCrunch (~Tech@101.100.137.146) has joined #postgresql
2016-12-22 15:17:19	◣	Diemuzi (~IceChat9@unaffiliated/diemuzi) has quit (Quit: See you on the flip side)
2016-12-22 15:17:39	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2016-12-22 15:17:50	◣	A_Drone (~a_drone@202.73.38.221) has quit (Ping timeout: 250 seconds)
2016-12-22 15:18:08	stevenxl	Hi folks. I have a databse with a dash in its name, and I'd like to drop it but i get a syntax error.
2016-12-22 15:18:18	stevenxl	How can I drop such a named database?
2016-12-22 15:18:23	xocolatl	double quote it
2016-12-22 15:18:29	◣	stephenjudkins (~stephenju@c-73-11-56-221.hsd1.or.comcast.net) has quit (Remote host closed the connection)
2016-12-22 15:18:32	xocolatl	drop database "db-name";
2016-12-22 15:18:42	◣	bdunavant (~bdunavant@static-108-48-124-82.washdc.fios.verizon.net) has quit (Ping timeout: 250 seconds)
2016-12-22 15:19:16	◥	SEQUEL_TECH (~sequel@85-118-79-108.mtel.net) has joined #postgresql
2016-12-22 15:19:25	◣	jefferai (sid1300@kde/mitchell) has quit (Ping timeout: 250 seconds)
2016-12-22 15:19:26	◥	stephenjudkins (~stephenju@c-73-11-56-221.hsd1.or.comcast.net) has joined #postgresql
2016-12-22 15:19:30	◣	stephenjudkins (~stephenju@c-73-11-56-221.hsd1.or.comcast.net) has quit (Remote host closed the connection)
2016-12-22 15:19:44	◥	triplicate (4403c9c5@gateway/web/freenode/ip.68.3.201.197) has joined #postgresql
2016-12-22 15:19:56	◥	stephenjudkins (~stephenju@c-73-11-56-221.hsd1.or.comcast.net) has joined #postgresql
2016-12-22 15:20:35	◥	jefferai (sid1300@kde/mitchell) has joined #postgresql
2016-12-22 15:20:37	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 248 seconds)
2016-12-22 15:20:47	stevenxl	xocolatl: thanks. I tried it but that didn't work. maybe they are not real databases. does psql list anything else when I run \l?
2016-12-22 15:21:09	xocolatl	give us an exact error message
2016-12-22 15:22:13	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 248 seconds)
2016-12-22 15:22:25	◣	MrLawrence (~mitaton@31.205.164.170) has quit (Quit: Leaving)
2016-12-22 15:22:59	stevenxl	xocolatl: My mistake. That worked.
2016-12-22 15:23:00	stevenxl	Thank you
2016-12-22 15:23:11	◣	sfkeller (~chatzilla@135.209.196.178.dynamic.wline.res.cust.swisscom.ch) has quit (Quit: ChatZilla 0.9.93 [Firefox 50.0.2/20161129173726])
2016-12-22 15:25:23	◣	TechnoCrunch (~Tech@101.100.137.146) has quit (Ping timeout: 265 seconds)
2016-12-22 15:25:42	◣	__Yiota (~textual@CPE6c709fd08eb3-CMbc4dfb575c90.cpe.net.cable.rogers.com) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-22 15:25:51	◣	SEQUEL_TECH (~sequel@85-118-79-108.mtel.net) has quit (Read error: Connection reset by peer)
2016-12-22 15:25:52	rightfold	stevenxl: you can also use the dropdb command line tool if it is installed: dropdb db-name
2016-12-22 15:26:10	◣	EyePulp (~eyepulp@107.152.3.83) has quit (Remote host closed the connection)
2016-12-22 15:26:16	stevenxl	OK thank you.
2016-12-22 15:26:34	◣	Torgan (~Torgan@avi31-1-88-177-47-93.fbx.proxad.net) has quit (Quit: My Mac has gone to sleep. ZZZzzz…)
2016-12-22 15:26:57	◥	Torgan (~Torgan@avi31-1-88-177-47-93.fbx.proxad.net) has joined #postgresql
2016-12-22 15:27:23	◣	Torgan (~Torgan@avi31-1-88-177-47-93.fbx.proxad.net) has quit (Client Quit)
2016-12-22 15:27:44	◥	Torgan (~Torgan@avi31-1-88-177-47-93.fbx.proxad.net) has joined #postgresql
2016-12-22 15:27:49	◣	xzi11a (~robert@static-108-48-124-82.washdc.fios.verizon.net) has quit (Ping timeout: 268 seconds)
2016-12-22 15:28:10	◣	Cred1 (ac3828cf@gateway/web/freenode/ip.172.56.40.207) has quit (Ping timeout: 260 seconds)
2016-12-22 15:28:11	◣	Torgan (~Torgan@avi31-1-88-177-47-93.fbx.proxad.net) has quit (Client Quit)
2016-12-22 15:31:06	◥	david__ (~david@ESS-p-144-138-88-249.mega.tmns.net.au) has joined #postgresql
2016-12-22 15:31:45	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-22 15:31:50	◥	wolfwood_ (~shashwat@59.94.72.209) has joined #postgresql
2016-12-22 15:32:15	◥	bronson (~bronson@142-254-101-34.dsl.dynamic.fusionbroadband.com) has joined #postgresql
2016-12-22 15:34:45	◥	bmejias (~bmejias@2a02:a03f:1ae7:db00:256b:b4df:3e69:134a) has joined #postgresql
2016-12-22 15:35:48	◥	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has joined #postgresql
2016-12-22 15:36:18	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 250 seconds)
2016-12-22 15:36:46	◣	wolfwood_ (~shashwat@59.94.72.209) has quit (Quit: wolfwood_)
2016-12-22 15:37:11	◥	aristippos (~aristippo@2601:646:c003:3d5f:3c34:5486:4c56:b7c2) has joined #postgresql
2016-12-23 09:35:53	⚡	irc: disconnected from server
2016-12-23 09:36:22	◥	boon (~david@66.195.46.242) has joined #postgresql
2016-12-23 09:36:22	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-23 09:36:22	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-23 09:36:22	⚡	Channel #postgresql: 986 nicks (0 ops, 0 voices, 986 normals)
2016-12-23 09:36:22	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-23 09:36:24	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-23 09:39:06	sja91	hey Zr40 Sorry to bother you, but would you by chance know how to make a case insensitive search when i'm passing a hash to sequel's Where dataset filter?
2016-12-23 09:41:44	◥	vuoto (~vuoto@adsl-89-217-211-221.adslplus.ch) has joined #postgresql
2016-12-23 09:42:24	◥	fatdragon (~fatdragon@cpe-107-184-105-188.socal.res.rr.com) has joined #postgresql
2016-12-23 09:43:28	◥	ktoverso_ (~ktoverso@46.229.218.224) has joined #postgresql
2016-12-23 09:43:44	◥	sjoos (~chrome@145.130.185.184) has joined #postgresql
2016-12-23 09:44:51	◣	ktoverso (~ktoverso@185.86.106.186) has quit (Ping timeout: 252 seconds)
2016-12-23 09:45:39	◥	blackwraith (~priidu@unaffiliated/priidu) has joined #postgresql
2016-12-23 09:45:40	◣	SEQUEL_TECH (~sequel@85.118.81.152) has quit (Read error: Connection reset by peer)
2016-12-23 09:47:05	◣	trailertrash (~trailertr@unaffiliated/trailertrash) has quit (Quit: Leaving)
2016-12-23 09:47:10	◣	priidu (~priidu@unaffiliated/priidu) has quit (Ping timeout: 250 seconds)
2016-12-23 09:48:09	◣	ktoverso_ (~ktoverso@46.229.218.224) has quit (Ping timeout: 252 seconds)
2016-12-23 09:48:24	◣	__Yiota (~textual@2607:fea8:56e0:407:6055:e1a1:ad0a:567a) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-23 09:48:26	◥	hoe` (~hoe@c-71-237-236-28.hsd1.or.comcast.net) has joined #postgresql
2016-12-23 09:53:41	◣	vuoto (~vuoto@adsl-89-217-211-221.adslplus.ch) has quit (Read error: Connection reset by peer)
2016-12-23 09:53:44	◥	TMM (~hp@fsf/member/pdpc.professional.tmm) has joined #postgresql
2016-12-23 09:54:13	◥	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has joined #postgresql
2016-12-23 09:55:46	◣	aib (~marvin@unaffiliated/aib42) has quit (Ping timeout: 256 seconds)
2016-12-23 09:57:52	◥	re1 (~reiser@cable-24-135-9-164.dynamic.sbb.rs) has joined #postgresql
2016-12-23 09:58:44	◣	mbroadhead (~mbroadhea@host-69-145-152-211.msl-mt.client.bresnan.net) has quit (Remote host closed the connection)
2016-12-23 09:58:58	◣	cyphase (~cyphase@unaffiliated/cyphase) has quit (Ping timeout: 265 seconds)
2016-12-23 09:59:40	◣	SpeakerToMeat (~SpeakerTo@prgmr/customer/SpeakerToMeat) has quit (Ping timeout: 268 seconds)
2016-12-23 10:00:40	◣	andlabs (~pietro@adfb395a.cst.lightpath.net) has quit (Remote host closed the connection)
2016-12-23 10:01:05	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2016-12-23 10:01:39	◥	code_zombie (~code_zomb@136.63.230.43) has joined #postgresql
2016-12-23 10:01:56	◣	flying (~flying@90.216.134.193) has quit (Remote host closed the connection)
2016-12-23 10:02:24	◥	flying (~flying@90.216.134.193) has joined #postgresql
2016-12-23 10:03:34	◥	aib (~marvin@unaffiliated/aib42) has joined #postgresql
2016-12-23 10:04:04	◣	lucian (~lucian@194.74.244.130) has quit (Ping timeout: 250 seconds)
2016-12-23 10:04:12	◥	cyphase (~cyphase@unaffiliated/cyphase) has joined #postgresql
2016-12-23 10:04:36	◣	filiprem (~filip@188.146.91.157.nat.umts.dynamic.t-mobile.pl) has quit (Ping timeout: 258 seconds)
2016-12-23 10:04:46	◥	ktoverso (~ktoverso@185.86.106.148) has joined #postgresql
2016-12-23 10:05:20	◣	gleu (~guillaume@LFbn-1-8419-93.w81-254.abo.wanadoo.fr) has left #postgresql
2016-12-23 10:06:36	◣	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has quit (Remote host closed the connection)
2016-12-23 10:06:46	◣	mizu_no_oto_work (~textual@c-50-177-170-9.hsd1.ma.comcast.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-28 13:43:30	◥	boon (~david@2601:600:c000:8a40:6e40:8ff:feb0:42f2) has joined #postgresql
2016-12-28 13:43:30	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-28 13:43:30	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-28 13:43:30	⚡	Channel #postgresql: 1004 nicks (0 ops, 0 voices, 1004 normals)
2016-12-28 13:43:31	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-28 13:43:31	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-28 13:44:06	◥	Clex (~clex@195-154-7-183.rev.poneytelecom.eu) has joined #postgresql
2016-12-28 13:44:16	◣	b00tstr4p (~textual@181.211.39.124) has quit (Quit: My iMac has gone to sleep. ZZZzzz…)
2016-12-28 13:45:18	◥	rgiscard (~rgiscard@75.104.71.202) has joined #postgresql
2016-12-28 13:45:18	buu	Yeah but I don't have a good way to test my application
2016-12-28 13:45:23	buu	Partially because it doesn't exist yet
2016-12-28 13:46:24	Clex	Why indexes on json are not always partial? Like CREATE INDEX ON record ((data->>'foo')) WHERE data->>'foo' IS NOT NULL
2016-12-28 13:46:31	Clex	What would be the point of not doing that?
2016-12-28 13:46:36	◥	b00tstr4p (~textual@181.211.39.124) has joined #postgresql
2016-12-28 13:46:41	◥	HarrisonF (~Harrison@199.201.64.135) has joined #postgresql
2016-12-28 13:46:42	◣	HarrisonF (~Harrison@199.201.64.135) has quit (Changing host)
2016-12-28 13:46:42	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2016-12-28 13:46:52	Zr40	what would be the point of doing that?
2016-12-28 13:46:54	johto	if you want to query rows  WHERE (data->'foo') IS NULL,  for example
2016-12-28 13:47:07	Zr40	partial indexes can only be used if you include their predicate in your query
2016-12-28 13:47:25	johto	not quite true for IS NOT NULL
2016-12-28 13:47:37	Clex	johto: right, indeed.
2016-12-28 13:47:37	johto	the planner is smart enough to know that  =  implies IS NOT NULL
2016-12-28 13:48:09	◣	rgiscard (~rgiscard@75.104.71.202) has quit (Remote host closed the connection)
2016-12-28 13:48:36	TyrfingMjolnir	I have a pg database that I would like to be able to search using elasticsearch
2016-12-28 13:48:55	TyrfingMjolnir	Any simple way to mount elasticsearch in pg?
2016-12-28 13:49:50	Clex	So if I don't do WHERE IS NULL there's no point of my index not being partial?
2016-12-28 13:49:50	TyrfingMjolnir	So that I can do UPSERTs or similar?
2016-12-28 13:49:50	davidfetter_ge	TyrfingMjolnir, there's a FDW iirc
2016-12-28 13:49:50	johto	Clex; if there are no NULL rows ever, there would be no point in it *being* partial, either
2016-12-28 13:49:50	davidfetter_ge	i don't know what parts of the FDW interface it implements, though
2016-12-28 13:49:50	davidfetter_ge	??fdw
2016-12-28 13:49:50	pg_docbot	http://wiki.postgresql.org/wiki/Foreign_data_wrappers :: http://www.postgresql.org/docs/current/static/ddl-foreign-data.html
2016-12-28 13:49:50	pg_docbot	http://www.postgresql.org/docs/current/static/fdwhandler.html :: https://github.com/GeoffMontee/tds_fdw
2016-12-28 13:49:50	pg_docbot	https://github.com/laurenz/oracle_fdw
2016-12-28 13:49:50	TyrfingMjolnir	This one? https://github.com/Mikulas/pg-es-fdw
2016-12-28 13:50:51	davidfetter_ge	looks like it
2016-12-28 13:50:51	Clex	I tried creating a partial index, like the one I showed before. Inserting rows with the key "foo" makes the index grow but without the key "foo" the index does not grow.
2016-12-28 13:50:57	Clex	And without a partial index the index always grows.
2016-12-28 13:52:16	Clex	So I'm just wondering if I'm making a mistake with that partial index.
2016-12-28 13:52:16	Clex	johto had a good point, with IS NULL queries.
2016-12-28 13:52:16	johto	there's nothing inherently wrong with that approach
2016-12-28 13:52:16	Zr40	what are you trying to use the partial index for?
2016-12-28 13:52:16	davidfetter_ge	TyrfingMjolnir, no idea what shape that FDW is in
2016-12-28 13:52:28	Zr40	aside from unique indexes, indexes that aren't used are quite useless
2016-12-28 13:52:31	Clex	But since I don't have that type of query, using a partial index seems fair right?
2016-12-28 13:52:45	johto	sure, why not
2016-12-28 13:52:46	Clex	Zr40: reducing the index size on disk.
2016-12-28 13:52:51	◥	arsen (~arsen@ns336829.ip-188-165-197.eu) has joined #postgresql
2016-12-28 13:52:54	◣	sLite (~quassel@mail.slite.org) has quit (Remote host closed the connection)
2016-12-28 13:53:00	Zr40	Clex: you can't reduce index size by *creating* an index
2016-12-28 13:53:14	Zr40	what are you going to use this particular index for?
2016-12-28 13:53:21	Clex	Zr40: s/create/making it partial/
2016-12-28 13:54:01	Clex	Queries like data->>'foo' = 'bar'
2016-12-28 13:54:33	Zr40	do you have a lot of rows where data->>'foo' would be NULL?
2016-12-28 13:55:02	Clex	Yes.
2016-12-28 13:55:23	◥	sLite (~quassel@mail.slite.org) has joined #postgresql
2016-12-28 13:56:02	Zr40	check whether your query actually uses this index (prefix EXPLAIN). If it does, then there's no problem
2016-12-28 13:56:31	Clex	Alright, thank you all very much.
2016-12-28 13:57:51	◥	wam (~wam@HSI-KBW-046-005-245-049.hsi8.kabel-badenwuerttemberg.de) has joined #postgresql
2016-12-28 13:57:51	◣	wam (~wam@HSI-KBW-046-005-245-049.hsi8.kabel-badenwuerttemberg.de) has quit (Changing host)
2016-12-28 13:57:51	◥	wam (~wam@unaffiliated/wam) has joined #postgresql
2016-12-28 13:58:50	◣	jonez (~jam@unaffiliated/jonez) has quit (Ping timeout: 264 seconds)
2016-12-28 13:58:57	◣	zapata (~zapata@2a02:b18:581:10:fcce:df7:2fa9:a3be) has quit (Ping timeout: 240 seconds)
2016-12-28 14:03:41	⚡	irc: disconnected from server
2016-12-28 14:04:03	◥	boon (~david@2601:600:c000:8a40:6e40:8ff:feb0:42f2) has joined #postgresql
2016-12-28 14:04:03	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2016-12-28 14:04:03	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2016-12-28 14:04:03	⚡	Channel #postgresql: 1006 nicks (0 ops, 0 voices, 1006 normals)
2016-12-28 14:04:04	⚡	URL for #postgresql: http://www.postgresql.org
2016-12-28 14:04:05	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2016-12-28 14:05:20	◥	negaduck (~negaduck@176.195.166.105) has joined #postgresql
2016-12-28 14:05:37	◥	wildlander (~wildlande@unaffiliated/wildlander) has joined #postgresql
2016-12-28 14:05:51	◣	wam (~wam@unaffiliated/wam) has quit (Quit: Leaving)
2016-12-28 14:06:00	◥	skyx (~skyx__@lk.84.20.228.215.dc.cable.static.lj-kabel.net) has joined #postgresql
2016-12-28 14:06:16	◣	rauldoliveira (c8c6c64c@gateway/web/freenode/ip.200.198.198.76) has quit (Ping timeout: 260 seconds)
2016-12-28 14:06:50	◥	b00tstr4p (~textual@181.211.39.124) has joined #postgresql
2016-12-28 14:07:12	◥	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2016-12-28 14:07:14	◣	ac3takwas (~acetakwas@154.118.37.118) has quit (Ping timeout: 264 seconds)
2016-12-28 14:09:39	◥	rgiscard (~rgiscard@75.104.71.202) has joined #postgresql
2016-12-28 14:10:37	◥	aidalgol (~aidalgol@pdpc/supporter/student/aidalgol) has joined #postgresql
2016-12-28 14:11:17	◣	autechy (~autechy@134.249.168.41) has quit (Read error: Connection reset by peer)
2016-12-28 14:11:23	◥	jonez (~jam@unaffiliated/jonez) has joined #postgresql
2016-12-28 14:12:10	◥	autechy (~autechy@134.249.168.41) has joined #postgresql
2016-12-28 14:12:54	◣	Luke (~Luke@unaffiliated/luke) has quit (Quit: sleep)
2016-12-28 14:13:12	◣	Conner05 (ae32e8fa@gateway/web/cgi-irc/kiwiirc.com/ip.174.50.232.250) has quit (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
2016-12-28 14:13:39	◣	eeriegeek (~eeriegeek@73.31.123.0) has left #postgresql
2016-12-28 14:14:31	◥	Conner05 (ae32e8fa@gateway/web/cgi-irc/kiwiirc.com/ip.174.50.232.250) has joined #postgresql
2016-12-28 14:14:53	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-28 14:15:43	◣	rgiscard (~rgiscard@75.104.71.202) has quit (Quit: Gone fishing)
2016-12-28 14:17:02	◣	dionysus69 (~Thunderbi@unaffiliated/dionysus69) has quit (Ping timeout: 252 seconds)
2016-12-28 14:18:19	◥	Soopaman (~soopaman@108-198-40-250.lightspeed.rcsntx.sbcglobal.net) has joined #postgresql
2016-12-28 14:19:14	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 264 seconds)
2016-12-28 14:19:18	◥	ac3takwas (~acetakwas@154.66.18.93) has joined #postgresql
2016-12-28 14:19:49	TyrfingMjolnir	What is Multicorn?
2016-12-28 14:19:49	◥	Luke (~Luke@unaffiliated/luke) has joined #postgresql
2016-12-28 14:20:00	TyrfingMjolnir	It's the name of the python binding for psql?
2016-12-28 14:21:38	◥	bronson (~bronson@142-254-101-34.dsl.dynamic.fusionbroadband.com) has joined #postgresql
2016-12-28 14:22:09	◥	Lordz (~Adium@187.112.68.211) has joined #postgresql
2016-12-28 14:23:10	◥	dowwie (~quassel@unaffiliated/dowwie) has joined #postgresql
2016-12-28 14:24:23	apollo13	TyrfingMjolnir: iirc it is a fdw in python
2016-12-28 14:24:34	apollo13	or rather for python
2016-12-28 14:24:52	◥	zapata (~zapata@2a02:b18:581:10:c99f:576:6844:16bb) has joined #postgresql
2016-12-28 14:24:53	apollo13	the python bindings are usually psyopg2
2016-12-28 14:24:57	apollo13	psycopg2*
2016-12-28 14:25:14	◣	Lordz (~Adium@187.112.68.211) has quit (Client Quit)
2016-12-28 14:25:15	◥	rgiscard (~rgiscard@75.104.71.202) has joined #postgresql
2016-12-28 14:26:53	◣	bronson (~bronson@142-254-101-34.dsl.dynamic.fusionbroadband.com) has quit (Ping timeout: 268 seconds)
2016-12-28 14:27:05	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2016-12-28 14:27:11	◣	cartan (~cartan@p4FEEA94F.dip0.t-ipconnect.de) has quit (Quit: Leaving)
2016-12-28 14:31:50	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 264 seconds)
2016-12-28 14:31:50	◣	xemdetia (xemdetia@nat/ibm/x-ffdutwbabdukhuwh) has quit (Ping timeout: 264 seconds)
2016-12-28 14:34:57	hahuang65	ningu: sorry I went AFK. on refresh, does it re-run the full query? it's not an incremental right?
2016-12-28 14:35:19	ningu	hahuang65: yes, the full query
2016-12-28 14:35:20	◥	stephenjudkins (~stephenju@207.173.82.228) has joined #postgresql
2016-12-28 14:35:41	◣	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has quit (Read error: Connection reset by peer)
2016-12-28 14:35:53	◣	rgiscard (~rgiscard@75.104.71.202) has quit (Quit: Gone fishing)
2016-12-28 14:36:12	macdice	davidfetter_ge: no return of the training wheels patch for the january commitfest?
2016-12-28 14:37:14	hahuang65	ningu: thanks for the answers. appreciate the help
2016-12-28 14:37:23	◥	rgiscard (~rgiscard@75.104.71.202) has joined #postgresql
2016-12-28 14:38:14	◥	thuvvik (~quassel@lns-bzn-61-82-250-113-19.adsl.proxad.net) has joined #postgresql
2016-12-28 14:39:59	◣	stephenjudkins (~stephenju@207.173.82.228) has quit (Remote host closed the connection)
2016-12-28 14:40:35	◥	stephenjudkins (~stephenju@207.173.82.228) has joined #postgresql
2016-12-28 14:42:00	◣	priidu (~priidu@unaffiliated/priidu) has quit (Ping timeout: 256 seconds)
2016-12-28 14:42:48	ningu	http://hyperpolyglot.org/db
2016-12-28 14:43:16	◥	Lordz (~Adium@179.180.171.60) has joined #postgresql
2016-12-28 14:44:47	◥	Sinestro (~awilliams@c-24-10-56-60.hsd1.ca.comcast.net) has joined #postgresql
2016-12-28 14:44:54	◥	wfpkhc (~wfpkhc@unaffiliated/wfpkhc) has joined #postgresql
2016-12-28 14:45:22	◣	gowen (~gowen@83.173.187.50.dyn.user.ono.com) has quit (Quit: Leaving)
2016-12-28 14:52:45	◣	fguillot (~fguillot@96.127.216.138) has quit (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
2016-12-28 14:53:39	◥	negaduck_ (~negaduck@176.193.172.116) has joined #postgresql
2016-12-28 14:54:03	◣	fwiles (~frank@19.89.124.24.cm.sunflower.com) has quit (Quit: fwiles)
2016-12-28 14:54:32	◣	brentd (~brentd@1.129.96.4) has quit (Remote host closed the connection)
2016-12-28 14:55:45	◣	hashpuppy (uid43164@gateway/web/irccloud.com/x-aumpddkizvnlloyn) has quit (Quit: Connection closed for inactivity)
2016-12-28 14:56:45	◣	negaduck (~negaduck@176.195.166.105) has quit (Ping timeout: 252 seconds)
2016-12-28 14:57:03	◥	cr1mp (~cr1mp@86-42-204-46-dynamic.b-ras1.cld.dublin.eircom.net) has joined #postgresql
2016-12-28 14:59:04	hahuang65	ningu: last question... I don't seem to see any advantages of a materialized view over say  a `CREATE TABLE AS`... are there?
2016-12-28 15:00:06	◣	aristippos (~aristippo@2601:646:c003:3d5f:e10a:ed7f:492c:a844) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-28 15:00:06	◣	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2016-12-28 15:00:06	◣	Luke (~Luke@unaffiliated/luke) has quit (Quit: sleep)
2016-12-28 15:01:45	◥	Luke (~Luke@unaffiliated/luke) has joined #postgresql
2016-12-28 15:01:45	◥	aristippos (~aristippo@2601:646:c003:3d5f:cc84:3db4:480:32d9) has joined #postgresql
2016-12-28 15:01:45	◣	Luke (~Luke@unaffiliated/luke) has quit (Client Quit)
2016-12-28 15:03:26	◣	sgflt (~sgflt@151.217.17.82) has quit (Ping timeout: 268 seconds)
2016-12-28 15:04:14	xocolatl	hahuang65: quite simply, the materialized view remembers the query that created it
2017-01-03 12:56:40	◥	boon (~david@66.195.46.242) has joined #postgresql
2017-01-03 12:56:40	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2017-01-03 12:56:40	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2017-01-03 12:56:40	⚡	Channel #postgresql: 1021 nicks (0 ops, 0 voices, 1021 normals)
2017-01-03 12:56:40	⚡	URL for #postgresql: http://www.postgresql.org
2017-01-03 12:56:40	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2017-01-03 12:56:51	adlaistevenson	Does restarting Postgresql clear any internal caches? I want to test a query "cold"
2017-01-03 12:57:28	◣	compengi (~compengi@unaffiliated/compengi) has quit (Quit: compengi)
2017-01-03 13:00:01	apollo13	adlaistevenson: yes, it doesn't clear OS disk buffering etc though
2017-01-03 13:00:14	apollo13	if you want really really cold you might wanna even restart the machine
2017-01-03 13:00:36	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-03 13:00:47	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-03 13:01:46	◣	XofP (~XofP@sfosj0215mups301.wiline.com) has quit (Quit: XofP)
2017-01-03 13:02:10	◣	kchz (~dschulz@host-217.170.52.190.copaco.com.py) has quit (Quit: ZZzzz…)
2017-01-03 13:02:20	◥	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has joined #postgresql
2017-01-03 13:02:45	macdice	adlaistevenson: there are two levels of cache to think about: restarting postgres makes it forget its buffer pool, but your os probably still has stuff in its page cache
2017-01-03 13:02:51	Absolute0	RhodiumToad:   column "x" does not exist
2017-01-03 13:03:04	macdice	adlaistevenson: if you're on linux you could look into something like "echo 1 > /proc/sys/vm/drop_caches"
2017-01-03 13:03:10	Absolute0	RhodiumToad: line 4: http://dpaste.com/1QBWZ85
2017-01-03 13:03:14	RhodiumToad	Absolute0: fill in X and Y with the department ids
2017-01-03 13:03:26	RhodiumToad	Absolute0: ideally as parameters, of course
2017-01-03 13:03:39	◣	jsumners (~jsumners@168.28.244.39) has quit (Quit: Leaving)
2017-01-03 13:04:05	macdice	curiously there doesn't seem to be a simple command line way to ask freebsd to drop stuff out of the page cache
2017-01-03 13:04:08	Absolute0	RhodiumToad: what do you mean by as parementers
2017-01-03 13:04:12	Absolute0	?
2017-01-03 13:04:41	◣	saurabhj_ (~saurabhjh@182.64.32.246) has quit (Remote host closed the connection)
2017-01-03 13:04:59	RhodiumToad	Absolute0: what client interface are you using for your app?
2017-01-03 13:05:14	◥	kchz (~dschulz@host-217.170.52.190.copaco.com.py) has joined #postgresql
2017-01-03 13:05:26	Absolute0	RhodiumToad: html
2017-01-03 13:05:29	adlaistevenson	macdice: Interesting!
2017-01-03 13:05:37	◣	byte512 (~user@h37n2-um-a32.ias.bredband.telia.com) has quit (Ping timeout: 256 seconds)
2017-01-03 13:05:37	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 256 seconds)
2017-01-03 13:05:41	RhodiumToad	Absolute0: no, you're not
2017-01-03 13:05:47	Absolute0	sqlalchemy?
2017-01-03 13:06:35	◣	sjoos (~jlammrs@a111225.upc-a.chello.nl) has quit (Quit: Leaving)
2017-01-03 13:06:45	◥	saurabhjha (~saurabhjh@182.64.32.246) has joined #postgresql
2017-01-03 13:06:56	Absolute0	psql?
2017-01-03 13:07:03	RhodiumToad	Absolute0: ok, but presumably sqlalchemy isn't building the query? you're just feeding it raw sql?
2017-01-03 13:07:19	Absolute0	yes in this case
2017-01-03 13:07:23	RhodiumToad	in psql you'd just put the ids into the query (or change it to use the names)
2017-01-03 13:07:26	Absolute0	but I hope to use sqlalchmey eventually
2017-01-03 13:07:32	◣	hahuang61 (~hahuang65@2601:647:4000:d7:d50d:ca20:553f:4442) has quit (Ping timeout: 260 seconds)
2017-01-03 13:08:41	◣	EyePulp (~eyepulp@98.215.57.107) has quit (Remote host closed the connection)
2017-01-03 13:10:05	◣	skyx (~skyx__@internet-178-58-81-90.narocnik.mobitel.si) has quit (Quit: This computer has gone to sleep)
2017-01-03 13:10:20	◥	skyx (~skyx__@internet-178-58-81-90.narocnik.mobitel.si) has joined #postgresql
2017-01-03 13:11:17	◥	skylar (~skylar2@gsits-a.gs.washington.edu) has joined #postgresql
2017-01-03 13:11:36	◥	StoneCyp1er (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has joined #postgresql
2017-01-03 13:11:50	◣	mclement (mclement@nat/ibm/x-omaetuhnzkqonuvr) has quit (Ping timeout: 248 seconds)
2017-01-03 13:13:58	◣	StoneCypher (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has quit (Ping timeout: 248 seconds)
2017-01-03 13:14:37	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2017-01-03 13:15:20	◣	_djbkd (~djbkd@135.84.132.21) has quit (Remote host closed the connection)
2017-01-03 13:15:22	◣	srhnsn (~srhnsn@p200300DFF3C43C0084D77AF8F7C08CAA.dip0.t-ipconnect.de) has quit (Quit: srhnsn)
2017-01-03 13:15:53	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2017-01-03 13:16:09	◣	dodobrain (~dodobrain@14-202-40-12.tpgi.com.au) has quit (Quit: Leaving)
2017-01-03 13:16:29	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-03 13:17:01	◥	mrwn (~mrwn@41.235.232.85) has joined #postgresql
2017-01-03 13:18:13	JordiGH	http://paste.debian.net/906231/
2017-01-03 13:18:17	JordiGH	Trying to understand this deadlock.
2017-01-03 13:18:50	◥	acln (~acln@80-110-102-183.cgn.dynamic.surfer.at) has joined #postgresql
2017-01-03 13:19:18	◣	spolglans (~lewis@h-40-23.a165.priv.bahnhof.se) has quit (Ping timeout: 248 seconds)
2017-01-03 13:19:51	RhodiumToad	JordiGH: session A updated one row and tried to update another, but session B had updated the second row and is trying to update the first
2017-01-03 13:20:21	◣	_djbkd (~djbkd@135.84.132.21) has quit (Ping timeout: 248 seconds)
2017-01-03 13:20:28	JordiGH	Okay, now to figure out what Django is doing that is resulting in this.
2017-01-03 13:20:56	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 256 seconds)
2017-01-03 13:20:57	macdice	JordiGH: you probably need to get your app to make sure it always updates things in some fixed order in concurrent transactions
2017-01-03 13:21:22	◥	danielwu (ceaec1ab@gateway/web/freenode/ip.206.174.193.171) has joined #postgresql
2017-01-03 13:21:25	◣	GodFather (~rcc@83.180-24.cm.ptn.tftn.dynamic.friendlycity.net) has quit (Ping timeout: 245 seconds)
2017-01-03 13:21:28	JordiGH	The pair (2-tuple) it's trying to update is what...?
2017-01-03 13:23:02	◣	jack_rabbit (~jack_rabb@c-50-179-163-66.hsd1.il.comcast.net) has quit (Ping timeout: 260 seconds)
2017-01-03 13:24:03	JordiGH	I mean, what are those two numbers?
2017-01-03 13:24:28	JordiGH	> while updating tuple (11286,111) in relation "assessments_questioncollectionitem"
2017-01-03 13:24:40	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2017-01-03 13:25:22	danielwu	We just upgraded our RDS postgres from 9.4 to 9.6 and we're seeing much higher than normal transaction log and write iops. Does anyone have any experience with how to troubleshoot this?
2017-01-03 13:25:29	◣	Hawkerz (~Hawkerz@unaffiliated/hawkerz) has quit (Quit: Leaving)
2017-01-03 13:25:32	MatheusOl	JordiGH: select * from the_table where ctid = '(11286,111)';
2017-01-03 13:25:33	◣	hanleym (~hanleym@47.199.58.128) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-03 13:25:36	◥	ed-g (~ed-g___@96-95-136-213-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-03 13:26:00	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-03 13:26:35	MatheusOl	danielwu: did you configure 9.6 similar to what 9.4 was? Specially min_wal_size/max_wal_size on 9.6 and checkpoint_segments on 9.4
2017-01-03 13:27:08	◣	mbecroft (~user@ak2.becroft.co.nz) has quit (Ping timeout: 260 seconds)
2017-01-03 13:27:19	◣	yieldsfalsehood (~elliot@phl-nat.afilias.info) has quit (Remote host closed the connection)
2017-01-03 13:27:23	JordiGH	MatheusOl: Huh, that isn't an error. wtf is a ctid? What if I actually want to name a column "ctid" in my table?
2017-01-03 13:27:27	◣	kchz (~dschulz@host-217.170.52.190.copaco.com.py) has quit (Quit: Volveré)
2017-01-03 13:27:36	MatheusOl	JordiGH: you couldn't
2017-01-03 13:27:44	MatheusOl	JordiGH: ctid is the tuple identifier
2017-01-03 13:27:50	JordiGH	The row id?
2017-01-03 13:28:00	◣	Levure (~quassel@91.181.239.93) has quit (Remote host closed the connection)
2017-01-03 13:28:05	MatheusOl	JordiGH: Being, in your example, 11286 is the page number, and 111 is the position of the tuple inside the page
2017-01-03 13:28:18	◥	Tat2bu (uid204960@gateway/web/irccloud.com/x-guypbauerdmbhxvw) has joined #postgresql
2017-01-03 13:28:22	JordiGH	I see.
2017-01-03 13:28:23	JordiGH	Hm.
2017-01-03 13:28:28	◥	GodFather (~rcc@83.180-24.cm.ptn.tftn.dynamic.friendlycity.net) has joined #postgresql
2017-01-03 13:29:32	◣	szymon (~szymon@staticline-31-182-67-100.toya.net.pl) has quit
2017-01-03 13:29:57	danielwu	MatheusOl: I don't think we did any configuration for those settings specifically. Are there any changes related to that we should be watching out for when upgrading?
2017-01-03 13:30:19	MatheusOl	danielwu: yes, specifically min_wal_size/max_wal_size
2017-01-03 13:30:32	JordiGH	But the actual "tuple" it's talking about is the row, right? The pair (11286,111) isn't a tuple. Or is there an "abuse" of language of referring to both the row and its ctid as "the tuple"?
2017-01-03 13:30:36	◥	autechy (~autechy@134.249.168.41) has joined #postgresql
2017-01-03 13:30:46	MatheusOl	danielwu: you mean you didn't even configure that on the 9.4 version?
2017-01-03 13:31:06	MatheusOl	JordiGH: row and tuple is somewhat interchangeable term here
2017-01-03 13:31:21	danielwu	we did not change from defaults in 9.4
2017-01-03 13:31:25	MatheusOl	JordiGH: Notice that you may not be able to access that ctid due to MVCC
2017-01-03 13:31:28	JordiGH	I was confused because it says tuple and shows me a pair, but the pair isn't the tuple, but the id of the tuple.
2017-01-03 13:31:52	apollo13	why is a pair not a tuple?
2017-01-03 13:31:58	MatheusOl	JordiGH: the locks are held based on the ctid, that is why
2017-01-03 13:32:13	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-03 13:32:36	JordiGH	apollo13: A pair is a tuple, but in database-speak tuple means row, and it just so happens that the id of the row/tuple is another 2-tuple, a pair. Right?
2017-01-03 13:33:26	MatheusOl	That number is the ctid of the tuple, a pair containing page number and the position inside the page
2017-01-03 13:33:38	MatheusOl	Do you understand that now?
2017-01-03 13:33:41	◣	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has quit (Remote host closed the connection)
2017-01-03 13:34:01	JordiGH	The row-tuple is identified by ctid-tuple. I think I got it.
2017-01-03 13:34:58	MatheusOl	JordiGH: One point is that, an specific tuple may change its ctid after an UPDATE operation
2017-01-03 13:35:36	◥	mbecroft (~user@ak2.becroft.co.nz) has joined #postgresql
2017-01-03 13:35:57	MatheusOl	danielwu: I recommend you enable log_checkpoints and see if most are "timed" or "xlog"
2017-01-03 13:36:23	MatheusOl	danielwu: Also, notice if you are using GP2 (General Purpose SSD), you may be out of IOPS credit after an upgrade
2017-01-03 13:36:47	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 256 seconds)
2017-01-03 13:37:28	◥	mizu_no_oto_work (~textual@c-50-177-170-9.hsd1.ma.comcast.net) has joined #postgresql
2017-01-03 13:38:04	MatheusOl	danielwu: one more thing, how are you checking/verifying that the "transaction logs are high"?
2017-01-03 13:38:30	danielwu	Thanks, I'll enable that. No we weren't out of IOPs credit.
2017-01-03 13:38:55	danielwu	I'm just looking at what's available from RDS monitoring console
2017-01-03 13:39:25	◥	Moonsilence (~Moonsilen@aftr-95-222-25-202.unity-media.net) has joined #postgresql
2017-01-03 13:39:40	whartung	So, we have a large table, and we're starting to take measures to lower it's footprint. It's about 1.6T right now. The bulk of the data is in a TEXT field. Our first step is we're simply going to overwrite these fields with a simple token for some early data. So, the first question, if we do that, will the table automatically start reusing space, or do we need to VACUUM first?
2017-01-03 13:39:52	◥	hahuang61 (~hahuang65@173-13-151-221-sfba.hfc.comcastbusiness.net) has joined #postgresql
2017-01-03 13:41:55	◣	Xgc (~Xgc@p-69-195-53-6.dsl1.rtr.chat.fpma.frpt.net) has quit (Ping timeout: 272 seconds)
2017-01-03 13:41:58	whartung	Next, we plan on creating a new table, and migrating data from the old table to the new one, then doing a table rename. We need to recreate all of the constraints (from child tables and such), rebuild the indexes, etc. Are we missing anything else? Do we need to rebuild any Store Procs that might have referenced the old table?
2017-01-03 13:42:16	whartung	When we drop the old table, that should reclaim physical disk space automatically, correct?
2017-01-03 13:42:30	◥	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has joined #postgresql
2017-01-03 13:42:49	MatheusOl	danielwu: how do you know you weren't out of IOPS credit?
2017-01-03 13:43:47	◣	JordiGH (~jordi@octave/developer/JordiGH) has quit (Quit: Jacking out)
2017-01-03 13:43:54	◣	saurabhjha (~saurabhjh@182.64.32.246) has quit (Remote host closed the connection)
2017-01-03 13:44:01	◣	NeverDie (~NeverDie@pool-74-96-240-190.washdc.fios.verizon.net) has quit (Quit: http://radiux.io/)
2017-01-03 13:45:48	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-03 13:46:08	◥	NeverDie (~NeverDie@pool-74-96-240-190.washdc.fios.verizon.net) has joined #postgresql
2017-01-03 13:47:01	◣	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has quit (Ping timeout: 248 seconds)
2017-01-03 13:47:55	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-03 13:48:34	◥	spolglans (~lewis@h-40-23.a165.priv.bahnhof.se) has joined #postgresql
2017-01-03 13:49:32	danielwu	aws verified over the phone that we were not out of credit, but also the amount of write iops used were also over 100x of our normal rate
2017-01-03 13:50:57	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 256 seconds)
2017-01-03 13:50:59	MatheusOl	danielwu: Ok, could be due to checkpoint settings
2017-01-03 13:51:25	▷	MatheusOl really don't get why RDS does not have IOPS credit metric
2017-01-03 13:52:21	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 248 seconds)
2017-01-03 13:52:32	breinbaas	are planner statistics logged somewhere (so you could spot a suddenly changing planner decision )?
2017-01-03 13:52:43	◣	spolglans (~lewis@h-40-23.a165.priv.bahnhof.se) has quit (Ping timeout: 246 seconds)
2017-01-03 13:53:35	◥	spolglans (~lewis@84.39.117.57) has joined #postgresql
2017-01-03 13:53:57	◣	filotek (~filotek@206.223.174.62) has quit (Ping timeout: 248 seconds)
2017-01-03 13:55:52	◥	gheegh (~textual@pool-173-79-73-194.washdc.fios.verizon.net) has joined #postgresql
2017-01-03 13:56:39	◥	Maxel_ (~Maxel@50-241-60-122-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-03 13:56:51	◥	albertus1 (~seb@x4e32debe.dyn.telefonica.de) has joined #postgresql
2017-01-03 13:59:22	◣	ash_workz (~chatzilla@50-243-5-153-static.hfc.comcastbusiness.net) has quit (Ping timeout: 246 seconds)
2017-01-03 13:59:26	danielwu	MatheusOl: i can see `checkpoint complete` being logged with times. what should I be looking for with checkpoint settings?
2017-01-03 13:59:48	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-03 13:59:59	◣	TraceEv (~TraceEv@d4-50-58-23.try.wideopenwest.com) has quit (Quit: My Mac has gone to sleep. ZZZzzz…)
2017-01-03 14:00:54	◣	Maxel_ (~Maxel@50-241-60-122-static.hfc.comcastbusiness.net) has quit (Ping timeout: 248 seconds)
2017-01-03 14:00:54	◣	Maxel (~Maxel@50-241-60-122-static.hfc.comcastbusiness.net) has quit (Ping timeout: 272 seconds)
2017-01-03 14:01:13	◣	mlehrer (mlehrer@nat/redhat/x-cddnocajavmofqyw) has quit (Ping timeout: 264 seconds)
2017-01-03 14:01:22	◣	cartan (~cartan@p508EA20F.dip0.t-ipconnect.de) has quit (Quit: Leaving)
2017-01-03 14:01:55	◣	mmello (Marcelo@nat/redhat/x-vpqftfftnwglfnyv) has quit (Quit: Leaving)
2017-01-03 14:02:16	◣	albertus1 (~seb@x4e32debe.dyn.telefonica.de) has quit (Quit: Leaving.)
2017-01-03 14:02:38	◥	Xgc (~Xgc@68.237.143.13) has joined #postgresql
2017-01-03 14:02:44	◥	albertus1 (~seb@x4e32debe.dyn.telefonica.de) has joined #postgresql
2017-01-03 14:03:41	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-03 14:04:38	◣	gheegh (~textual@pool-173-79-73-194.washdc.fios.verizon.net) has quit (Ping timeout: 248 seconds)
2017-01-03 14:04:40	◥	gheegh_ (~textual@static.84.254.201.138.clients.your-server.de) has joined #postgresql
2017-01-03 14:05:17	◥	dnicole (~dnicole@162-229-209-55.lightspeed.austtx.sbcglobal.net) has joined #postgresql
2017-01-03 14:05:44	◣	mizu_no_oto_work (~textual@c-50-177-170-9.hsd1.ma.comcast.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-03 14:05:53	◣	dur-randir (~dur_randi@93-80-107-98.broadband.corbina.ru) has quit (Read error: Connection reset by peer)
2017-01-03 14:06:09	◥	dur-randir (~dur_randi@93-80-107-98.broadband.corbina.ru) has joined #postgresql
2017-01-03 14:06:45	◣	xemdetia (xemdetia@nat/ibm/x-hplbkvpcjchrfwam) has quit (Ping timeout: 248 seconds)
2017-01-03 14:08:14	◥	dur-rand_ (~dur_randi@93-80-107-98.broadband.corbina.ru) has joined #postgresql
2017-01-03 14:08:21	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 248 seconds)
2017-01-03 14:10:34	◣	dur-randir (~dur_randi@93-80-107-98.broadband.corbina.ru) has quit (Ping timeout: 246 seconds)
2017-01-03 14:12:14	◥	dur-randir (~dur_randi@93-80-107-98.broadband.corbina.ru) has joined #postgresql
2017-01-03 14:12:21	◥	lecx (lex@yuuh.pw) has joined #postgresql
2017-01-03 14:12:58	◥	zap (zap@kapsi.fi) has joined #postgresql
2017-01-03 14:13:45	◥	matti (~mkokkola@kekkonen.niksula.hut.fi) has joined #postgresql
2017-01-03 14:15:35	◣	dur-rand_ (~dur_randi@93-80-107-98.broadband.corbina.ru) has quit (Ping timeout: 245 seconds)
2017-01-03 14:16:43	◥	lexxxx (lex@hattara.com) has joined #postgresql
2017-01-03 14:17:51	◣	dur-randir (~dur_randi@93-80-107-98.broadband.corbina.ru) has quit (Read error: Connection reset by peer)
2017-01-03 14:17:54	◥	dur-rand_ (~dur_randi@93-80-107-98.broadband.corbina.ru) has joined #postgresql
2017-01-03 14:18:14	◣	danielwu (ceaec1ab@gateway/web/freenode/ip.206.174.193.171) has quit (Ping timeout: 260 seconds)
2017-01-03 14:18:52	michelp	anyone know if PgQ works on the postgres 8 major version?  we're researching to upgrade a database on 8 to 9.6 using londiste
2017-01-03 14:18:56	StuckMojo	checkpoint_completion_target is one
2017-01-03 14:19:09	michelp	can't find too much info on how far back PgQ can support older versions o postgres
2017-01-03 14:19:16	StuckMojo	nm, he's gone i guess
2017-01-03 14:19:21	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-03 14:19:51	StuckMojo	michelp: yes it works on 8.x, at least londiste2 does
2017-01-03 14:20:21	StuckMojo	pgq is quite simple, it's just 3 tables per queue and some simple triggers
2017-01-03 14:20:29	◣	wsieroci (~wsieroci@095160155073.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2017-01-03 14:20:36	michelp	StuckMojo: thanks!  with that hint we'll give it a try, didn't want to go too far down the hole without a little good news
2017-01-03 14:21:15	◥	wsieroci (~wsieroci@095160155073.dynamic-ww-12.vectranet.pl) has joined #postgresql
2017-01-03 14:21:31	StuckMojo	i have personally used londiste replication as far back as 8.2
2017-01-03 14:21:46	StuckMojo	but 8.2 was current at the time
2017-01-03 14:22:35	michelp	sweet, it's about 5T of data and we're hitting IO limits on vacuuming it, and hope the new 9.6 vacuum optimizations will help
2017-01-03 14:22:45	◣	fguillot (~fguillot@108.163.152.8) has quit (Ping timeout: 248 seconds)
2017-01-03 14:22:46	michelp	but, we can't just do a pg_upgrade in place, can't take the downtime hit
2017-01-03 14:22:53	◣	_djbkd (~djbkd@135.84.132.21) has quit (Quit: My people need me...)
2017-01-03 14:23:00	StuckMojo	the one thing you'll see different is that triggers on replicas are physically removed, rather than using session_replica_role
2017-01-03 14:23:55	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 245 seconds)
2017-01-03 14:23:55	◥	prawnsalad (prawn@unaffiliated/prawnsalad) has joined #postgresql
2017-01-03 14:24:09	StuckMojo	FYI slony worked on 8.x too
2017-01-03 14:24:15	◥	dur-randir (~dur_randi@93-80-107-98.broadband.corbina.ru) has joined #postgresql
2017-01-03 14:24:32	michelp	oh, rumor around here was that we needed "old slony"  (this is only my second day on this job :)
2017-01-03 14:24:51	prawnsalad	hi! i have a master/slave setup but the slave is now erroring out as it cant find a WAL segment. on the server, the segment does exist but the filename ends in ".00D751D0.backup". what causes that filename change?
2017-01-03 14:24:52	◣	dur-randir (~dur_randi@93-80-107-98.broadband.corbina.ru) has quit (Remote host closed the connection)
2017-01-03 14:24:55	StuckMojo	yeah i mean when 8.x was current, slony worked on it
2017-01-03 14:25:14	michelp	ah ok, i see, if you had to choose trying one tool before the other which would you try first?
2017-01-03 14:25:30	◥	dur-randir (~dur_randi@93-80-107-98.broadband.corbina.ru) has joined #postgresql
2017-01-03 14:25:32	StuckMojo	heh
2017-01-03 14:25:42	StuckMojo	at this point maybe flip a coin.
2017-01-03 14:25:57	StuckMojo	the problem is that londiste/skytools isn't really maintained much any more
2017-01-03 14:26:13	StuckMojo	meh. try londiste first
2017-01-03 14:26:19	◣	dur-rand_ (~dur_randi@93-80-107-98.broadband.corbina.ru) has quit (Ping timeout: 246 seconds)
2017-01-03 14:26:20	michelp	yeah looks like last release was 4/14
2017-01-03 14:26:30	michelp	StuckMojo: thanks!  we'll no doubt give them both a try
2017-01-03 14:26:35	michelp	i'll try londiste first
2017-01-03 14:26:46	StuckMojo	just set up 2 pg instances on your laptop, one 8.whatever and one 9.6, then set up pgbench in 8.x and configure londiste on it
2017-01-03 14:26:50	StuckMojo	or try to anyway
2017-01-03 14:27:03	StuckMojo	then run pgbench against 8.x to generate traffic and make sure it replicates ok
2017-01-03 14:28:02	michelp	ah ok, thanks for the tip
2017-01-03 14:28:13	◥	SesMan (~sesman@157.29-244-81.adsl-dyn.isp.belgacom.be) has joined #postgresql
2017-01-03 14:29:28	◣	spolglans (~lewis@84.39.117.57) has quit (Ping timeout: 246 seconds)
2017-01-03 14:29:37	◣	SesMan (~sesman@157.29-244-81.adsl-dyn.isp.belgacom.be) has quit (Client Quit)
2017-01-03 14:29:56	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2017-01-03 14:30:39	◥	trailertrash (~trailertr@unaffiliated/trailertrash) has joined #postgresql
2017-01-03 14:31:18	◣	bfrog_ (~tburdick@unaffiliated/submersive) has quit (Ping timeout: 248 seconds)
2017-01-03 14:31:37	◣	wsieroci (~wsieroci@095160155073.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2017-01-03 14:31:51	◣	gleu (~guillaume@LFbn-1-8419-93.w81-254.abo.wanadoo.fr) has quit (Quit: gleu)
2017-01-03 14:31:54	◥	dainelwu (ceaec1ab@gateway/web/freenode/ip.206.174.193.171) has joined #postgresql
2017-01-03 14:32:36	◥	dur-rand_ (~dur_randi@95-26-250-183.broadband.corbina.ru) has joined #postgresql
2017-01-03 14:34:45	◣	dur-randir (~dur_randi@93-80-107-98.broadband.corbina.ru) has quit (Ping timeout: 245 seconds)
2017-01-03 14:35:02	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-03 14:35:45	◣	NCS_One (~NCS_One@176.78.178.106) has quit (Quit: Lost terminal)
2017-01-03 14:36:21	◣	tvenhola (jykke@venhola.com) has quit (Ping timeout: 252 seconds)
2017-01-03 14:36:38	◣	gheegh_ (~textual@static.84.254.201.138.clients.your-server.de) has quit (Ping timeout: 248 seconds)
2017-01-03 14:38:20	◥	tvenhola (jykke@venhola.com) has joined #postgresql
2017-01-03 14:39:50	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 248 seconds)
2017-01-03 14:40:22	◣	zivester (~zivester@38.104.66.138) has quit (Ping timeout: 248 seconds)
2017-01-03 14:41:38	◣	skyx (~skyx__@internet-178-58-81-90.narocnik.mobitel.si) has quit (Quit: This computer has gone to sleep)
2017-01-03 14:41:57	◣	Moonsilence (~Moonsilen@aftr-95-222-25-202.unity-media.net) has quit (Ping timeout: 248 seconds)
2017-01-03 14:44:25	◣	Ergo (~ergo@91.238.59.144) has quit (Quit: WeeChat 1.4)
2017-01-03 14:45:30	◥	Yiota_ (~textual@2607:fea8:56e0:407:c084:6bc2:238a:734e) has joined #postgresql
2017-01-03 14:45:31	◣	Yiota_ (~textual@2607:fea8:56e0:407:c084:6bc2:238a:734e) has quit (Client Quit)
2017-01-03 14:47:11	◥	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has joined #postgresql
2017-01-03 14:47:18	◣	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has quit (Remote host closed the connection)
2017-01-03 14:47:21	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-03 14:47:30	◥	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has joined #postgresql
2017-01-03 14:49:17	◣	Absolute0 (~ramin@ool-43506a5b.dyn.optonline.net) has quit (Remote host closed the connection)
2017-01-03 14:49:28	trailertrash	hey everyone, is there a simple way to convert '7:26 am'::text to 19:26:00 ?
2017-01-03 14:49:52	xocolatl	why?  that's wrong.
2017-01-03 14:49:53	trailertrash	that should be pm..sorry
2017-01-03 14:49:56	xocolatl	oh
2017-01-03 14:50:22	xocolatl	why not just cast it to time?
2017-01-03 14:50:30	◣	rocky (~rocky@crbknf0223w-156057210179.dhcp-dynamic.FibreOp.nl.bellaliant.net) has quit (Ping timeout: 248 seconds)
2017-01-03 14:50:49	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-03 14:51:31	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 246 seconds)
2017-01-03 14:51:35	◣	bberry (uid126853@gateway/web/irccloud.com/x-kowwhezrlbooficq) has quit (Quit: Connection closed for inactivity)
2017-01-03 14:51:41	trailertrash	hmmm, then extract time using date_part()?
2017-01-03 14:51:51	johto	what?
2017-01-03 14:52:05	⚡	hammwch is now known as nchambers
2017-01-03 14:52:12	johto	there's a "time" data type
2017-01-03 14:52:14	runfalk	select '7:26 pm'::time; <-- this returns 19:26:00
2017-01-03 14:52:54	◣	danpalmer (uid121480@gateway/web/irccloud.com/x-gwthmqrmjyckuwwm) has quit (Quit: Connection closed for inactivity)
2017-01-03 14:53:07	trailertrash	runfalk: that's it! thank you SELECT '7:26 pm'::time;
2017-01-03 14:53:14	xocolatl	yw
2017-01-03 14:53:44	runfalk	I just put xocolatl's answer into a query, thank him :)
2017-01-03 14:54:14	◥	negaduck_ (~negaduck@176.193.140.8) has joined #postgresql
2017-01-03 14:55:33	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 256 seconds)
2017-01-03 14:57:06	trailertrash	ultimately, i'm trying to normalize am/pm times in text by extracting each part of the timestamp, SELECT trim(both from substring('date dec 31 2016 7:26 pm est' from '(([012]?\d:[0-5]\d(:[0-5]\d+)?)([^\w\s]?\s?)?(([ap][^\w]?m[^\w\s]?)?))'))::time p_time
2017-01-03 14:57:27	◣	negaduck (~negaduck@176.193.154.43) has quit (Ping timeout: 265 seconds)
2017-01-03 14:57:46	trailertrash	maybe there is a easier way to accomplish this?
2017-01-03 14:57:46	xocolatl	don't do that
2017-01-03 14:58:18	◣	teslix (~Adrien@2a01:cb14:2e8:900:391a:5611:3652:74bb) has left #postgresql
2017-01-03 14:58:23	xocolatl	cast that to timestamptz and then extract the parts you want
2017-01-03 14:59:08	xocolatl	select 'dec 31 2016 7:26 pm est'::timestamptz;
2017-01-03 14:59:13	trailertrash	well.. i need to extract date from text first?
2017-01-03 14:59:19	xocolatl	no!
2017-01-03 14:59:26	xocolatl	reading is hard
2017-01-03 14:59:27	trailertrash	SELECT 'date dec 31 2016 7:26 pm est'
2017-01-03 14:59:28	◥	rohanrhu_ (~rohanrhu@88.251.65.199) has joined #postgresql
2017-01-03 14:59:39	xocolatl	remove the word date
2017-01-03 14:59:55	◣	rohanrhu (~rohanrhu@88.251.105.190) has quit (Ping timeout: 246 seconds)
2017-01-03 15:00:03	trailertrash	SELECT 'random text dec 31 2016 7:26 pm est random text'
2017-01-03 15:00:16	xocolatl	meh
2017-01-03 15:00:38	xocolatl	how do you know est isn't random text?
2017-01-03 15:01:14	◣	MrNaz (~mrnaz@ppp118-209-84-187.bras1.mel11.internode.on.net) has quit (Read error: Connection reset by peer)
2017-01-03 15:02:28	◥	b00tstr4_ (~textual@190.154.58.125) has joined #postgresql
2017-01-03 15:03:08	trailertrash	i don't know that... but est following am/pm, 00:00:00, or 00:00 is most likely the time zone
2017-01-03 15:03:40	mst	"at Dec 31 2017 7:26 pm mst will arrive"
2017-01-03 15:03:52	xocolatl	:)
2017-01-03 15:03:57	mst	^^ that's going to parse as mountain standard time, and now you have a bug
2017-01-03 15:04:04	◣	evnmar (~MongooseW@12.104.179.154) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-03 15:04:38	◥	MrNaz (~mrnaz@ppp118-209-197-65.bras2.mel11.internode.on.net) has joined #postgresql
2017-01-03 15:04:53	◣	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has quit (Ping timeout: 272 seconds)
2017-01-03 15:05:29	◣	dainelwu (ceaec1ab@gateway/web/freenode/ip.206.174.193.171) has quit (Ping timeout: 260 seconds)
2017-01-03 15:05:40	◥	code_zombie (~code_zomb@136.63.230.43) has joined #postgresql
2017-01-03 15:05:51	trailertrash	yes, that's a good point
2017-01-03 15:06:22	lluad	Data extraction from unstructured text is a fairly hard problem.
2017-01-03 15:06:28	xocolatl	whence is the data coming?
2017-01-03 15:06:30	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-03 15:06:30	◣	skylar (~skylar2@gsits-a.gs.washington.edu) has quit (Quit: Leaving.)
2017-01-03 15:08:57	trailertrash	lluad: agreed, i have 100's of queries attempting to solve this very problem...
2017-01-03 15:09:33	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-03 15:09:43	◣	GodFather (~rcc@83.180-24.cm.ptn.tftn.dynamic.friendlycity.net) has quit (Ping timeout: 256 seconds)
2017-01-03 15:10:45	lluad	Regexps are probably the method of choice, given what you have inside the database. But without some understanding of context it's sometimes impossible to determine reliably.
2017-01-03 15:11:00	◣	wildlander (~wildlande@unaffiliated/wildlander) has quit (Quit: Saliendo)
2017-01-03 15:11:17	◣	fwiles (~frank@19.89.124.24.cm.sunflower.com) has quit (Quit: fwiles)
2017-01-03 15:11:25	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 256 seconds)
2017-01-03 15:11:47	prawnsalad	hi! i have a master/slave setup but the slave has often errored out as it cant find a WAL segment. on the master, the segment does exist but the filename ends in ".00D751D0.backup". what causes that filename change?
2017-01-03 15:12:09	johto	that's not the file
2017-01-03 15:12:21	◥	rocky (~rocky@CPEbcc81008e92a-CMbcc81008e927.cpe.net.cable.rogers.com) has joined #postgresql
2017-01-03 15:12:23	◥	GodFather (~rcc@83.180-24.cm.ptn.tftn.dynamic.friendlycity.net) has joined #postgresql
2017-01-03 15:12:28	◣	brentd (~brentd@62.145.29.194) has quit (Remote host closed the connection)
2017-01-03 15:12:47	johto	I'm guessing you don't have an archive est up?
2017-01-03 15:12:54	◥	brentd (~brentd@62.145.29.194) has joined #postgresql
2017-01-03 15:13:12	◣	vukomir (~vukomir@109.101.202.38) has quit
2017-01-03 15:13:18	◣	Diemuzi (~IceChat9@unaffiliated/diemuzi) has quit (Quit: See you on the flip side)
2017-01-03 15:13:48	prawnsalad	im guessing no? not entirely sure. ive setup a hot standby slave that was running for a few weeks until this error started showing
2017-01-03 15:14:29	prawnsalad	im currently backing up the master back onto the slave to see if it starts working again using pg_basebackup. should i put something else in place also?
2017-01-03 15:14:39	◣	dijit (~dijit@cthulhu.drk.sc) has quit (Quit: Adios)
2017-01-03 15:15:46	◣	tiwula (~lane@70.89.246.241-Busname-UT.hfc.comcastbusiness.net) has quit (Remote host closed the connection)
2017-01-03 15:16:20	johto	pg_basebackup is required in order to recover if you don't have an archive, yes
2017-01-03 15:16:25	◣	albertus1 (~seb@x4e32debe.dyn.telefonica.de) has quit (Quit: Leaving.)
2017-01-03 15:16:41	johto	have you configured wal_keep_segments at all?
2017-01-03 15:17:14	johto	if  you're on 9.4 and later, replication slots can be used to make sure this doesn't happen again in the future (though you'll have to monitor to make sure you don't run out of disk space!)
2017-01-03 15:17:15	◣	brentd (~brentd@62.145.29.194) has quit (Ping timeout: 245 seconds)
2017-01-03 15:17:54	◥	danpalmer (uid121480@gateway/web/irccloud.com/x-tfuqtmvvsypcumxn) has joined #postgresql
2017-01-03 15:18:01	prawnsalad	ive set wal_keep_segments to 50
2017-01-03 15:18:18	prawnsalad	i understand thats the minimum segments it keeps, but how long does it keep them around for?
2017-01-03 15:18:49	trailertrash	similar to casting to time (SELECT '7:26 pm'::time;), is there way to convert MONTH to MON? SELECT substring('date december 31 2016 7:26 pm est' from '((?!(^|\s))(jan|feb|mar|apr|aug|sep|sept|oct|nov|dec|january|february|march|april|may|june|july|august|september|october|november|december)(?=($|\s)))')
2017-01-03 15:20:13	johto	prawnsalad; indefinitely, sort of. 50 files are always kept around and then rotated when new files are generated
2017-01-03 15:20:21	◣	Jungle-boogie (~boogie@unaffiliated/jungle-boogie) has quit (Ping timeout: 248 seconds)
2017-01-03 15:21:47	prawnsalad	ah i see. trying to read up on archiving. am i right in saying that archiving is done on the slave, copying the segments elsewhere once its finished with them?
2017-01-03 15:22:11	◣	hahuang61 (~hahuang65@173-13-151-221-sfba.hfc.comcastbusiness.net) has quit (Ping timeout: 256 seconds)
2017-01-03 15:22:17	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-03 15:22:20	trailertrash	currently i'm using SELECT CASE WHEN p_month = 'december' THEN 'dec' END AS p_month FROM (SELECT 'december'::text p_month) t
2017-01-03 15:26:51	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 258 seconds)
2017-01-03 15:28:15	◥	Jungle-boogie (~boogie@174.46.235.6) has joined #postgresql
2017-01-03 15:28:15	◣	Jungle-boogie (~boogie@174.46.235.6) has quit (Changing host)
2017-01-03 15:28:15	◥	Jungle-boogie (~boogie@unaffiliated/jungle-boogie) has joined #postgresql
2017-01-03 15:29:29	adamg	trailertrash: https://gist.github.com/AdamG/3d7920bbf8a4ddffa5d8cf84b076805a
2017-01-03 15:29:55	adamg	apparently, change MON to mon and you can lose the lower() call too
2017-01-03 15:31:11	trailertrash	adamg: thank you!
2017-01-03 15:33:22	◣	Xgc (~Xgc@68.237.143.13) has quit (Ping timeout: 272 seconds)
2017-01-03 15:34:05	◣	justanotheruser (~justanoth@unaffiliated/justanotheruser) has quit (Ping timeout: 256 seconds)
2017-01-03 15:36:40	◣	xzi11a (~robert@static-108-48-124-82.washdc.fios.verizon.net) has quit (Ping timeout: 246 seconds)
2017-01-03 15:37:08	◥	justanotheruser (~justanoth@unaffiliated/justanotheruser) has joined #postgresql
2017-01-03 15:38:01	trailertrash	the issue i'm having is there is not ONE date 'Pattern' that accepts input like september,sept,sep,9,09
2017-01-03 15:38:03	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-03 15:38:04	◥	realtime (~realtime@unaffiliated/realtime) has joined #postgresql
2017-01-03 15:39:16	adamg	well yeah
2017-01-03 15:39:37	◣	FastJack (fastjack@b2b-78-94-22-14.unitymedia.biz) has quit (Ping timeout: 264 seconds)
2017-01-03 15:39:48	adamg	will probably have to use a CASE to handle the 9 and 09 situations
2017-01-03 15:40:09	trailertrash	at least 'month' is now normalized to 'mon' :)
2017-01-03 15:40:25	adamg	case would just be to tell it to use '2017-X-1' pattern when it matches an all-digits regexp
2017-01-03 15:41:02	◥	jward (~jward@ec2-54-193-11-223.us-west-1.compute.amazonaws.com) has joined #postgresql
2017-01-03 15:42:13	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 248 seconds)
2017-01-03 15:43:05	◣	rocky (~rocky@CPEbcc81008e92a-CMbcc81008e927.cpe.net.cable.rogers.com) has quit (Ping timeout: 245 seconds)
2017-01-03 15:44:30	◣	causasui (~causasui@76.14.18.41) has quit (Changing host)
2017-01-03 15:44:31	◥	causasui (~causasui@wikipedia/causa-sui) has joined #postgresql
2017-01-03 15:46:34	◥	Xgc (~Xgc@p-67-158-165-93.dsl1.rtr.chat.fpma.frpt.net) has joined #postgresql
2017-01-03 15:47:19	◥	FastJack (fastjack@b2b-78-94-22-14.unitymedia.biz) has joined #postgresql
2017-01-03 15:47:52	◣	priidu (~priidu@unaffiliated/priidu) has quit (Ping timeout: 245 seconds)
2017-01-03 15:50:20	◣	Bradipo (~amb@22.16-28.45.70.166.in-addr.arpa) has quit (Remote host closed the connection)
2017-01-03 15:50:32	◣	urda (~Urda@unaffiliated/urda) has quit (Quit: Gotta go!)
2017-01-03 15:51:49	◥	aidalgol (~aidalgol@pdpc/supporter/student/aidalgol) has joined #postgresql
2017-01-03 15:51:49	◥	XofP (~XofP@sfosj0215mups301.wiline.com) has joined #postgresql
2017-01-03 15:51:54	⚡	aidalgol is now known as Guest77670
2017-01-03 15:52:27	⚡	Guest77670 is now known as aidalgol
2017-01-03 15:53:41	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-03 15:55:17	◣	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has quit (Remote host closed the connection)
2017-01-03 15:55:48	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-03 15:58:41	◥	Yiota_ (~textual@CPE00fc8d8821e3-CM00fc8d8821e0.cpe.net.cable.rogers.com) has joined #postgresql
2017-01-03 15:58:43	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 272 seconds)
2017-01-03 15:59:51	◥	jtv (~jtv@jtv.xs4all.nl) has joined #postgresql
2017-01-03 16:00:06	◣	ziyourenxiang (~ziyourenx@unaffiliated/ziyourenxiang) has quit (Quit: Leaving)
2017-01-03 16:00:21	◣	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has quit (Ping timeout: 248 seconds)
2017-01-03 16:01:04	◣	ed-g (~ed-g___@96-95-136-213-static.hfc.comcastbusiness.net) has quit (Quit: Leaving)
2017-01-03 16:03:51	◣	dege (~dege@c-907ce555.027-294-73746f71.cust.bredbandsbolaget.se) has quit (Quit: Damage is done, this is fun)
2017-01-03 16:04:07	◣	davidw (~davidw@apache/committer/davidw) has quit (Ping timeout: 256 seconds)
2017-01-03 16:06:11	◣	mauritslamers (~maurits@panagronewton.xs4all.nl) has quit (Ping timeout: 246 seconds)
2017-01-03 16:06:54	◣	Neo-- (~neo@BSN-77-82-252.static.siol.net) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-03 16:07:08	◥	evnmar (~MongooseW@12.104.179.154) has joined #postgresql
2017-01-03 16:09:12	◥	bfrog_ (~tburdick@unaffiliated/submersive) has joined #postgresql
2017-01-03 16:09:23	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-03 16:09:25	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Remote host closed the connection)
2017-01-03 16:09:31	◣	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-03 16:09:39	◣	izhak (5cf88e98@gateway/web/freenode/ip.92.248.142.152) has quit (Ping timeout: 260 seconds)
2017-01-03 16:11:22	◣	StoneCyp1er (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has quit (Ping timeout: 272 seconds)
2017-01-03 16:13:15	◥	StoneCypher (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has joined #postgresql
2017-01-03 16:13:45	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 256 seconds)
2017-01-03 16:15:21	◥	dijit (~dijit@znc.darkscience.net) has joined #postgresql
2017-01-03 16:15:58	◣	grayhemp_wh (~grayhemp_@12.33.220.130) has quit (Remote host closed the connection)
2017-01-03 16:17:03	◥	grayhemp_wh (~grayhemp_@12.33.220.130) has joined #postgresql
2017-01-03 16:17:29	◥	Bradipo (~amb@22.16-28.45.70.166.in-addr.arpa) has joined #postgresql
2017-01-03 16:17:49	◣	mahlon (~mahlon@martini.nu) has quit (Read error: Connection reset by peer)
2017-01-03 16:18:54	◥	HarrisonF (~Harrison@199.201.64.135) has joined #postgresql
2017-01-03 16:18:54	◣	HarrisonF (~Harrison@199.201.64.135) has quit (Changing host)
2017-01-03 16:18:54	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-03 16:19:03	◥	mahlon (~mahlon@martini.nu) has joined #postgresql
2017-01-03 16:20:33	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:cdd:b3c0:71c:114a) has quit (Remote host closed the connection)
2017-01-03 16:21:51	◣	nineinchnick (~jwas@109.231.18.27) has quit (Remote host closed the connection)
2017-01-03 16:23:58	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-03 16:24:22	◣	GodFather (~rcc@83.180-24.cm.ptn.tftn.dynamic.friendlycity.net) has quit (Ping timeout: 248 seconds)
2017-01-03 16:25:06	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-03 16:26:45	◣	Masterphi (~Masterphi@199.192.105.248) has quit (Quit: ZZZZzzzzz)
2017-01-03 16:26:45	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2017-01-03 16:26:53	◥	spolglans (~lewis@h-40-23.a165.priv.bahnhof.se) has joined #postgresql
2017-01-03 16:27:58	◥	rohanrhu (~rohanrhu@81.214.43.248) has joined #postgresql
2017-01-03 16:28:08	◣	rohanrhu_ (~rohanrhu@88.251.65.199) has quit (Ping timeout: 258 seconds)
2017-01-03 16:28:11	◥	fatdragon (~fatdragon@cpe-107-184-105-188.socal.res.rr.com) has joined #postgresql
2017-01-03 16:29:40	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 258 seconds)
2017-01-03 16:29:42	◣	mrwn (~mrwn@41.235.232.85) has quit (Ping timeout: 248 seconds)
2017-01-03 16:31:15	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-03 16:31:16	◣	spolglans (~lewis@h-40-23.a165.priv.bahnhof.se) has quit (Ping timeout: 246 seconds)
2017-01-03 16:31:21	◣	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has quit (Remote host closed the connection)
2017-01-03 16:31:53	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-03 16:34:06	◣	jeffleeismyhero (~textual@ip174-69-149-190.br.br.cox.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-03 16:34:33	◥	psdn (~psdn@d14-69-68-37.try.wideopenwest.com) has joined #postgresql
2017-01-04 09:56:44	⚡	irc: disconnected from server
2017-01-04 09:57:11	◥	boon (~david@66.195.46.242) has joined #postgresql
2017-01-04 09:57:11	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2017-01-04 09:57:11	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2017-01-04 09:57:11	⚡	Channel #postgresql: 1025 nicks (0 ops, 0 voices, 1025 normals)
2017-01-04 09:57:11	⚡	URL for #postgresql: http://www.postgresql.org
2017-01-04 09:57:15	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2017-01-04 09:57:19	lluad	Efficiency is likely identical, but the first type expresses what you're doing a shade more clearly.
2017-01-04 09:57:27	ash_workz	I see
2017-01-04 09:57:28	RhodiumToad	'2 years'::interval is syntactically a cast from an unknown-type literal to an interval, but in practice this amounts to exactly the same thing, except when dealing with non-constant values
2017-01-04 09:58:21	ash_workz	like, using a variable in plpgsql?
2017-01-04 09:58:30	ash_workz	^ re: non-constant values
2017-01-04 09:58:45	◥	grayhemp_wh (~grayhemp_@12.33.220.130) has joined #postgresql
2017-01-04 09:58:46	◣	ramfjord (~tramfjord@63.130.249.90) has quit (Ping timeout: 248 seconds)
2017-01-04 09:58:57	◥	wsieroci (~wsieroci@095160155086.dynamic-ww-12.vectranet.pl) has joined #postgresql
2017-01-04 09:59:01	◣	saurabhj_ (~saurabhjh@182.64.62.237) has quit (Remote host closed the connection)
2017-01-04 09:59:36	RhodiumToad	or a column or parameter
2017-01-04 09:59:55	RhodiumToad	e.g. you can write  $1::interval  but not  interval $1
2017-01-04 10:00:08	ash_workz	I see
2017-01-04 10:00:56	◥	saurabhjha (~saurabhjh@182.64.62.237) has joined #postgresql
2017-01-04 10:02:34	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2017-01-04 10:11:36	⚡	irc: disconnected from server
2017-01-04 10:12:01	◥	boon (~david@66.195.46.242) has joined #postgresql
2017-01-04 10:12:01	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2017-01-04 10:12:01	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2017-01-04 10:12:01	⚡	Channel #postgresql: 1028 nicks (0 ops, 0 voices, 1028 normals)
2017-01-04 10:12:02	⚡	URL for #postgresql: http://www.postgresql.org
2017-01-04 10:12:06	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2017-01-04 10:14:45	mkopriva	hi all, is there a way to make postgres' full text search do partial search? e.g. make `to_tsvector('john') @@ plainto_tsquery('j')` return true?
2017-01-04 10:15:15	◥	hahuang61 (~hahuang65@2601:647:4000:d7:49e0:6cdb:e9d1:2dce) has joined #postgresql
2017-01-04 10:15:47	◣	bocaneri (~bocaneri@about/linux/staff/sauvin) has quit (Remote host closed the connection)
2017-01-04 10:16:19	◣	intellix (~intellix-@c158-210.i01-8.onvol.net) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-04 10:17:54	RhodiumToad	to_tsquery('j:*')
2017-01-04 10:18:16	RhodiumToad	that allows word-based prefix matching
2017-01-04 10:18:17	◣	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has quit (Read error: Connection reset by peer)
2017-01-04 10:18:30	◣	hotpancakes (~hotpancak@cpe-74-72-49-240.nyc.res.rr.com) has quit (Remote host closed the connection)
2017-01-04 10:18:46	RhodiumToad	i.e.  'foo:*'  will match a tsvector containing any lexeme (after stemming) which begins with 'foo'
2017-01-04 10:19:01	◥	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has joined #postgresql
2017-01-04 10:19:04	◥	Munnu (~timo@91-158-145-247.elisa-laajakaista.fi) has joined #postgresql
2017-01-04 10:20:52	◣	troulouliou_div2 (~troulouli@unaffiliated/troulouliou-div2/x-0271439) has quit (Quit: Leaving)
2017-01-04 10:20:59	◥	evnmar (~MongooseW@12.104.179.154) has joined #postgresql
2017-01-04 10:22:57	ningu	if I do something like this: ORDER BY foo ASC, bar DESC LIMIT 1000; and then I want to get the next 1000 after it, is there some way to properly do WHERE (foo, bar) > ($1, $2) ? the issue being that it should be foo > $1 and bar < $2
2017-01-04 10:23:27	◣	dsantiago (~dsantiago@cpe-104-175-193-69.socal.res.rr.com) has quit (Quit: Computer has gone to sleep.)
2017-01-04 10:23:42	ningu	but you can't do it with a WHERE
2017-01-04 10:23:46	mkopriva	@RhodiumToad thanks
2017-01-04 10:23:50	ningu	I mean with a WHERE foo > $1 AND bar < $2
2017-01-04 10:24:12	ningu	so I'm a little stumped :)
2017-01-04 10:24:13	RhodiumToad	ningu: unfortunately no
2017-01-04 10:24:22	ningu	RhodiumToad: so there is just no good solution?
2017-01-04 10:24:28	ningu	a CASE maybe?
2017-01-04 10:24:29	RhodiumToad	ningu: is either of the values numeric?
2017-01-04 10:24:47	ningu	RhodiumToad: in some cases but not in the general case
2017-01-04 10:24:51	◥	ramfjord (~tramfjord@63.130.249.90) has joined #postgresql
2017-01-04 10:24:53	RhodiumToad	there's no good solution in the general case
2017-01-04 10:24:58	ningu	hrm :( ok
2017-01-04 10:25:15	RhodiumToad	(but why would you use DESC ordering on non-numeric values?)
2017-01-04 10:25:18	MatheusOl	gingitsune: Just reconfigure the port on both then, set 9.5 to 5433 (or whatever) and 9.6 to 5432
2017-01-04 10:25:24	ningu	RhodiumToad: ah right, good point :)
2017-01-04 10:25:37	ningu	if it's DESC on a numeric value, what do you do?
2017-01-04 10:25:56	RhodiumToad	for numeric/integer/float, or timestamp/date, you can construct a value that sorts in the opposite direction:
2017-01-04 10:26:06	RhodiumToad	e.g.  order by foo asc, -bar asc;
2017-01-04 10:26:08	◥	Andoriyu (~Andoriyu@rrcs-74-87-203-130.west.biz.rr.com) has joined #postgresql
2017-01-04 10:26:19	ningu	ahh
2017-01-04 10:26:22	RhodiumToad	and  WHERE (foo,-bar) > ($1,-$2)
2017-01-04 10:26:22	◥	totus (~totus@2605:6000:66c0:8800:a8:113:8651:cc1b) has joined #postgresql
2017-01-04 10:26:29	ningu	interesting
2017-01-04 10:26:35	RhodiumToad	with an index on (foo,(-bar))
2017-01-04 10:27:53	ningu	what happens if you do order by foo asc, bar desc; but then WHERE (foo,-bar) > ($1, -$2)?
2017-01-04 10:28:04	◥	bordicon (~bordicon@50-247-102-73-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-04 10:28:07	ningu	will it come out the same or will the plan be not as good?
2017-01-04 10:30:17	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2017-01-04 10:31:00	◣	jarjar_prime (~mjarjoura@c-67-180-209-140.hsd1.ca.comcast.net) has quit (Ping timeout: 248 seconds)
2017-01-04 10:32:20	RhodiumToad	that won't get a good plan
2017-01-04 10:33:02	RhodiumToad	pg can match up the  (a,b) > ($1,$2) condition with an ORDER BY a,b  and use the same index for both, even if a and b are expressions, but they have to be _identical_ expressions in the where clause and the order by
2017-01-04 10:33:20	◣	vovka_ (~vovka@46.72.33.152) has quit (Remote host closed the connection)
2017-01-04 10:33:23	ningu	yeah
2017-01-04 10:33:26	ningu	makes sense
2017-01-04 10:33:29	RhodiumToad	also, the effect of nulls is different
2017-01-04 10:34:31	◥	elein (~chatzilla@70-36-235-144.dsl.static.fusionbroadband.com) has joined #postgresql
2017-01-04 10:34:32	◥	HarrisonF (~Harrison@199.201.64.135) has joined #postgresql
2017-01-04 10:34:32	◣	HarrisonF (~Harrison@199.201.64.135) has quit (Changing host)
2017-01-04 10:34:32	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-04 10:34:44	◥	velix (~Velix@x4db56365.dyn.telefonica.de) has joined #postgresql
2017-01-04 10:35:23	◥	hanada (~hanada@KD111097171137.ppp-bb.dion.ne.jp) has joined #postgresql
2017-01-04 10:35:46	◣	hashpuppy (uid43164@gateway/web/irccloud.com/x-khddcksymkxfpbqz) has quit (Quit: Connection closed for inactivity)
2017-01-04 10:35:50	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Client Quit)
2017-01-04 10:35:57	◣	sirloinn_ (~textual@129.171.220.203.dial.dynamic.acc01-aitk-gis.comindico.com.au) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-04 10:36:51	◥	cartan (~cartan@p4FEEA520.dip0.t-ipconnect.de) has joined #postgresql
2017-01-04 10:36:51	◣	elein (~chatzilla@70-36-235-144.dsl.static.fusionbroadband.com) has quit (Remote host closed the connection)
2017-01-04 10:37:29	◣	hanada (~hanada@KD111097171137.ppp-bb.dion.ne.jp) has quit (Remote host closed the connection)
2017-01-04 10:37:40	◣	Blaguvest (~blaguvest@unaffiliated/blaguvest) has quit (Ping timeout: 245 seconds)
2017-01-04 10:37:47	◣	dur-rand_ (~dur_randi@95-26-250-183.broadband.corbina.ru) has quit (Ping timeout: 272 seconds)
2017-01-04 10:39:43	◥	HarrisonF (~Harrison@199.201.64.135) has joined #postgresql
2017-01-04 10:39:43	◣	HarrisonF (~Harrison@199.201.64.135) has quit (Changing host)
2017-01-04 10:39:43	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-04 10:40:20	◣	Xgc (~Xgc@p-69-195-50-200.dsl1.rtr.chat.fpma.frpt.net) has quit (Ping timeout: 272 seconds)
2017-01-04 10:40:52	◣	nschoe (~nschoe@195-154-204-117.rev.poneytelecom.eu) has quit (Quit: Program. Terminated.)
2017-01-04 10:41:19	ash_workz	is there a way to order by a column but hide that column?
2017-01-04 10:41:38	◥	kacey (~kacey@c-71-231-207-48.hsd1.wa.comcast.net) has joined #postgresql
2017-01-04 10:41:39	ningu	ash_workz: of course
2017-01-04 10:41:41	ningu	just don't select it
2017-01-04 10:41:42	RhodiumToad	you can order by columns that aren't included in the select, yes
2017-01-04 10:41:57	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Client Quit)
2017-01-04 10:42:05	ash_workz	oooh
2017-01-04 10:44:58	ningu	RhodiumToad: I tried this: WHERE (-lv.lv, ex.tt) > (-$1, $2) but I get: operator is not unique: - unknown
2017-01-04 10:44:59	◣	ififbetween (540e2a72@gateway/web/freenode/ip.84.14.42.114) has quit (Ping timeout: 260 seconds)
2017-01-04 10:45:05	ningu	RhodiumToad: is the index required for it to work at all?
2017-01-04 10:45:20	RhodiumToad	what data type is lv? you probably need a cast on the $1
2017-01-04 10:45:31	◣	autechy (~autechy@134.249.168.41) has quit (Quit: WeeChat 1.6)
2017-01-04 10:45:34	RhodiumToad	no, the index isn't required, it'll just be slow without it
2017-01-04 10:45:52	ningu	it is integer
2017-01-04 10:45:55	◥	HarrisonF (~Harrison@199.201.64.135) has joined #postgresql
2017-01-04 10:45:55	◣	HarrisonF (~Harrison@199.201.64.135) has quit (Changing host)
2017-01-04 10:45:55	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-04 10:45:56	◥	autechy (~autechy@134.249.168.41) has joined #postgresql
2017-01-04 10:45:59	RhodiumToad	oh, and if the two columns are in different tables, then the performance will always suck
2017-01-04 10:46:29	RhodiumToad	since it'll be forced to sort and filter the entire result on each call
2017-01-04 10:46:41	RhodiumToad	(since index usage for ordering isn't possible in that case)
2017-01-04 10:46:50	ningu	hmm, ok
2017-01-04 10:46:55	ningu	it looks like -$1::integer does it
2017-01-04 10:47:01	◥	b00tstr4p (~textual@181.211.39.124) has joined #postgresql
2017-01-04 10:49:14	◥	begriffs (~begriffs@108.61.228.123) has joined #postgresql
2017-01-04 10:50:19	◥	wipia (~wipia@2a01:e34:ee05:82d0:1dfd:8fb8:36f6:2d2) has joined #postgresql
2017-01-04 10:51:00	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Remote host closed the connection)
2017-01-04 10:51:49	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-04 10:51:50	◣	totus (~totus@2605:6000:66c0:8800:a8:113:8651:cc1b) has quit (Quit: Leaving.)
2017-01-04 10:52:38	◣	fordfrog (~fordfrog@gentoo/developer/fordfrog) has quit (Quit: Leaving)
2017-01-04 10:54:07	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:2dcd:2185:66e:fb28) has joined #postgresql
2017-01-04 10:54:34	◥	dsantiago (~dsantiago@40.141.55.70) has joined #postgresql
2017-01-04 10:55:49	◥	raynold (uid201163@gateway/web/irccloud.com/x-ekwnkabijqtzfuak) has joined #postgresql
2017-01-04 10:57:42	◥	inflames (~syg@47.148.210.171) has joined #postgresql
2017-01-04 10:59:19	◣	dijitaltrix (~dijitaltr@host86-185-155-148.range86-185.btcentralplus.com) has quit (Quit: My Macintosh IIe has gone to sleep. ZZZzzz…)
2017-01-04 11:01:19	◥	Xanderby (~Xanderby@rrcs-24-43-2-50.west.biz.rr.com) has joined #postgresql
2017-01-04 11:01:50	◣	begriffs (~begriffs@108.61.228.123) has quit (Quit: Leaving...)
2017-01-04 11:01:59	◥	bn-7bc (~bn-7bc@tmux.holmedal.net) has joined #postgresql
2017-01-04 11:02:37	◥	dur-randir (~dur_randi@95-26-250-183.broadband.corbina.ru) has joined #postgresql
2017-01-04 11:03:16	◣	gingitsune (~gingitsun@159.148.5.233) has quit (Ping timeout: 248 seconds)
2017-01-04 11:03:24	◣	_Tenchi_ (~phil@207-255-68-080-dhcp.aoo.pa.atlanticbb.net) has quit (Ping timeout: 268 seconds)
2017-01-04 11:10:09	◣	Yiota_ (~textual@2607:fea8:56e0:407:2cff:81b7:d9a9:f3a5) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 11:12:53	◣	aut (~textual@66.176.75.5) has quit (Ping timeout: 248 seconds)
2017-01-04 11:14:27	◥	aut (~textual@66.176.75.5) has joined #postgresql
2017-01-04 11:18:19	◥	wam (~wam@HSI-KBW-046-005-245-049.hsi8.kabel-badenwuerttemberg.de) has joined #postgresql
2017-01-04 11:18:19	◣	wam (~wam@HSI-KBW-046-005-245-049.hsi8.kabel-badenwuerttemberg.de) has quit (Changing host)
2017-01-04 11:18:19	◥	wam (~wam@unaffiliated/wam) has joined #postgresql
2017-01-04 11:18:44	◣	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has quit (Ping timeout: 248 seconds)
2017-01-04 11:19:13	◣	borgtu (~borgtu@li1482-207.members.linode.com) has quit (Ping timeout: 264 seconds)
2017-01-04 11:19:17	◣	wipia (~wipia@2a01:e34:ee05:82d0:1dfd:8fb8:36f6:2d2) has quit (Quit: Leaving)
2017-01-04 11:22:14	◥	EyePulp (~eyepulp@173-18-225-16.client.mchsi.com) has joined #postgresql
2017-01-04 11:22:51	◣	Slashman (~Slash@cosium-152-18.fib.nerim.net) has quit (Quit: Leaving)
2017-01-04 11:23:24	◣	ramfjord (~tramfjord@63.130.249.90) has quit (Ping timeout: 272 seconds)
2017-01-04 11:23:32	◣	saurabhjha (~saurabhjh@182.64.62.237) has quit (Ping timeout: 248 seconds)
2017-01-04 11:24:01	ash_workz	when I do `SELECT count(CASE WHEN e.period_end > ...) AS expires_early, e.expires FROM (SELECT (renewed + interval...) AS period_end, expires FROM entry) e GROUP BY e.expires;` I get what I expect; I wanted to do anything where expires_early is > 0, but adding `WHERE expires_early > 0` complains that expires_early doesn't exist...
2017-01-04 11:24:07	◥	saurabhjha (~saurabhjh@182.64.32.190) has joined #postgresql
2017-01-04 11:24:45	ash_workz	s/do anything where/see all records which/
2017-01-04 11:25:48	RhodiumToad	WHERE is computed before COUNT
2017-01-04 11:26:18	RhodiumToad	select * from (select count(...) as ..., ... from ... group by ...) as s where s.expires_early > 0;
2017-01-04 11:26:55	◣	EyePulp (~eyepulp@173-18-225-16.client.mchsi.com) has quit (Ping timeout: 256 seconds)
2017-01-04 11:26:55	ash_workz	oooh
2017-01-04 11:27:45	◥	wildlander (~wildlande@unaffiliated/wildlander) has joined #postgresql
2017-01-04 11:28:11	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2017-01-04 11:28:35	◥	HarrisonF (~Harrison@199.201.64.135) has joined #postgresql
2017-01-04 11:28:35	◣	HarrisonF (~Harrison@199.201.64.135) has quit (Changing host)
2017-01-04 11:28:35	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-04 11:29:14	◣	PCatinean (~PCatinean@188.27.185.69) has quit (Quit: Leaving)
2017-01-04 11:29:24	◥	faw (~faw@unaffiliated/faw) has joined #postgresql
2017-01-04 11:34:58	◥	vuoto (~vuoto@n9pl7d.static.netgroup.dk) has joined #postgresql
2017-01-04 11:36:03	◣	gamache (~gamache@gunyoki.net) has quit (*.net *.split)
2017-01-04 11:36:03	◣	eatkin (~eatkin@166.70.31.36) has quit (*.net *.split)
2017-01-04 11:36:03	◣	RobbieFlowers (~RobbieFlo@x1.connectedserver.com) has quit (*.net *.split)
2017-01-04 11:36:03	◣	SporkWitch (~SporkWitc@unaffiliated/sporkwitch) has quit (*.net *.split)
2017-01-04 11:36:03	◣	Shayanjm (~Shayanjm@shayanmohanty.com) has quit (*.net *.split)
2017-01-04 11:36:03	◣	Hink (~Hink@hink.me) has quit (*.net *.split)
2017-01-04 11:36:03	◣	zv (~zv@unaffiliated/zv) has quit (*.net *.split)
2017-01-04 11:36:03	◣	silver_hook (~hook@unaffiliated/silver-hook/x-2625033) has quit (*.net *.split)
2017-01-04 11:36:03	◣	Xarodon (~znc@128.199.39.94) has quit (*.net *.split)
2017-01-04 11:36:03	◣	natefoo (~nate@enospc.org) has quit (*.net *.split)
2017-01-04 11:36:03	◣	yarou (~yarou@192.241.222.146) has quit (*.net *.split)
2017-01-04 11:36:03	◣	staticfox (fox@kvirc/developer/staticfox) has quit (*.net *.split)
2017-01-04 11:36:03	◣	Tuju (~tuju@214.204.50.195.sta.estpak.ee) has quit (*.net *.split)
2017-01-04 11:36:03	◣	Robe (robe@amd.co.at) has quit (*.net *.split)
2017-01-04 11:36:03	◣	Disconsented (~quassel@disconsented.com) has quit (*.net *.split)
2017-01-04 11:36:03	◣	clarity (~clarity@unaffiliated/clarity) has quit (*.net *.split)
2017-01-04 11:36:03	◣	autrilla (~autrilla@python/site-packages/autrilla) has quit (*.net *.split)
2017-01-04 11:36:03	◣	kurufu (~kurufu@unaffiliated/kurufu) has quit (*.net *.split)
2017-01-04 11:36:03	◣	adamm (~adamm@debian/developer/adamm) has quit (*.net *.split)
2017-01-04 11:36:03	◣	wkalt (~wkalt@unaffiliated/wkalt) has quit (*.net *.split)
2017-01-04 11:36:03	◣	Mmike (~mario@unaffiliated/mmike) has quit (*.net *.split)
2017-01-04 11:36:03	◣	Kamilion (kamilion@botters/Kamilion) has quit (*.net *.split)
2017-01-04 11:36:03	◣	cylon512 (~i_cylon51@nat2-nj02.vmpanel.net) has quit (*.net *.split)
2017-01-04 11:36:03	◣	loglaunch (~loglaunch@188.226.141.55) has quit (*.net *.split)
2017-01-04 11:36:03	◣	lifeless (~robertc@122-57-100-209.jetstream.xtra.co.nz) has quit (*.net *.split)
2017-01-04 11:36:03	◣	revdiablo (~carey@p3m/member/revdiablo) has quit (*.net *.split)
2017-01-04 11:36:03	◣	saltsa (~joonas@dsl-hkibrasgw1-58c018-65.dhcp.inet.fi) has quit (*.net *.split)
2017-01-04 11:36:03	◣	fold4 (~JimmyRcom@rp.eliteskills.com) has quit (*.net *.split)
2017-01-04 11:36:03	◣	lucz (lucz@linaro/lucz) has quit (*.net *.split)
2017-01-04 11:36:03	◣	rome_390_ (~rome_390@104.236.113.22) has quit (*.net *.split)
2017-01-04 11:36:03	◣	cruxeternus (~cruxetern@secspeed.com) has quit (*.net *.split)
2017-01-04 11:36:03	◣	ralf-x (~jwalker@204.193.141.47) has quit (*.net *.split)
2017-01-04 11:36:03	◣	Ring0` (~mike@unaffiliated/ring0/x-8667941) has quit (*.net *.split)
2017-01-04 11:36:03	◣	waynr (~waynr@unaffiliated/waynr) has quit (*.net *.split)
2017-01-04 11:36:03	◣	bryguy (~bryguy@clydefrog.hackboy.com) has quit (*.net *.split)
2017-01-04 11:36:03	◣	hide (~hide@slowclap.sackheads.org) has quit (*.net *.split)
2017-01-04 11:36:03	◣	airstrike (~airstrike@ec2-52-24-136-162.us-west-2.compute.amazonaws.com) has quit (*.net *.split)
2017-01-04 11:36:03	◣	Kussie (~Ben@ec2-54-243-46-153.compute-1.amazonaws.com) has quit (*.net *.split)
2017-01-04 11:36:03	◣	stux|RC (stux@legacy.xzibition.com) has quit (*.net *.split)
2017-01-04 11:36:03	◣	potatoe (~potatoe@unaffiliated/potatoe5) has quit (*.net *.split)
2017-01-04 11:36:03	◣	Davey (~Davey@unaffiliated/davey) has quit (*.net *.split)
2017-01-04 11:36:03	◣	Urocyon (~Urocyon@ec2-107-21-122-99.compute-1.amazonaws.com) has quit (*.net *.split)
2017-01-04 11:36:03	◣	hazardous (~hz@openvpn/user/hazardous) has quit (*.net *.split)
2017-01-04 11:36:03	◣	bspkrs (~bspkrs@is.that.a.bspk.rs) has quit (*.net *.split)
2017-01-04 11:36:03	◣	joevandyk (~ubuntu@ec2-54-235-235-220.compute-1.amazonaws.com) has quit (*.net *.split)
2017-01-04 11:36:03	◣	f0urtyfive (~foober2@tls.rocks) has quit (*.net *.split)
2017-01-04 11:36:04	◣	popnfresh (~popnfrsh@hackshack.ca) has quit (*.net *.split)
2017-01-04 11:36:04	◣	jwilm (~jwilm@104.236.134.100) has quit (*.net *.split)
2017-01-04 11:36:04	◣	chrispho1k (~cpe@www.badcode.net) has quit (*.net *.split)
2017-01-04 11:36:04	◣	adam12 (~adam@atlanta.reconapp.com) has quit (*.net *.split)
2017-01-04 11:36:04	◣	nmk (~nmk@nmk.ninja) has quit (*.net *.split)
2017-01-04 11:36:04	◣	mantovani (~mantovani@104.131.207.121) has quit (*.net *.split)
2017-01-04 11:36:04	◣	sdgvf (alice@hardch.at) has quit (*.net *.split)
2017-01-04 11:36:04	◣	hugo` (~hugo`@freigeist.io) has quit (*.net *.split)
2017-01-04 11:36:04	◣	sfix (~gtierney@unaffiliated/sfix) has quit (*.net *.split)
2017-01-04 11:36:04	◣	fleetfox (redex@94.30.245.166) has quit (*.net *.split)
2017-01-04 11:36:04	◣	Jongee (~Jon@66.187.72.54) has quit (*.net *.split)
2017-01-04 11:36:10	◥	gamache_ (~gamache@gunyoki.net) has joined #postgresql
2017-01-04 11:36:10	◥	Davey (~Davey@irc.daveyshafik.com) has joined #postgresql
2017-01-04 11:36:10	◣	Davey (~Davey@irc.daveyshafik.com) has quit (Changing host)
2017-01-04 11:36:10	◥	Davey (~Davey@unaffiliated/davey) has joined #postgresql
2017-01-04 11:36:10	◥	chrisphonk (~cpe@www.badcode.net) has joined #postgresql
2017-01-04 11:36:11	◥	potatoe` (~potatoe@128.199.91.122) has joined #postgresql
2017-01-04 11:36:11	◥	fleetfox (redex@94.30.245.166) has joined #postgresql
2017-01-04 11:36:19	◣	dmlloyd (~dmlloyd@redhat/jboss/dmlloyd) has quit (Ping timeout: 268 seconds)
2017-01-04 11:36:22	◥	loglaunch (~loglaunch@188.226.141.55) has joined #postgresql
2017-01-04 11:36:23	◥	Shayanjm (~Shayanjm@shayanmohanty.com) has joined #postgresql
2017-01-04 11:36:23	◥	Kussie (~Ben@ec2-54-243-46-153.compute-1.amazonaws.com) has joined #postgresql
2017-01-04 11:36:24	◥	nmk (~nmk@nmk.ninja) has joined #postgresql
2017-01-04 11:36:24	◥	yarou (~yarou@192.241.222.146) has joined #postgresql
2017-01-04 11:36:24	◥	clarity (~clarity@209.141.57.178) has joined #postgresql
2017-01-04 11:36:33	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-04 11:36:33	◥	autrilla (~autrilla@163.172.150.119) has joined #postgresql
2017-01-04 11:36:42	◥	mantovani (~mantovani@104.131.207.121) has joined #postgresql
2017-01-04 11:36:42	◥	zv (~zv@c-67-164-96-70.hsd1.ca.comcast.net) has joined #postgresql
2017-01-04 11:36:43	◥	hazardous (~hz@openvpn/user/hazardous) has joined #postgresql
2017-01-04 11:36:43	◥	waynr (~waynr@waynr.net) has joined #postgresql
2017-01-04 11:36:45	◣	clarity (~clarity@209.141.57.178) has quit (Changing host)
2017-01-04 11:36:45	◥	clarity (~clarity@unaffiliated/clarity) has joined #postgresql
2017-01-04 11:36:45	◥	hide (~hide@2604:a880:800:10::13e:2001) has joined #postgresql
2017-01-04 11:36:45	◥	eatkin (~eatkin@166.70.31.36) has joined #postgresql
2017-01-04 11:36:46	◥	wkalt (~wkalt@104.236.135.248) has joined #postgresql
2017-01-04 11:36:46	◥	bryguy (~bryguy@clydefrog.hackboy.com) has joined #postgresql
2017-01-04 11:36:49	◣	autrilla (~autrilla@163.172.150.119) has quit (Signing in (autrilla))
2017-01-04 11:36:49	◥	autrilla (~autrilla@python/site-packages/autrilla) has joined #postgresql
2017-01-04 11:36:51	◣	zv (~zv@c-67-164-96-70.hsd1.ca.comcast.net) has quit (Changing host)
2017-01-04 11:36:51	◥	zv (~zv@unaffiliated/zv) has joined #postgresql
2017-01-04 11:36:51	◣	waynr (~waynr@waynr.net) has quit (Changing host)
2017-01-04 11:36:51	◥	waynr (~waynr@unaffiliated/waynr) has joined #postgresql
2017-01-04 11:36:55	◥	lucz (lucz@gateway/shell/linaro/x-brhazojpguukhrmc) has joined #postgresql
2017-01-04 11:36:56	◥	popnfresh (~popnfrsh@hackshack.ca) has joined #postgresql
2017-01-04 11:37:02	◥	Jongee (~Jon@66.187.72.54) has joined #postgresql
2017-01-04 11:37:05	◥	airstrike (~airstrike@ec2-52-24-136-162.us-west-2.compute.amazonaws.com) has joined #postgresql
2017-01-04 11:37:05	◥	sfix (~gtierney@unaffiliated/sfix) has joined #postgresql
2017-01-04 11:37:07	◥	Hink (~Hink@hink.me) has joined #postgresql
2017-01-04 11:37:10	◣	wkalt (~wkalt@104.236.135.248) has quit (Client Quit)
2017-01-04 11:37:10	◥	rome_390 (~rome_390@104.236.113.22) has joined #postgresql
2017-01-04 11:37:13	◥	silver_hook (~hook@unaffiliated/silver-hook/x-2625033) has joined #postgresql
2017-01-04 11:37:18	◥	bspkrs (~bspkrs@is.that.a.bspk.rs) has joined #postgresql
2017-01-04 11:37:20	◥	adam- (~adam@atlanta.reconapp.com) has joined #postgresql
2017-01-04 11:37:21	◥	Xarodon (~znc@128.199.39.94) has joined #postgresql
2017-01-04 11:37:21	◥	SporkWitch (~SporkWitc@unaffiliated/sporkwitch) has joined #postgresql
2017-01-04 11:37:24	◥	fold4 (~JimmyRcom@rp.eliteskills.com) has joined #postgresql
2017-01-04 11:37:31	◥	wkalt (~wkalt@unaffiliated/wkalt) has joined #postgresql
2017-01-04 11:37:34	◥	hugo` (~hugo`@freigeist.io) has joined #postgresql
2017-01-04 11:37:39	◥	Kamilion (kamilion@botters/Kamilion) has joined #postgresql
2017-01-04 11:37:42	◥	stux|RC-only (stux@legacy.xzibition.com) has joined #postgresql
2017-01-04 11:38:12	◥	Mmike (~mario@pagar.splivalo.hr) has joined #postgresql
2017-01-04 11:38:43	◣	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has left #postgresql
2017-01-04 11:38:46	◣	huhlig (sid17687@gateway/web/irccloud.com/x-gteqkautpyvnzhzc) has quit (Ping timeout: 258 seconds)
2017-01-04 11:38:58	◥	dmlloyd (~dmlloyd@redhat/jboss/dmlloyd) has joined #postgresql
2017-01-04 11:39:01	◥	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2017-01-04 11:39:16	◣	saper (saper@wikipedia/saper) has quit (Quit: reboot)
2017-01-04 11:39:28	◣	discopatrick (sid138124@gateway/web/irccloud.com/x-ybhpzkwajfbtvjcs) has quit (Ping timeout: 260 seconds)
2017-01-04 11:39:32	◣	ggherdov (sid11402@gateway/web/irccloud.com/x-ukglfapnduoqymzr) has quit (Ping timeout: 258 seconds)
2017-01-04 11:39:45	◣	pizzaops (sid19239@gateway/web/irccloud.com/x-mkcojsfrysgtaqav) has quit (Ping timeout: 245 seconds)
2017-01-04 11:39:51	◥	staticfox (fox@kvirc/developer/staticfox) has joined #postgresql
2017-01-04 11:40:13	◥	StoneCyp1er (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has joined #postgresql
2017-01-04 11:40:37	◣	tapoxi (sid183430@gateway/web/irccloud.com/x-ucsgtosjgjpdhpom) has quit
2017-01-04 11:40:51	◥	discopatrick (sid138124@gateway/web/irccloud.com/x-apcomnwcemoaqihj) has joined #postgresql
2017-01-04 11:41:31	◣	StoneCypher (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has quit (Ping timeout: 258 seconds)
2017-01-04 11:42:11	◥	pizzaops (sid19239@gateway/web/irccloud.com/x-tocwarpxyauyekiq) has joined #postgresql
2017-01-04 11:42:15	◥	ggherdov (sid11402@gateway/web/irccloud.com/x-yyskhtmphxioclva) has joined #postgresql
2017-01-04 11:43:08	◣	ggherdov (sid11402@gateway/web/irccloud.com/x-yyskhtmphxioclva) has quit (Excess Flood)
2017-01-04 11:43:24	◥	ermajn_ (~er@109.175.42.4) has joined #postgresql
2017-01-04 11:43:42	◥	huhlig (sid17687@gateway/web/irccloud.com/x-yxslxlnmpbloadcy) has joined #postgresql
2017-01-04 11:44:07	◥	brentd (~brentd@62.145.29.194) has joined #postgresql
2017-01-04 11:44:08	◣	ribasushi (~riba@mujunyku.leporine.io) has quit (Ping timeout: 258 seconds)
2017-01-04 11:44:35	◥	ggherdov (sid11402@gateway/web/irccloud.com/x-njkbqysaeiaufdmf) has joined #postgresql
2017-01-04 11:44:45	◣	saurabhjha (~saurabhjh@182.64.32.190) has quit (Remote host closed the connection)
2017-01-04 11:46:11	◣	ermajn (~er@109.175.74.8) has quit (Ping timeout: 256 seconds)
2017-01-04 11:47:17	◣	zerun0 (~zerun0@178.220.74.119) has quit (Ping timeout: 258 seconds)
2017-01-04 11:49:36	◣	jimmyff (uid11140@gateway/web/irccloud.com/x-szlzuprpczcebaho) has quit (Quit: Connection closed for inactivity)
2017-01-04 11:50:19	◥	Yiota_ (~textual@2607:fea8:56e0:407:79a3:a579:cec0:b887) has joined #postgresql
2017-01-04 11:51:25	◣	wam (~wam@unaffiliated/wam) has quit (Ping timeout: 245 seconds)
2017-01-04 11:52:32	◥	saurabhjha (~saurabhjh@182.64.32.190) has joined #postgresql
2017-01-04 11:54:59	◥	saper (saper@wikipedia/saper) has joined #postgresql
2017-01-04 11:55:04	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-04 11:56:05	◣	KODY92802138 (~annonymou@220.125.160.182) has quit (Ping timeout: 248 seconds)
2017-01-04 11:57:29	◥	tapoxi (sid183430@gateway/web/irccloud.com/x-oyxmlvtnbcrnjrwv) has joined #postgresql
2017-01-04 11:59:06	◥	zerun0 (~zerun0@178.220.74.119) has joined #postgresql
2017-01-04 11:59:43	◥	bjsnider (~Brandon@66-206-224-65.eastlink.ca) has joined #postgresql
2017-01-04 11:59:43	◣	SteffanW (~steffanw@ip4da40774.direct-adsl.nl) has quit (Read error: Connection reset by peer)
2017-01-04 11:59:53	◥	ribasushi (~riba@mujunyku.leporine.io) has joined #postgresql
2017-01-04 12:00:07	bjsnider	just wondering if i should single tick a boolean in a statement
2017-01-04 12:00:10	◣	JordiGH (~jordi@octave/developer/JordiGH) has left #postgresql ("Leaving")
2017-01-04 12:00:57	Zr40	'single tick a boolean'?
2017-01-04 12:01:16	bjsnider	SET value = true
2017-01-04 12:01:21	adlaistevenson	I have managed to make significant improvements, but query time is still high: https://paste.fedoraproject.org/519991/35600141/
2017-01-04 12:01:21	bjsnider	should it be 'true'?
2017-01-04 12:01:46	adlaistevenson	Could it be the "Seq Scan on publish"?
2017-01-04 12:01:59	MatheusOl	bjsnider: both will do
2017-01-04 12:02:00	Zr40	bjsnider: both are accepted, but the unquoted form will only work if "value" is actually a boolean
2017-01-04 12:02:04	◥	ningu (~unamuno@76.77.184.33) has joined #postgresql
2017-01-04 12:02:24	bjsnider	thanks
2017-01-04 12:02:41	Zr40	err, no
2017-01-04 12:03:14	Zr40	ignore everything after the comma :)
2017-01-04 12:03:22	adlaistevenson	Argh, found it! Missing index on publish.id column
2017-01-04 12:03:30	StuckMojo	*chuckle*
2017-01-04 12:03:39	◥	Disconsented (~quassel@disconsented.com) has joined #postgresql
2017-01-04 12:03:47	Zr40	bjsnider: use whatever form makes most sense for you
2017-01-04 12:04:25	bjsnider	sure thing, bruh
2017-01-04 12:04:28	◥	StoneCypher (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has joined #postgresql
2017-01-04 12:05:12	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2017-01-04 12:05:15	apollo13	stupid question, but my somewhat unconfigured monitoring is complaining that tables are not analyzed from time to time
2017-01-04 12:05:34	apollo13	on the other hand, autovacuum is running and should also take care of analyze, right?
2017-01-04 12:06:07	Zr40	the thresholds are different
2017-01-04 12:06:09	apollo13	so is that just a "time issue" on when the last analyze occured vs the monitoring "timeout" or should I look into my config
2017-01-04 12:06:17	◥	Tuju (~tuju@214.204.50.195.sta.estpak.ee) has joined #postgresql
2017-01-04 12:06:17	apollo13	ok, that is what I was hoping for :D
2017-01-04 12:06:31	apollo13	happens infrequent enough on small databases that I couldn't bother yet
2017-01-04 12:06:43	◣	saper (saper@wikipedia/saper) has quit (Quit: leaving)
2017-01-04 12:06:53	◥	saper (saper@m.saper.info) has joined #postgresql
2017-01-04 12:06:53	◣	saper (saper@m.saper.info) has quit (Changing host)
2017-01-04 12:06:53	◥	saper (saper@wikipedia/saper) has joined #postgresql
2017-01-04 12:07:30	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-04 12:07:44	◣	StoneCyp1er (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has quit (Ping timeout: 272 seconds)
2017-01-04 12:10:16	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 272 seconds)
2017-01-04 12:10:46	◣	DrLou (~DrLou@c-73-33-92-169.hsd1.nj.comcast.net) has quit (Ping timeout: 246 seconds)
2017-01-04 12:11:41	◣	saurabhjha (~saurabhjh@182.64.32.190) has quit (Remote host closed the connection)
2017-01-04 12:12:15	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 245 seconds)
2017-01-04 12:13:27	◥	priidu (~priidu@unaffiliated/priidu) has joined #postgresql
2017-01-04 12:13:33	◥	m451 (~m451@pD9FA4D7F.dip0.t-ipconnect.de) has joined #postgresql
2017-01-04 12:15:43	◥	DrLou (~DrLou@c-73-33-92-169.hsd1.nj.comcast.net) has joined #postgresql
2017-01-04 12:17:39	◣	Yiota_ (~textual@2607:fea8:56e0:407:79a3:a579:cec0:b887) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 12:20:21	◥	hotpanca_ (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has joined #postgresql
2017-01-04 12:20:37	◣	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 12:20:48	◣	bitgins (~tburdick@unaffiliated/submersive) has quit (Ping timeout: 240 seconds)
2017-01-04 12:22:21	◥	TMM (~hp@fsf/member/pdpc.professional.tmm) has joined #postgresql
2017-01-04 12:23:30	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:2dcd:2185:66e:fb28) has quit (Ping timeout: 245 seconds)
2017-01-04 12:28:33	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-04 12:28:51	◥	arezki (~arezki@lon92-h02-176-149-62-139.dsl.sta.abo.bbox.fr) has joined #postgresql
2017-01-04 12:28:54	◣	icey (~Chris@canonical/icey) has quit (Remote host closed the connection)
2017-01-04 12:29:54	◣	szymon (~szymon@staticline-31-182-67-100.toya.net.pl) has quit
2017-01-04 12:30:06	◣	robinho86 (~robsonjf@201.22.86.124.static.gvt.net.br) has quit (Quit: Leaving.)
2017-01-04 12:30:10	◣	acetakwas (~acetakwas@154.65.5.250) has quit (Ping timeout: 245 seconds)
2017-01-04 12:30:35	◣	rocky (~rocky@crbknf0223w-156057210179.dhcp-dynamic.FibreOp.nl.bellaliant.net) has quit (Ping timeout: 258 seconds)
2017-01-04 12:31:21	◣	davidw (~davidw@apache/committer/davidw) has quit (Ping timeout: 258 seconds)
2017-01-04 12:31:36	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-04 12:31:39	◥	icey (~Chris@pool-71-162-145-72.phlapa.fios.verizon.net) has joined #postgresql
2017-01-04 12:31:40	◣	icey (~Chris@pool-71-162-145-72.phlapa.fios.verizon.net) has quit (Changing host)
2017-01-04 12:31:40	◥	icey (~Chris@canonical/icey) has joined #postgresql
2017-01-04 12:33:16	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 258 seconds)
2017-01-04 12:33:38	◥	rocky (~rocky@crbknf0223w-156057210179.dhcp-dynamic.FibreOp.nl.bellaliant.net) has joined #postgresql
2017-01-04 12:34:06	◥	gingitsune (~gingitsun@81.198.179.223) has joined #postgresql
2017-01-04 12:34:31	◥	Xgc (~Xgc@p-67-158-178-77.dsl1.rtr.chat.fpma.frpt.net) has joined #postgresql
2017-01-04 12:35:16	⚡	adam- is now known as adam12
2017-01-04 12:35:35	◣	cleme1mp (~mclement@129.42.208.167) has quit (Ping timeout: 245 seconds)
2017-01-04 12:36:15	◥	ThomasStudent (~Thunderbi@80-72-48-173.dynamic.modem.fl1.li) has joined #postgresql
2017-01-04 12:36:36	◣	velix (~Velix@x4db56365.dyn.telefonica.de) has quit (Ping timeout: 248 seconds)
2017-01-04 12:38:16	◥	NeverDie (~NeverDie@pool-74-96-240-190.washdc.fios.verizon.net) has joined #postgresql
2017-01-04 12:38:19	◥	Yiota_ (~textual@2607:fea8:56e0:407:c956:5488:13bb:6b72) has joined #postgresql
2017-01-04 12:38:31	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2017-01-04 12:38:44	◥	HarrisonF (~Harrison@199.201.64.135) has joined #postgresql
2017-01-04 12:38:44	◣	HarrisonF (~Harrison@199.201.64.135) has quit (Changing host)
2017-01-04 12:38:44	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-04 12:39:14	◥	bwlang (~bwlang@66.155.211.158) has joined #postgresql
2017-01-04 12:39:39	◥	filiprem (~filip@176.111.231.193) has joined #postgresql
2017-01-04 12:40:52	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Client Quit)
2017-01-04 12:41:37	◥	gelignite (~gelignite@x4e316dca.dyn.telefonica.de) has joined #postgresql
2017-01-04 12:44:23	◣	aah (~aah@pool-100-15-175-41.washdc.fios.verizon.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 12:45:05	◥	ramfjord (~tramfjord@63.130.249.90) has joined #postgresql
2017-01-04 12:45:05	◥	aah (~aah@pool-100-15-175-41.washdc.fios.verizon.net) has joined #postgresql
2017-01-04 12:45:37	◣	hotpanca_ (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has quit (Remote host closed the connection)
2017-01-04 12:46:39	◥	albertus1 (~seb@x55b4b666.dyn.telefonica.de) has joined #postgresql
2017-01-04 12:46:42	◣	NeverDie (~NeverDie@pool-74-96-240-190.washdc.fios.verizon.net) has quit (Quit: http://radiux.io/)
2017-01-04 12:47:40	◣	ningu (~unamuno@76.77.184.33) has quit (Ping timeout: 245 seconds)
2017-01-04 12:47:41	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has joined #postgresql
2017-01-04 12:49:20	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-04 12:51:10	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2017-01-04 12:52:14	◥	justinf (~quassel@ext.nulogy.com) has joined #postgresql
2017-01-04 12:52:47	◥	wam (~wam@HSI-KBW-046-005-245-049.hsi8.kabel-badenwuerttemberg.de) has joined #postgresql
2017-01-04 12:52:47	◣	wam (~wam@HSI-KBW-046-005-245-049.hsi8.kabel-badenwuerttemberg.de) has quit (Changing host)
2017-01-04 12:52:47	◥	wam (~wam@unaffiliated/wam) has joined #postgresql
2017-01-04 12:53:32	◥	aidalgol (~aidalgol@pdpc/supporter/student/aidalgol) has joined #postgresql
2017-01-04 12:53:36	⚡	aidalgol is now known as Guest52490
2017-01-04 12:53:37	◣	Yiota_ (~textual@2607:fea8:56e0:407:c956:5488:13bb:6b72) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 12:53:58	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 258 seconds)
2017-01-04 12:54:30	justinf	hi, wondering if anyone has any experience on which would be faster to have a fully redundant standby: 1) pg_restore into master, then pg_basebackup to standby, then establish replication VS 2) establish replication between empty clusters, then pg_restore into master vs 3) something else I haven't thought of?
2017-01-04 12:54:54	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2017-01-04 12:55:19	◥	myusuf3 (~myusuf3@CPE60e327dca2cf-CM788df740f4d0.cpe.net.cable.rogers.com) has joined #postgresql
2017-01-04 12:55:35	◥	MindAndGo (~florent@2a01:e35:8ae3:b2f0:aadf:7f06:4372:61c3) has joined #postgresql
2017-01-04 12:55:54	myusuf3	so how can I trigger an autovaccuum
2017-01-04 12:56:03	myusuf3	I realized memory I allocate for it was low
2017-01-04 12:56:04	◥	tourdownunder (~textual@203-158-35-175.dyn.iinet.net.au) has joined #postgresql
2017-01-04 12:56:07	myusuf3	recently upped it to 2gb
2017-01-04 12:56:13	myusuf3	waited 24 hours
2017-01-04 12:56:17	⚡	Guest52490 is now known as aidalgol
2017-01-04 12:56:19	myusuf3	vaccum hasn't happened yet
2017-01-04 12:56:25	myusuf3	and I am at 1.22 billion
2017-01-04 12:56:27	◥	s2013 (~textual@cpe-72-226-62-58.nyc.res.rr.com) has joined #postgresql
2017-01-04 12:56:35	myusuf3	how can I trigger it
2017-01-04 12:56:48	◣	autechy (~autechy@134.249.168.41) has quit (Quit: WeeChat 1.6)
2017-01-04 12:58:13	myusuf3	track_counts and autovaccum are both ojn
2017-01-04 12:58:16	myusuf3	on*
2017-01-04 12:59:07	bwlang	i’m trying to get an efficient query to see which possible_sequences (out of 16M total) are not present in an observed set of about 200M sequences see: http://sqlfiddle.com/#!15/91a9a/1  Have i missed any optimization opportunity? the plan does not look efficient to my eye.
2017-01-04 12:59:50	◣	cadams (~clintonad@portal.ateb.com) has quit (Ping timeout: 256 seconds)
2017-01-04 13:00:11	◥	cleme1mp (~mclement@129.42.208.167) has joined #postgresql
2017-01-04 13:00:24	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has quit (Remote host closed the connection)
2017-01-04 13:01:06	◥	xemdetia_ (xemdetia@nat/ibm/x-irqexmqcrdawuwwx) has joined #postgresql
2017-01-04 13:01:21	◥	cadams (~clintonad@portal.ateb.com) has joined #postgresql
2017-01-04 13:02:24	◣	xemdetia (~xemdetia@129.42.208.174) has quit (Ping timeout: 258 seconds)
2017-01-04 13:03:44	◥	mikeywaites (~Adium@2a02:c7d:bba1:e400:b8c3:d656:4e46:47b6) has joined #postgresql
2017-01-04 13:03:53	Zr40	justinf: 2 is faster because you don't have to wait to start pg_basebackup and begin replication
2017-01-04 13:04:40	mikeywaites	Hey.  Is it possible to set a default during a an UPDATE for a column
2017-01-04 13:04:40	◣	cleme1mp (~mclement@129.42.208.167) has quit (Ping timeout: 246 seconds)
2017-01-04 13:04:42	mikeywaites	??paste
2017-01-04 13:04:43	pg_docbot	http://explain.depesz.com/ :: http://fpaste.org
2017-01-04 13:04:43	pg_docbot	http://sqlfiddle.com/ :: http://dpaste.com/
2017-01-04 13:04:52	Zr40	myusuf3: you can of course do VACUUM tblname;
2017-01-04 13:04:57	◣	aah (~aah@pool-100-15-175-41.washdc.fios.verizon.net) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-04 13:05:02	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has joined #postgresql
2017-01-04 13:05:48	Zr40	mikeywaites: UPDATE tbl SET col = DEFAULT;
2017-01-04 13:05:55	myusuf3	Zr40 correct but that would be partial and how would that affect the performance of a currently very active database?
2017-01-04 13:06:00	◥	Yiota_ (~textual@2607:fea8:56e0:407:f1b7:b9d3:2b3d:4bba) has joined #postgresql
2017-01-04 13:06:03	Zr40	myusuf3: partial?
2017-01-04 13:06:08	mikeywaites	Zr40:  what i mean is something like this http://dpaste.com/10P7BSA
2017-01-04 13:06:17	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2017-01-04 13:06:28	justinf	Zr40: true but the data is gonna have to get pushed over the network at some point right?
2017-01-04 13:06:32	myusuf3	well it would be specific table no? or does that clear the transaction ids for that specific table
2017-01-04 13:06:34	mikeywaites	is this possible.  If the value im setting the column is None then use the value of another column ?
2017-01-04 13:06:37	Zr40	mikeywaites: sorry, I have no idea what you mean with "DEFAULT_HERE(person_entity.created_at)"
2017-01-04 13:06:51	myusuf3	Zr40 ^
2017-01-04 13:06:55	◣	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 13:07:10	Zr40	mikeywaites: ah, no, you can't refer to the default value in an expression. You'd need to put the value in there explicitly
2017-01-04 13:07:10	johto	myusuf3; autovacuums do a table at a time as well
2017-01-04 13:07:24	mikeywaites	Zr40:  OK thanks.
2017-01-04 13:07:26	johto	myusuf3; but you might be thinking of a VACUUM FREEZE rather than a regular vacuum?
2017-01-04 13:07:33	mikeywaites	ill do it in two sweeps then.
2017-01-04 13:07:34	mikeywaites	thanks
2017-01-04 13:07:59	Zr40	mikeywaites: you can do COALESCE(something, something_else) which will substitute NULL for something_else
2017-01-04 13:08:04	myusuf3	ok so running it by hand, I am just curious as to why it isn't running on its own
2017-01-04 13:08:15	mikeywaites	Zr40:  can that something else be another column ?
2017-01-04 13:08:18	Zr40	mikeywaites: yes
2017-01-04 13:08:32	Zr40	mikeywaites: it can be any expression, as long as it's the same type
2017-01-04 13:08:34	myusuf3	johto its never been this high previously it would run itself at around 500 million
2017-01-04 13:08:43	mikeywaites	Hmm i tired that already and didn't get the expected results.  Maybe i had something wrong
2017-01-04 13:08:43	Zr40	myusuf3: 500 million what?
2017-01-04 13:08:50	myusuf3	transid
2017-01-04 13:08:53	Zr40	myusuf3: and are you actually having a problem, or are you just worried about the number?
2017-01-04 13:09:08	johto	what exactly are you looking at?
2017-01-04 13:09:09	myusuf3	well its creeping up and it hasn't run
2017-01-04 13:09:18	Zr40	so you're just worried about the numebr
2017-01-04 13:09:19	myusuf3	1.22 billion is close to 2.1 billion
2017-01-04 13:09:21	Zr40	number, even
2017-01-04 13:09:31	myusuf3	when db locks down
2017-01-04 13:09:48	Zr40	what's your autovacuum_freeze_max_age set to?
2017-01-04 13:09:51	myusuf3	Zr40 well yes because db normally runs vaccum more frequently than this
2017-01-04 13:10:10	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-04 13:10:13	myusuf3	500000000
2017-01-04 13:10:31	myusuf3	Zr40 ^
2017-01-04 13:10:49	Zr40	does the table have a different setting?
2017-01-04 13:11:04	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 272 seconds)
2017-01-04 13:11:05	myusuf3	nope
2017-01-04 13:11:15	myusuf3	there are multiple tables.
2017-01-04 13:11:19	mikeywaites	Zr40:  Ah of course this will only actually update the person rows where they have an invite anyway so this is pointless
2017-01-04 13:11:23	myusuf3	but for curiosity
2017-01-04 13:11:31	myusuf3	how would I check this
2017-01-04 13:11:40	johto	myusuf3; how exactly did you produce the number that worries you? and are there any autovacuums running right now?
2017-01-04 13:11:54	myusuf3	logs
2017-01-04 13:12:03	myusuf3	and johto i dont know how to check this
2017-01-04 13:12:05	johto	how EXACTLY?
2017-01-04 13:12:31	johto	look at pg_stat_activity as a superuser. the query will start with 'autovacuum: '
2017-01-04 13:13:35	Zr40	myusuf3: check with \d+ tablename. If it is set, it would show something like this: Options: autovacuum_freeze_max_age=10000000
2017-01-04 13:13:35	myusuf3	select txid_current();
2017-01-04 13:13:35	johto	txid_current is irrelevant
2017-01-04 13:13:35	myusuf3	yeah there isn't anything there
2017-01-04 13:13:35	Zr40	that doesn't indicate ANYTHING about autovacuum
2017-01-04 13:13:39	myusuf3	i am also seeing rds logs
2017-01-04 13:13:44	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has quit (Remote host closed the connection)
2017-01-04 13:13:45	myusuf3	that says its at 1.2 billion
2017-01-04 13:13:52	johto	you can't see autovacuums in RDS if I recall correctly
2017-01-04 13:14:02	Zr40	rds logs show txid_current is at 1.2 billion?
2017-01-04 13:14:20	Zr40	txid_current being a specific value doesn't indicate any problems
2017-01-04 13:14:29	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 248 seconds)
2017-01-04 13:15:11	myusuf3	Zr40 no I ran that on box it gave me
2017-01-04 13:15:31	myusuf3	  14468188945
2017-01-04 13:15:40	myusuf3	rds is saying maxtransactionid is at
2017-01-04 13:15:47	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has joined #postgresql
2017-01-04 13:15:54	◥	ningu (~unamuno@76.77.184.33) has joined #postgresql
2017-01-04 13:16:20	johto	I don't know what RDS's "maxtransactionid" is, but txid_current() is completely irrelevant here and not a symptom of a problem
2017-01-04 13:16:58	myusuf3	well it just dropped
2017-01-04 13:17:00	◥	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has joined #postgresql
2017-01-04 13:17:14	myusuf3	ok so how am I supposed to keep an eye on this
2017-01-04 13:17:18	myusuf3	so my db doesn't lock up
2017-01-04 13:17:32	myusuf3	we are under heavy write and update load
2017-01-04 13:18:25	johto	select max(age(datfrozenxid)) from pg_database;  might be a start
2017-01-04 13:18:46	myusuf3	1078293774
2017-01-04 13:19:31	myusuf3	that closes match the graph in rds
2017-01-04 13:19:36	myusuf3	still pretty high
2017-01-04 13:19:48	johto	can you see in the RDS javascript frontend whether autovacuums are running?
2017-01-04 13:21:28	◣	pablo_s (~pablo_s@206-248-188-234.dsl.teksavvy.com) has quit (Ping timeout: 246 seconds)
2017-01-04 13:21:43	◣	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has left #postgresql
2017-01-04 13:23:29	◣	hahuang61 (~hahuang65@2601:647:4000:d7:49e0:6cdb:e9d1:2dce) has quit (Ping timeout: 258 seconds)
2017-01-04 13:24:10	myusuf3	johto no
2017-01-04 13:24:23	myusuf3	it has run because its come down form 1.2 to 1 billion
2017-01-04 13:24:44	RhodiumToad	what exactly has come down?
2017-01-04 13:24:45	johto	RDS's autovacuum is really poops
2017-01-04 13:25:00	keithf4	As of april this year, RDS now provides visibility to autovac in pg_stat_activity as long as you have rds_superuser privileges
2017-01-04 13:25:01	◥	pablo_s (~pablo_s@206-248-188-234.dsl.teksavvy.com) has joined #postgresql
2017-01-04 13:25:12	Zr40	three months from now?
2017-01-04 13:25:12	keithf4	https://www.postgresql.org/about/news/1659/
2017-01-04 13:25:20	myusuf3	the transactionids
2017-01-04 13:25:35	RhodiumToad	myusuf3: what transactionids?
2017-01-04 13:25:45	RhodiumToad	myusuf3: what EXACT QUERY are you doing to look at these?
2017-01-04 13:25:53	myusuf3	datfrozenxid
2017-01-04 13:26:00	myusuf3	select max(age(datfrozenxid)) from pg_database;
2017-01-04 13:26:39	RhodiumToad	what is your (or RDS's) autovacuum_freeze_max_age setting?
2017-01-04 13:27:16	myusuf3	500 million
2017-01-04 13:27:34	◥	fckfreenode (~user@141.70.115.151) has joined #postgresql
2017-01-04 13:27:54	fckfreenode	i'm trying to set up postgres on arch, having some issues running initdb, can i get a hand?
2017-01-04 13:28:02	RhodiumToad	just ask
2017-01-04 13:28:28	◣	vuoto (~vuoto@n9pl7d.static.netgroup.dk) has quit (Remote host closed the connection)
2017-01-04 13:28:59	myusuf3	RhodiumToad i am curious as to why it isn't running
2017-01-04 13:29:08	myusuf3	working maintainence mem is 2gb
2017-01-04 13:29:19	myusuf3	just recently ran on a table
2017-01-04 13:29:38	Zr40	you still haven't explained how you determined it's actually not running
2017-01-04 13:29:39	RhodiumToad	myusuf3: which database has the highest age?
2017-01-04 13:29:46	Zr40	also, do you have very old transactions?
2017-01-04 13:29:52	Zr40	that are still not committed
2017-01-04 13:30:09	myusuf3	Zr40 well if its running and finishes ids would decreas
2017-01-04 13:30:11	◣	tourdownunder (~textual@203-158-35-175.dyn.iinet.net.au) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 13:30:20	Zr40	not necessarily
2017-01-04 13:30:23	◣	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has quit (Remote host closed the connection)
2017-01-04 13:30:24	fckfreenode	RhodiumToad: i'm getting "Could not change permissions of directory /var/lib/postgres/data: operation not permitted"
2017-01-04 13:30:35	myusuf3	RhodiumToad how do I determine this?
2017-01-04 13:30:44	◣	mizu_no__ (~textual@104.207.209.180) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 13:30:59	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-04 13:31:42	fckfreenode	and i ran "su -i -u postgres" to change to postgres user beforehand
2017-01-04 13:31:50	RhodiumToad	fckfreenode: what user owns that dir, and what userid are you running initdb under?
2017-01-04 13:32:21	RhodiumToad	myusuf3: select datname, age(datfrozenxid) from pg_database order by 2 desc;
2017-01-04 13:32:22	fckfreenode	RhodiumToad: my normal user owns that dir, because i couldn't create it with my "postgres" user
2017-01-04 13:32:31	fckfreenode	RhodiumToad: running initdb under "postgres"
2017-01-04 13:32:37	RhodiumToad	fckfreenode: it needs to be owned by postgres
2017-01-04 13:32:50	RhodiumToad	fckfreenode: what packaging does arch use? its own, or rpms, or what?
2017-01-04 13:32:59	◥	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has joined #postgresql
2017-01-04 13:33:02	fckfreenode	RhodiumToad: its own
2017-01-04 13:33:02	◣	pablo_s (~pablo_s@206-248-188-234.dsl.teksavvy.com) has quit (Remote host closed the connection)
2017-01-04 13:33:19	fckfreenode	maybe i should reinstall?
2017-01-04 13:33:24	RhodiumToad	fckfreenode: most packagings of pg have a way to tell the package scripts to run initdb for you
2017-01-04 13:33:36	◥	pablo_s (~pablo_s@206-248-188-234.dsl.teksavvy.com) has joined #postgresql
2017-01-04 13:34:04	myusuf3	gyro
2017-01-04 13:34:09	myusuf3	has the highest
2017-01-04 13:34:44	myusuf3	those databases dont even have that much traffic
2017-01-04 13:35:05	myusuf3	just curious as why vaccums aren't running on these databases
2017-01-04 13:35:11	◥	XofP (~XofP@23-119-120-165.lightspeed.sntcca.sbcglobal.net) has joined #postgresql
2017-01-04 13:35:16	RhodiumToad	myusuf3: and in that db, do  select oid::Regclass, age(relfrozenxid) from pg_class where relfrozenxid<>0 order by 2 desc; and look at the top few entries; what are they?
2017-01-04 13:35:19	◥	davidw (~davidw@apache/committer/davidw) has joined #postgresql
2017-01-04 13:35:28	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 246 seconds)
2017-01-04 13:35:35	◣	gingitsune (~gingitsun@81.198.179.223) has quit (Ping timeout: 245 seconds)
2017-01-04 13:36:02	myusuf3	is that right getting error at <>
2017-01-04 13:36:12	Zr40	what error exactly?
2017-01-04 13:36:18	Zr40	it doesn't really help if we must guess
2017-01-04 13:36:22	RhodiumToad	try  where not (relfrozenxid='0') order by 2 desc;
2017-01-04 13:36:42	myusuf3	Zr40 sorry no operator matches
2017-01-04 13:36:54	◣	mrwn (~mrwn@41.235.202.166) has quit (Ping timeout: 258 seconds)
2017-01-04 13:37:23	RhodiumToad	older pg has no <> for xid, but has =
2017-01-04 13:38:13	myusuf3	pg_statistic
2017-01-04 13:38:15	myusuf3	haha
2017-01-04 13:38:26	◥	EyePulp (~eyepulp@173-18-225-16.client.mchsi.com) has joined #postgresql
2017-01-04 13:38:30	myusuf3	RhodiumToad ^
2017-01-04 13:38:31	◥	tourdownunder (~textual@203-158-35-175.dyn.iinet.net.au) has joined #postgresql
2017-01-04 13:38:53	RhodiumToad	is that the only one with an age >500mil?
2017-01-04 13:39:10	myusuf3	no there are a few others.
2017-01-04 13:39:15	RhodiumToad	and if so, what happens if you manually do  vacuum verbose pg_statistic;
2017-01-04 13:39:21	RhodiumToad	try that vacuum anyway
2017-01-04 13:39:32	◣	pablo_s (~pablo_s@206-248-188-234.dsl.teksavvy.com) has quit (Ping timeout: 248 seconds)
2017-01-04 13:39:44	myusuf3	it worked
2017-01-04 13:39:54	RhodiumToad	worked in what sense?
2017-01-04 13:39:55	myusuf3	and it dropped from list
2017-01-04 13:40:00	◣	ThomasStudent (~Thunderbi@80-72-48-173.dynamic.modem.fl1.li) has quit (Quit: ThomasStudent)
2017-01-04 13:40:08	RhodiumToad	ok, how many others have ages >500m?
2017-01-04 13:40:16	myusuf3	its at just above 500 million now
2017-01-04 13:40:37	myusuf3	80
2017-01-04 13:40:41	myusuf3	others
2017-01-04 13:40:43	RhodiumToad	what's your vacuum_freeze_min_age setting?
2017-01-04 13:41:06	StuckMojo	fckfreenode: sudo chown postgres:postgres /var/lib/postgres/data
2017-01-04 13:41:08	RhodiumToad	make sure you're not confusing 50 million with 500 million, btw
2017-01-04 13:41:47	fckfreenode	StuckMojo: awesome, thank you
2017-01-04 13:42:31	myusuf3	50 million
2017-01-04 13:42:41	myusuf3	i would like to confirm with query though
2017-01-04 13:42:47	myusuf3	RhodiumToad ^
2017-01-04 13:42:51	◣	yieldsfalsehood (~elliot@phl-nat.afilias.info) has quit (Remote host closed the connection)
2017-01-04 13:43:05	myusuf3	how would I ask for that from postgres
2017-01-04 13:43:26	Zr40	SHOW settingname;
2017-01-04 13:43:28	◣	EyePulp (~eyepulp@173-18-225-16.client.mchsi.com) has quit (Ping timeout: 256 seconds)
2017-01-04 13:43:28	◣	filiprem (~filip@176.111.231.193) has quit (Ping timeout: 256 seconds)
2017-01-04 13:43:49	◣	wsieroci (~wsieroci@095160155086.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2017-01-04 13:43:53	◥	pablo_s (~pablo_s@206-248-188-234.dsl.teksavvy.com) has joined #postgresql
2017-01-04 13:44:13	RhodiumToad	select oid::Regclass, age(relfrozenxid), to_char(age(relfrozenxid),'999,999,999,990') from pg_class where not (relfrozenxid='0') order by 2 desc;
2017-01-04 13:44:17	myusuf3	confirmed.
2017-01-04 13:44:24	RhodiumToad	that'll put commas in the numbers for readability
2017-01-04 13:44:31	myusuf3	thanks.
2017-01-04 13:44:42	◥	wsieroci (~wsieroci@095160155086.dynamic-ww-12.vectranet.pl) has joined #postgresql
2017-01-04 13:45:01	myusuf3	1,079,231,280
2017-01-04 13:45:08	myusuf3	yeah they are all in the billions
2017-01-04 13:45:10	◥	yieldsfalsehood (~elliot@phl-nat.afilias.info) has joined #postgresql
2017-01-04 13:45:50	RhodiumToad	vacuuming a table should reduce the frozenxid age to approximately vacuum_freeze_min_age
2017-01-04 13:46:03	RhodiumToad	(vacuum freeze should reduce it to approximately 0)
2017-01-04 13:46:56	◣	fckfreenode (~user@141.70.115.151) has left #postgresql ("WeeChat 1.6")
2017-01-04 13:48:27	myusuf3	RhodiumToad why does freesze go to zero
2017-01-04 13:48:43	myusuf3	is there a way for me to do all the tables in one command?
2017-01-04 13:49:04	myusuf3	just curious as to why auto vaccum isn't running
2017-01-04 13:49:26	RhodiumToad	just doing  vacuum;  or  vacuum freeze;  will do all tables in the db
2017-01-04 13:49:37	◣	gleu (~guillaume@LFbn-1-8419-93.w81-254.abo.wanadoo.fr) has quit (Quit: gleu)
2017-01-04 13:49:38	◥	MarkFletcher (~markfletc@38.99.193.90) has joined #postgresql
2017-01-04 13:49:59	RhodiumToad	how do you know it isn't running? have you looked at the last_autovacuum columns in pg_stat_all_tables?
2017-01-04 13:50:12	◣	nettoweb (~nettoweb@177.96.164.198) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 13:51:05	myusuf3	RhodiumToad nope how do I do this?
2017-01-04 13:51:49	◥	yuri_niyazov (~anonymous@199.87.82.138) has joined #postgresql
2017-01-04 13:51:51	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-04 13:51:54	RhodiumToad	it's a trivial query
2017-01-04 13:52:21	RhodiumToad	select * from pg_stat_all_tables;
2017-01-04 13:52:23	yuri_niyazov	Is it possible to create a trigger and an associated function that would report what the original SQL statement that caused the trigger?
2017-01-04 13:52:55	◥	filiprem (~filip@176.111.231.193) has joined #postgresql
2017-01-04 13:53:03	RhodiumToad	yuri_niyazov: "original" in what sense? the first part of the SQL command from the client is available via pg_stat_activity, but if it's a nested statement, it's harder
2017-01-04 13:53:25	ningu	yuri_niyazov: what are you actually trying to achieve?
2017-01-04 13:53:38	ningu	this sounds like an xy problem
2017-01-04 13:53:48	myusuf3	RhodiumToad is there a way to focus it on vacuum processes
2017-01-04 13:53:49	myusuf3	?
2017-01-04 13:54:12	◣	yieldsfalsehood (~elliot@phl-nat.afilias.info) has quit (Remote host closed the connection)
2017-01-04 13:54:14	◣	filotek (~filotek@206.223.174.62) has quit (Ping timeout: 256 seconds)
2017-01-04 13:54:26	◣	jack_rabbit (~jack_rabb@c-50-179-163-66.hsd1.il.comcast.net) has quit (Ping timeout: 260 seconds)
2017-01-04 13:54:31	◣	wsieroci (~wsieroci@095160155086.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2017-01-04 13:54:33	myusuf3	so there are only two rows with that data
2017-01-04 13:55:00	◣	MarkFletcher (~markfletc@38.99.193.90) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-04 13:56:29	myusuf3	for the column last_autovacuum everything was around the 29-16th of this past decemeber
2017-01-04 13:56:36	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 248 seconds)
2017-01-04 13:57:01	◥	mrwn (~mrwn@41.235.202.166) has joined #postgresql
2017-01-04 13:57:03	◣	evnmar (~MongooseW@12.104.179.154) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-04 13:57:24	◥	evnmar (~MongooseW@12.104.179.154) has joined #postgresql
2017-01-04 13:57:41	◥	riceandbeans (~zach@dev.raasta.org) has joined #postgresql
2017-01-04 13:57:41	◣	riceandbeans (~zach@dev.raasta.org) has quit (Changing host)
2017-01-04 13:57:41	◥	riceandbeans (~zach@unaffiliated/riceandbeans) has joined #postgresql
2017-01-04 13:58:00	◣	evnmar (~MongooseW@12.104.179.154) has quit (Client Quit)
2017-01-04 14:03:41	◣	fguillot (~fguillot@2607:f748:9:1678:a46f:aee1:717:8049) has quit (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
2017-01-04 14:05:22	◣	mikeywaites (~Adium@2a02:c7d:bba1:e400:b8c3:d656:4e46:47b6) has quit (Quit: Leaving.)
2017-01-04 14:06:53	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2017-01-04 14:07:48	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has quit (Remote host closed the connection)
2017-01-04 14:08:08	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-04 14:08:20	◣	wam (~wam@unaffiliated/wam) has quit (Ping timeout: 258 seconds)
2017-01-04 14:08:30	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has joined #postgresql
2017-01-04 14:09:20	◣	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has quit (Ping timeout: 245 seconds)
2017-01-04 14:10:35	◣	evol_monkey (~vasilis@athedsl-4496764.home.otenet.gr) has quit (Quit: Lost terminal)
2017-01-04 14:11:14	◣	jesopo (jess@lolnerd.net) has quit (Quit: et nos unum sumus)
2017-01-04 14:11:51	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 272 seconds)
2017-01-04 14:11:56	◥	sz0 (uid110435@gateway/web/irccloud.com/x-mtcmcgrqdscpdejj) has joined #postgresql
2017-01-04 14:12:34	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-04 14:13:10	◣	terakilobyte (~terakilob@c-73-225-164-90.hsd1.wa.comcast.net) has quit (Remote host closed the connection)
2017-01-04 14:14:01	◥	dive-o (dive@dreamwidth/delegate/dive) has joined #postgresql
2017-01-04 14:14:41	dive-o	on behalf of myself and gavinc and others @ work, I love you guys where "you guys" == whoever made backing up from a replica possible :-)
2017-01-04 14:14:46	◥	hanada (~hanada@240f:74:3936:1:d82d:6e2d:b9bd:51e4) has joined #postgresql
2017-01-04 14:16:04	◣	Maxel_ (~Maxel@50-241-60-122-static.hfc.comcastbusiness.net) has quit (Ping timeout: 246 seconds)
2017-01-04 14:16:26	◣	hanada (~hanada@240f:74:3936:1:d82d:6e2d:b9bd:51e4) has quit (Remote host closed the connection)
2017-01-04 14:16:48	◣	KellerFuchs (~kellerfuc@gateway/tor-sasl/kellerfuchs) has quit (Ping timeout: 245 seconds)
2017-01-04 14:17:34	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 272 seconds)
2017-01-04 14:20:19	◥	hahuang61 (~hahuang65@2601:647:4000:d7:49e0:6cdb:e9d1:2dce) has joined #postgresql
2017-01-04 14:22:36	◣	brentd (~brentd@62.145.29.194) has quit (Remote host closed the connection)
2017-01-04 14:23:02	◥	brentd (~brentd@62.145.29.194) has joined #postgresql
2017-01-04 14:23:34	◣	mrwn (~mrwn@41.235.202.166) has quit (Remote host closed the connection)
2017-01-04 14:24:14	◣	korzybski (~imac@70.97.124.44) has quit (Quit: korzybski)
2017-01-04 14:24:14	xocolatl	dive-o: on behalf of whoever did that, you're welcome :)
2017-01-04 14:24:23	◣	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has quit (Read error: Connection reset by peer)
2017-01-04 14:24:53	◣	priidu (~priidu@unaffiliated/priidu) has quit (Ping timeout: 248 seconds)
2017-01-04 14:24:54	dive-o	xocolatl: :) we just went 9.4 -> 9.6 over the holidays
2017-01-04 14:25:12	◣	hahuang61 (~hahuang65@2601:647:4000:d7:49e0:6cdb:e9d1:2dce) has quit (Ping timeout: 258 seconds)
2017-01-04 14:25:12	◣	Levure (~quassel@91.181.239.93) has quit (Read error: Connection reset by peer)
2017-01-04 14:25:24	◣	ramfjord (~tramfjord@63.130.249.90) has quit (Ping timeout: 256 seconds)
2017-01-04 14:26:01	myusuf3	anyone else using rds
2017-01-04 14:26:09	myusuf3	I can't vacuum certain tables.
2017-01-04 14:26:33	RhodiumToad	"can't" how?
2017-01-04 14:26:41	myusuf3	i dont have rds superuser
2017-01-04 14:26:51	◣	albertus1 (~seb@x55b4b666.dyn.telefonica.de) has quit (Quit: Leaving.)
2017-01-04 14:27:01	myusuf3	 only superuser can vacuum it
2017-01-04 14:27:04	RhodiumToad	and is autovacuum not doing them?
2017-01-04 14:27:28	Myon	"certain tables" belonging to whom?
2017-01-04 14:27:33	◣	brentd (~brentd@62.145.29.194) has quit (Ping timeout: 248 seconds)
2017-01-04 14:27:44	myusuf3	well its a not since it at 1 billion
2017-01-04 14:27:58	◣	TraceEv (~TraceEv@mail.eclipse-online.com) has quit (Quit: My Mac has gone to sleep. ZZZzzz…)
2017-01-04 14:28:07	myusuf3	RhodiumToad still dont know why its not autovaccuming
2017-01-04 14:28:52	myusuf3	rdsadmin is the owner Myon
2017-01-04 14:28:59	myusuf3	but I can't get on box as that user.
2017-01-04 14:29:48	janos_	which tables? anything owned by rdsadmin shouldn't be something you care about as far as i recall
2017-01-04 14:29:54	xocolatl	doesn't rds provide support?
2017-01-04 14:30:31	myusuf3	janos_  well I would like to vaccum those tables
2017-01-04 14:30:39	Myon	also, do these tables *need* vacuuming?
2017-01-04 14:30:48	myusuf3	RhodiumToad thoughts on why auto vacuum doesn't happen>?
2017-01-04 14:32:03	◣	ningu (~unamuno@76.77.184.33) has quit (Quit: Lost terminal)
2017-01-04 14:32:31	◣	EnTeQuAk (sid121987@pdpc/supporter/bronze/entequak) has quit (Ping timeout: 246 seconds)
2017-01-04 14:33:26	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-04 14:34:09	◥	EnTeQuAk (sid121987@pdpc/supporter/bronze/entequak) has joined #postgresql
2017-01-04 14:34:15	◣	Yiota_ (~textual@2607:fea8:56e0:407:f1b7:b9d3:2b3d:4bba) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 14:34:28	◣	Jungle-boogie (~boogie@unaffiliated/jungle-boogie) has quit (Ping timeout: 248 seconds)
2017-01-04 14:35:29	◥	hi117 (~hi117@68-200-130-70.res.bhn.net) has joined #postgresql
2017-01-04 14:35:40	◣	Moonsilence (~Moonsilen@aftr-95-222-26-64.unity-media.net) has quit (Ping timeout: 246 seconds)
2017-01-04 14:35:45	hi117	is there any reason a create index concurrently would block inserts?
2017-01-04 14:36:11	RhodiumToad	are you sure it's that that's blocking it, and not something else that's blocked behind the c-i-c?
2017-01-04 14:36:52	RhodiumToad	e.g. session A is running c-i-c, session B is running an alter table that's blocked behind A, session C tries an insert and gets blocked behind B
2017-01-04 14:37:42	hi117	idk really, i know that the inserts are not completing when the concurrent index building is being run, but they complete as soon as i kill the concurrent index building process is killed
2017-01-04 14:37:52	hi117	and there isnt much activity on this database
2017-01-04 14:37:56	RhodiumToad	the thing to do is to check pg_locks
2017-01-04 14:38:17	RhodiumToad	or enable log_lock_waits, which will log what the insert is blocked behind
2017-01-04 14:38:21	◣	tourdownunder (~textual@203-158-35-175.dyn.iinet.net.au) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 14:38:27	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 272 seconds)
2017-01-04 14:38:39	Myon	does that help if something is already waiting?
2017-01-04 14:38:55	RhodiumToad	log_lock_waits? don't think so
2017-01-04 14:39:02	hi117	ok ill try that
2017-01-04 14:39:20	◣	zivester (~zivester@38.104.66.138) has quit (Ping timeout: 245 seconds)
2017-01-04 14:39:21	xocolatl	Myon: depends on timing, I suppose
2017-01-04 14:39:32	xocolatl	the logging happens after deadlock_timeout
2017-01-04 14:39:41	◥	evnmar (~MongooseW@c-73-170-27-156.hsd1.ca.comcast.net) has joined #postgresql
2017-01-04 14:39:42	◥	trailertrash (~trailertr@unaffiliated/trailertrash) has joined #postgresql
2017-01-04 14:39:43	RhodiumToad	and also when the lock is finally acquired
2017-01-04 14:39:53	Myon	well it's unlikely I'll be able to edit the config and issue a reload within one second
2017-01-04 14:40:11	Myon	*plus* analyzing the problem and determining that I want to do that :)
2017-01-04 14:40:46	◣	gelignite (~gelignite@x4e316dca.dyn.telefonica.de) has quit (Quit: http://bit.ly/1kso8Ta)
2017-01-04 14:41:06	hi117	ok, so the pid of the process creating the index has an exclusive lock granted
2017-01-04 14:41:24	RhodiumToad	ignore ExclusiveLock locks on transactions
2017-01-04 14:41:35	RhodiumToad	every transaction holds ExclusiveLock on itself
2017-01-04 14:41:45	RhodiumToad	what you're looking for is relation locks
2017-01-04 14:42:04	hi117	none of those
2017-01-04 14:42:19	RhodiumToad	there must be some
2017-01-04 14:42:41	RhodiumToad	c-i-c takes a ShareUpdateExclusive lock on the table
2017-01-04 14:42:46	hi117	htop says the insert job is "waiting"
2017-01-04 14:42:48	◥	turista (~turista@190-38-115-91.dyn.dsl.cantv.net) has joined #postgresql
2017-01-04 14:43:06	RhodiumToad	look at the pid for the insert job and see what lock it has that has granted=f
2017-01-04 14:44:06	hi117	 relation |    16385 |    16396 |      |       |            |               |         |       |          | 3/1638154          | 15997 | RowExclusiveLock | f       | f
2017-01-04 14:44:06	◣	evnmar (~MongooseW@c-73-170-27-156.hsd1.ca.comcast.net) has quit (Client Quit)
2017-01-04 14:44:28	RhodiumToad	ok, now what else has locks on the same relation
2017-01-04 14:45:47	◥	_Tenchi_ (~phil@207-255-68-080-dhcp.aoo.pa.atlanticbb.net) has joined #postgresql
2017-01-04 14:46:28	◣	ChrisJames02170 (~py@ool-1826eaa1.dyn.optonline.net) has quit (Remote host closed the connection)
2017-01-04 14:46:28	hi117	the pid of the create index concurently process
2017-01-04 14:46:35	◥	HarrisonF (~Harrison@199.201.64.135) has joined #postgresql
2017-01-04 14:46:35	◣	HarrisonF (~Harrison@199.201.64.135) has quit (Changing host)
2017-01-04 14:46:35	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-04 14:46:38	RhodiumToad	and what else?
2017-01-04 14:46:43	RhodiumToad	and with what lock mode?
2017-01-04 14:46:47	◥	Jungle-boogie (~boogie@unaffiliated/jungle-boogie) has joined #postgresql
2017-01-04 14:46:49	hi117	relation |    16385 |    16396 |      |       |            |               |         |       |          | 2/7525935          | 15762 | ShareLock        | t       | f
2017-01-04 14:47:08	RhodiumToad	that's not doing create index concurrently, that's doing create index
2017-01-04 14:47:29	xocolatl	wtf?
2017-01-04 14:47:30	RhodiumToad	create index takes ShareLock, create index concurrently takes ShareUpdateExclusiveLock
2017-01-04 14:47:49	RhodiumToad	ShareLock blocks inserts, ShareUpdateExclusiveLock does not
2017-01-04 14:47:59	hi117	my command is create index concurrently on xxx (yyy);
2017-01-04 14:48:08	RhodiumToad	ahh
2017-01-04 14:48:11	◥	ChrisJames02170 (~py@ool-1826eaa1.dyn.optonline.net) has joined #postgresql
2017-01-04 14:48:16	RhodiumToad	what pg version?
2017-01-04 14:49:22	hi117	9.2.15
2017-01-04 14:49:25	RhodiumToad	check you have the spelling of concurrently correct, btw
2017-01-04 14:49:47	RhodiumToad	if you misspell it _and_ leave out the index name, you're doing a valid create index command that's not concurrent
2017-01-04 14:49:52	◣	cartan (~cartan@p4FEEA520.dip0.t-ipconnect.de) has quit (Quit: Leaving)
2017-01-04 14:50:11	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 14:50:27	hi117	ok im bad at spelling it seems
2017-01-04 14:50:30	◣	pawelbx (~user@asarevtrax.mserve.com) has quit (Ping timeout: 258 seconds)
2017-01-04 14:50:32	RhodiumToad	i.e.  create index concurently on foo (bar);  creates an index called "concurently"
2017-01-04 14:50:46	◥	elein (~chatzilla@sjfw1-a.adobe.com) has joined #postgresql
2017-01-04 14:51:00	RhodiumToad	that's a fun gotcha
2017-01-04 14:51:10	hi117	wait no
2017-01-04 14:51:43	hi117	ok yeah im bad at copy pasting too
2017-01-04 14:51:47	hi117	tyvm
2017-01-04 14:53:34	◥	Flotho66 (~florent@bch66-4-88-174-59-47.fbx.proxad.net) has joined #postgresql
2017-01-04 14:54:04	◥	alden (uid182191@gateway/web/irccloud.com/x-lshaxpnrbfkgyfbg) has joined #postgresql
2017-01-04 14:54:16	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-04 14:54:16	◣	MindAndGo (~florent@2a01:e35:8ae3:b2f0:aadf:7f06:4372:61c3) has quit (Read error: No route to host)
2017-01-04 14:57:10	◣	s2013 (~textual@cpe-72-226-62-58.nyc.res.rr.com) has quit (Read error: No route to host)
2017-01-04 14:58:05	◣	arezki (~arezki@lon92-h02-176-149-62-139.dsl.sta.abo.bbox.fr) has quit (Ping timeout: 272 seconds)
2017-01-04 14:58:30	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 245 seconds)
2017-01-04 14:58:51	xocolatl	what's the difference between a single INSERT with multiple VALUES, and COPY?  aren't they both bulk inserts?
2017-01-04 14:59:08	RhodiumToad	difference in what sense?
2017-01-04 14:59:15	RhodiumToad	they are different code paths
2017-01-04 14:59:17	xocolatl	performance.  the INSERT is slower
2017-01-04 14:59:38	RhodiumToad	COPY has various optimizations for performance, and also bypasses a whole lot of general-purpose executor code
2017-01-04 15:00:19	RhodiumToad	how long are the values lists? parsing a long VALUES clause is also no speed demon, and is insanely memory-hungry
2017-01-04 15:00:59	xocolatl	I did a simple test of 1 million integer ids
2017-01-04 15:01:07	RhodiumToad	in a single values clause?
2017-01-04 15:01:40	RhodiumToad	that might easily have needed 100+MB of memory just for parse analysis
2017-01-04 15:01:41	xocolatl	as separate insert statements, as one insert, and as copy.  everything in their own transaction
2017-01-04 15:02:39	RhodiumToad	there's a reason I tell people to use arrays rather than long IN lists
2017-01-04 15:02:51	RhodiumToad	and it applies to VALUES as much or more
2017-01-04 15:02:51	xocolatl	(the 1M separate inserts were all in a single transaction)
2017-01-04 15:03:26	xocolatl	so the problem was in parsing, not in inserting?
2017-01-04 15:03:38	◥	kevinburke (uid56852@gateway/web/irccloud.com/x-ftwlzelwsuoavjfd) has joined #postgresql
2017-01-04 15:03:40	RhodiumToad	COPY has speed advantages on the actual inserting parts too
2017-01-04 15:03:53	kevinburke	Hi, I'm having trouble using the checkout form on the Postgres website to make a donation
2017-01-04 15:04:00	kevinburke	"The system was unable to process your payment request: "Hierarchy Verification Error (HV)". Please use your browser back button and try again or contact the merchant for assistance. "
2017-01-04 15:04:04	xocolatl	since copy also calls triggers and whatnot?  how does it get its speed?
2017-01-04 15:04:05	kevinburke	Who should I talk to about this?
2017-01-04 15:04:26	RhodiumToad	xocolatl: bypassing the executor and various optimizations
2017-01-04 15:04:31	xocolatl	kevinburke: send an email to pgsql-www@postgresql.org
2017-01-04 15:04:51	RhodiumToad	maybe pginfra needs a heads-up too?
2017-01-04 15:05:25	xocolatl	yeah, I keep forgetting we can directly ping pginfra here
2017-01-04 15:05:39	RhodiumToad	not that they necessarily answer :-)
2017-01-04 15:05:42	◥	hanada (~hanada@KD111097171137.ppp-bb.dion.ne.jp) has joined #postgresql
2017-01-04 15:05:56	▷	xocolatl blames magnush
2017-01-04 15:06:03	RhodiumToad	"I can call spirits from the vasty deep"
2017-01-04 15:06:36	◥	autechy (~autechy@134.249.168.41) has joined #postgresql
2017-01-04 15:06:39	xocolatl	why, so can I!
2017-01-04 15:07:18	magnush	kevinburke: which of the forms? as in, which URL is the form on?
2017-01-04 15:07:23	◣	skylar (~skylar2@gsits-a.gs.washington.edu) has quit (Quit: Leaving.)
2017-01-04 15:07:24	magnush	(there are a coupel of different ones linked..)
2017-01-04 15:07:26	◥	evnmar (~MongooseW@12.104.179.154) has joined #postgresql
2017-01-04 15:07:43	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2017-01-04 15:08:44	◥	Absolute0 (~ramin@ool-43506a5b.dyn.optonline.net) has joined #postgresql
2017-01-04 15:08:49	◥	leolrrj (~leolrrj@50-243-248-21-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-04 15:08:53	Absolute0	What is my error?
2017-01-04 15:08:57	Absolute0	=> alter table transaction alter column room type integer using room::integer;
2017-01-04 15:09:00	Absolute0	ERROR:  invalid input syntax for integer: ""
2017-01-04 15:09:20	leolrrj	hey guys... what do you think about stored procedures, should I use them for all crud operations or don't?
2017-01-04 15:09:23	Absolute0	oh if its blank...
2017-01-04 15:09:45	xocolatl	Absolute0: nullif it
2017-01-04 15:09:58	◣	hanada (~hanada@KD111097171137.ppp-bb.dion.ne.jp) has quit (Ping timeout: 246 seconds)
2017-01-04 15:09:58	Absolute0	xocolatl: does using expect an expression?
2017-01-04 15:10:02	RhodiumToad	nullif(room,'')::integer
2017-01-04 15:10:03	◣	teslix (~Adrien@2a01:cb14:2e8:900:391a:5611:3652:74bb) has left #postgresql
2017-01-04 15:10:04	xocolatl	yes
2017-01-04 15:10:31	kevinburke	magnush: this page https://www.usaepay.com/interface/epayform/
2017-01-04 15:10:35	◣	autechy (~autechy@134.249.168.41) has quit (Client Quit)
2017-01-04 15:10:52	◣	turista (~turista@190-38-115-91.dyn.dsl.cantv.net) has left #postgresql ("Leaving")
2017-01-04 15:11:16	magnush	kevinburke: ah, that one is from throuhg the SPI site. unfortunately, pginfra has nothing to do with that one. I don't think we even know anybody on their technical team. sorry.
2017-01-04 15:11:22	kevinburke	ok
2017-01-04 15:11:37	kevinburke	fwiw, I found a paypal link here http://www.spi-inc.org/projects/postgresql/ you should just put that link on the PG website
2017-01-04 15:11:52	kevinburke	guessing you'd notice a big bump in $$
2017-01-04 15:12:39	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 272 seconds)
2017-01-04 15:13:24	◣	Flotho66 (~florent@bch66-4-88-174-59-47.fbx.proxad.net) has quit (Ping timeout: 248 seconds)
2017-01-04 15:14:20	◣	filiprem (~filip@176.111.231.193) has quit (Ping timeout: 245 seconds)
2017-01-04 15:14:26	◣	NCS_One (~NCS_One@dsl-178-106.bl26.telepac.pt) has quit (Quit: Lost terminal)
2017-01-04 15:14:40	leolrrj	hey guys... what do you think about stored procedures? should I use them for all crud operations or don't?
2017-01-04 15:14:45	magnush	kevinburke: linuxhiker might have some way to figure out what's wrong with that form. i'm not sure how much he's involved in that side of the operation thuogh.
2017-01-04 15:15:03	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-04 15:16:59	◣	Absolute0 (~ramin@ool-43506a5b.dyn.optonline.net) has quit (Quit: leaving)
2017-01-04 15:18:42	◥	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2017-01-04 15:18:59	◣	xemdetia_ (xemdetia@nat/ibm/x-irqexmqcrdawuwwx) has quit (Ping timeout: 272 seconds)
2017-01-04 15:19:13	kevinburke	Ok
2017-01-04 15:19:25	◣	ash_workz (~chatzilla@50-243-5-153-static.hfc.comcastbusiness.net) has quit (Ping timeout: 246 seconds)
2017-01-04 15:19:27	kevinburke	(You can work around this by just linking to Paypal instead from postgresql.org if you still get the money)
2017-01-04 15:20:15	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 272 seconds)
2017-01-04 15:20:38	◣	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Client Quit)
2017-01-04 15:20:48	◥	nineinchnick (~jwas@109.231.18.27) has joined #postgresql
2017-01-04 15:21:34	◣	faw (~faw@unaffiliated/faw) has quit (Quit: Leaving)
2017-01-04 15:21:53	◥	faw (~faw@38.102.153.98) has joined #postgresql
2017-01-04 15:21:53	◣	faw (~faw@38.102.153.98) has quit (Changing host)
2017-01-04 15:21:53	◥	faw (~faw@unaffiliated/faw) has joined #postgresql
2017-01-04 15:22:14	◣	faw (~faw@unaffiliated/faw) has quit (Remote host closed the connection)
2017-01-04 15:22:33	◥	faw (~faw@38.102.153.98) has joined #postgresql
2017-01-04 15:22:33	◣	faw (~faw@38.102.153.98) has quit (Changing host)
2017-01-04 15:22:33	◥	faw (~faw@unaffiliated/faw) has joined #postgresql
2017-01-04 15:22:33	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-04 15:22:51	◣	yuri_niyazov (~anonymous@199.87.82.138) has quit (Quit: yuri_niyazov)
2017-01-04 15:24:59	◣	xzi11a (~robert@static-108-48-124-82.washdc.fios.verizon.net) has quit (Ping timeout: 258 seconds)
2017-01-04 15:25:12	linuxhiker	kevinburke: What is it we are trying to solve?
2017-01-04 15:25:31	kevinburke	I guess, help people give Postgres money more easily
2017-01-04 15:25:40	kevinburke	Specifically, I ran into a problem with the usaepay.com form
2017-01-04 15:25:47	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has quit (Remote host closed the connection)
2017-01-04 15:26:02	kevinburke	More generally, many people have Paypal accounts with money/credit cards already in them, and reducing the barrier to payment will help people give Postgres money
2017-01-04 15:26:36	kevinburke	So two things, one is figure out why I can't submit money via usaepay.com and also consider linking to Paypal on the postgresql.org site, instead of usaepay.com
2017-01-04 15:27:01	◣	fwiles (~frank@19.89.124.24.cm.sunflower.com) has quit (Quit: fwiles)
2017-01-04 15:27:24	◥	rakm (~rakm@17.115.52.250) has joined #postgresql
2017-01-04 15:27:49	rakm	is there a way to do a psql import using a db url (that contains the host/port/user/pass) info? or should i parse the url?
2017-01-04 15:28:05	RhodiumToad	import from what exactly?
2017-01-04 15:28:23	rakm	a db file
2017-01-04 15:28:26	rakm	dump
2017-01-04 15:28:38	RhodiumToad	you have an sql dump, or a custom format dump?
2017-01-04 15:28:44	rakm	sql dump
2017-01-04 15:29:04	RhodiumToad	psql -f file.sql -d 'postgresql://stuff'   should do
2017-01-04 15:29:06	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has joined #postgresql
2017-01-04 15:31:21	◥	slap_stick (~slap_stic@188.172.149.126) has joined #postgresql
2017-01-04 15:33:38	◥	psdn (~psdn@d14-69-68-37.try.wideopenwest.com) has joined #postgresql
2017-01-04 15:34:13	◣	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 15:34:35	◣	leolrrj (~leolrrj@50-243-248-21-static.hfc.comcastbusiness.net) has quit
2017-01-04 15:35:53	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-04 15:36:13	◥	lamneth (~IceChat9@modemcable080.114-202-24.mc.videotron.ca) has joined #postgresql
2017-01-04 15:36:29	◥	hahuang61 (~hahuang65@c-50-136-152-183.hsd1.ca.comcast.net) has joined #postgresql
2017-01-04 15:36:31	◥	tourdownunder (~textual@203-158-35-175.dyn.iinet.net.au) has joined #postgresql
2017-01-04 15:37:10	rakm	RhodiumToad awesome, thanks!
2017-01-04 15:40:25	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 246 seconds)
2017-01-04 15:40:28	◣	dwsr (uid185230@gateway/web/irccloud.com/x-aixyxqpburzvocnj) has quit (Quit: Connection closed for inactivity)
2017-01-04 15:41:09	◣	inflames (~syg@47.148.210.171) has quit (Ping timeout: 248 seconds)
2017-01-04 15:42:01	trailertrash	hey everyone, what is the best way to accomplish this? http://pasteboard.co/ibJngsXOI.png
2017-01-04 15:43:42	◥	EyePulp (~eyepulp@173-18-225-16.client.mchsi.com) has joined #postgresql
2017-01-04 15:44:42	◣	ermajn_ (~er@109.175.42.4) has quit (Quit: This computer has gone to sleep)
2017-01-04 15:45:45	◣	bdunavant (~bdunavant@static-108-48-124-82.washdc.fios.verizon.net) has quit (Remote host closed the connection)
2017-01-04 15:46:08	ck__	trailertrash: pay someone
2017-01-04 15:46:13	◣	proteus-guy (~proteusgu@180.183.13.253) has quit (Ping timeout: 264 seconds)
2017-01-04 15:46:37	xocolatl	or at least describe what you want
2017-01-04 15:51:07	◣	gowen (~gowen@83.173.187.50.dyn.user.ono.com) has quit (Quit: Leaving)
2017-01-04 15:51:45	◣	lamneth (~IceChat9@modemcable080.114-202-24.mc.videotron.ca) has left #postgresql
2017-01-04 15:53:48	◥	ramfjord (~tramfjord@63.130.249.90) has joined #postgresql
2017-01-04 15:53:56	◣	DropItLikeItsHot (~AfroThund@c-73-39-115-171.hsd1.md.comcast.net) has quit (Ping timeout: 248 seconds)
2017-01-04 15:54:10	◥	AfroThundr (~AfroThund@2601:147:c000:b824:4411:741f:fe83:82ed) has joined #postgresql
2017-01-04 15:55:09	◣	AfroThundr (~AfroThund@2601:147:c000:b824:4411:741f:fe83:82ed) has quit (Max SendQ exceeded)
2017-01-04 15:55:12	◥	arescorpio (~arescorpi@107-207-17-190.fibertel.com.ar) has joined #postgresql
2017-01-04 15:55:52	◥	AfroThundr (~AfroThund@2601:147:c000:b824:4411:741f:fe83:82ed) has joined #postgresql
2017-01-04 15:55:53	trailertrash	table fi1w is primarily used for cleaning unstructured text prior to tokenizing words in column wnm
2017-01-04 15:56:18	trailertrash	ck__: lol, that’s absurd
2017-01-04 15:56:37	◣	Munnu (~timo@91-158-145-247.elisa-laajakaista.fi) has quit (Quit: Follow the white rabbit. Compile the desert of the real. 139.)
2017-01-04 15:57:00	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2017-01-04 15:58:53	◣	hahuang61 (~hahuang65@c-50-136-152-183.hsd1.ca.comcast.net) has quit (Ping timeout: 272 seconds)
2017-01-04 15:59:01	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Remote host closed the connection)
2017-01-04 15:59:26	◣	slap_stick (~slap_stic@188.172.149.126) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-04 16:00:20	◥	hahuang61 (~hahuang65@2601:647:4000:d7:49e0:6cdb:e9d1:2dce) has joined #postgresql
2017-01-04 16:01:42	trailertrash	this is a simple task however the volume of data and the continuous inserting/truncating is rather expensive
2017-01-04 16:01:49	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has quit (Remote host closed the connection)
2017-01-04 16:02:37	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has joined #postgresql
2017-01-04 16:04:52	◥	zivester (~zivester@pool-100-8-14-108.nwrknj.fios.verizon.net) has joined #postgresql
2017-01-04 16:05:40	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 248 seconds)
2017-01-04 16:06:10	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has quit (Remote host closed the connection)
2017-01-04 16:06:17	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has joined #postgresql
2017-01-04 16:06:59	◥	rbern (~rbern@unaffiliated/rbern) has joined #postgresql
2017-01-04 16:07:08	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2017-01-04 16:07:25	◥	yuri_niyazov (~anonymous@199.87.82.138) has joined #postgresql
2017-01-04 16:07:26	◣	al-damiri (uid142631@gateway/web/irccloud.com/x-ptvfvjqfwljfenle) has quit (Quit: Connection closed for inactivity)
2017-01-04 16:09:01	◣	tourdownunder (~textual@203-158-35-175.dyn.iinet.net.au) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 16:10:52	◣	dnicole (~dnicole@2602:30a:2e5d:1370:1170:f2c1:19b8:47d6) has quit (Remote host closed the connection)
2017-01-04 16:11:02	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has quit (Remote host closed the connection)
2017-01-04 16:12:29	◣	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has quit (Remote host closed the connection)
2017-01-04 16:12:49	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-04 16:12:56	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-04 16:13:24	◣	Bradipo (~amb@22.16-28.45.70.166.in-addr.arpa) has quit (Remote host closed the connection)
2017-01-04 16:13:37	◥	merzo (~merzo@93-60-92-178.pool.ukrtel.net) has joined #postgresql
2017-01-04 16:14:19	◥	Bradipo (~amb@22.16-28.45.70.166.in-addr.arpa) has joined #postgresql
2017-01-04 16:15:15	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has joined #postgresql
2017-01-04 16:15:26	◣	yuri_niyazov (~anonymous@199.87.82.138) has quit (Quit: yuri_niyazov)
2017-01-04 16:16:02	ck__	trailertrash: dont do this in db, just in some programming language
2017-01-04 16:17:10	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 246 seconds)
2017-01-04 16:17:22	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has quit (Remote host closed the connection)
2017-01-04 16:17:24	◣	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has quit (Ping timeout: 248 seconds)
2017-01-04 16:18:26	◥	macabre (~ibtjw@unaffiliated/macabre) has joined #postgresql
2017-01-04 16:18:26	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Remote host closed the connection)
2017-01-04 16:19:02	◣	Guest32 (~textual@vic.xmatters.com) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-04 16:20:16	◣	xning_ (~nerd@119.254.120.72) has quit (Remote host closed the connection)
2017-01-04 16:21:09	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has joined #postgresql
2017-01-04 16:21:15	◣	Masterphi (~Masterphi@199.192.105.248) has quit (Quit: ZZZZzzzzz)
2017-01-04 16:22:40	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Ping timeout: 245 seconds)
2017-01-04 16:23:15	◣	ramfjord (~tramfjord@63.130.249.90) has quit (Ping timeout: 258 seconds)
2017-01-04 16:25:21	◥	macabre (~ibtjw@unaffiliated/macabre) has joined #postgresql
2017-01-04 16:25:53	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-04 16:26:45	◣	jtv (~jtv@jtv.xs4all.nl) has quit (Ping timeout: 272 seconds)
2017-01-04 16:27:19	◣	nineinchnick (~jwas@109.231.18.27) has quit (Remote host closed the connection)
2017-01-04 16:27:48	◥	jtv (~jtv@jtv.xs4all.nl) has joined #postgresql
2017-01-04 16:28:32	◣	kevinburke (uid56852@gateway/web/irccloud.com/x-ftwlzelwsuoavjfd) has left #postgresql
2017-01-04 16:30:28	◣	dege (~dege@c-907ce555.027-294-73746f71.cust.bredbandsbolaget.se) has quit (Quit: Damage is done, this is fun)
2017-01-04 16:31:47	◣	Guest81297 (~sanchit@50-201-125-254-static.hfc.comcastbusiness.net) has quit (Read error: Connection reset by peer)
2017-01-04 16:31:54	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has quit (Remote host closed the connection)
2017-01-04 16:32:15	◥	Guest81297 (~sanchit@sslvpn.fireeye.com) has joined #postgresql
2017-01-04 16:34:10	◥	shangxiao (~shangxiao@103.224.86.17) has joined #postgresql
2017-01-04 16:34:23	◣	pablo_s (~pablo_s@206-248-188-234.dsl.teksavvy.com) has quit (Quit: Konversation terminated!)
2017-01-04 16:34:42	◥	pablo_s (~pablo_s@206-248-188-234.dsl.teksavvy.com) has joined #postgresql
2017-01-04 16:34:48	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has joined #postgresql
2017-01-04 16:34:55	◣	EyePulp (~eyepulp@173-18-225-16.client.mchsi.com) has quit (Remote host closed the connection)
2017-01-04 16:35:30	◥	EyePulp (~eyepulp@173-18-225-16.client.mchsi.com) has joined #postgresql
2017-01-04 16:36:11	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has quit (Remote host closed the connection)
2017-01-04 16:36:11	◣	sjoos (~jlammrs@a111225.upc-a.chello.nl) has quit (Quit: Leaving)
2017-01-04 16:36:39	◣	mkopriva (~mkopriva@ip-86-49-75-151.net.upcbroadband.cz) has quit (Remote host closed the connection)
2017-01-04 16:37:19	◥	MrNaz (~mrnaz@ppp118-209-212-115.bras2.mel11.internode.on.net) has joined #postgresql
2017-01-04 16:37:31	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:fc4a:4fa4:45a3:5c7f) has joined #postgresql
2017-01-04 16:37:43	trailertrash	hmmm.. no
2017-01-04 16:38:53	◥	tourdownunder (~textual@203-158-35-175.dyn.iinet.net.au) has joined #postgresql
2017-01-04 16:39:25	◣	Guest81297 (~sanchit@sslvpn.fireeye.com) has quit (Ping timeout: 272 seconds)
2017-01-04 16:39:33	◥	Guest81297 (~sanchit@50-201-125-254-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-05 10:43:36	◥	d8v3 (~david@66.195.46.242) has joined #postgresql
2017-01-05 10:43:36	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2017-01-05 10:43:36	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2017-01-05 10:43:36	⚡	Channel #postgresql: 981 nicks (0 ops, 0 voices, 981 normals)
2017-01-05 10:43:36	⚡	URL for #postgresql: http://www.postgresql.org
2017-01-05 10:43:37	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2017-01-05 10:43:53	bf_	but the cpu was at 100% because of all the transaction locks
2017-01-05 10:44:07	bf_	those insert queries happen randomly when people add new games to their accounts
2017-01-05 10:44:27	◥	nettoweb (~nettoweb@2804:d57:180b:ae00:e58d:d055:8729:a6e8) has joined #postgresql
2017-01-05 10:44:32	Zr40	are you sure it's due to locks, not all the refreshing?
2017-01-05 10:44:38	bf_	if you go to " Slowest individual queries"
2017-01-05 10:44:39	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 10:44:45	bf_	it shows the top queries taking 3 min all being locks
2017-01-05 10:45:07	Zr40	that's because something else held that lock for 3 minutes
2017-01-05 10:45:21	Zr40	being blocked doesn't cause any significant CPU usage
2017-01-05 10:45:26	bf_	yes it was 500 people initiating the same transaction at the same time
2017-01-05 10:45:31	◥	Teriance_Viernio (~TViernion@69.12.11.85) has joined #postgresql
2017-01-05 10:45:36	bf_	-> 15 min cpu at 100% of a beefy aws rds instance
2017-01-05 10:46:06	Zr40	if each of those 500 people triggered a refresh matview while halding a lock and waiting for the previous one to finish, then of course it's going to take some time
2017-01-05 10:46:12	Zr40	holding.
2017-01-05 10:46:36	bf_	no they shouldnt have triggered the refresh at all
2017-01-05 10:46:37	◥	githogori (~githogori@c-73-70-12-67.hsd1.ca.comcast.net) has joined #postgresql
2017-01-05 10:46:44	bf_	this should've not happend at all within the transaction
2017-01-05 10:46:45	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-05 10:46:47	◣	InfoTest (~Thunderbi@tgn.188.57.178.dts.mg) has quit (Quit: InfoTest)
2017-01-05 10:47:00	◥	xocolatl (~Vik@ath91-3-88-167-161-184.fbx.proxad.net) has joined #postgresql
2017-01-05 10:47:22	bf_	work_mem is 4MB
2017-01-05 10:47:27	Zr40	that's a bit tiny
2017-01-05 10:48:02	◥	bordicon (~bordicon@50-247-102-73-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-05 10:48:06	Zr40	things like sorts that don't fit into work_mem will spill over into a temp file
2017-01-05 10:48:16	◣	TViernion (~TViernion@69.12.11.85) has quit (Ping timeout: 260 seconds)
2017-01-05 10:48:34	bf_	max_conns is 2500
2017-01-05 10:49:23	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 256 seconds)
2017-01-05 10:49:36	bf_	it only shows me "freeable memory" which is 50,000 MB
2017-01-05 10:49:57	hark_	Being locked and having 100 % cpu utilisation are totally unrelated problems. Additionally having 100 % cpu util doesn't tell you anything about the acctual issue.
2017-01-05 10:50:04	hark_	Where is your cpu spent?
2017-01-05 10:50:15	bf_	writes were at 15 MB/sec in the problematic timeframe
2017-01-05 10:50:31	xocolatl	bf_: 2500 max_connections is outrageous
2017-01-05 10:50:32	Zr40	they could be related in the sense that the processes causing 100% cpu are holding that lock
2017-01-05 10:51:01	bf_	https://i.imgur.com/QlJejrN.png
2017-01-05 10:51:05	◣	th000 (~thousand@78-56-195-54.static.zebra.lt) has quit (Ping timeout: 256 seconds)
2017-01-05 10:51:15	bf_	when I spin up 50 instances and each take 10 in pg_pool
2017-01-05 10:51:37	bf_	hark_: I shared pgbadger report here: https://www.dropbox.com/s/cw12molnr5q6pvx/out.html?dl=0
2017-01-05 10:52:04	bf_	write latency also spiked to 100ms at 18:05 according to the dashboard screenshot
2017-01-05 10:52:19	bf_	This shouldnt be something under my control, but a disk issue, right?
2017-01-05 10:52:20	◣	PCatinean (~PCatinean@188.27.185.69) has quit (Remote host closed the connection)
2017-01-05 10:53:03	hark_	100 ms sounds like much io. That might be caused by the application desgin...idk
2017-01-05 10:53:13	◥	dsantiago (~dsantiago@40.141.55.70) has joined #postgresql
2017-01-05 10:53:14	hark_	I dont have a dropbox account
2017-01-05 10:53:23	Zr40	the dropbox prompt can be bypassed
2017-01-05 10:53:48	Zr40	bf_: at least try increasing work_mem
2017-01-05 10:55:06	bf_	I just found this post http://stackoverflow.com/a/28481902/282259
2017-01-05 10:55:24	bf_	they mention that default SSD that comes with aws rds pg instances might be too slow and the disk type should be changed
2017-01-05 10:55:32	bf_	but disk is only an issue because of the work_mem
2017-01-05 10:55:54	◥	bendem (bendem@bendem.be) has joined #postgresql
2017-01-05 10:56:04	bf_	can I set it to 20MB?
2017-01-05 10:56:08	bf_	or 50MB?
2017-01-05 10:56:15	◣	kassav (~kassav@41.230.23.182) has quit (Quit: kassav)
2017-01-05 10:56:22	hark_	That depends on your ARM...and your number of connections
2017-01-05 10:56:30	bf_	50gb ram is free
2017-01-05 10:56:33	◥	fwiles (~frank@19.89.124.24.cm.sunflower.com) has joined #postgresql
2017-01-05 10:56:33	bf_	1200 conns
2017-01-05 10:56:39	◣	fwiles (~frank@19.89.124.24.cm.sunflower.com) has quit (Client Quit)
2017-01-05 10:56:41	Zr40	how much RAM total?
2017-01-05 10:57:01	hark_	If you have acctually 2500 connections it sounds crazy to increase it :p
2017-01-05 10:57:02	bf_	no idea should be around 60 it does not use much ram
2017-01-05 10:57:10	bf_	maybe i should just upgrade the disk
2017-01-05 10:57:18	bf_	no we dont have 2500
2017-01-05 10:57:21	Zr40	that addresses the symptom, not the problem
2017-01-05 10:57:28	◣	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-05 10:57:31	bf_	but we hit the old limit once when adding more instances
2017-01-05 10:57:31	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-05 10:57:37	hark_	monitor the malicious query and get a clue first.
2017-01-05 10:57:54	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-05 10:58:15	hark_	Hitting every problem with hardware is not only expensive, but usually no solution on the long run.
2017-01-05 10:58:43	xocolatl	+1
2017-01-05 10:58:53	◣	byte512 (~user@h37n2-um-a32.ias.bredband.telia.com) has quit (Ping timeout: 272 seconds)
2017-01-05 10:59:00	◣	dsantiago (~dsantiago@40.141.55.70) has quit (Read error: Connection reset by peer)
2017-01-05 10:59:04	◥	dsantiag_ (~dsantiago@40.141.55.70) has joined #postgresql
2017-01-05 10:59:20	Zr40	bf_: change work_mem to 8 MB and see how that affects the problem and also how it affects free RAM
2017-01-05 10:59:22	bf_	valid point. I have increased it to 20,000kb now
2017-01-05 10:59:23	◥	spearthistle (~strawberr@213.205.252.33) has joined #postgresql
2017-01-05 10:59:27	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Remote host closed the connection)
2017-01-05 10:59:38	◥	elein (~chatzilla@sjfw1.adobe.com) has joined #postgresql
2017-01-05 10:59:40	Zr40	20 MB would probably fit, but keep an eye on it
2017-01-05 10:59:53	Zr40	not sure if RDS counts cache towards 'freeable memory'
2017-01-05 11:00:06	◥	mizhka (~mizhka@cloud.unclebear.ru) has joined #postgresql
2017-01-05 11:00:13	◥	ayogi (~yogesh@223.186.113.116) has joined #postgresql
2017-01-05 11:00:19	◣	galgamach (~galg@46-41-112.adsl.cyta.gr) has quit (Quit: left 2 space)
2017-01-05 11:00:37	◣	jonez (~jam@unaffiliated/jonez) has quit (Ping timeout: 248 seconds)
2017-01-05 11:00:42	bf_	we'll see
2017-01-05 11:00:54	bf_	thanks a lot. I will only be able to really check in 24 hours when the next event starts
2017-01-05 11:01:12	bf_	https://strivewire.com/tournament/11713/lobby
2017-01-05 11:01:22	bf_	see you guys. thanks again.
2017-01-05 11:01:24	◣	bf_ (~bf_@xdsl-78-35-203-247.netcologne.de) has quit (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
2017-01-05 11:01:43	◣	mizhka (~mizhka@cloud.unclebear.ru) has left #postgresql
2017-01-05 11:01:44	Zr40	counterintuitively, more work_ram might even decrease actual memory use, because your queries might finish faster and you'll have less concurrent activity
2017-01-05 11:02:49	hark_	highly depends on the quey
2017-01-05 11:03:56	◥	TheWhip (~thewhip@106.51.141.119) has joined #postgresql
2017-01-05 11:04:20	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-05 11:04:58	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Remote host closed the connection)
2017-01-05 11:05:29	◣	nettoweb (~nettoweb@2804:d57:180b:ae00:e58d:d055:8729:a6e8) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-05 11:05:31	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 11:05:36	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-05 11:06:19	◣	robink_ (~quassel@unaffilated/robink) has quit (Ping timeout: 244 seconds)
2017-01-05 11:06:53	◣	adlaistevenson (05024077@gateway/web/freenode/ip.5.2.64.119) has left #postgresql
2017-01-05 11:06:55	◥	Debnet`Work (~Marc@20.86.2.93.rev.sfr.net) has joined #postgresql
2017-01-05 11:07:02	◥	m451 (~m451@pD9FA4B01.dip0.t-ipconnect.de) has joined #postgresql
2017-01-05 11:08:18	◥	satanclaus (~satanclau@64.156.193.188) has joined #postgresql
2017-01-05 11:08:28	◥	robink_ (~quassel@unaffilated/robink) has joined #postgresql
2017-01-05 11:08:57	◥	Debnet (~Marc@smtp2.sa-cim.fr) has joined #postgresql
2017-01-05 11:09:00	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 272 seconds)
2017-01-05 11:09:05	hark_	s/ey/erys/
2017-01-05 11:09:45	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Ping timeout: 245 seconds)
2017-01-05 11:09:46	◥	double-you (~Unnoticed@85.9.20.148) has joined #postgresql
2017-01-05 11:10:18	jaegerca	MatheusOl: It turns out that my ruby script was latching on to the wrong process, I believe -c copy was indeed exiting without a 0
2017-01-05 11:10:22	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 256 seconds)
2017-01-05 11:10:22	◣	Debnet`Laptop (~Marc@smtp2.sa-cim.fr) has quit (Ping timeout: 256 seconds)
2017-01-05 11:10:23	◥	galgamach (~galg@46-41-112.adsl.cyta.gr) has joined #postgresql
2017-01-05 11:10:38	◥	myusuf3 (~myusuf3@CPE60e327dca2cf-CM788df740f4d0.cpe.net.cable.rogers.com) has joined #postgresql
2017-01-05 11:10:51	◥	Yiota_ (~textual@2607:fea8:56e0:407:4466:ea11:a30d:6110) has joined #postgresql
2017-01-05 11:11:15	◣	unbalanced (~unbalance@181.229.133.6) has quit (Quit: WeeChat 1.6)
2017-01-05 11:11:26	◣	Debnet`Work (~Marc@20.86.2.93.rev.sfr.net) has quit (Ping timeout: 245 seconds)
2017-01-05 11:11:45	◥	th000 (~thousand@213.197.146.62) has joined #postgresql
2017-01-05 11:13:00	◥	jonez (~jam@unaffiliated/jonez) has joined #postgresql
2017-01-05 11:13:49	◣	hark_ (d9c748a5@gateway/web/freenode/ip.217.199.72.165) has quit (Ping timeout: 260 seconds)
2017-01-05 11:14:06	◥	nettoweb (~nettoweb@189-30-125-72.fnses700.dsl.brasiltelecom.net.br) has joined #postgresql
2017-01-05 11:14:32	◣	Flotho66 (~florent@2a01:e35:8ae3:b2f0:aadf:7f06:4372:61c3) has quit (Ping timeout: 240 seconds)
2017-01-05 11:16:53	◥	HarrisonF (~Harrison@199.201.64.135) has joined #postgresql
2017-01-05 11:16:53	◣	HarrisonF (~Harrison@199.201.64.135) has quit (Changing host)
2017-01-05 11:16:53	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-05 11:18:12	◣	saurabhj_ (~saurabhjh@182.64.54.98) has quit (Remote host closed the connection)
2017-01-05 11:18:20	⚡	linuxhiker1 is now known as linuxhiker
2017-01-05 11:19:52	◥	raynold (uid201163@gateway/web/irccloud.com/x-ghodrnicqyrqimhu) has joined #postgresql
2017-01-05 11:20:22	◥	xemdetia_ (xemdetia@nat/ibm/x-ynsracvsanllbshf) has joined #postgresql
2017-01-05 11:20:34	◥	totus (~totus@2605:6000:66c0:8800:6882:526a:a81b:c7dc) has joined #postgresql
2017-01-05 11:21:45	◣	slap_stick (~slap_stic@188.172.149.126) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-05 11:21:54	◥	xemdetia__ (~xemdetia@129.42.208.174) has joined #postgresql
2017-01-05 11:22:27	◣	th000 (~thousand@213.197.146.62) has quit (Ping timeout: 248 seconds)
2017-01-05 11:23:36	◣	vovka (~vovka@46.72.33.152) has quit (Remote host closed the connection)
2017-01-05 11:24:07	◣	nettoweb (~nettoweb@189-30-125-72.fnses700.dsl.brasiltelecom.net.br) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-05 11:24:46	◣	xemdetia_ (xemdetia@nat/ibm/x-ynsracvsanllbshf) has quit (Ping timeout: 245 seconds)
2017-01-05 11:25:04	◣	cartan (~cartan@mail2.luratech.com) has quit (Read error: Connection reset by peer)
2017-01-05 11:25:10	◥	vis__ (~ryan@cpe-45-47-233-53.stny.res.rr.com) has joined #postgresql
2017-01-05 11:25:11	◥	retrospectacus (~adama@199.85.226.242) has joined #postgresql
2017-01-05 11:25:12	◣	satanclaus (~satanclau@64.156.193.188) has quit (Quit: Leaving)
2017-01-05 11:25:45	◣	moloch__ (terror@2a01:4f8:120:526e:1125::1) has quit (Changing host)
2017-01-05 11:25:46	◥	moloch__ (terror@unaffiliated/zly) has joined #postgresql
2017-01-05 11:26:20	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 11:26:34	◥	JordiGH (~jordi@octave/developer/JordiGH) has joined #postgresql
2017-01-05 11:27:08	JordiGH	I've got some transactions that are idle and pg_stat_activity says the query is COMMIT.
2017-01-05 11:27:47	xocolatl	that was their latest query
2017-01-05 11:27:52	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2017-01-05 11:27:58	JordiGH	Ah.
2017-01-05 11:28:07	xocolatl	if they were still doing it, the state would be 'active'
2017-01-05 11:29:10	JordiGH	Okay, some process seems to be really slowing down my db... how do I figure out what it is?
2017-01-05 11:29:51	xocolatl	are any queries waiting?
2017-01-05 11:30:34	JordiGH	Many, yes.
2017-01-05 11:30:59	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 248 seconds)
2017-01-05 11:31:03	xocolatl	ok, then we need to find out what they're waiting on
2017-01-05 11:31:22	xocolatl	what does pg_locks have to say about "not granted"?
2017-01-05 11:31:49	◣	emerson (~emerson@freenode/staff/emerson) has quit (Quit: leaving)
2017-01-05 11:31:54	retrospectacus	hi. Is "WARNING:  there is already a transaction in progress" always a bug?
2017-01-05 11:32:06	◥	emerson (~emerson@freenode/staff/emerson) has joined #postgresql
2017-01-05 11:32:20	xocolatl	retrospectacus: yes, but in your application, and it's not very serious
2017-01-05 11:32:31	johto	it might be really serious..
2017-01-05 11:32:38	xocolatl	JordiGH: do you happen to be on 9.6?
2017-01-05 11:32:53	JordiGH	xocolatl: I have the same number of rows where granted='f' as processes waiting.
2017-01-05 11:32:59	JordiGH	No, 9.5
2017-01-05 11:33:02	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2017-01-05 11:33:15	◥	irqq (~chatzilla@afos37.neoplus.adsl.tpnet.pl) has joined #postgresql
2017-01-05 11:33:15	xocolatl	that's too bad (9.5)
2017-01-05 11:33:39	xocolatl	but what are they waiting on?  and who has that lock?
2017-01-05 11:33:41	◥	yuri_niyazov (~anonymous@199.87.82.138) has joined #postgresql
2017-01-05 11:33:43	xocolatl	??locks
2017-01-05 11:33:43	pg_docbot	http://www.postgresql.org/docs/current/static/explicit-locking.html#ADVISORY-LOCKS :: http://wiki.postgresql.org/wiki/Lock_dependency_information
2017-01-05 11:33:44	pg_docbot	http://www.postgresql.org/docs/current/static/view-pg-locks.html :: http://wiki.postgresql.org/wiki/Lock_Monitoring
2017-01-05 11:34:18	jim	??boolean
2017-01-05 11:34:18	pg_docbot	http://andreas.scherbaum.la/blog/archives/302-BOOLEAN-datatype-with-PHP-compatible-output.html
2017-01-05 11:34:23	xocolatl	JordiGH: try one of the queries in the wiki links
2017-01-05 11:35:01	◥	aidalgol (~aidalgol@pdpc/supporter/student/aidalgol) has joined #postgresql
2017-01-05 11:35:05	⚡	aidalgol is now known as Guest59974
2017-01-05 11:35:52	◣	jhonnyBeGood_ (~joao@89.245.151.228) has quit (Remote host closed the connection)
2017-01-05 11:37:16	◣	mmello (~Marcelo@cpe-24-163-39-86.nc.res.rr.com) has quit (Quit: Leaving)
2017-01-05 11:37:50	vis__	I'm looking for a fast way to update a count column in a table with a count of all the entries in another table that belong to it. I'm pretty new to this, so all I have come up with is this: https://gist.github.com/anonymous/721e9d67ac52a7450dcb95db638690a4 . The problem is that there are about 1 million users and 14 million entries, so the subquery is extremely slow; you can see an explain here for a
2017-01-05 11:37:52	vis__	single user: https://gist.github.com/anonymous/713a8f563019ab1068999b6af95f846c . What am I doing wrong?
2017-01-05 11:38:12	⚡	Guest59974 is now known as aidalgol
2017-01-05 11:38:14	◥	mmello (~Marcelo@cpe-24-163-39-86.nc.res.rr.com) has joined #postgresql
2017-01-05 11:38:51	◥	teslix (~Adrien@2a01:cb14:2e8:900:391a:5611:3652:74bb) has joined #postgresql
2017-01-05 11:38:59	JordiGH	Erm, well, that tells me which pid is blocking which one.
2017-01-05 11:39:05	JordiGH	But it's not like everything is being blocked by a single pid.
2017-01-05 11:39:11	JordiGH	It looks like a complicated blocking graph.
2017-01-05 11:39:22	xocolatl	JordiGH: one query at a time, I guess
2017-01-05 11:39:42	xocolatl	vis__: you should only be doing this (if you must do it at all) in a trigger on entries
2017-01-05 11:40:14	◣	wam (~wam@unaffiliated/wam) has quit (Ping timeout: 248 seconds)
2017-01-05 11:40:21	vis__	Yea unfortunately I'm trying to retroactively compute this value now
2017-01-05 11:40:25	JordiGH	Okay, so I do see a process that is using up a lot of CPU and is "idle in transaction".
2017-01-05 11:40:27	xocolatl	JordiGH: in 9.6 you can just call  pg_blocking_pids(<a blocked pid>)  and it'll give you the whole path
2017-01-05 11:40:35	◥	f3_ (~f3@95-31-96-83.broadband.corbina.ru) has joined #postgresql
2017-01-05 11:40:36	xocolatl	JordiGH: ooh, for how long?
2017-01-05 11:40:41	xocolatl	JordiGH: kill it with fire!
2017-01-05 11:40:46	xocolatl	vis__: ah, then just wait
2017-01-05 11:41:22	vis__	Ok thanks
2017-01-05 11:41:40	JordiGH	Is fire "pg_cancel_backend"?
2017-01-05 11:41:55	xocolatl	JordiGH: pg_terminate_backend
2017-01-05 11:42:14	JordiGH	Is that like SIGTERM vs killdashnine?
2017-01-05 11:42:23	xocolatl	vis__: oh, I hadn't looked at the explain.  slap an index on entries(user_id) before you run the full query
2017-01-05 11:43:03	xocolatl	JordiGH: pg_cancel_backend will kill the query, but there isn't any query running (hence the idle), so you need to kill the entire session
2017-01-05 11:43:17	◥	marlinc (~marlinc@1.0.0.127.13.204.167.185.in-addr.arpa) has joined #postgresql
2017-01-05 11:43:21	JordiGH	Whoa, that seems to have unflushed the whole thing.
2017-01-05 11:43:26	xocolatl	yeah
2017-01-05 11:43:28	JordiGH	And made Django send me an error email.
2017-01-05 11:43:42	vis__	Good catch, simple mistake on my part. Thanks
2017-01-05 11:43:43	JordiGH	How can it be using CPU and be idle in transaction at the same time?
2017-01-05 11:43:45	xocolatl	idle in transaction is horrible and is something you should be monitoring
2017-01-05 11:43:59	xocolatl	it wouldn't be using cpu
2017-01-05 11:44:43	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-05 11:44:49	xocolatl	JordiGH: in 9.6 there is even an idle_in_transaction_session_timeout parameter
2017-01-05 11:45:34	JordiGH	I think it wasn't idle_in_transaction all the time, just when I "sampled" it with pg_stat_activity
2017-01-05 11:45:38	◥	albertus1 (~seb@x55b4b666.dyn.telefonica.de) has joined #postgresql
2017-01-05 11:46:50	◥	nettoweb (~nettoweb@189.30.125.72) has joined #postgresql
2017-01-05 11:46:50	◣	nettoweb (~nettoweb@189.30.125.72) has quit (Client Quit)
2017-01-05 11:47:04	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 11:47:15	◣	GNU\colossus (colo@truschnigg.info) has quit (Remote host closed the connection)
2017-01-05 11:47:18	◣	TheWhip (~thewhip@106.51.141.119) has quit
2017-01-05 11:47:37	TheCougar	what's the least invasive way to control how configure is determining LDFLAGS? Specifically, I'm trying to change the order in which it's including certain directories via -L
2017-01-05 11:48:01	◥	lolek (~lolek@unaffiliated/marcin) has joined #postgresql
2017-01-05 11:48:05	TheCougar	setting a specific order via --with-libraries doesn't seem to help
2017-01-05 11:48:30	◥	GNU\colossus (colo@truschnigg.info) has joined #postgresql
2017-01-05 11:48:58	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 246 seconds)
2017-01-05 11:49:07	◣	lolek (~lolek@unaffiliated/marcin) has left #postgresql
2017-01-05 11:49:11	◣	s2013 (~textual@cpe-72-226-62-58.nyc.res.rr.com) has quit (Quit: My Mac has gone to sleep. ZZZzzz…)
2017-01-05 11:49:47	JordiGH	xocolatl: Turns out someone was trying to generate a big spreadsheet out of our data. Guess they won't be getting their spreadsheet now.
2017-01-05 11:49:58	xocolatl	heh
2017-01-05 11:50:03	retrospectacus	OK so my application is way up here with libraries and ORMs and shit, and basically on certain events, it spawns several threads which update reporting tables *transactionally* and I am getting the "WARNING:  there is already a transaction in progress"... however all the data seems good and nothing is staying locked... is it worth investigating more?
2017-01-05 11:50:15	xocolatl	JordiGH: as in, they were crawling the site or something?
2017-01-05 11:50:43	Zr40	retrospectacus: it just means it tried to start a transaction on a connection that was already in a transaction
2017-01-05 11:50:45	JordiGH	xocolatl: Not quite. They just clicked on a button that roughly says "all the data from all time, plz".
2017-01-05 11:50:55	xocolatl	oh
2017-01-05 11:51:09	retrospectacus	Zr40: right, but it will just wait and go later? Not abort
2017-01-05 11:51:10	Zr40	retrospectacus: it would be a bug if it tries to rollback
2017-01-05 11:51:11	xocolatl	you should remove that button :)
2017-01-05 11:51:26	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 245 seconds)
2017-01-05 11:51:50	JordiGH	Well, it's kind of hard to predict how much data the knob next to the button should allow.
2017-01-05 11:51:59	Zr40	retrospectacus: BEGIN; BEGIN; is the same as a single BEGIN; plus a warning. There's no second transaction queued up for later, if that's what you're asking
2017-01-05 11:52:07	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-05 11:52:18	◥	hongkongphooey (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has joined #postgresql
2017-01-05 11:52:44	◥	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has joined #postgresql
2017-01-05 11:53:26	hongkongphooey	how do i join these two tables? http://pastebin.com/Z34DePRk
2017-01-05 11:53:43	xocolatl	very carefully
2017-01-05 11:53:44	◣	inflames (~syg@47.148.210.171) has quit (Ping timeout: 255 seconds)
2017-01-05 11:53:48	retrospectacus	hmmm I guess it is some kind of bug then as my transactions are being jumbled together by my multiple threads trying to be transactional but also sharing the same connection
2017-01-05 11:53:57	johto	that's completely broken
2017-01-05 11:54:20	mst	retrospectacus: yep. that's never going to work.
2017-01-05 11:54:43	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-05 11:54:54	◥	NeverDie (~NeverDie@pool-74-96-240-190.washdc.fios.verizon.net) has joined #postgresql
2017-01-05 11:55:08	mst	retrospectacus: once a thread starts a transaction, it needs to own the database connection - if other threads can still use it, your program is broken by design and needs re-architecting
2017-01-05 11:55:41	TheCougar	this is why I prefer applications not use transactions at all and anything that needs to be transactional go into a stored function...
2017-01-05 11:55:48	Zr40	well, you _can_ share a connection between threads, but then the original thread needs to stop using it. Wait, just don't share it like that.
2017-01-05 11:56:00	TheCougar	I've seen WAY too many bugs due to apps/ORMs screwing up transactions
2017-01-05 11:56:05	Zr40	TheCougar: surely you mean threads, not transactions?
2017-01-05 11:56:14	TheCougar	no, treansactions
2017-01-05 11:56:29	vis__	\d
2017-01-05 11:56:34	TheCougar	trying to have an app control transactions is fraught with peril
2017-01-05 11:56:41	johto	it doesn't really help. operating concurrently on the same connection is still broken
2017-01-05 11:56:54	◥	faw (~faw@38.102.153.98) has joined #postgresql
2017-01-05 11:56:54	◣	faw (~faw@38.102.153.98) has quit (Changing host)
2017-01-05 11:56:54	◥	faw (~faw@unaffiliated/faw) has joined #postgresql
2017-01-05 11:57:03	◥	euxneks (~euxneks@unaffiliated/euxneks) has joined #postgresql
2017-01-05 11:57:22	◣	Merixer (~Merixer@c83-254-207-197.bredband.comhem.se) has quit (Ping timeout: 252 seconds)
2017-01-05 11:57:36	retrospectacus	well, I've never encountered any error or bad data but I guess it's because the querys have never failed and tried to roll back
2017-01-05 11:58:01	◣	vis__ (~ryan@cpe-45-47-233-53.stny.res.rr.com) has quit (Quit: WeeChat 1.6)
2017-01-05 11:58:10	TheCougar	retrospectacus: yeah, that's the problem with app controlled transactions: you won't know anything's wrong until you get an error somewhere
2017-01-05 11:58:24	◥	marc_v92 (~marc_v92@unaffiliated/marc-v92/x-6202358) has joined #postgresql
2017-01-05 11:58:25	◣	githogori (~githogori@c-73-70-12-67.hsd1.ca.comcast.net) has quit (Ping timeout: 272 seconds)
2017-01-05 11:58:28	TheCougar	you can run fine in prod for months and then suddenly BOOM! missing data (or worse)
2017-01-05 11:58:52	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 240 seconds)
2017-01-05 11:59:19	◣	grayhemp_wh (~grayhemp_@99-46-142-34.lightspeed.sntcca.sbcglobal.net) has quit (Remote host closed the connection)
2017-01-05 12:00:42	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-05 12:00:53	◣	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has quit (Remote host closed the connection)
2017-01-05 12:01:00	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-05 12:03:08	⚡	moloch__ is now known as zly
2017-01-05 12:04:29	◣	explodes (~explodes@166.70.211.32) has quit (Changing host)
2017-01-05 12:04:29	◥	explodes (~explodes@unaffiliated/explodes) has joined #postgresql
2017-01-05 12:05:10	◣	explodes (~explodes@unaffiliated/explodes) has left #postgresql ("WeeChat 1.0.1")
2017-01-05 12:05:19	retrospectacus	thanks team
2017-01-05 12:05:25	◣	sfkeller (~chatzilla@135.209.196.178.dynamic.wline.res.cust.swisscom.ch) has quit (Ping timeout: 246 seconds)
2017-01-05 12:05:27	Zr40	I use a client library that makes it impossible to leave transactions open, but yeah that can be a problem with other libraries and sloppy code
2017-01-05 12:07:17	◥	priidu (~priidu@unaffiliated/priidu) has joined #postgresql
2017-01-05 12:07:53	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 12:08:33	◥	TMM (~hp@fsf/member/pdpc.professional.tmm) has joined #postgresql
2017-01-05 12:11:29	◣	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-05 12:12:22	◥	merzo (~merzo@93-60-92-178.pool.ukrtel.net) has joined #postgresql
2017-01-05 12:12:29	◣	BlueAidan (davidb@c-98-213-102-24.hsd1.in.comcast.net) has quit (Quit: leaving)
2017-01-05 12:12:37	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 248 seconds)
2017-01-05 12:12:42	◥	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has joined #postgresql
2017-01-05 12:14:09	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-05 12:16:03	◣	hongkongphooey (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has quit (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
2017-01-05 12:16:12	◣	NeverDie (~NeverDie@pool-74-96-240-190.washdc.fios.verizon.net) has quit (Quit: http://radiux.io/)
2017-01-05 12:18:05	◥	hongkongphooey (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has joined #postgresql
2017-01-05 12:18:32	◣	bitgins (~tburdick@unaffiliated/submersive) has quit (Ping timeout: 240 seconds)
2017-01-05 12:19:21	◥	gist (~jack@p5B104BD3.dip0.t-ipconnect.de) has joined #postgresql
2017-01-05 12:19:54	◥	k13nox (~k13nox@85-171-205-53.rev.numericable.fr) has joined #postgresql
2017-01-05 12:21:06	◣	hongkongphooey (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has quit (Client Quit)
2017-01-05 12:21:13	◣	prestorium (~davividal@187.95.106.107) has quit (Quit: Leaving)
2017-01-05 12:22:48	◥	Merixer (~Merixer@utopia.arvanode.net) has joined #postgresql
2017-01-05 12:23:30	◥	hongkongphooey (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has joined #postgresql
2017-01-05 12:23:58	◣	ayogi (~yogesh@223.186.113.116) has quit (Ping timeout: 246 seconds)
2017-01-05 12:24:00	◥	woltman4 (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-05 12:24:57	◣	hongkongphooey (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has quit (Client Quit)
2017-01-05 12:25:07	◣	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has quit (Read error: Connection reset by peer)
2017-01-05 12:25:49	◣	dealy663 (~kvirc@rrcs-173-196-52-74.west.biz.rr.com) has quit (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
2017-01-05 12:26:02	◥	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has joined #postgresql
2017-01-05 12:26:13	TheCougar	Zr40: yeah, *theoretically* it's safe for an app to control transactions, but in practice as soon as you have ANY kind of pooling you're asking for big trouble
2017-01-05 12:26:34	TheCougar	s/pooling/persistent connections/
2017-01-05 12:26:54	◥	hongkongphooey (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has joined #postgresql
2017-01-05 12:27:11	Zr40	I disagree, or perhaps our applications are one of the rare ones that don't mess up transactions
2017-01-05 12:27:16	◥	sgflt (~sgflt@p4FDF229B.dip0.t-ipconnect.de) has joined #postgresql
2017-01-05 12:27:17	TheCougar	if you throw the connection away after every front-side request then you'll find out if you have a problem much faster, because you'll end up losing data due to the disconnect rolling back
2017-01-05 12:27:31	◣	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has quit (Ping timeout: 248 seconds)
2017-01-05 12:28:05	TheCougar	Zr40: the problem is it just takes one little bug to prevent your commit from happening
2017-01-05 12:28:05	◣	elein (~chatzilla@sjfw1.adobe.com) has quit (Read error: Connection reset by peer)
2017-01-05 12:28:35	TheCougar	and then you won't know it unless you explicitly check for that when you start using the connection again
2017-01-05 12:28:42	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 12:28:45	◣	hongkongphooey (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has quit (Client Quit)
2017-01-05 12:28:59	TheCougar	if you're super-careful with the connection handling code then you'd be OK
2017-01-05 12:29:19	xocolatl	or if you monitor idle-in-transaction
2017-01-05 12:29:23	◥	aprilliac (~aprilliac@174.58.115.36) has joined #postgresql
2017-01-05 12:29:38	TheCougar	xocolatl: that's very hit or miss
2017-01-05 12:29:56	TheCougar	unless you're not committing on a very regular basis
2017-01-05 12:30:12	◣	Merixer (~Merixer@utopia.arvanode.net) has quit (Ping timeout: 240 seconds)
2017-01-05 12:30:31	Zr40	actually, unless you're not idle after a missed commit
2017-01-05 12:30:32	◣	f3_ (~f3@95-31-96-83.broadband.corbina.ru) has quit (Ping timeout: 240 seconds)
2017-01-05 12:30:45	TheCougar	I don't think there's any safeguard for this other than verifying a connection you just got from the pool is not already in a trans
2017-01-05 12:30:57	TheCougar	anything else is prone to hisenbugs
2017-01-05 12:31:01	Zr40	the pool itself should check that it's not in a transaction
2017-01-05 12:31:01	StuckMojo	there's pgbouncer's transaction pooling
2017-01-05 12:31:07	Zr40	at the time the connection is returned
2017-01-05 12:31:12	◣	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-05 12:31:14	xocolatl	oh, you mean if you get a connection and it's still being actively used
2017-01-05 12:31:15	TheCougar	Zr40: should, yes :)
2017-01-05 12:31:22	Zr40	TheCougar: fine, must
2017-01-05 12:31:31	TheCougar	xocolatl: no, I mean if the previous connection didn't commit
2017-01-05 12:31:37	TheCougar	and just returned the connection to the pool
2017-01-05 12:31:40	xocolatl	then it'll be idle
2017-01-05 12:31:47	StuckMojo	idle in trans
2017-01-05 12:31:50	TheCougar	though as Zr40 said the right way is to check when the connection comes back
2017-01-05 12:32:04	TheCougar	yes, but you'd have to run pg_stat_activity at *that exact time*
2017-01-05 12:32:19	xocolatl	and not in a transaction :)
2017-01-05 12:32:22	StuckMojo	bouncer's transaction pooling works nicely. COMMIT or ROLLBACK is what puts it back into the pool
2017-01-05 12:32:23	TheCougar	if the app is constantly not committing then you might well catch it
2017-01-05 12:32:53	TheCougar	but in my experience that's not usually the case... normally the app does close the transaction correctly; it only periodically doesn't do that
2017-01-05 12:33:23	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 248 seconds)
2017-01-05 12:33:31	◥	gingitsune (~gingitsun@84.237.180.32) has joined #postgresql
2017-01-05 12:33:41	TheCougar	StuckMojo: well, really what bouncer should do is what Zr40 said: verify that the connection is NOT in a transaction when it gets the connection back
2017-01-05 12:33:49	◣	BlackCobra (~BlackCobr@2a02:578:4402:77::777:27) has quit (Ping timeout: 240 seconds)
2017-01-05 12:33:55	TheCougar	(which it maybe already does)
2017-01-05 12:34:22	TheCougar	but if pgpool just premtively does a commit you'll never know that your code is doing something wrong
2017-01-05 12:34:28	StuckMojo	it monitors it as it goes i think. you never actually "give it back", it takes it back
2017-01-05 12:34:44	TheCougar	is there a function to tell me what context a palloc'd address is sitting in?
2017-01-05 12:34:53	◥	Merixer (~Merixer@utopia.arvanode.net) has joined #postgresql
2017-01-05 12:35:04	TheCougar	StuckMojo: depends on what mode you're using
2017-01-05 12:35:07	xocolatl	TheCougar: no :(
2017-01-05 12:35:11	◣	k13nox (~k13nox@85-171-205-53.rev.numericable.fr) has quit (Remote host closed the connection)
2017-01-05 12:35:17	StuckMojo	TheCougar: yes i'm talking about transaction pooling mode
2017-01-05 12:35:44	◥	k13nox (~k13nox@85-171-205-53.rev.numericable.fr) has joined #postgresql
2017-01-05 12:36:00	◣	k13nox (~k13nox@85-171-205-53.rev.numericable.fr) has quit (Remote host closed the connection)
2017-01-05 12:36:18	TheCougar	xocolatl: hrm, guess I can just use the line from pfree
2017-01-05 12:36:20	◥	BlackCobra (~BlackCobr@79.132.250.13) has joined #postgresql
2017-01-05 12:36:37	◥	k13nox (~k13nox@85-171-205-53.rev.numericable.fr) has joined #postgresql
2017-01-05 12:36:37	◣	aprilliac (~aprilliac@174.58.115.36) has quit (Quit: leaving)
2017-01-05 12:36:50	◣	k13nox (~k13nox@85-171-205-53.rev.numericable.fr) has quit (Remote host closed the connection)
2017-01-05 12:37:40	◥	githogori (~githogori@c-73-70-12-67.hsd1.ca.comcast.net) has joined #postgresql
2017-01-05 12:38:02	JordiGH	I want some xocolatl now.
2017-01-05 12:38:19	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 272 seconds)
2017-01-05 12:39:13	◣	Merixer (~Merixer@utopia.arvanode.net) has quit (Max SendQ exceeded)
2017-01-05 12:39:21	◥	Merixer (~Merixer@c83-254-207-197.bredband.comhem.se) has joined #postgresql
2017-01-05 12:39:35	◣	Guest32 (~textual@vic.xmatters.com) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-05 12:40:03	◥	vuoto (~vuoto@n9pl7d.static.netgroup.dk) has joined #postgresql
2017-01-05 12:40:40	◥	aprilliac (~aprilliac@174.58.115.36) has joined #postgresql
2017-01-05 12:41:04	◣	vuoto (~vuoto@n9pl7d.static.netgroup.dk) has quit (Read error: Connection reset by peer)
2017-01-05 12:41:18	◣	aprilliac (~aprilliac@174.58.115.36) has quit (Client Quit)
2017-01-05 12:41:29	◥	vuoto (~vuoto@n9pl7d.static.netgroup.dk) has joined #postgresql
2017-01-05 12:42:30	◥	r_vis_ (~ryan@cpe-45-47-233-53.stny.res.rr.com) has joined #postgresql
2017-01-05 12:43:04	◥	kre10s (~Kre10s__@177.161.109.236) has joined #postgresql
2017-01-05 12:43:31	◥	aprilliac (~aprilliac@174.58.115.36) has joined #postgresql
2017-01-05 12:44:45	◣	vuoto (~vuoto@n9pl7d.static.netgroup.dk) has quit (Remote host closed the connection)
2017-01-05 12:44:57	◣	binjured (~tom@45.55.33.69) has quit (Read error: Connection reset by peer)
2017-01-05 12:45:59	◣	r_vis_ (~ryan@cpe-45-47-233-53.stny.res.rr.com) has quit (Client Quit)
2017-01-05 12:46:00	◣	nivag (~gavin@121.99.202.67) has quit (Read error: Connection reset by peer)
2017-01-05 12:46:20	◥	vuoto (~vuoto@n9pl7d.static.netgroup.dk) has joined #postgresql
2017-01-05 12:46:27	◥	grayhemp_wh (~grayhemp_@12.33.220.130) has joined #postgresql
2017-01-05 12:46:43	◣	igniting (~igniting@unaffiliated/igniting) has quit (Ping timeout: 246 seconds)
2017-01-05 12:47:12	◣	_djbkd (~djbkd@135.84.132.218) has quit (Remote host closed the connection)
2017-01-05 12:47:40	◥	_djbkd (~djbkd@135.84.132.218) has joined #postgresql
2017-01-05 12:48:52	◥	cartan (~cartan@p4FEEAA19.dip0.t-ipconnect.de) has joined #postgresql
2017-01-05 12:49:31	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 12:49:55	◥	hongkongphooey (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has joined #postgresql
2017-01-05 12:50:55	◣	yuri_niyazov (~anonymous@199.87.82.138) has quit (Quit: yuri_niyazov)
2017-01-05 12:51:34	◥	arezki (~arezki@lon92-h02-176-149-62-139.dsl.sta.abo.bbox.fr) has joined #postgresql
2017-01-05 12:51:44	kre10s	I have a table called people. each row identifies a person by name and id. I have other tables that reference people. If I now want to have a person with multiple names... could I add another row in people with the same id but different name? if id is the primary key is that still possible?
2017-01-05 12:52:05	xocolatl	no
2017-01-05 12:52:18	xocolatl	but you could make the primary key be on (id, name)
2017-01-05 12:52:21	◣	_djbkd (~djbkd@135.84.132.218) has quit (Ping timeout: 256 seconds)
2017-01-05 12:52:41	xocolatl	you would have to add name to all other tables that have a FK towards people, though
2017-01-05 12:53:27	◥	cfedde (~cfedde@198.147.22.72) has joined #postgresql
2017-01-05 12:54:04	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 246 seconds)
2017-01-05 12:55:18	aprilliac	i missed you xocolatl
2017-01-05 12:55:25	xocolatl	aww
2017-01-05 12:55:53	aprilliac	<3
2017-01-05 12:56:28	JordiGH	xocolatl: Have you ever made that frothy cocoa unsweetened drink?
2017-01-05 12:56:41	spearthistle	hi, postgres user has access to files, but psql reports permission denied for COPY statement?
2017-01-05 12:56:49	kre10s	I will need to make an alias table
2017-01-05 12:57:04	Zr40	spearthistle: what are you doing exactly?
2017-01-05 12:57:22	MatheusOl	spearthistle: COPY is executed server side
2017-01-05 12:57:27	aprilliac	\copy babe
2017-01-05 12:57:31	aprilliac	that's the one
2017-01-05 12:57:33	MatheusOl	spearthistle: If you want the client to send/get then use \copy
2017-01-05 12:57:40	◥	_djbkd (~djbkd@135.84.132.218) has joined #postgresql
2017-01-05 12:58:01	xocolatl	JordiGH: I have not
2017-01-05 12:58:38	spearthistle	Matheus01: I'm running the server and client on the same machine and was hoping to execute the import using COPY?
2017-01-05 12:58:53	kre10s	If I make another table for the aliases alias.name might be unique but alias.name and people.name might not :/
2017-01-05 12:59:02	MatheusOl	spearthistle: only superuser can use COPY that way
2017-01-05 12:59:07	MatheusOl	spearthistle: what is the error exactly?
2017-01-05 12:59:21	MatheusOl	Just use \copy instead of COPY and be happy... :D
2017-01-05 12:59:26	aprilliac	^
2017-01-05 13:00:18	spearthistle	MatheusOl: if only life was a work-a-round :) psql:import_data.sql:1: ERROR:  could not open file "/home/grower/Development/Archive/Code/Python/convert_librecalc_sheets_to_csv_files/company.csv" for reading: Permission denied
2017-01-05 13:00:49	◥	Flotho66 (~florent@2a01:e35:8ae3:b2f0:aadf:7f06:4372:61c3) has joined #postgresql
2017-01-05 13:00:51	◥	yuri_niyazov (~anonymous@199.87.82.138) has joined #postgresql
2017-01-05 13:01:09	◣	githogori (~githogori@c-73-70-12-67.hsd1.ca.comcast.net) has quit (Ping timeout: 248 seconds)
2017-01-05 13:01:17	spearthistle	MatheusOl: I'm executing as superuser.
2017-01-05 13:01:24	aprilliac	@spearthistle the postgres system user would have to have permissions to read that file
2017-01-05 13:01:25	xocolatl	it's not exactly a workaround
2017-01-05 13:01:35	xocolatl	it's the solution
2017-01-05 13:01:38	spearthistle	MatheusOl: I'm logged in as postgres user.
2017-01-05 13:01:45	◣	marc_v92 (~marc_v92@unaffiliated/marc-v92/x-6202358) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-05 13:01:59	◥	dionysus70 (~Thunderbi@unaffiliated/dionysus69) has joined #postgresql
2017-01-05 13:02:05	ningu	yeah, it's really best to use \copy
2017-01-05 13:02:15	MatheusOl	spearthistle: then postgres user (the OS user) has no permission to the file
2017-01-05 13:02:30	aprilliac	what does `ls -luh /home/grower/Development/Archive/Code/Python/convert_librecalc_sheets_to_csv_files/company.csv` say?
2017-01-05 13:02:35	◣	mclement (mclement@nat/ibm/x-rdjomwzvpkadulws) has quit (Ping timeout: 255 seconds)
2017-01-05 13:02:45	◥	Guest43 (~textual@86.123.182.225) has joined #postgresql
2017-01-05 13:03:03	◣	Merixer (~Merixer@c83-254-207-197.bredband.comhem.se) has quit (Ping timeout: 255 seconds)
2017-01-05 13:03:07	aprilliac	regardless, just put the backslash in front of it. it really really is what you want.
2017-01-05 13:03:19	◥	pedahzur (~jkugler@216-67-98-32.static.acsalaska.net) has joined #postgresql
2017-01-05 13:03:37	◥	marc_v92 (~marc_v92@unaffiliated/marc-v92/x-6202358) has joined #postgresql
2017-01-05 13:03:39	◣	dionysus69 (~Thunderbi@unaffiliated/dionysus69) has quit (Ping timeout: 258 seconds)
2017-01-05 13:03:39	⚡	dionysus70 is now known as dionysus69
2017-01-05 13:03:42	spearthistle	MatheusOl: I've added postgres to growerHome and granted rwx.  I have verified that I can read and write to the files?
2017-01-05 13:04:01	MatheusOl	spearthistle: do what aprilliac said and show us the output
2017-01-05 13:04:19	MatheusOl	spearthistle: it may also be some permission in the directories above, not the file
2017-01-05 13:04:45	spearthistle	aprilliac: -rwxrwx---+ 1 grower growerHome 243 Jan  5 20:57 /home/grower/Development/Archive/Code/Python/convert_librecalc_sheets_to_csv_files/company.csv
2017-01-05 13:04:54	◣	Guest43 (~textual@86.123.182.225) has quit (Changing host)
2017-01-05 13:04:54	◥	Guest43 (~textual@unaffiliated/rufus) has joined #postgresql
2017-01-05 13:04:58	⚡	Guest43 is now known as Rufus
2017-01-05 13:05:16	spearthistle	MatheusO1: I executed the permissions on home.
2017-01-05 13:05:18	xocolatl	just putting this out there... have you tried using \copy instead of COPY?
2017-01-05 13:05:40	◥	xapiens (~xapiens@190.234.106.185) has joined #postgresql
2017-01-05 13:05:51	◣	kre10s (~Kre10s__@177.161.109.236) has left #postgresql
2017-01-05 13:06:40	spearthistle	xocolatl: I'm hoping to understand why COPY doesn't work, even though user postgres has read, write and execute access to the files.
2017-01-05 13:06:46	aprilliac	from the docs: " COPY will be run by the PostgreSQL backend (user "postgres")."
2017-01-05 13:07:02	aprilliac	i'm assuming you have a permissions problem somewhere along the line
2017-01-05 13:07:09	johto	spearthistle; you just pasted proof that it doesn't?
2017-01-05 13:07:37	johto	oh, sorry, you said it has the group
2017-01-05 13:07:56	aprilliac	i mean... humor me and try to `sudo su postgres` and then try to `cat` that file or something
2017-01-05 13:07:57	johto	COPY is a bad idea, but you also need +x on each directory along the way
2017-01-05 13:08:13	MatheusOl	spearthistle: Show us the output of this: ls -lhd /home/{,grower/{,Development/{,Archive/{,Code/{,Python/{,convert_librecalc_sheets_to_csv_files/{,company.csv}}}}}}}
2017-01-05 13:08:15	MatheusOl	In a paste site
2017-01-05 13:08:17	MatheusOl	??paste
2017-01-05 13:08:17	pg_docbot	http://explain.depesz.com/ :: http://fpaste.org
2017-01-05 13:08:17	pg_docbot	http://sqlfiddle.com/ :: http://dpaste.com/
2017-01-05 13:08:18	johto	also I'd wonder whether you have to restart postgres for the new group to take effect
2017-01-05 13:08:44	◥	jabakobob (~textual@cpe90-146-57-147.liwest.at) has joined #postgresql
2017-01-05 13:08:44	ningu	johto: ah yes, good point
2017-01-05 13:08:45	MatheusOl	Yeah, restart is probably necessary...
2017-01-05 13:08:47	◣	Slashman (~Slash@cosium-152-18.fib.nerim.net) has quit (Quit: Leaving)
2017-01-05 13:08:49	◣	jabakobob (~textual@cpe90-146-57-147.liwest.at) has quit (Client Quit)
2017-01-05 13:08:49	xocolatl	I wonder if replacing COPY with \copy would work
2017-01-05 13:08:51	◣	Yiota_ (~textual@2607:fea8:56e0:407:4466:ea11:a30d:6110) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-05 13:08:52	ningu	haha
2017-01-05 13:08:53	◣	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Ping timeout: 255 seconds)
2017-01-05 13:08:54	MatheusOl	Although we do know the actual solution
2017-01-05 13:08:57	aprilliac	group changes take effect immediately, afaik
2017-01-05 13:08:59	◥	jabakobob (~textual@cpe90-146-57-147.liwest.at) has joined #postgresql
2017-01-05 13:09:02	MatheusOl	Good idea xocolatl
2017-01-05 13:09:11	MatheusOl	aprilliac: On some systems you need to use newgrp
2017-01-05 13:09:15	aprilliac	hm!
2017-01-05 13:09:23	johto	xocolatl; 100% agree, but learning these kinds of basic principles is always useful
2017-01-05 13:09:41	◣	marc_v92 (~marc_v92@unaffiliated/marc-v92/x-6202358) has quit (Quit: Probably either lunch time or home time.)
2017-01-05 13:10:07	spearthistle	aprilliac: drwxrwx---+  3 grower growerHome 4.0K Jul 15 22:43 /home/
2017-01-05 13:10:07	spearthistle	drwxrwx---+ 63 grower growerHome 4.0K Jan  5 19:34 /home/grower/
2017-01-05 13:10:07	spearthistle	drwxrwx---+  7 grower growerHome 4.0K Jan  5 11:38 /home/grower/Development/
2017-01-05 13:10:07	spearthistle	drwxrwx---+  4 grower growerHome 4.0K Dec 28 15:18 /home/grower/Development/Archive/
2017-01-05 13:10:07	spearthistle	drwxrwx---+  4 grower growerHome 4.0K Nov 26 15:05 /home/grower/Development/Archive/Code/
2017-01-05 13:10:08	spearthistle	drwxrwx---+  4 grower growerHome 4.0K Jan  5 18:50 /home/grower/Development/Archive/Code/Python/
2017-01-05 13:10:10	spearthistle	drwxrwx---+  2 grower growerHome 4.0K Jan  5 20:46 /home/grower/Development/Archive/Code/Python/convert_librecalc_sheets_to_csv_files/
2017-01-05 13:10:11	Zr40	don't paste in here
2017-01-05 13:10:13	spearthistle	-rwxrwx---+  1 grower growerHome  243 Jan  5 20:46 /home/grower/Development/Archive/Code/Python/convert_librecalc_sheets_to_csv_files/company.csv
2017-01-05 13:10:18	MatheusOl	spearthistle: Really?
2017-01-05 13:10:20	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 13:10:23	MatheusOl	I specifically told you to use a paste site
2017-01-05 13:10:27	⚡	Mode #postgresql [+o xocolatl] by ChanServ
2017-01-05 13:10:29	◣	xocolatl has kicked spearthistle (spearthistle)
2017-01-05 13:10:35	⚡	Mode #postgresql [-o xocolatl] by xocolatl
2017-01-05 13:11:20	aprilliac	ok, so to recap: you are all so patient
2017-01-05 13:11:40	aprilliac	props on that
2017-01-05 13:12:31	mochiyoda_	shouldn't all irc clients have multi-line paste protection these days?
2017-01-05 13:12:47	Zr40	most implement that by sleeping 2 seconds after each line
2017-01-05 13:12:54	xocolatl	they usually at least have auto-rejoin
2017-01-05 13:13:02	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-05 13:13:12	Zr40	which is one of the reasons why one shouldn't
2017-01-05 13:13:17	⚡	Guest55099 is now known as rxc
2017-01-05 13:13:19	◣	dys (~dys@ip-109-44-0-222.web.vodafone.de) has quit (Ping timeout: 256 seconds)
2017-01-05 13:13:21	◣	JordiGH (~jordi@octave/developer/JordiGH) has left #postgresql ("Leaving")
2017-01-05 13:13:25	◣	rxc (~ryan@167.114.120.138) has quit (Changing host)
2017-01-05 13:13:25	◥	rxc (~ryan@unaffiliated/rylinaux) has joined #postgresql
2017-01-05 13:13:51	mochiyoda_	at least throw a "are you sure?" warning, which mine does. ho hum..
2017-01-05 13:14:46	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 258 seconds)
2017-01-05 13:15:12	MatheusOl	Mine does that too mochiyoda_
2017-01-05 13:15:12	◥	spearthistle (~strawberr@213.205.252.33) has joined #postgresql
2017-01-05 13:15:16	xocolatl	spearthistle: welcome back; next time use a paste site.
2017-01-05 13:15:23	spearthistle	hehe
2017-01-05 13:15:35	spearthistle	sorry
2017-01-05 13:15:44	spearthistle	http://dpaste.com/0BPGGD5
2017-01-05 13:15:50	MatheusOl	Anyway, I think the problem is what johto said, spearthistle
2017-01-05 13:15:58	MatheusOl	You need at least to restart postgres
2017-01-05 13:16:05	◣	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-05 13:16:12	spearthistle	okay
2017-01-05 13:17:34	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 272 seconds)
2017-01-05 13:17:40	aprilliac	I'm interested to know the outcome
2017-01-05 13:18:59	◣	Debnet (~Marc@smtp2.sa-cim.fr) has quit (Ping timeout: 256 seconds)
2017-01-05 13:20:10	◥	Insanity_ (uid179350@gateway/web/irccloud.com/x-aspckdrumsngsiqd) has joined #postgresql
2017-01-05 13:20:54	◥	sfkeller (~chatzilla@135.209.196.178.dynamic.wline.res.cust.swisscom.ch) has joined #postgresql
2017-01-05 13:21:24	◣	vuoto (~vuoto@n9pl7d.static.netgroup.dk) has quit (Remote host closed the connection)
2017-01-05 13:22:00	◥	Merixer (~Merixer@utopia.arvanode.net) has joined #postgresql
2017-01-05 13:23:15	◣	_djbkd (~djbkd@135.84.132.218) has quit (Remote host closed the connection)
2017-01-05 13:23:43	◥	_djbkd (~djbkd@135.84.132.218) has joined #postgresql
2017-01-05 13:24:02	◣	_djbkd (~djbkd@135.84.132.218) has quit (Remote host closed the connection)
2017-01-05 13:24:30	◥	_djbkd (~djbkd@135.84.132.218) has joined #postgresql
2017-01-05 13:24:34	MatheusOl	hm... "vacuuming indexes" on pg_stat_progress_vacuum doesn't seem to be much useful, as you don't know the progress in the index
2017-01-05 13:24:43	MatheusOl	Or am I just looking it wrong?
2017-01-05 13:24:55	Zr40	??pg_stat_progress_vacuum
2017-01-05 13:24:55	pg_docbot	Nothing found
2017-01-05 13:25:14	Zr40	https://www.postgresql.org/docs/9.6/static/progress-reporting.html
2017-01-05 13:25:24	mantovani	I'm trying to use a function and the input of this function doesn't accept concatanation
2017-01-05 13:25:26	Zr40	or for the docbot, https://www.postgresql.org/docs/current/static/progress-reporting.html
2017-01-05 13:25:28	MatheusOl	?learn pg_stat_progress_vacuum https://www.postgresql.org/docs/current/static/progress-reporting.html
2017-01-05 13:25:28	pg_docbot	Successfully added URL with 1 keyword
2017-01-05 13:25:45	◣	thommey (thommey@lib.so) has quit (Ping timeout: 246 seconds)
2017-01-05 13:25:45	mantovani	there is funtion that solve this problem ?
2017-01-05 13:25:49	mantovani	I don't want to do sub query
2017-01-05 13:25:49	MatheusOl	mantovani: what is the problem exactly?
2017-01-05 13:25:51	Zr40	mantovani: what exactly did you try?
2017-01-05 13:25:56	mantovani	SELECT standardize_address('us_lex',
2017-01-05 13:25:56	mantovani	               'us_gaz', 'us_rules',(streetaddress1 || ',' || city || ',' || stateprovince || ' ' || zipcode)) FROM customer_dandb
2017-01-05 13:26:12	mantovani	standardize_address doesn't accept "streetaddress1 || ',' || city || ',' || stateprovince || ' ' || zipcode"
2017-01-05 13:26:18	spearthistle	aprilliac: the server restart sorted the issue... thanks all!
2017-01-05 13:26:19	Zr40	what is the error?
2017-01-05 13:26:29	mantovani	ERROR: ERROR: standardize_address() can not be passed an intersection.
2017-01-05 13:26:37	mantovani	I can solve with sub query
2017-01-05 13:26:49	mantovani	but I think that should have a function that take this columns and convert to string
2017-01-05 13:26:53	◣	gleu (~guillaume@LFbn-1-8419-93.w81-254.abo.wanadoo.fr) has quit (Quit: gleu)
2017-01-05 13:27:02	MatheusOl	hm... I don't see that error in PostgreSQL
2017-01-05 13:27:14	MatheusOl	Is that from an extension? PostGIS perhaps?
2017-01-05 13:27:18	◥	nettoweb (~nettoweb@189.72.125.125) has joined #postgresql
2017-01-05 13:27:19	mantovani	yes, PostGIS
2017-01-05 13:27:38	MatheusOl	mantovani: The problem is not concatenation then, but possible its result
2017-01-05 13:27:46	◥	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has joined #postgresql
2017-01-05 13:27:56	mantovani	if I use sub query works....
2017-01-05 13:28:01	mantovani	so is concatenation issue
2017-01-05 13:28:04	◥	metaresolve (~metaresol@2601:14d:8301:5aa0:600a:1fe9:685a:c10b) has joined #postgresql
2017-01-05 13:28:04	MatheusOl	How exactly?
2017-01-05 13:28:08	mantovani	one sec
2017-01-05 13:30:08	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-05 13:30:19	mantovani	MatheusOl: oh you are right
2017-01-05 13:30:21	mantovani	my mistake
2017-01-05 13:30:22	mantovani	sorry
2017-01-05 13:30:26	◣	double-you (~Unnoticed@85.9.20.148) has quit (Quit: double-you)
2017-01-05 13:30:29	◣	Merixer (~Merixer@utopia.arvanode.net) has quit (Ping timeout: 255 seconds)
2017-01-05 13:30:36	◣	Human_G33k (~Human_G33@37.58.163.34) has quit (Ping timeout: 245 seconds)
2017-01-05 13:30:44	mantovani	SELECT standardize_address('us_lex','us_gaz', 'us_rules', 'One Devonshire Place, PH 301, Boston, MA 02109' ) FROM (
2017-01-05 13:30:44	◥	SEQUEL_TECH (~sequel@46.238.55.126) has joined #postgresql
2017-01-05 13:30:47	mantovani	    SELECT streetaddress1 || ',' || city || ',' || stateprovince || ' ' || zipcode as addr FROM customer_dandb ) a
2017-01-05 13:30:50	mantovani	sam issue
2017-01-05 13:30:51	mantovani	same*
2017-01-05 13:30:54	mantovani	ops
2017-01-05 13:30:54	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Client Quit)
2017-01-05 13:31:00	mantovani	SELECT standardize_address('us_lex','us_gaz', 'us_rules', 'One Devonshire Place, PH 301, Boston, MA 02109' ) FROM (
2017-01-05 13:31:00	◣	yieldsfalsehood (~elliot@phl-nat.afilias.info) has quit (Remote host closed the connection)
2017-01-05 13:31:07	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 13:31:16	mantovani	SELECT standardize_address('us_lex','us_gaz', 'us_rules', addr ) FROM ( SELECT streetaddress1 || ',' || city || ',' || stateprovince || ' ' || zipcode as addr FROM customer_dandb ) a
2017-01-05 13:31:20	mantovani	same issue ^
2017-01-05 13:31:26	MatheusOl	Stop trowing that here, use a paste site
2017-01-05 13:31:29	◥	SEQUEL_TECH (~sequel@46.238.55.126) has joined #postgresql
2017-01-05 13:31:30	MatheusOl	It is getting unreadable
2017-01-05 13:31:31	Zr40	you know that's not the same address?
2017-01-05 13:31:42	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Client Quit)
2017-01-05 13:31:44	mantovani	yes
2017-01-05 13:32:24	◥	SEQUEL_TECH (~sequel@46.238.55.126) has joined #postgresql
2017-01-05 13:32:30	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Client Quit)
2017-01-05 13:32:42	mantovani	how would you guys would give the address as parameter to this function ?
2017-01-05 13:33:04	Zr40	I don't know what that function does
2017-01-05 13:33:07	◣	AdamTheExile (~textual@ps-relay-server.tolland.k12.ct.us) has quit (Ping timeout: 248 seconds)
2017-01-05 13:33:11	◥	wam (~wam@unaffiliated/wam) has joined #postgresql
2017-01-05 13:33:12	mantovani	in the documentation they don't call this function from a column, http://postgis.net/docs/Pagc_Normalize_Address.html
2017-01-05 13:33:14	◥	SEQUEL_TECH (~sequel@46.238.55.126) has joined #postgresql
2017-01-05 13:33:16	mantovani	look ^
2017-01-05 13:33:18	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Client Quit)
2017-01-05 13:33:31	MatheusOl	The concatenation is not the issue
2017-01-05 13:33:32	◣	rajivr_ (~rajivr@157.49.139.25) has quit (Ping timeout: 240 seconds)
2017-01-05 13:33:38	◣	nettoweb (~nettoweb@189.72.125.125) has quit (Ping timeout: 255 seconds)
2017-01-05 13:33:39	MatheusOl	Some rule PostGIS uses is
2017-01-05 13:33:46	▷	MatheusOl knows very little about PostGIS
2017-01-05 13:34:00	◥	SEQUEL_TECH (~sequel@46.238.55.126) has joined #postgresql
2017-01-05 13:34:06	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Client Quit)
2017-01-05 13:35:23	mantovani	if I put the address manually works
2017-01-05 13:35:53	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 255 seconds)
2017-01-05 13:36:00	◥	realtime (~realtime@unaffiliated/realtime) has joined #postgresql
2017-01-05 13:36:35	Zr40	your query is selecting from the entire table
2017-01-05 13:36:43	Zr40	are you checking all the addresses?
2017-01-05 13:37:25	◥	k13nox (~k13nox@85-171-205-53.rev.numericable.fr) has joined #postgresql
2017-01-05 13:37:58	◥	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2017-01-05 13:38:01	mantovani	I'll write a script to do it but anyway
2017-01-05 13:38:15	mantovani	if I use this function in the column section anyway I don't have the result that I want
2017-01-05 13:39:04	mantovani	select * from standardize_address('us_lex','us_gaz', 'us_rules', 'address here' )
2017-01-05 13:39:39	◥	nettoweb (~nettoweb@2804:18:1014:c66c:c9b1:4fa2:1718:a391) has joined #postgresql
2017-01-05 13:39:44	◣	nettoweb (~nettoweb@2804:18:1014:c66c:c9b1:4fa2:1718:a391) has quit (Client Quit)
2017-01-05 13:40:59	mantovani	oh is because there is null results
2017-01-05 13:41:03	mantovani	that's why complain about contacanation
2017-01-05 13:41:46	◣	yuri_niyazov (~anonymous@199.87.82.138) has quit (Quit: yuri_niyazov)
2017-01-05 13:41:47	xocolatl	mantovani: use format() instead of concatenation, always
2017-01-05 13:42:47	◣	k13nox (~k13nox@85-171-205-53.rev.numericable.fr) has quit (Ping timeout: 256 seconds)
2017-01-05 13:43:43	mantovani	ok
2017-01-05 13:44:10	◣	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has quit (Ping timeout: 272 seconds)
2017-01-05 13:45:27	◥	gelignite (~gelignite@x4e30f19e.dyn.telefonica.de) has joined #postgresql
2017-01-05 13:45:45	◥	wsieroci (~wsieroci@adkw146.neoplus.adsl.tpnet.pl) has joined #postgresql
2017-01-05 13:46:08	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-05 13:46:20	◥	r_hector (~richard@203-97-170-14.cable.telstraclear.net) has joined #postgresql
2017-01-05 13:47:02	◥	bitgins (~tburdick@unaffiliated/submersive) has joined #postgresql
2017-01-05 13:49:28	◥	hoe`` (~hoe@c-71-237-236-28.hsd1.or.comcast.net) has joined #postgresql
2017-01-05 13:49:45	◥	Guest32 (~textual@vic.xmatters.com) has joined #postgresql
2017-01-05 13:49:56	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2017-01-05 13:50:10	◣	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-05 13:51:19	◣	fordfrog (~fordfrog@gentoo/developer/fordfrog) has quit (Quit: Leaving)
2017-01-05 13:51:35	◣	mizu_no_oto_work (~textual@104.207.209.180) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-05 13:51:55	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 13:52:16	◣	hoe` (~hoe@c-71-237-236-28.hsd1.or.comcast.net) has quit (Ping timeout: 245 seconds)
2017-01-05 13:52:26	◥	mizu_no_oto_work (~textual@104.207.209.180) has joined #postgresql
2017-01-05 13:52:50	mantovani	much better
2017-01-05 13:52:52	mantovani	format('%s, %s, %s %s', streetaddress1,city,stateprovince,zipcode)
2017-01-05 13:52:53	mantovani	thanks
2017-01-05 13:52:56	◥	thommey (thommey@lib.so) has joined #postgresql
2017-01-05 13:53:29	aprilliac	xocolatl: not trying to be contrary, but concat_ws is pretty useful
2017-01-05 13:53:34	mantovani	last question, how I would do something like this:SELECT *  FROM standardize_address(sub query here);
2017-01-05 13:54:00	xocolatl	mantovani: SELECT *  FROM standardize_address((sub query here));
2017-01-05 13:54:05	mantovani	of course that standardize_address doesn't support sub query because it returns more than one result
2017-01-05 13:54:09	mantovani	humm
2017-01-05 13:54:10	mantovani	let me try
2017-01-05 13:54:18	xocolatl	oh right, duh
2017-01-05 13:54:23	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Remote host closed the connection)
2017-01-05 13:54:23	mantovani	yeh hehe
2017-01-05 13:54:47	xocolatl	what does the subquery return?
2017-01-05 13:54:54	mantovani	multiple lines of a string
2017-01-05 13:54:56	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 272 seconds)
2017-01-05 13:55:01	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-05 13:55:16	xocolatl	what's its name?
2017-01-05 13:55:20	bgardner	I have a function that just peeks in pg_catalog.pg_timezone_names to turn 'America/Chicago' into '-06:00:00'.  The function works great but for purposes of speed I'd like to mark it IMMUTABLE; would this be safe to do?
2017-01-05 13:55:27	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2017-01-05 13:55:27	mantovani	xocolatl: name of what ?
2017-01-05 13:55:35	xocolatl	the string it returns
2017-01-05 13:55:39	MatheusOl	bgardner: of course not
2017-01-05 13:55:41	mantovani	addr
2017-01-05 13:55:45	MatheusOl	bgardner: think about DST
2017-01-05 13:55:47	◣	mizu_no_oto_work (~textual@104.207.209.180) has quit (Client Quit)
2017-01-05 13:55:49	◣	filotek (~filotek@206.223.174.62) has quit (Ping timeout: 256 seconds)
2017-01-05 13:56:04	◣	phuff (~Adium@unaffiliated/phuff) has quit (Quit: Leaving.)
2017-01-05 13:56:09	mantovani	xocolatl: this is the sub query: SELECT format('%s, %s, %s %s', streetaddress1,city,stateprovince,zipcode) as addr FROM customer_dandb
2017-01-05 13:56:12	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 240 seconds)
2017-01-05 13:56:14	xocolatl	select sa.* from (subquery) q, standaradize_address(q.addr);
2017-01-05 13:56:23	mantovani	oh simple like that
2017-01-05 13:56:24	bgardner	MatheusOl: I was, hence the question.  Oh well, thanks.  STABLE would be appropriate, then?
2017-01-05 13:56:30	mantovani	I tought I would have issues doing it
2017-01-05 13:56:59	MatheusOl	bgardner: yes
2017-01-05 13:57:09	bgardner	MatheusOl: Okay, thank you.
2017-01-05 13:57:30	◥	Coldblackice_ (~anonz@unaffiliated/coldblackice) has joined #postgresql
2017-01-05 13:57:40	MatheusOl	bgardner: Isn't that faster than use pg_timezone_names? (now() AT TIME ZONE 'America/Chicago') - (now() AT TIME ZONE 'Etc/UTC')
2017-01-05 13:57:45	xocolatl	bgardner: if your function touches any tables or any data outside of the function itself and its arguments, the best it can be is stable
2017-01-05 13:57:46	◣	Coldblackice (~anonz@unaffiliated/coldblackice) has quit (Ping timeout: 246 seconds)
2017-01-05 13:58:00	◥	phuff (~Adium@unaffiliated/phuff) has joined #postgresql
2017-01-05 13:58:10	◣	banditron (~banditron@kohana/developer/banditron) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-05 13:59:01	bgardner	MatheusOl: I'm porting off Oracle and the existing codebase uses tz_offset(), I just created a replacement to provide the same functionality.
2017-01-05 13:59:12	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Ping timeout: 240 seconds)
2017-01-05 13:59:37	MatheusOl	bgardner: I see
2017-01-05 13:59:46	bgardner	xocolatl: Yeah, I was trying to cheat - the query planner is having trouble with my jumbo queries and this was a hot spot I could work on.
2017-01-05 13:59:48	MatheusOl	bgardner: I think my way will be a bit faster than querying pg_timezone_names
2017-01-05 13:59:53	◥	_ChauffeR (~simone@unaffiliated/chauffer) has joined #postgresql
2017-01-05 14:00:05	bgardner	MatheusOl: I'll see if I can leverage it, thanks for the suggestion
2017-01-05 14:00:12	◣	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has quit (Ping timeout: 240 seconds)
2017-01-05 14:00:22	xocolatl	bgardner: don't cheat, you'll regret it (even more than IRL).  the best would be to show us your query and its plan
2017-01-05 14:00:40	◥	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has joined #postgresql
2017-01-05 14:01:03	◣	Levure (~quassel@91.181.239.93) has quit (Read error: Connection reset by peer)
2017-01-05 14:01:03	MatheusOl	bgardner: But test it, I have not verified
2017-01-05 14:01:05	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Ping timeout: 255 seconds)
2017-01-05 14:01:06	bgardner	xocolatl: When I said 'jumbo' I wasn't kidding.  Query is over 1000 lines and right now the explain analyze does not finish (2 hours in so far).
2017-01-05 14:01:35	Zr40	try without analyze
2017-01-05 14:01:51	bgardner	Zr40: Without analyze says basically "looks great!  Go for it!"
2017-01-05 14:01:53	Zr40	EXPLAIN ANALYZE actually executes the query, EXPLAIN does not
2017-01-05 14:02:06	MatheusOl	bgardner: Not sure if helps, but there is orafce extension, that provides many Oracle compatible functions
2017-01-05 14:02:07	Zr40	bgardner: eh, how?
2017-01-05 14:02:22	xocolatl	never use EXPLAIN ANALYZE, always use EXPLAIN (ANALYZE, BUFFERS)
2017-01-05 14:02:28	▷	xocolatl lobbies for that to be the default
2017-01-05 14:02:50	◥	Merixer (~Merixer@utopia.arvanode.net) has joined #postgresql
2017-01-05 14:02:52	bgardner	Zr40: I'm being glib, it shows a decent and pretty sensible plan.  It's a work in progress, I'll report back.
2017-01-05 14:02:53	MatheusOl	+ VERBOSE
2017-01-05 14:03:08	Zr40	MatheusOl: + FORMAT YAML
2017-01-05 14:03:13	xocolatl	yuck
2017-01-05 14:03:25	Zr40	xocolatl: it's surprisingly readable in $PAGER
2017-01-05 14:03:26	MatheusOl	/kick Zr40
2017-01-05 14:03:38	johto	huhuhu
2017-01-05 14:03:53	xocolatl	I only use non-plain versions when I want to machine parse them
2017-01-05 14:03:55	bgardner	xocolatl, MatheusOl, Zr40 : I always do all those ... except the FORMAT YAML.  :P
2017-01-05 14:03:56	mauritslamers	question: I need to set a certain setting on the plv8 extension (the start_proc to be exact), but tbh I find it a bit strange to have to set this globally in the postgresql.conf file. Is there any way to set it on the database alone without having to touch postgresql.conf?
2017-01-05 14:03:58	xocolatl	(which I've never actually done)
2017-01-05 14:04:23	◣	myusuf3 (~myusuf3@CPE60e327dca2cf-CM788df740f4d0.cpe.net.cable.rogers.com) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-05 14:04:27	Zr40	for machine parsing I use FORMAT JSON
2017-01-05 14:04:36	◥	s2013 (~textual@cpe-72-226-62-58.nyc.res.rr.com) has joined #postgresql
2017-01-05 14:04:38	xocolatl	mauritslamers: can't you ALTER DATABASE db SET start_proc = ...  ?
2017-01-05 14:04:44	◥	dys (~dys@ip-109-44-0-222.web.vodafone.de) has joined #postgresql
2017-01-05 14:04:55	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-05 14:05:27	mauritslamers	xocolatl: very possible, that is why I asked, I couldn't imagine touching postgresql.conf would be the right way :)
2017-01-05 14:05:31	xocolatl	Zr40: so where's that visualizer you've been promising us?  (forgot its name)
2017-01-05 14:05:35	◣	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has quit (Ping timeout: 255 seconds)
2017-01-05 14:05:41	◥	solaries (~solaries@static.37.215.9.176.clients.your-server.de) has joined #postgresql
2017-01-05 14:06:04	◥	NeverDie (~NeverDie@pool-74-96-240-190.washdc.fios.verizon.net) has joined #postgresql
2017-01-05 14:06:06	Zr40	xocolatl: ironhide, and thanks for reminding me!
2017-01-05 14:06:07	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Remote host closed the connection)
2017-01-05 14:06:23	◥	githogori (~githogori@c-73-70-12-67.hsd1.ca.comcast.net) has joined #postgresql
2017-01-05 14:06:48	◥	skyx (~skyx__@internet-188-198-147-219.narocnik.mobitel.si) has joined #postgresql
2017-01-05 14:06:59	◥	banditron (~banditron@kohana/developer/banditron) has joined #postgresql
2017-01-05 14:07:08	Zr40	xocolatl: http://dev.zr40.nl/ironhide/
2017-01-05 14:07:09	◣	Merixer (~Merixer@utopia.arvanode.net) has quit (Ping timeout: 240 seconds)
2017-01-05 14:07:23	mauritslamers	xocolatl: and indeed that works, thanks a lot!
2017-01-05 14:07:43	◣	solaries (~solaries@static.37.215.9.176.clients.your-server.de) has left #postgresql
2017-01-05 14:08:53	◣	jmelesky (~jmelesky@67.139.70.154) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-05 14:10:59	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-05 14:12:41	◣	gingitsune (~gingitsun@84.237.180.32) has quit (Ping timeout: 245 seconds)
2017-01-05 14:12:46	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 14:14:25	◥	HarrisonF (~Harrison@199.201.64.129) has joined #postgresql
2017-01-05 14:14:25	◣	HarrisonF (~Harrison@199.201.64.129) has quit (Changing host)
2017-01-05 14:14:25	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-05 14:15:01	◣	jim (~jim@about/linux/staff/jim) has quit (Ping timeout: 264 seconds)
2017-01-05 14:15:12	Berge	Zr40: oh, nice
2017-01-05 14:15:22	◥	G_SabinoMullane (~greg@central.endpoint.com) has joined #postgresql
2017-01-05 14:15:35	bgardner	MatheusOl: Switching from VOLATILE to STABLE made a big difference.  I have to go but I'll investigate AT TIME ZONE tomorrow.  Thanks again!
2017-01-05 14:17:01	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 246 seconds)
2017-01-05 14:17:18	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Client Quit)
2017-01-05 14:18:59	◥	gheegh (~textual@pool-173-79-73-194.washdc.fios.verizon.net) has joined #postgresql
2017-01-05 14:20:43	◣	ghormoon (~ghormoon@ghorland.net) has quit (Ping timeout: 258 seconds)
2017-01-05 14:24:27	◣	Bradipo (~amb@22.16-28.45.70.166.in-addr.arpa) has quit (Remote host closed the connection)
2017-01-05 14:25:20	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 272 seconds)
2017-01-05 14:26:05	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-05 14:26:20	◥	Merixer (~Merixer@c83-254-207-197.bredband.comhem.se) has joined #postgresql
2017-01-05 14:27:23	◣	s2013 (~textual@cpe-72-226-62-58.nyc.res.rr.com) has quit (Read error: Connection reset by peer)
2017-01-05 14:28:09	◣	bitgins (~tburdick@unaffiliated/submersive) has quit (Read error: Connection reset by peer)
2017-01-05 14:29:49	◥	elein (~chatzilla@192.150.10.206) has joined #postgresql
2017-01-05 14:30:19	aprilliac	Zr40: heyy, that's a nice tool
2017-01-05 14:30:31	◣	Logico (~Logico@201-42-192-83.dsl.telesp.net.br) has quit (Quit: Saindo)
2017-01-05 14:30:42	◣	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-05 14:31:12	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Remote host closed the connection)
2017-01-05 14:31:30	elein	faq? does there exist a version of pg_stat_activity that gets the whole query?  Perhaps in someone's toolbox?
2017-01-05 14:32:09	Zr40	no, statements longer than 1024 bytes (iirc) are truncated
2017-01-05 14:32:55	◥	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has joined #postgresql
2017-01-05 14:32:59	◣	woltman4 (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has quit (Read error: Connection reset by peer)
2017-01-05 14:33:33	◥	s2013 (~textual@cpe-72-226-62-58.nyc.res.rr.com) has joined #postgresql
2017-01-05 14:33:34	elein	Zr40: I suspect it could be written in C.  But I hoped someone else had already written it.
2017-01-05 14:33:35	◥	filiprem (~filip@188.146.87.247.nat.umts.dynamic.t-mobile.pl) has joined #postgresql
2017-01-05 14:33:38	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 14:33:55	◣	spearthistle (~strawberr@213.205.252.33) has quit (Ping timeout: 248 seconds)
2017-01-05 14:34:22	johto	you could increase the whatever size from 1024
2017-01-05 14:35:18	◥	pushp0p (~pushp0p@fm.synthte.ch) has joined #postgresql
2017-01-05 14:35:28	⚡	pushp0p is now known as Guest46488
2017-01-05 14:35:43	◣	Guest46488 (~pushp0p@fm.synthte.ch) has left #postgresql
2017-01-05 14:36:09	StuckMojo	there's a setting
2017-01-05 14:36:29	StuckMojo	#track_activity_query_size = 1024   # (change requires restart)
2017-01-05 14:36:33	StuckMojo	elein: ^
2017-01-05 14:36:34	xocolatl	I love how no one knows what the setting is called :)
2017-01-05 14:36:47	◥	pushp0p_ (~pushp0p@fm.synthte.ch) has joined #postgresql
2017-01-05 14:36:47	◥	HarrisonF (~Harrison@199.201.65.130) has joined #postgresql
2017-01-05 14:36:47	◣	HarrisonF (~Harrison@199.201.65.130) has quit (Changing host)
2017-01-05 14:36:47	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-05 14:37:11	pushp0p_	hey we are running a query in production like: select * from foo where id in values('foobar'...); with thousands of entries in the values
2017-01-05 14:37:27	pushp0p_	i was under the impression this would be fast but it's apparently slow
2017-01-05 14:37:41	xocolatl	pushp0p_: use an array instead
2017-01-05 14:37:49	pushp0p_	additionally i was interested in whether anyone knows if postgres would try to presort the values blob to make it faster
2017-01-05 14:37:51	◥	ghormoon (~ghormoon@ghorland.net) has joined #postgresql
2017-01-05 14:38:00	◣	gelignite (~gelignite@x4e30f19e.dyn.telefonica.de) has quit (Quit: http://bit.ly/1kso8Ta)
2017-01-05 14:38:06	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 245 seconds)
2017-01-05 14:38:08	xocolatl	...sort the values to blob...
2017-01-05 14:38:09	pushp0p_	https://www.datadoghq.com/blog/100x-faster-postgres-performance-by-changing-1-line/ xocolatl this article led me to believe that was slower
2017-01-05 14:38:14	◣	s2013 (~textual@cpe-72-226-62-58.nyc.res.rr.com) has quit (Client Quit)
2017-01-05 14:38:29	pushp0p_	xocolatl: like does it try to sort the list of ids in values so as to make more efficient use of index cache coherence?
2017-01-05 14:38:55	◥	k13nox (~k13nox@85-171-205-53.rev.numericable.fr) has joined #postgresql
2017-01-05 14:38:55	elein	yea! StuckMojo
2017-01-05 14:38:57	Zr40	check the query plan (prefix EXPLAIN) to see what it actually does in both cases
2017-01-05 14:39:02	hongkongphooey	can tables have foreign keys? how do i make a one-to-many relationship between tables?
2017-01-05 14:39:57	StuckMojo	??foreign
2017-01-05 14:39:57	pg_docbot	http://www.postgresql.org/docs/current/static/ddl-constraints.html#DDL-CONSTRAINTS-FK :: http://wiki.postgresql.org/wiki/SQL/MED
2017-01-05 14:39:57	pg_docbot	http://www.postgresql.org/docs/devel/static/sql-importforeignschema.html :: http://www.postgresql.org/docs/current/static/sql-alterforeigntable.html
2017-01-05 14:40:11	◣	fguillot (~fguillot@96.127.216.138) has quit (Quit: My MacBook Air has gone to sleep. ZZZzzz…)
2017-01-05 14:40:13	StuckMojo	hongkongphooey: 1st link
2017-01-05 14:40:22	StuckMojo	yes we've supported FKs for decades
2017-01-05 14:40:39	pushp0p_	Zr40: we were looking at it
2017-01-05 14:40:41	◣	zivester (~zivester@38.104.66.138) has quit (Ping timeout: 255 seconds)
2017-01-05 14:40:58	metaresolve	how does postgresql deal with nulls? like, if I'm aggregating to find out which fields have nulls in them and
2017-01-05 14:41:01	pushp0p_	there was a bitmap and is where the query plan was slowest
2017-01-05 14:41:22	metaresolve	-and
2017-01-05 14:41:31	◣	skyx (~skyx__@internet-188-198-147-219.narocnik.mobitel.si) has quit (Ping timeout: 246 seconds)
2017-01-05 14:41:54	xocolatl	aggregating how?  aggregates don't consider nulls (except one or two exceptions)
2017-01-05 14:42:16	Zr40	pushp0p_: could you show them?
2017-01-05 14:42:49	metaresolve	xocolatl: The case would be I got a really crappy file from a datasource and i need to examine it to clean it up.
2017-01-05 14:43:00	pushp0p_	Zr40: the query plan or query?
2017-01-05 14:43:08	metaresolve	so i want to be checking unique values and counting on ids
2017-01-05 14:43:08	xocolatl	both
2017-01-05 14:43:19	hongkongphooey	StuckMojo: sorry i mean i want a table to have a foreign key that referneces an entire other table
2017-01-05 14:43:21	metaresolve	i 95% of the time will have a  unique id.
2017-01-05 14:43:31	◣	k13nox (~k13nox@85-171-205-53.rev.numericable.fr) has quit (Ping timeout: 245 seconds)
2017-01-05 14:43:32	StuckMojo	pushp0p_: note that in that blog post they use ANY ( VALUES (...), (...), ... ) not IN ( VALUES ... )
2017-01-05 14:43:52	StuckMojo	hongkongphooey: eh?
2017-01-05 14:43:55	metaresolve	was the both at me? I'm not sure what that means.
2017-01-05 14:44:30	pushp0p_	StuckMojo: yeah i saw that
2017-01-05 14:44:53	pushp0p_	if anyone knows why 'in values' would be slow let me know
2017-01-05 14:44:56	pushp0p_	we're doing it on an indexed column
2017-01-05 14:45:04	pushp0p_	its bson
2017-01-05 14:45:05	StuckMojo	pushp0p_: use EXPLAIN to see what it's doing
2017-01-05 14:45:06	Zr40	pushp0p_: the plans
2017-01-05 14:45:08	pushp0p_	which is why i was thining it might be slow
2017-01-05 14:45:13	StuckMojo	also note this was on 9.0, which is quite old now
2017-01-05 14:45:27	pushp0p_	because postgres might have trouble sorting bson rapidly for this kind of purpose
2017-01-05 14:45:34	hongkongphooey	StuckMojo: what happens if i have two one-to-many tables and they themselves are the 'many' part of a parent one-to-many relationship?
2017-01-05 14:45:42	Zr40	pushp0p_: bson? Do you mean jsonb?
2017-01-05 14:45:54	pushp0p_	Zr40: no bson is some hairbrained UUID-like nonsense from mongo
2017-01-05 14:46:09	pushp0p_	bson id i should say
2017-01-05 14:46:22	pushp0p_	bson is binary json or something to that effect
2017-01-05 14:46:39	StuckMojo	jsonb you mean
2017-01-05 14:47:12	StuckMojo	pushp0p_: paste your explain plan to...
2017-01-05 14:47:14	Zr40	mongo does have something called bson
2017-01-05 14:47:14	StuckMojo	??explain
2017-01-05 14:47:14	pg_docbot	http://www.postgresql.org/docs/current/static/sql-explain.html :: http://explain.depesz.com/
2017-01-05 14:47:14	pg_docbot	http://wiki.postgresql.org/wiki/Using_EXPLAIN :: http://wiki.postgresql.org/images/4/45/Explaining_EXPLAIN.pdf
2017-01-05 14:47:14	pg_docbot	http://github.com/petere/veung :: http://www.depesz.com/tag/unexplainable/
2017-01-05 14:47:14	pg_docbot	http://www.postgresql.org/docs/current/static/using-explain.html :: http://tatiyants.com/pev
2017-01-05 14:47:20	StuckMojo	http://explain.depesz.com/
2017-01-05 14:47:22	StuckMojo	there ^
2017-01-05 14:47:28	◣	priidu (~priidu@unaffiliated/priidu) has quit (Ping timeout: 246 seconds)
2017-01-05 14:48:00	◥	Almindor (~ales@d172-219-226-212.abhsia.telus.net) has joined #postgresql
2017-01-05 14:48:56	◥	eeriegeek (~eeriegeek@73.31.123.0) has joined #postgresql
2017-01-05 14:50:29	◣	dwsr (uid185230@gateway/web/irccloud.com/x-mmjkpzqedyryywts) has quit (Quit: Connection closed for inactivity)
2017-01-05 14:51:59	mantovani	postgres is so wonderful
2017-01-05 14:52:19	mantovani	xocolatl: I replace the sub query with WITH is more clean
2017-01-05 14:52:34	◣	ash_workz (~chatzilla@50-243-5-153-static.hfc.comcastbusiness.net) has quit (Ping timeout: 272 seconds)
2017-01-05 14:52:37	xocolatl	not necessarily
2017-01-05 14:52:47	mantovani	in my context
2017-01-05 14:54:22	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 14:55:19	◣	pglife_bot (~pglife@momjian.us) has quit (Remote host closed the connection)
2017-01-05 14:55:52	◥	chrisw (~chrisw@cpc95902-rdng25-2-0-cust181.15-3.cable.virginm.net) has joined #postgresql
2017-01-05 14:56:05	◥	negaduck (~negaduck@176.193.137.38) has joined #postgresql
2017-01-05 14:57:01	◣	FastJack (fastjack@b2b-78-94-22-14.unitymedia.biz) has quit (Ping timeout: 264 seconds)
2017-01-05 14:57:23	◣	negaduck_ (~negaduck@176.193.140.8) has quit (Ping timeout: 248 seconds)
2017-01-05 14:58:10	◥	totus1 (~totus@cpe-24-160-136-100.satx.res.rr.com) has joined #postgresql
2017-01-05 14:58:32	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 240 seconds)
2017-01-05 15:00:16	◣	NCS_One (~NCS_One@176.78.178.106) has quit (Quit: Lost terminal)
2017-01-05 15:00:42	◥	pglife_bot (~pglife@momjian.us) has joined #postgresql
2017-01-05 15:00:49	◣	skylar (~skylar2@gsits-a.gs.washington.edu) has quit (Quit: Leaving.)
2017-01-05 15:00:56	◣	autechy (~autechy@134.249.168.41) has quit (Quit: WeeChat 1.6)
2017-01-05 15:01:50	◣	totus (~totus@2605:6000:66c0:8800:6882:526a:a81b:c7dc) has quit (Ping timeout: 255 seconds)
2017-01-05 15:02:26	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-05 15:02:32	metaresolve	I have an alias'ing question. This is my friend's code to teach me alias'ing a column: select jan.first_name, jan.last_name, feb.first_name, feb.last_name
2017-01-05 15:02:32	metaresolve	from seniority_update_20150101 jan
2017-01-05 15:02:32	metaresolve	join seniority_update_20150201 feb on jan.emp_id = feb.emp_id
2017-01-05 15:03:20	metaresolve	she said postgres is smart enough to figure out that jan.first_name is from the seniority_update_20150101 jan table, as in she doesn't have to type FROM the table more than the times she does the from and join
2017-01-05 15:03:38	◣	alakx (~alak@gw.agri.ee) has quit (Ping timeout: 258 seconds)
2017-01-05 15:04:16	◥	rj_ehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has joined #postgresql
2017-01-05 15:06:05	◥	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2017-01-05 15:07:27	◣	al-damiri (uid142631@gateway/web/irccloud.com/x-bvsgwigivlrejdmm) has quit (Quit: Connection closed for inactivity)
2017-01-05 15:07:33	◣	rodneyehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has quit (Ping timeout: 248 seconds)
2017-01-05 15:07:35	◥	hashpuppy (uid43164@gateway/web/irccloud.com/x-tpbbumymjaksfwry) has joined #postgresql
2017-01-05 15:07:45	johto	metaresolve; there's nothing smart there, that's just how aliases work
2017-01-05 15:08:53	metaresolve	johto: how does it know that the seniority_update_20150101 jan table is the jan in jan.first_name ?
2017-01-05 15:09:06	◣	sjoos (~jlammrs@a111225.upc-a.chello.nl) has quit (Quit: Leaving)
2017-01-05 15:09:07	◣	rj_ehrhardt (~rodneyehr@rrcs-67-52-214-50.west.biz.rr.com) has quit (Ping timeout: 248 seconds)
2017-01-05 15:09:29	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-05 15:09:41	◥	inflames (~syg@47.148.210.171) has joined #postgresql
2017-01-05 15:09:49	◣	weckstrom (~weckstrom@46.166.190.163) has quit (Remote host closed the connection)
2017-01-05 15:09:53	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2017-01-05 15:09:57	johto	by looking at what's called "jan" in the FROM clause
2017-01-05 15:10:30	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-05 15:10:45	◥	weckstrom (~weckstrom@46.166.137.203) has joined #postgresql
2017-01-05 15:10:51	StuckMojo	FROM foo AS bar means that foo.col can now be bar.col
2017-01-05 15:11:34	metaresolve	from SENIORITY_update_20150101 jan
2017-01-05 15:11:44	StuckMojo	in fact, once you alias it, you have to use the alias IIRC
2017-01-05 15:11:45	metaresolve	why doesn't it say "as" ?
2017-01-05 15:11:53	johto	AS is optional
2017-01-05 15:11:57	StuckMojo	because AS is optional noise
2017-01-05 15:12:03	Berge	Noise!
2017-01-05 15:12:03	metaresolve	ok, thank you
2017-01-05 15:12:14	StuckMojo	like INNER in INNER JOIN or OUTER in LEFT OUTER JOIN
2017-01-05 15:12:20	metaresolve	i talked to a guy today in my field and finaly got someone to tell me wtf i need sql for
2017-01-05 15:12:34	StuckMojo	asking a database questions
2017-01-05 15:12:36	metaresolve	he said it's not so much coding as understanding data structure and being able to extract data from tables
2017-01-05 15:12:53	◣	cyphase (~cyphase@unaffiliated/cyphase) has quit (Ping timeout: 256 seconds)
2017-01-05 15:12:54	metaresolve	yeah, i just need sql to write code to query on tables
2017-01-05 15:12:54	◥	Xgc (~Xgc@p-68-237-136-222.dsl1.rtr.chat.fpma.frpt.net) has joined #postgresql
2017-01-05 15:13:03	metaresolve	but i'm working with psql. it's going slowly.
2017-01-05 15:13:21	metaresolve	question: is this dumb: CREATE table with everything as varchar and then alter columns?
2017-01-05 15:13:43	◣	wam (~wam@unaffiliated/wam) has quit (Ping timeout: 246 seconds)
2017-01-05 15:13:45	johto	depends on why you're doing it, but chances are it's dumb, yeah
2017-01-05 15:13:56	StuckMojo	sql is different in that it is declarative rather than imperative
2017-01-05 15:14:06	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 272 seconds)
2017-01-05 15:14:46	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 246 seconds)
2017-01-05 15:14:47	◣	galgamach (~galg@46-41-112.adsl.cyta.gr) has quit (Quit: left 2 space)
2017-01-05 15:14:54	StuckMojo	https://tylermcginnis.com/imperative-vs-declarative-programming/
2017-01-05 15:15:09	◣	jaegerca (~jaegerca@2001-48F8-26-1E84-B57A-AFE1-AF66-5459-dynamic.midco.net) has quit (Remote host closed the connection)
2017-01-05 15:15:14	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 15:15:45	metaresolve	ok, i have a date in a stupid format in a .csv: "Jan 02 2015"
2017-01-05 15:15:54	metaresolve	should i clean that up in excel before bringing it into psql?
2017-01-05 15:16:09	StuckMojo	you can convert it in postgres
2017-01-05 15:16:09	metaresolve	but i'm thinking i can also do the table normalizing and formatting in SQL to learn the coding.
2017-01-05 15:16:17	StuckMojo	??date_format
2017-01-05 15:16:17	metaresolve	postgres will recognize that as a date?
2017-01-05 15:16:17	pg_docbot	Nothing found
2017-01-05 15:16:18	StuckMojo	hmm
2017-01-05 15:16:21	Berge	Yes.
2017-01-05 15:16:22	Berge	I _think_.
2017-01-05 15:16:23	StuckMojo	it can, yes
2017-01-05 15:16:25	Berge	It will, yes.
2017-01-05 15:16:43	Berge	'Jan 02 2015'::date is 2015-01-02
2017-01-05 15:17:11	metaresolve	berge: is that the conversion?
2017-01-05 15:17:17	Berge	metaresolve: That's a cast
2017-01-05 15:17:19	StuckMojo	??datestyle
2017-01-05 15:17:19	pg_docbot	http://www.postgresql.org/docs/current/static/datatype-datetime.html#DATATYPE-DATETIME-OUTPUT2-TABLE :: http://www.postgresql.org/docs/current/static/runtime-config-client.html#GUC-DATESTYLE
2017-01-05 15:17:29	Berge	It's a postgres-specific extension, but the syntax is much nicer than ANSI SQL CAST()
2017-01-05 15:17:45	◥	_Tenchi_ (~phil@207-255-68-080-dhcp.aoo.pa.atlanticbb.net) has joined #postgresql
2017-01-05 15:18:40	Berge	date is a datatype, so ::date casts to date.
2017-01-05 15:18:52	StuckMojo	metaresolve: https://paste.fedoraproject.org/520508/58324148/
2017-01-05 15:19:32	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 240 seconds)
2017-01-05 15:19:33	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-05 15:19:50	StuckMojo	whether it works properly is dependant on your datestyle setting though
2017-01-05 15:19:53	◥	cyphase (~cyphase@unaffiliated/cyphase) has joined #postgresql
2017-01-05 15:20:04	StuckMojo	mine is the default which is:  ISO, MDY
2017-01-05 15:20:13	metaresolve	ok, can i walk through this code with you?
2017-01-05 15:20:18	StuckMojo	s/properly/transparently/
2017-01-05 15:20:39	metaresolve	CREATE TABLE test is naming the table test. is the (d DATE) a column?
2017-01-05 15:20:51	◣	doppleherz (uid178172@gateway/web/irccloud.com/x-dsvjpikzgrwiafqz) has quit (Quit: Connection closed for inactivity)
2017-01-05 15:21:15	metaresolve	that's a dumb question. it shows me that.
2017-01-05 15:21:22	◥	Yiota_ (~textual@2607:fea8:56e0:407:f8eb:7a4d:ce65:9b8e) has joined #postgresql
2017-01-05 15:21:25	metaresolve	swhat is the ROLLBACK? and why did you enter 0 and 1 as values?
2017-01-05 15:21:36	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:40dc:a7c0:505c:4abd) has quit (Remote host closed the connection)
2017-01-05 15:21:48	StuckMojo	i didn't enter 0 an 1
2017-01-05 15:21:54	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:40dc:a7c0:505c:4abd) has joined #postgresql
2017-01-05 15:22:04	metaresolve	sorry, line 4 says INSERT 0 1
2017-01-05 15:22:04	StuckMojo	rollback undoes the transaction that i automagically started
2017-01-05 15:22:17	StuckMojo	yes, that's the output from the INSERT ... ; statement
2017-01-05 15:22:31	metaresolve	oh ok
2017-01-05 15:22:53	metaresolve	right now i'm exporting some client data that is joined on invoice number from two data sources
2017-01-05 15:23:00	metaresolve	and i will play with joins and things
2017-01-05 15:23:01	StuckMojo	the first number used to be the OID of the row, the 2nd is the number of rows inserted
2017-01-05 15:23:10	◣	Maxel_ (~Maxel@50-241-60-122-static.hfc.comcastbusiness.net) has quit (Ping timeout: 258 seconds)
2017-01-05 15:23:21	CalimeroTeknik	how can I make an array of NULLs that's the same size as another array I have?
2017-01-05 15:23:58	◥	dijit (~dijit@znc.darkscience.net) has joined #postgresql
2017-01-05 15:24:14	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 272 seconds)
2017-01-05 15:25:11	johto	array_fill(NULL::type, ARRAY[cardinality(otherarray)])  ?
2017-01-05 15:25:24	xocolatl	or just set the last element to null
2017-01-05 15:25:52	◥	ningu (~unamuno@c-24-6-1-233.hsd1.ca.comcast.net) has joined #postgresql
2017-01-05 15:26:21	◥	aristipp_ (~aristippo@2601:646:c003:3d5f:4d87:73a3:83c2:bcc5) has joined #postgresql
2017-01-05 15:26:35	◣	aristippos (~aristippo@2601:646:c003:3d5f:b025:fbbc:4d87:f0b1) has quit (Ping timeout: 255 seconds)
2017-01-05 15:26:50	metaresolve	guys: When I'm creating a table, what should I do zip codes as? text? that's how I always handed it in other things
2017-01-05 15:27:03	xocolatl	yes, text
2017-01-05 15:27:07	metaresolve	also: I have phone numbers in (240) 615-5555 format. should i strip that and put in as a number or something?
2017-01-05 15:27:16	xocolatl	no, text
2017-01-05 15:28:01	mochiyoda_	metaresolve: think about what leading zeros would do to a zip code as a number
2017-01-05 15:28:10	metaresolve	moch: yeah, i come from data. i was just making sure.
2017-01-05 15:28:17	xocolatl	I guess phone numbers is debatable.  but zip codes are definitely text
2017-01-05 15:28:21	metaresolve	damn new england and their 05555 zip codes
2017-01-05 15:28:23	xocolatl	think UK
2017-01-05 15:28:55	mochiyoda_	plus they can be 5+4 with a hyphen
2017-01-05 15:29:44	◥	Human_G33k (~Human_G33@62.147.242.8) has joined #postgresql
2017-01-05 15:29:47	metaresolve	all right, this data is crap. the employment number is in two formats: one with a - and the other without
2017-01-05 15:30:09	metaresolve	in my access world, i'd concatenate left(field,3) etc until i stripped out the -'s
2017-01-05 15:30:29	xocolatl	translate(value, '-', '')
2017-01-05 15:30:36	metaresolve	thanks
2017-01-05 15:30:54	metaresolve	so could i do that twice for the phone numbers?
2017-01-05 15:31:02	xocolatl	just once is enough
2017-01-05 15:31:02	metaresolve	or 3 times. it has ( ) (space) and -
2017-01-05 15:31:14	xocolatl	translate(value, '()-', '')
2017-01-05 15:31:25	xocolatl	read the docs for translate :)
2017-01-05 15:32:00	metaresolve	lo., yep, it's open right now
2017-01-05 15:32:06	CalimeroTeknik	nice johto! I made this helper for my ACLs: http://sprunge.us/hfPH  and I can SELECT array_to_hset('{some-right,some-other-right}');
2017-01-05 15:32:16	◣	aprilliac (~aprilliac@174.58.115.36) has quit (Ping timeout: 245 seconds)
2017-01-05 15:32:21	CalimeroTeknik	then I just have to acl ? 'some-right'
2017-01-05 15:32:25	metaresolve	dammit
2017-01-05 15:32:39	◣	evnmar (~MongooseW@12.104.179.154) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-05 15:33:07	ningu	you can just put in a CHECK constraint for the allowable format of the zip code
2017-01-05 15:33:12	ningu	5 numbers or 5+4
2017-01-05 15:33:25	metaresolve	xocolatl, when you replaced the - with a '' does that give a null or a no value?
2017-01-05 15:33:36	xocolatl	what happened when you tried it?
2017-01-05 15:33:37	◥	StoneCyp1er (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has joined #postgresql
2017-01-05 15:33:40	metaresolve	that's a poorly asked question
2017-01-05 15:33:46	metaresolve	not yours, mine
2017-01-05 15:34:06	ningu	ah, translate() is like tr///
2017-01-05 15:34:12	metaresolve	actually i haven't tried it yet. i got kind of stuck in getting good data.
2017-01-05 15:34:15	CalimeroTeknik	zipcode char(5) not null, constraint zipcode_digits check (zipcode ~ $$^\d{5}\Z$$)
2017-01-05 15:34:15	metaresolve	or decent data
2017-01-05 15:34:25	metaresolve	this translate page is beautiful
2017-01-05 15:34:32	ningu	CalimeroTeknik: maybe, if you want only 5-digit zip codes
2017-01-05 15:34:47	metaresolve	hey ningu
2017-01-05 15:34:56	CalimeroTeknik	I have these in France; if I need others, I should indeed extend the size
2017-01-05 15:35:07	johto	char(5) is still not a very good idea
2017-01-05 15:35:18	xocolatl	it's a horrible idea
2017-01-05 15:35:23	ningu	how come?
2017-01-05 15:35:27	CalimeroTeknik	would varchar be better? ideas welcome
2017-01-05 15:35:29	◥	zivester (~zivester@pool-100-8-14-108.nwrknj.fios.verizon.net) has joined #postgresql
2017-01-05 15:35:39	◣	StoneCypher (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has quit (Ping timeout: 272 seconds)
2017-01-05 15:35:39	xocolatl	because not all postal codes are digits-only
2017-01-05 15:35:50	xocolatl	or just five, for that matter
2017-01-05 15:35:53	ningu	xocolatl: if it fits CalimeroTeknik's use case, what's the problem?
2017-01-05 15:35:58	ningu	I agree in principle
2017-01-05 15:36:01	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 15:36:20	xocolatl	no use case has been specified
2017-01-05 15:36:31	CalimeroTeknik	the specification of French zipcodes is 5 digits, but maybe my implementation of the "5 digits" thing isn't good
2017-01-05 15:36:38	ningu	there is a field in our db at work that stores three-character codes from a particular ISO standard. they are always exactly 3 chars and the person who designed the db used char(3)
2017-01-05 15:36:46	ningu	which seems ok to me in that situation
2017-01-05 15:36:54	ningu	it won't save any space, but *shrug*
2017-01-05 15:36:58	◣	rbern (~rbern@unaffiliated/rbern) has quit (Read error: Connection reset by peer)
2017-01-05 15:37:25	xzi11a	ningu: arguably you should do a text with a check constraint of length=3
2017-01-05 15:37:28	◣	hongkongphooey (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has quit (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
2017-01-05 15:37:36	ningu	xzi11a: yes, I can see the argument for that
2017-01-05 15:37:40	◣	wildlander (~wildlande@unaffiliated/wildlander) has quit (Quit: Saliendo)
2017-01-05 15:37:45	ningu	it seems a minor distinction in this case, but sure
2017-01-05 15:37:51	xzi11a	one can make a similar argument about french zip codes
2017-01-05 15:37:52	xocolatl	CalimeroTeknik: what do you do about l'Aisne?
2017-01-05 15:37:54	◥	dommel (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has joined #postgresql
2017-01-05 15:38:27	CalimeroTeknik	xocolatl, its zip codes are going to look like 02???
2017-01-05 15:38:33	xocolatl	yes
2017-01-05 15:38:34	CalimeroTeknik	let's say, 02000 would be the most general
2017-01-05 15:38:52	xocolatl	so if you store that as a number...
2017-01-05 15:39:00	CalimeroTeknik	as a number? I store it as char(5)
2017-01-05 15:39:01	ningu	I want to know the argument against char(5)
2017-01-05 15:39:13	CalimeroTeknik	did you misread it as int?
2017-01-05 15:39:14	ningu	text is the most general and flexible
2017-01-05 15:39:18	dommel	what do i do if i have two one-to-many tables and they themselves are the 'many' part of a parent one-to-many relationship? how do i design my database in this case?
2017-01-05 15:39:23	ningu	text plus CHECK
2017-01-05 15:39:28	ningu	but, char(5) doesn't seem crazy
2017-01-05 15:39:45	CalimeroTeknik	it feels like you're about to give me the "phone number as int" lecture ^^
2017-01-05 15:39:52	xzi11a	ningu: it's not crazy.
2017-01-05 15:40:00	◥	k13nox (~k13nox@85-171-205-53.rev.numericable.fr) has joined #postgresql
2017-01-05 15:40:06	xocolatl	char(5) is fine, as long as you don't care about handling CEDEX
2017-01-05 15:40:16	CalimeroTeknik	that's not part of the zip code
2017-01-05 15:40:21	xzi11a	another argument for older versions was that the cost of expanding a char once size changed was worse than that of updating text constraints
2017-01-05 15:40:24	xocolatl	well, it kind of is
2017-01-05 15:40:32	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 255 seconds)
2017-01-05 15:40:33	CalimeroTeknik	it's officially part of the city name
2017-01-05 15:40:40	ningu	xzi11a: hmm, interesting, didn't know that
2017-01-05 15:40:51	xocolatl	is it?  okay, I withdraw my comment
2017-01-05 15:40:52	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-05 15:41:16	◥	davimore_ (~davimore@185.145.66.254) has joined #postgresql
2017-01-05 15:41:28	◥	psdn (~psdn@d14-69-68-37.try.wideopenwest.com) has joined #postgresql
2017-01-05 15:41:29	xocolatl	xzi11a: also, indexes (at least functional indexes) don't know about that recent binary-compatible optimization and will rebuild regardless
2017-01-05 15:41:37	ningu	if you want to send morue by mail, you need a postal cod
2017-01-05 15:41:52	xocolatl	 /kick ningu
2017-01-05 15:42:13	◣	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has quit (Remote host closed the connection)
2017-01-05 15:42:14	ningu	xocolatl: hey, at least we all learned the french word for cod
2017-01-05 15:42:24	apollo13	xocolatl: you should loose the space XD
2017-01-05 15:42:47	xocolatl	apollo13: but then I'd be spaced out
2017-01-05 15:43:30	apollo13	xocolatl: don't tell me about space -- I nearly didn't make it back!
2017-01-05 15:43:46	◣	dowwie (~quassel@unaffiliated/dowwie) has quit (Ping timeout: 244 seconds)
2017-01-05 15:43:49	apollo13	but I see your dilemma
2017-01-05 15:44:04	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-05 15:44:08	◥	dowwie (~quassel@unaffiliated/dowwie) has joined #postgresql
2017-01-05 15:44:21	◣	k13nox (~k13nox@85-171-205-53.rev.numericable.fr) has quit (Ping timeout: 248 seconds)
2017-01-05 15:44:31	◣	davimore__ (~davimore@185.145.66.254) has quit (Ping timeout: 272 seconds)
2017-01-05 15:44:38	◣	dionysus69 (~Thunderbi@unaffiliated/dionysus69) has quit (Ping timeout: 258 seconds)
2017-01-05 15:47:10	◥	rbern (~rbern@unaffiliated/rbern) has joined #postgresql
2017-01-05 15:50:19	◣	_djbkd (~djbkd@135.84.132.218) has quit (Remote host closed the connection)
2017-01-05 15:51:29	◣	realtime (~realtime@unaffiliated/realtime) has quit (Ping timeout: 272 seconds)
2017-01-05 15:51:49	◣	teslix (~Adrien@2a01:cb14:2e8:900:391a:5611:3652:74bb) has left #postgresql
2017-01-05 15:52:14	◣	dowwie (~quassel@unaffiliated/dowwie) has quit (Remote host closed the connection)
2017-01-05 15:52:28	◣	EyePulp (~eyepulp@98.215.57.107) has quit (Remote host closed the connection)
2017-01-05 15:53:24	◥	_djbkd (~djbkd@135.84.132.218) has joined #postgresql
2017-01-05 15:53:25	◣	Neo-- (~neo@BSN-77-82-252.static.siol.net) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-05 15:53:26	metaresolve	http://pastebin.com/RzX6H6QT
2017-01-05 15:53:33	metaresolve	can someoen tell me what's wrong with that code? the error is at the bottom
2017-01-05 15:53:44	metaresolve	when i did it without the () it got made at me too
2017-01-05 15:53:47	metaresolve	mad
2017-01-05 15:53:55	dommel	metaresolve: why do you use varchar and not text/
2017-01-05 15:54:12	metaresolve	because that's what my friend uses. should i try text?
2017-01-05 15:54:22	dommel	yeah use text
2017-01-05 15:54:33	CalimeroTeknik	'Unit #' looks wrong
2017-01-05 15:54:41	CalimeroTeknik	I think it should be "Unit #"
2017-01-05 15:54:56	CalimeroTeknik	and all these (varchar) are weird, why the parens?
2017-01-05 15:55:10	metaresolve	because it was mad at me at that part so i thought i needed parens
2017-01-05 15:55:12	metaresolve	i took them out.
2017-01-05 15:55:16	◥	yuri_niyazov (~anonymous@199.87.82.138) has joined #postgresql
2017-01-05 15:55:53	ningu	I agree it should be "Unit #" although that is a pretty bad name for a column IMO
2017-01-05 15:55:56	StuckMojo	in postgres you should just use "text" instead of "varchar"
2017-01-05 15:56:03	ningu	and yeah, no parens on the type
2017-01-05 15:56:08	◣	banditron (~banditron@kohana/developer/banditron) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-05 15:56:08	metaresolve	ningu: it's a crappy name.
2017-01-05 15:56:15	CalimeroTeknik	certainly ningu, but first let's make it SQL syntax :D
2017-01-05 15:56:21	metaresolve	I can change it
2017-01-05 15:56:23	ningu	CalimeroTeknik: hehe
2017-01-05 15:56:27	metaresolve	i realize, the reason it's pissed is i have spaces
2017-01-05 15:56:30	metaresolve	ok, let me try writing this again
2017-01-05 15:56:31	◣	xzi11a (~robert@static-108-48-124-82.washdc.fios.verizon.net) has quit (Ping timeout: 256 seconds)
2017-01-05 15:56:35	ningu	metaresolve: you need double-quotes
2017-01-05 15:56:42	ningu	single quotes are for strings, double quotes for identifiers
2017-01-05 15:56:47	CalimeroTeknik	I think I told you about all the syntax issues you had, metaresolve.
2017-01-05 15:56:56	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 15:56:57	StuckMojo	use unit_no or unit_num, and dob instead of date of birth
2017-01-05 15:57:12	CalimeroTeknik	oh, actually this "Employment Number" needs quotes.
2017-01-05 15:57:12	StuckMojo	use underscores rather than spaces in the names
2017-01-05 15:57:14	metaresolve	i was going to alias those for the practice
2017-01-05 15:57:19	metaresolve	calimero: yeah, everything needed quotes
2017-01-05 15:57:19	◥	macabre (~ibtjw@unaffiliated/macabre) has joined #postgresql
2017-01-05 15:57:28	metaresolve	or actually what i did was camel case them
2017-01-05 15:57:29	CalimeroTeknik	and "Date of Birth" as well
2017-01-05 15:57:33	metaresolve	and it created the table fine
2017-01-05 15:57:45	StuckMojo	if you quote them you'll have to always quote them
2017-01-05 15:57:45	ningu	metaresolve: you need quotes on anything with a space or a capital letter that you want to preserve case
2017-01-05 15:57:49	ningu	yeah
2017-01-05 15:57:49	CalimeroTeknik	I'm not sure SQL is case-sensitive
2017-01-05 15:58:00	metaresolve	ningu: thanks
2017-01-05 15:58:00	ningu	CalimeroTeknik: it is with the quotes :)
2017-01-05 15:58:05	◣	_djbkd (~djbkd@135.84.132.218) has quit (Ping timeout: 255 seconds)
2017-01-05 15:58:07	CalimeroTeknik	indeed
2017-01-05 15:58:11	Xgc	or if you decide you like the name FROM for a table name or column name.
2017-01-05 15:58:11	metaresolve	oh, so if i create table and i look at this, it probably will have lower case for Title? let's see
2017-01-05 15:58:12	StuckMojo	you can do this: create table foo (theint int); and do select TheInt from Foo; for readability
2017-01-05 15:58:15	ningu	CalimeroTeknik: although again, not a good design idea, usually not needed
2017-01-05 15:58:23	◣	aristipp_ (~aristippo@2601:646:c003:3d5f:4d87:73a3:83c2:bcc5) has left #postgresql ("Textual IRC Client: www.textualapp.com")
2017-01-05 15:58:33	ningu	metaresolve: without quotes, title and Title are the same
2017-01-05 15:58:36	CalimeroTeknik	I use lowercase and underscore for field names, because can't bother
2017-01-05 15:58:42	StuckMojo	unquoted sql identifiers get folded to lowercase in postgres
2017-01-05 15:58:46	metaresolve	ahh, thank you all
2017-01-05 15:58:46	ningu	CalimeroTeknik: right, me too
2017-01-05 15:58:50	◣	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Quit: Leaving.)
2017-01-05 15:58:56	◥	linuxhiker1 (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2017-01-05 15:58:56	metaresolve	if i were to do another CREATE table statement, would it just overwrite the one i just made?
2017-01-05 15:59:01	ningu	no
2017-01-05 15:59:05	ningu	it will say the table already exists
2017-01-05 15:59:06	StuckMojo	no you have to drop table first
2017-01-05 15:59:09	metaresolve	ok thanks
2017-01-05 15:59:13	CalimeroTeknik	though first_name is overkill in my opinion, firstname is fine
2017-01-05 15:59:32	StuckMojo	first, last are probably fine
2017-01-05 15:59:39	ningu	CREATE OR REPLACE TABLE would be kind of cool but probably impossible to implement sanely
2017-01-05 15:59:43	StuckMojo	"name" is rather redundant
2017-01-05 15:59:53	◣	macabre_ (~ibtjw@2605:a601:4051:a200:1c06:fc50:4acc:8995) has quit (Ping timeout: 255 seconds)
2017-01-05 16:00:00	CalimeroTeknik	I'd rather keep "firstname" and "lastname", "first" and "last" could be anything
2017-01-05 16:00:03	metaresolve	aahhhhh, i get it, you all are helping me normalize
2017-01-05 16:00:10	metaresolve	ok, this is a good idea for me to get used to
2017-01-05 16:00:15	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Read error: Connection timed out)
2017-01-05 16:00:15	ningu	normalization is mostly about what goes in what table
2017-01-05 16:00:19	ningu	at least, in the SQL context
2017-01-05 16:00:22	metaresolve	i was just playing with some crap data i downloaded from an enterprise system
2017-01-05 16:00:23	StuckMojo	this isn't normalization, this is nomenclature
2017-01-05 16:00:34	◥	mclement (~mclement@cpe-76-182-89-240.nc.res.rr.com) has joined #postgresql
2017-01-05 16:00:37	◥	voroninman (~voroninma@89.253.81.235) has joined #postgresql
2017-01-05 16:00:38	dommel	StuckMojo: what do i do if i have two one-to-many tables and they themselves are the 'many' part of a parent one-to-many relationship? how do i design my database in this case?
2017-01-05 16:00:58	◣	wsieroci (~wsieroci@adkw146.neoplus.adsl.tpnet.pl) has quit (Remote host closed the connection)
2017-01-05 16:00:59	metaresolve	ok, let me start over. from the beginning. let me make this a table that doesn't have errors and get feedbacc k at that point
2017-01-05 16:01:04	ningu	dommel: foreign keys as usual, unless I'm missing something
2017-01-05 16:01:14	◥	wsieroci (~wsieroci@adkw146.neoplus.adsl.tpnet.pl) has joined #postgresql
2017-01-05 16:01:19	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 246 seconds)
2017-01-05 16:01:20	ningu	those two tables should each have a fk to the parent table
2017-01-05 16:02:56	StuckMojo	table_a -> fk -> table_b -> fk -> table_c
2017-01-05 16:03:03	StuckMojo	nothing wrong with that
2017-01-05 16:03:40	StuckMojo	metaresolve: an example of normalization would be to break phone numbers out into their own one to many table
2017-01-05 16:03:49	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:40dc:a7c0:505c:4abd) has quit (Remote host closed the connection)
2017-01-05 16:03:52	◥	akurniawan (~akurniawa@111.94.224.64) has joined #postgresql
2017-01-05 16:03:53	◣	urth (~urth@2a00:8080:10:148:9017:2cff:fe26:adf0) has quit (Remote host closed the connection)
2017-01-05 16:03:58	StuckMojo	with number, and type (the latter being home, work, cell, etc.)
2017-01-05 16:04:15	dommel	ningu: so the parent table is just has a primary key or does it have fks referencing the
2017-01-05 16:04:18	dommel	child tables
2017-01-05 16:04:26	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:40dc:a7c0:505c:4abd) has joined #postgresql
2017-01-05 16:04:26	StuckMojo	other way around
2017-01-05 16:04:45	StuckMojo	the childeren each have FKs referencing their parent
2017-01-05 16:04:53	dommel	so the parent table is just: create table parent_table (id serial primary key);
2017-01-05 16:05:03	StuckMojo	grandchild -> fk -> child -> fk -> parent
2017-01-05 16:05:10	◣	sfkeller (~chatzilla@135.209.196.178.dynamic.wline.res.cust.swisscom.ch) has quit (Ping timeout: 248 seconds)
2017-01-05 16:05:45	◣	mclement (~mclement@cpe-76-182-89-240.nc.res.rr.com) has quit (Ping timeout: 248 seconds)
2017-01-05 16:05:45	CalimeroTeknik	it's actually not a bad idea to normalize for addresses (make an "addresses" table and refer to it)
2017-01-05 16:05:45	ningu	dommel: depends if you want anything else in the parent table. it can also have columns that don't reference anything and aren't primary keys
2017-01-05 16:05:45	◣	rbern (~rbern@unaffiliated/rbern) has quit (Ping timeout: 258 seconds)
2017-01-05 16:05:45	ningu	but basically, yes
2017-01-05 16:05:45	◥	_djbkd (~djbkd@135.84.132.218) has joined #postgresql
2017-01-05 16:06:13	metaresolve	stuckmojo: i'm def planning to do that for the category field
2017-01-05 16:06:25	metaresolve	so you get to help me with that
2017-01-05 16:06:26	CalimeroTeknik	the good thing about an "addresses" table is that you can match it against geographical databases to check that all your addresses exist
2017-01-05 16:06:32	StuckMojo	grandchild(id serial primary key, child_id references child(id)); child(id serial primary key, parent_id references parent(id)); parent( id serial primary key);
2017-01-05 16:06:34	dommel	ningu: should the child tables' foreign keys be stored in the parent table too? like: parent_id 1 | child_fk_id 1
2017-01-05 16:06:40	ningu	dommel: no
2017-01-05 16:06:55	ningu	because the parent has many children
2017-01-05 16:06:58	ningu	so you can't do that
2017-01-05 16:07:00	dommel	oh right
2017-01-05 16:07:22	StuckMojo	dommel: FKs go in both directions. one side is the referring and the other is the referenced. the FK constraint goes on the referring table and points to the referenced
2017-01-05 16:07:31	◣	dege (~dege@c-907ce555.027-294-73746f71.cust.bredbandsbolaget.se) has quit (Quit: Damage is done, this is fun)
2017-01-05 16:07:35	ningu	yeah, you store the fk one place but the relationship goes both ways
2017-01-05 16:07:36	StuckMojo	s/go in/are enforced in/
2017-01-05 16:07:38	◥	mr-russ (~mr-russ@mail.smith2001.net) has joined #postgresql
2017-01-05 16:07:51	◣	albertus1 (~seb@x55b4b666.dyn.telefonica.de) has quit (Ping timeout: 256 seconds)
2017-01-05 16:07:57	StuckMojo	you can't delete a row in the parent that is referenced by any rows in the child
2017-01-05 16:08:01	◥	urth (~urth@2a00:8080:10:148:9017:2cff:fe26:adf0) has joined #postgresql
2017-01-05 16:08:10	ningu	StuckMojo: well you can if you set it up that way :P
2017-01-05 16:08:17	StuckMojo	and you can create a row in the child that refers to a non-existant row in the parent
2017-01-05 16:08:19	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 248 seconds)
2017-01-05 16:08:34	ningu	can't
2017-01-05 16:08:36	StuckMojo	ningu: don't complicate things :P
2017-01-05 16:08:47	StuckMojo	s/can/can't/  yes
2017-01-05 16:09:00	◣	merzo (~merzo@93-60-92-178.pool.ukrtel.net) has quit (Remote host closed the connection)
2017-01-05 16:09:14	ningu	ON DELETE CASCADE can be dangerous anyway. probably best used with caution even if you are fully aware of it
2017-01-05 16:09:15	◥	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has joined #postgresql
2017-01-05 16:09:20	dommel	how do i then query to get all the tables that reference the parent table's primary key?
2017-01-05 16:09:31	ningu	dommel: all the rows?
2017-01-05 16:09:35	ningu	for one particular parent, or what?
2017-01-05 16:09:38	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2017-01-05 16:09:40	metaresolve	question about alias'ing: I want to alias this table as "cg." Is that only doable in a SELECT statement, like SELECT * FROM table AS cg
2017-01-05 16:09:45	StuckMojo	dommel: you know them because you created them
2017-01-05 16:09:46	ningu	dommel: or do you literally want to introspect the database schema?
2017-01-05 16:09:47	metaresolve	but then that's dumb, when can i use the cg
2017-01-05 16:10:13	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-05 16:10:16	StuckMojo	metaresolve: if you want the table to be called cg, name it that
2017-01-05 16:10:24	◣	bdunavant (~bdunavant@static-108-48-124-82.washdc.fios.verizon.net) has quit (Remote host closed the connection)
2017-01-05 16:10:38	StuckMojo	aliases are just statement local shorthand references for things in the from list or select list
2017-01-05 16:10:47	metaresolve	 mojo: for various reasons I need to keep it 20170105... etc. that's just how my field works
2017-01-05 16:10:56	◥	Bradipo (~amb@22.16-28.45.70.166.in-addr.arpa) has joined #postgresql
2017-01-05 16:11:00	dommel	ningu: here is an example, how do i query to get both of these tables? http://pastebin.com/qU8GqvkA
2017-01-05 16:11:10	metaresolve	we're weird
2017-01-05 16:11:11	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-05 16:11:12	StuckMojo	create view cg as select * from 20170105_blah_blah; select * from cg;
2017-01-05 16:11:32	ningu	dommel: I don't know your schema so I can't really tell you
2017-01-05 16:11:32	metaresolve	oh that's an idea. thanks.
2017-01-05 16:11:38	ningu	dommel: also, do you want *rows* or *tables*?
2017-01-05 16:11:39	◥	slap_stick (~slap_stic@188.172.149.126) has joined #postgresql
2017-01-05 16:11:43	◣	yuri_niyazov (~anonymous@199.87.82.138) has quit (Quit: yuri_niyazov)
2017-01-05 16:12:19	StuckMojo	metaresolve: or better yet, name the real table cg and create a view with the stupid name
2017-01-05 16:12:26	metaresolve	mojo: lol
2017-01-05 16:12:38	ningu	metaresolve: you can also CREATE TEMPORARY VIEW if you want it to go away automatically at the end of the session
2017-01-05 16:12:47	ningu	no idea if that makes sense in your case
2017-01-05 16:13:02	dommel	ningu: let's say i want to insert into both, how do i query and then insert into both?
2017-01-05 16:13:18	ningu	dommel: eh? you just write the INSERT statement
2017-01-05 16:13:20	ningu	I don't understand the question
2017-01-05 16:13:38	ningu	what's topping you from doing INSERT INTO foo and INSERT INTO bar?
2017-01-05 16:13:42	ningu	stopping*
2017-01-05 16:13:51	dommel	idk i thought i would do it all at once or something
2017-01-05 16:14:14	ningu	one INSERT statement per table, generally
2017-01-05 16:14:33	dommel	what if i have like a hundred tables, just one after another? i just assumed there was a way to insert into multiple at once
2017-01-05 16:14:37	◣	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has quit (Ping timeout: 246 seconds)
2017-01-05 16:14:48	◥	spearthistle (~strawberr@213.205.252.33) has joined #postgresql
2017-01-05 16:14:53	StuckMojo	with p as ( insert into parent values ('blah') returning id ), c as insert into child values ((select id from p), 'blah') returning id), insert into grandchild values ((select id from c), 'blah');
2017-01-05 16:14:53	ningu	if you have a hundred tables to insert into at once, probably you have a bad schema
2017-01-05 16:15:03	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:40dc:a7c0:505c:4abd) has quit (Remote host closed the connection)
2017-01-05 16:15:05	ningu	yeah, or that too
2017-01-05 16:15:30	StuckMojo	my syntax probably has issues there
2017-01-05 16:15:38	StuckMojo	not sure you need the commas off the top of my head
2017-01-05 16:15:49	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 248 seconds)
2017-01-05 16:15:49	◣	Moonsilence (~Moonsilen@aftr-95-222-25-97.unity-media.net) has quit (Ping timeout: 248 seconds)
2017-01-05 16:15:59	ningu	StuckMojo: iirc you need the ones separating the WITH tables but not before INSERT
2017-01-05 16:16:10	StuckMojo	probably
2017-01-05 16:16:15	dommel	okay so it has to be successive there's no concurrency
2017-01-05 16:16:32	◣	Yiota_ (~textual@2607:fea8:56e0:407:f8eb:7a4d:ce65:9b8e) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-05 16:16:34	ningu	dommel: StuckMojo's query does it in one statement. but you can wrap multiple statements in a transaction
2017-01-05 16:16:41	ningu	so either way you get all or nothing
2017-01-05 16:16:42	StuckMojo	dommel: the way i gave it is "concurrent". however you just use a transaction and it's all or nothing with mulitple statements
2017-01-05 16:17:11	dommel	okay great, thanks a lot for the help that clears everything up
2017-01-05 16:17:23	StuckMojo	dommel: you might want to look into inheritance
2017-01-05 16:17:30	StuckMojo	??inheitance
2017-01-05 16:17:30	pg_docbot	Nothing found
2017-01-05 16:17:35	StuckMojo	??inherit
2017-01-05 16:17:35	pg_docbot	Nothing found
2017-01-05 16:17:36	dommel	is that different than cascading?
2017-01-05 16:17:40	ningu	??inheritance
2017-01-05 16:17:40	StuckMojo	grrr
2017-01-05 16:17:40	pg_docbot	http://www.postgresql.org/docs/current/static/ddl-inherit.html :: http://www.postgresql.org/docs/current/static/ddl-inherit.html#DDL-INHERIT-CAVEATS
2017-01-05 16:17:40	pg_docbot	http://www.varlena.com/GeneralBits/98.php
2017-01-05 16:17:42	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 16:18:01	ningu	dommel: yes
2017-01-05 16:18:27	StuckMojo	dommel: or, if you're trying to model a tree, you probably want to look into something like nested sets
2017-01-05 16:18:31	StuckMojo	??tree
2017-01-05 16:18:31	pg_docbot	http://threebit.net/tutorials/nestedset/tutorial1.html :: http://www.sitepoint.com/print/hierarchical-data-database
2017-01-05 16:18:31	pg_docbot	http://www.fuzzy.cz/databaze/index-en.php :: http://en.wikipedia.org/wiki/Transitive_closure
2017-01-05 16:18:31	pg_docbot	http://www.phpriot.com/articles/nested-trees-1/4 :: http://www.postgresql.org/docs/current/static/tablefunc.html
2017-01-05 16:18:31	pg_docbot	http://www.depesz.com/2008/04/11/my-take-on-trees-in-sql/
2017-01-05 16:18:33	metaresolve	for numbers like 4.75 and 3.5, do I use double or float?
2017-01-05 16:18:51	◣	aidalgol (~aidalgol@pdpc/supporter/student/aidalgol) has quit (Quit: Using Circe, the loveliest of all IRC clients)
2017-01-05 16:18:56	StuckMojo	metaresolve: if you want exact values, use numberic
2017-01-05 16:18:58	StuckMojo	numeric
2017-01-05 16:19:06	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Remote host closed the connection)
2017-01-05 16:19:12	metaresolve	ty
2017-01-05 16:19:15	StuckMojo	float/double suffer from rounding errors
2017-01-05 16:19:18	◥	HarrisonF (~Harrison@199.201.65.130) has joined #postgresql
2017-01-05 16:19:18	◣	HarrisonF (~Harrison@199.201.65.130) has quit (Changing host)
2017-01-05 16:19:18	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-05 16:19:27	◣	ningu (~unamuno@c-24-6-1-233.hsd1.ca.comcast.net) has quit (Quit: leaving)
2017-01-05 16:19:31	dommel	StuckMojo: ok that seems pretty advanced, not sure i'll be able to make use of "nested sets" and "inheritence" right now
2017-01-05 16:19:34	◣	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-05 16:19:35	◥	macabre (~ibtjw@unaffiliated/macabre) has joined #postgresql
2017-01-05 16:19:44	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:40dc:a7c0:505c:4abd) has joined #postgresql
2017-01-05 16:19:57	metaresolve	i would hurt a lot of people if i could get the unique ids of these clients out of this system
2017-01-05 16:20:06	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-05 16:20:18	metaresolve	but i also asked them for a data dictionary and they were like ??
2017-01-05 16:20:46	StuckMojo	ask them for a schema dump
2017-01-05 16:21:03	StuckMojo	what RDBMS is it currently in?
2017-01-05 16:21:06	metaresolve	no idea
2017-01-05 16:21:15	StuckMojo	probably sql server or oracle
2017-01-05 16:21:22	StuckMojo	or mysql
2017-01-05 16:21:31	johto	or postgres or mariadb
2017-01-05 16:21:37	metaresolve	probably sql server i'm guessing. it's a homecare/senior care enterprise management system
2017-01-05 16:21:52	StuckMojo	sql server
2017-01-05 16:21:55	StuckMojo	or access :P
2017-01-05 16:22:01	metaresolve	i started off in access :(
2017-01-05 16:22:08	StuckMojo	sucks to be you
2017-01-05 16:22:10	◥	Yiota_ (~textual@2607:fea8:56e0:407:d5d2:25af:dd11:3746) has joined #postgresql
2017-01-05 16:22:10	metaresolve	and my boss for some reason wouldn't "let" me learn anything else?
2017-01-05 16:22:25	metaresolve	i asked her to learn SQL and databases and she got so pissed and told me no
2017-01-05 16:22:33	◥	ron_frown (~ronnyfro@24-176-228-82.static.snlo.ca.charter.com) has joined #postgresql
2017-01-05 16:22:34	metaresolve	so i said fine and went off and did my own thing, which wasn't getting promoted.
2017-01-05 16:22:35	◣	madboxs (~madboxs@211.170.11.154) has quit (Ping timeout: 256 seconds)
2017-01-05 16:22:54	◥	albertus1 (~seb@x4e32df65.dyn.telefonica.de) has joined #postgresql
2017-01-05 16:23:10	metaresolve	StuckMojo, I was only working with 400k records, Access could handle it. I just got off a job with 250M records. i couldn't go back to access if i wanted to.
2017-01-05 16:23:23	metaresolve	.... which i don't
2017-01-05 16:23:42	metaresolve	i actually started using KNIME and like it a lot but these jobs want me to have SQL.
2017-01-05 16:23:43	▷	metaresolve shrugs
2017-01-05 16:23:46	◥	androot (~androot@44-156-255-130.dynamic.t-mont.net.pl) has joined #postgresql
2017-01-05 16:24:11	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Ping timeout: 255 seconds)
2017-01-05 16:24:46	◣	linuxhiker1 (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Quit: Leaving.)
2017-01-05 16:24:52	◣	gist (~jack@p5B104BD3.dip0.t-ipconnect.de) has quit (Ping timeout: 248 seconds)
2017-01-05 16:24:57	◥	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2017-01-05 16:25:28	StuckMojo	welcome to the land of multi-terrabyte databases with billions of rows
2017-01-05 16:25:38	metaresolve	do I use int for integer? i ahve invoice numbers
2017-01-05 16:25:45	metaresolve	i guess i could use text
2017-01-05 16:25:49	StuckMojo	int or bigint
2017-01-05 16:25:52	metaresolve	ty
2017-01-05 16:25:59	StuckMojo	as long as they're always numbers
2017-01-05 16:26:13	StuckMojo	letters have a way of getting in there
2017-01-05 16:26:31	◥	mochiyoda (~my@2601:1c0:cb03:87fd:b591:6e10:b05c:efe1) has joined #postgresql
2017-01-05 16:28:41	◣	mlt- (~user@unaffiliated/mlt-) has quit (Quit: ERC (IRC client for Emacs 25.1.1))
2017-01-05 16:28:50	◣	fatdragon (~fatdragon@cpe-107-184-105-188.socal.res.rr.com) has quit (Remote host closed the connection)
2017-01-05 16:30:36	◣	Guest32 (~textual@vic.xmatters.com) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-05 16:30:36	◣	evil_ (~evil@85.11.24.93) has quit (Disconnected by services)
2017-01-05 16:30:40	◣	mochiyoda_ (~my@2601:1c0:cb03:87fd:3454:e792:afe9:df20) has quit (Ping timeout: 258 seconds)
2017-01-05 16:30:44	◥	evil_ (~evil@85.11.24.93) has joined #postgresql
2017-01-05 16:30:51	◣	evil_ (~evil@85.11.24.93) has quit (Disconnected by services)
2017-01-05 16:30:57	◥	evil_ (~evil@85.11.24.93) has joined #postgresql
2017-01-05 16:32:12	◣	evil_ (~evil@85.11.24.93) has quit (Disconnected by services)
2017-01-05 16:32:19	◥	evil_ (~evil@85.11.24.93) has joined #postgresql
2017-01-05 16:32:31	◥	shangxiao (~shangxiao@103.224.86.17) has joined #postgresql
2017-01-05 16:33:03	◣	evil_ (~evil@85.11.24.93) has quit (Disconnected by services)
2017-01-05 16:33:09	◥	evil_ (~evil@85.11.24.93) has joined #postgresql
2017-01-05 16:33:45	◣	androot (~androot@44-156-255-130.dynamic.t-mont.net.pl) has quit (Read error: Connection reset by peer)
2017-01-05 16:33:55	◣	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Ping timeout: 256 seconds)
2017-01-05 16:34:23	◣	jabakobob (~textual@cpe90-146-57-147.liwest.at) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-05 16:34:36	◣	evil_ (~evil@85.11.24.93) has quit (Disconnected by services)
2017-01-05 16:34:40	◣	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has quit (Quit: Leaving.)
2017-01-05 16:34:42	◥	evil_ (~evil@85.11.24.93) has joined #postgresql
2017-01-05 16:35:21	metaresolve	guys: I nmessed up in my table creation and forgot a column. If I ALTER TABLE to add the column, it just goes at the end. how do I get the Address field to be between the First and Unit fields so when I copy the table from the .csv it populates the right fields?
2017-01-05 16:35:52	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:40dc:a7c0:505c:4abd) has quit (Remote host closed the connection)
2017-01-05 16:35:58	◥	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has joined #postgresql
2017-01-05 16:36:01	RhodiumToad	you can't change the order of fields in the table short of recreating it, but you can change the order of the columns in the column list of the COPY command
2017-01-05 16:36:08	◥	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has joined #postgresql
2017-01-05 16:36:25	RhodiumToad	copy tablename (col1,col2,col3,...) from 'file.csv' csv
2017-01-05 16:36:27	ningu	RhodiumToad: the order of columns can sometimes matter for storage, right? is there any good way around that issue?
2017-01-05 16:36:47	RhodiumToad	it only matters for alignment and some performance issues
2017-01-05 16:37:00	ningu	well that's what I meant. like, four integer cols in a row vs. scattered
2017-01-05 16:37:16	◣	tm604 (~tom@pdpc/supporter/professional/tm604) has quit (Ping timeout: 245 seconds)
2017-01-05 16:37:26	RhodiumToad	recreating the table is the only good fix
2017-01-05 16:37:30	ningu	ok
2017-01-05 16:37:57	RhodiumToad	otherwise, you can add a whole bunch of new columns and drop the old ones, but that leaves you with a lot of dropped columns (which don't show up, but still exist)
2017-01-05 16:38:30	◥	madboxs (~madboxs@211.170.11.154) has joined #postgresql
2017-01-05 16:39:19	RhodiumToad	decoupling the logical and physical order of columns has been suggested on -hackers probably every year or so for the last fifteen, but no-one's actually done it
2017-01-06 09:54:37	⚡	irc: disconnected from server
2017-01-06 09:55:04	◥	d8v3 (~david@66.195.46.242) has joined #postgresql
2017-01-06 09:55:04	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2017-01-06 09:55:04	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2017-01-06 09:55:04	⚡	Channel #postgresql: 953 nicks (0 ops, 0 voices, 953 normals)
2017-01-06 09:55:04	⚡	URL for #postgresql: http://www.postgresql.org
2017-01-06 09:55:04	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2017-01-06 09:57:05	◥	ovnicraft_ (~ovnicraft@181.211.39.124) has joined #postgresql
2017-01-06 09:57:12	ash_workz	breinbaas: oooh, that's interesting, but not what I was going for
2017-01-06 09:58:07	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-06 09:58:30	ash_workz	I actually don't understand my output for that
2017-01-06 09:58:51	ash_workz	oh, yes I do
2017-01-06 09:59:00	◣	Absolute0 (~ramin@ool-43506a5b.dyn.optonline.net) has quit (Remote host closed the connection)
2017-01-06 10:00:07	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-06 10:00:10	◣	JamesBaxter (~JamesBaxt@unaffiliated/jamesbaxter) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-06 10:00:36	ash_workz	now if you could unnest row() then I think we'd have something
2017-01-06 10:02:33	◥	echlebek (~echlebek@S010684948cbf5873.vc.shawcable.net) has joined #postgresql
2017-01-06 10:02:33	◣	flying (~flying@90.216.134.195) has quit
2017-01-06 10:02:33	◥	Cargo23 (~Cargo23@173.38.117.71) has joined #postgresql
2017-01-06 10:07:28	⚡	irc: disconnected from server
2017-01-06 10:07:54	◥	d8v3 (~david@66.195.46.242) has joined #postgresql
2017-01-06 10:07:54	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2017-01-06 10:07:54	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2017-01-06 10:07:54	⚡	Channel #postgresql: 953 nicks (0 ops, 0 voices, 953 normals)
2017-01-06 10:07:54	⚡	URL for #postgresql: http://www.postgresql.org
2017-01-06 10:07:58	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2017-01-06 10:09:01	Cargo23	I'm confused by something... I have a cronjob that runs pg_basebackup with -D /backups parameter.  However, it appears that this also write a .backup file into the pg_xlog directory.  I can't seem to find this behavior documented anywhere.  Is that how it works or am I missing something?
2017-01-06 10:09:36	◣	bocaneri (~bocaneri@about/linux/staff/sauvin) has quit (Read error: Connection reset by peer)
2017-01-06 10:09:40	◥	EyePulp (~eyepulp@98.215.57.107) has joined #postgresql
2017-01-06 10:10:48	◣	hotpancakes (~hotpancak@2604:2000:e819:ba00:9439:6134:240c:d123) has quit (Remote host closed the connection)
2017-01-06 10:11:11	◣	lmoe (~lmoe@aftr-5-146-249-112.unity-media.net) has quit (Quit: My notebook went to ****ing sleep - again..)
2017-01-06 10:11:21	◥	hotpancakes (~hotpancak@2604:2000:e819:ba00:9439:6134:240c:d123) has joined #postgresql
2017-01-06 10:11:24	linuxgurugamer	 is there someone who can help me with a problem running pg_upgrade?
2017-01-06 10:11:32	◣	Flotho66 (~florent@2a01:e35:8ae3:b2f0:aadf:7f06:4372:61c3) has quit (Ping timeout: 240 seconds)
2017-01-06 10:12:10	◥	saurabhjha (~saurabhjh@182.64.2.200) has joined #postgresql
2017-01-06 10:12:26	◣	akretschmer (~akretschm@p4FCCB631.dip0.t-ipconnect.de) has quit (Quit: Lost terminal)
2017-01-06 10:13:32	◣	rjuju (~rjuju@2a01:e34:ec0e:e930:a634:d9ff:fe7a:d811) has quit (Quit: Leaving)
2017-01-06 10:14:01	◥	XofP (~XofP@sfosj0215mups301.wiline.com) has joined #postgresql
2017-01-06 10:14:05	◥	HarrisonF (~Harrison@199.201.65.130) has joined #postgresql
2017-01-06 10:14:05	◣	HarrisonF (~Harrison@199.201.65.130) has quit (Changing host)
2017-01-06 10:14:05	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-06 10:14:10	◣	bart__ (~quassel@2001:888:4:42::82) has quit (Ping timeout: 240 seconds)
2017-01-06 10:15:36	◣	hotpancakes (~hotpancak@2604:2000:e819:ba00:9439:6134:240c:d123) has quit (Ping timeout: 255 seconds)
2017-01-06 10:17:07	◥	hoe` (~hoe@c-71-237-236-28.hsd1.or.comcast.net) has joined #postgresql
2017-01-06 10:18:15	◥	chrisw (~chrisw@92.40.249.101.threembb.co.uk) has joined #postgresql
2017-01-06 10:18:45	◣	JamesBaxter (~JamesBaxt@unaffiliated/jamesbaxter) has quit (Read error: Connection reset by peer)
2017-01-06 10:19:02	◥	deadnull (deadnull@nat/cisco/x-ulzmlcytjbehtnez) has joined #postgresql
2017-01-06 10:19:20	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:653f:151d:5d0d:afd) has joined #postgresql
2017-01-06 10:19:51	◥	hahuang61 (~hahuang65@2601:647:4000:d7:9446:f8ac:4b2e:f97c) has joined #postgresql
2017-01-06 10:21:20	◥	mlt- (~user@unaffiliated/mlt-) has joined #postgresql
2017-01-06 10:21:59	◥	justatheory (~justatheo@74.121.28.6) has joined #postgresql
2017-01-06 10:22:01	◥	saurabhj_ (~saurabhjh@182.64.51.3) has joined #postgresql
2017-01-06 10:22:19	◥	nicoulaj (~nicoulaj@nicoulaj.net) has joined #postgresql
2017-01-06 10:22:27	◥	aajjbb (~aajjbb@179.154.124.39) has joined #postgresql
2017-01-06 10:23:14	◣	saurabhjha (~saurabhjh@182.64.2.200) has quit (Ping timeout: 248 seconds)
2017-01-06 10:23:15	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-06 10:23:18	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Remote host closed the connection)
2017-01-06 10:23:56	◣	KODY92802138 (~annonymou@175.202.152.171) has quit (Remote host closed the connection)
2017-01-06 10:24:30	◣	capella-da-star (~capella-d@103.25.0.90) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-06 10:24:45	◥	KODY92802138 (~annonymou@175.202.152.171) has joined #postgresql
2017-01-06 10:25:11	◣	nineinchnick (~jwas@109.231.18.27) has quit (Remote host closed the connection)
2017-01-06 10:25:51	◥	cartan (~cartan@p4FEEAC21.dip0.t-ipconnect.de) has joined #postgresql
2017-01-06 10:27:19	◥	saurabhjha (~saurabhjh@182.64.144.63) has joined #postgresql
2017-01-06 10:27:35	◣	dsantiago (~dsantiago@cpe-104-175-193-69.socal.res.rr.com) has quit (Quit: Computer has gone to sleep.)
2017-01-06 10:27:45	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 10:28:29	◣	KODY92802138 (~annonymou@175.202.152.171) has quit (Remote host closed the connection)
2017-01-06 10:28:40	◣	saurabhj_ (~saurabhjh@182.64.51.3) has quit (Ping timeout: 272 seconds)
2017-01-06 10:29:15	◥	KODY92802138 (~annonymou@175.202.152.171) has joined #postgresql
2017-01-06 10:30:02	◣	hahuang61 (~hahuang65@2601:647:4000:d7:9446:f8ac:4b2e:f97c) has quit (Ping timeout: 258 seconds)
2017-01-06 10:30:50	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-06 10:31:06	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-06 10:31:06	◣	sigdk (~sigdk@195.22.120.200) has quit (Quit: Leaving)
2017-01-06 10:31:52	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 246 seconds)
2017-01-06 10:33:00	◣	justatheory (~justatheo@74.121.28.6) has quit (Quit: justatheory)
2017-01-06 10:33:13	◥	saurabhj_ (~saurabhjh@182.64.35.140) has joined #postgresql
2017-01-06 10:33:55	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2017-01-06 10:34:18	◣	Cargo23 (~Cargo23@173.38.117.71) has quit (Remote host closed the connection)
2017-01-06 10:34:39	◣	saurabhjha (~saurabhjh@182.64.144.63) has quit (Ping timeout: 258 seconds)
2017-01-06 10:35:34	◣	vovka (~vovka@46.72.33.152) has quit (Remote host closed the connection)
2017-01-06 10:36:11	◥	justatheory (~justatheo@74.121.28.6) has joined #postgresql
2017-01-06 10:37:55	◣	billiii (~whm@4.16.47.224) has left #postgresql
2017-01-06 10:39:09	◥	_djbkd (~djbkd@135.84.132.218) has joined #postgresql
2017-01-06 10:40:20	◥	gavinc (~gavin@barad-dur.carothers.name) has joined #postgresql
2017-01-06 10:40:59	◥	diggitydane (~diggityda@2601:681:8100:f548:f087:c4f6:b10b:3600) has joined #postgresql
2017-01-06 10:42:42	ash_workz	I... I am not understanding this logic: https://gist.github.com/anonymous/629871e153e2d2db83e313d5ae5cb500
2017-01-06 10:44:32	diggitydane	How do we compile 20M rows of order data into a new table?        http://softwareengineering.stackexchange.com/questions/339600/compile-analytics-from-millions-of-rows-in-postgresql
2017-01-06 10:44:33	◥	JordiGH (~jordi@octave/developer/JordiGH) has joined #postgresql
2017-01-06 10:44:42	◥	DiegoMax (~diego@201.250.178.87) has joined #postgresql
2017-01-06 10:44:52	diggitydane	We're currently using SQL Views, but this is no longer working for us
2017-01-06 10:45:04	◥	HarrisonF (~Harrison@199.201.65.130) has joined #postgresql
2017-01-06 10:45:04	◣	HarrisonF (~Harrison@199.201.65.130) has quit (Changing host)
2017-01-06 10:45:04	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-06 10:45:09	JordiGH	I'm trying to figure out what query a particular process is running. I'm looking at pg_stat_activity, but the query is too long and gets truncated. How can I get rid of this truncation?
2017-01-06 10:45:53	◣	BitWhisperer (~BitWhispe@pool-96-227-235-90.phlapa.fios.verizon.net) has quit (Ping timeout: 256 seconds)
2017-01-06 10:46:02	ash_workz	it's like... if the dob is older than (18+term) set expiry to entry's 18th birthday... which would be expired by the length of term. wouldn't it?
2017-01-06 10:46:24	◣	DexterLB (~dex@77.85.3.113) has quit (Quit: So long and thanks for all the fish)
2017-01-06 10:47:06	JordiGH	Gah, SO says I need to restart postgres.
2017-01-06 10:47:12	JordiGH	Or connect with gdb.
2017-01-06 10:47:20	lluad	diggitydane: Sounds like you want summary tables, either updated in batch or incrementally from triggers.
2017-01-06 10:47:39	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 10:47:54	◥	DexterLB (~dex@77.85.3.113) has joined #postgresql
2017-01-06 10:48:11	diggitydane	lluad, yeah exactly.  we tried looking at materialized views
2017-01-06 10:48:17	lluad	Though what it looks like you're doing now seems reasonable-ish, assuming you have indexes in the right places.
2017-01-06 10:48:24	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-06 10:48:48	◣	ovnicraft_ (~ovnicraft@181.211.39.124) has quit (Quit: ovnicraft_)
2017-01-06 10:49:29	diggitydane	lluad, the problem we're running into is that it's on a 16GB postgres instance, but the data from the query can exceed that
2017-01-06 10:49:29	lluad	I might start by treating it as a slow query problem - run explain analyze, look at the plans, share those and the schema here so people can point out any obvious low-hanging fruit - rather than leaping straight to architectural changes.
2017-01-06 10:49:58	◥	mizhka (~mizhka@cloud.unclebear.ru) has joined #postgresql
2017-01-06 10:50:15	◥	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has joined #postgresql
2017-01-06 10:50:24	◣	held (~heldchen@unaffiliated/held) has quit (Ping timeout: 256 seconds)
2017-01-06 10:50:29	◣	wam (~wam@unaffiliated/wam) has quit (Quit: Leaving)
2017-01-06 10:51:08	◥	totus1 (~totus@cpe-24-160-136-100.satx.res.rr.com) has joined #postgresql
2017-01-06 10:51:11	lluad	If you're reading the whole table it should sequentially scan through it and not blow out your buffers. If you're somehow hiding that from the planner, so it's doing an index scan for most of the table or something then maybe not.
2017-01-06 10:51:31	◣	mizhka (~mizhka@cloud.unclebear.ru) has left #postgresql
2017-01-06 10:52:27	◥	inflames (~syg@47.148.210.171) has joined #postgresql
2017-01-06 10:52:44	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 272 seconds)
2017-01-06 10:52:57	◣	totus (~totus@2605:6000:66c0:8800:e5ba:435a:7da3:b46e) has quit (Ping timeout: 255 seconds)
2017-01-06 10:52:59	diggitydane	lluad, ok thanks.  I'll put those together
2017-01-06 10:53:49	◥	saurabhjha (~saurabhjh@182.64.40.253) has joined #postgresql
2017-01-06 10:55:14	◣	chrisw (~chrisw@92.40.249.101.threembb.co.uk) has quit (Ping timeout: 248 seconds)
2017-01-06 10:55:30	◣	saurabhj_ (~saurabhjh@182.64.35.140) has quit (Ping timeout: 256 seconds)
2017-01-06 10:58:28	◣	inflames (~syg@47.148.210.171) has quit (Ping timeout: 248 seconds)
2017-01-06 10:59:51	◥	linuxhiker (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2017-01-06 11:00:08	◥	Levure (~quassel@91.181.239.93) has joined #postgresql
2017-01-06 11:00:37	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-06 11:01:20	◥	wildlander (~wildlande@unaffiliated/wildlander) has joined #postgresql
2017-01-06 11:02:21	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 11:03:04	◥	mo2013F (~test123@71.19.161.130) has joined #postgresql
2017-01-06 11:03:30	mo2013F	exit
2017-01-06 11:03:33	mo2013F	help
2017-01-06 11:03:37	_ChauffeR	\q
2017-01-06 11:03:40	mo2013F	\q
2017-01-06 11:03:43	mo2013F	\q
2017-01-06 11:03:49	_ChauffeR	^C
2017-01-06 11:04:01	mo2013F	^
2017-01-06 11:04:08	mo2013F	^C
2017-01-06 11:05:17	◥	held (~heldchen@unaffiliated/held) has joined #postgresql
2017-01-06 11:05:32	◥	teslix (~Adrien@2a01:cb14:2e8:900:391a:5611:3652:74bb) has joined #postgresql
2017-01-06 11:06:24	◥	raynold (uid201163@gateway/web/irccloud.com/session) has joined #postgresql
2017-01-06 11:06:30	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 246 seconds)
2017-01-06 11:06:36	◣	JordiGH (~jordi@octave/developer/JordiGH) has left #postgresql ("Leaving")
2017-01-06 11:07:00	◣	mo2013F (~test123@71.19.161.130) has quit (Client Quit)
2017-01-06 11:07:25	◣	raynold (uid201163@gateway/web/irccloud.com/session) has quit (Changing host)
2017-01-06 11:07:26	◥	raynold (uid201163@gateway/web/irccloud.com/x-epnywtjolmcwkxbq) has joined #postgresql
2017-01-06 11:08:22	◥	nivag (~nivag@121.99.202.67) has joined #postgresql
2017-01-06 11:09:40	◣	xemdetia (~xemdetia@129.42.208.167) has quit (Ping timeout: 256 seconds)
2017-01-06 11:09:45	Snow-Man	…
2017-01-06 11:10:36	◣	merzo (~merzo@91.217.179.122) has quit (Ping timeout: 245 seconds)
2017-01-06 11:10:52	◣	BadSnappa (~BadSnappa@172.98.67.49) has quit (Ping timeout: 240 seconds)
2017-01-06 11:11:13	◣	wicope (~wicope@102.red-88-23-174.staticip.rima-tde.net) has quit (Remote host closed the connection)
2017-01-06 11:15:31	◥	marcdel (~marcdel@198.8.80.167) has joined #postgresql
2017-01-06 11:16:45	◥	elein (~chatzilla@192.150.10.205) has joined #postgresql
2017-01-06 11:17:11	◥	hahuang61 (~hahuang65@2601:647:4000:d7:9446:f8ac:4b2e:f97c) has joined #postgresql
2017-01-06 11:18:23	◥	HarrisonF (~Harrison@199.201.65.130) has joined #postgresql
2017-01-06 11:18:23	◣	HarrisonF (~Harrison@199.201.65.130) has quit (Changing host)
2017-01-06 11:18:23	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-06 11:20:11	◥	faw (~faw@38.102.153.98) has joined #postgresql
2017-01-06 11:20:11	◣	faw (~faw@38.102.153.98) has quit (Changing host)
2017-01-06 11:20:11	◥	faw (~faw@unaffiliated/faw) has joined #postgresql
2017-01-06 11:21:39	◣	akkad (akkad@166.84.6.60) has quit (*.net *.split)
2017-01-06 11:21:54	◥	stoer_ (~maier@static.171.82.9.176.clients.your-server.de) has joined #postgresql
2017-01-06 11:21:54	◥	underhunden (~underhund@87.237.213.103) has joined #postgresql
2017-01-06 11:21:56	◥	amiri_ (~amiri@cpe-45-48-101-136.socal.res.rr.com) has joined #postgresql
2017-01-06 11:22:02	◥	arunfalk_ (~runfalk@h46-59-41-65.docsis.dyn.cust-ip.bdtv.se) has joined #postgresql
2017-01-06 11:22:04	◥	bmcginty_ (~bmcginty@100.subnet-66-44-204.ellijay.com) has joined #postgresql
2017-01-06 11:22:09	◥	tharkun_ (~0@fixed-190-62-187-190-62-81.iusacell.net) has joined #postgresql
2017-01-06 11:22:20	◥	ashemedai (asmodai@freebsd/developer/asmodai) has joined #postgresql
2017-01-06 11:22:26	◣	DexterLB (~dex@77.85.3.113) has quit (*.net *.split)
2017-01-06 11:22:26	◣	asmodai (asmodai@freebsd/developer/asmodai) has quit (*.net *.split)
2017-01-06 11:22:26	◣	BlackCobra (~BlackCobr@79.132.250.13) has quit (*.net *.split)
2017-01-06 11:22:26	◣	evil_ (~evil@85.11.24.93) has quit (*.net *.split)
2017-01-06 11:22:26	◣	dre^ (~andre@youbeill.in) has quit (*.net *.split)
2017-01-06 11:22:26	◣	tvenhola (jykke@venhola.com) has quit (*.net *.split)
2017-01-06 11:22:26	◣	jave (~jave@h-223-63.a149.priv.bahnhof.se) has quit (*.net *.split)
2017-01-06 11:22:26	◣	amiri (~amiri@cpe-45-48-101-136.socal.res.rr.com) has quit (*.net *.split)
2017-01-06 11:22:27	◣	tharkun (~0@unaffiliated/tharkun) has quit (*.net *.split)
2017-01-06 11:22:27	◣	bmcginty (~bmcginty@100.subnet-66-44-204.ellijay.com) has quit (*.net *.split)
2017-01-06 11:22:27	◣	underhun1en (~underhund@87.237.213.103) has quit (*.net *.split)
2017-01-06 11:22:27	◣	ppppp5 (~quassel@178.62.110.75) has quit (*.net *.split)
2017-01-06 11:22:27	◣	stoer (~maier@static.171.82.9.176.clients.your-server.de) has quit (*.net *.split)
2017-01-06 11:22:27	◣	runfalk (~runfalk@h46-59-41-65.docsis.dyn.cust-ip.bdtv.se) has quit (*.net *.split)
2017-01-06 11:22:49	◥	bordicon (~bordicon@50-247-102-73-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-06 11:22:59	◣	DiegoMax (~diego@201.250.178.87) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-06 11:23:02	◥	ppppp5 (~quassel@178.62.110.75) has joined #postgresql
2017-01-06 11:23:07	◥	BlackCobra (~BlackCobr@2a02:578:4402:77::777:27) has joined #postgresql
2017-01-06 11:24:21	◣	hahuang61 (~hahuang65@2601:647:4000:d7:9446:f8ac:4b2e:f97c) has quit (Ping timeout: 245 seconds)
2017-01-06 11:24:23	◥	dre^ (andre@youbeill.in) has joined #postgresql
2017-01-06 11:25:24	◣	filiprem (~filip@188.146.93.107.nat.umts.dynamic.t-mobile.pl) has quit (Ping timeout: 246 seconds)
2017-01-06 11:26:20	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2017-01-06 11:26:27	◥	jave (~jave@h-223-63.a149.priv.bahnhof.se) has joined #postgresql
2017-01-06 11:27:27	◥	saurabhj_ (~saurabhjh@182.64.53.83) has joined #postgresql
2017-01-06 11:27:55	◥	akkad (akkad@166.84.6.60) has joined #postgresql
2017-01-06 11:29:24	◣	saurabhjha (~saurabhjh@182.64.40.253) has quit (Ping timeout: 255 seconds)
2017-01-06 11:29:47	◥	dhk (~dhk@138.59.24.18) has joined #postgresql
2017-01-06 11:30:53	◥	JordiGH (~jordi@octave/developer/JordiGH) has joined #postgresql
2017-01-06 11:31:09	JordiGH	A transaction incurs a lock, right?
2017-01-06 11:31:18	⚡	ashemedai is now known as asmodai
2017-01-06 11:31:21	JordiGH	or several locks...
2017-01-06 11:31:26	◣	savant (~savant@207.251.84.218) has left #postgresql
2017-01-06 11:31:32	◥	dhk_ (~dhk@138.59.24.18) has joined #postgresql
2017-01-06 11:31:41	JordiGH	I mean, how does it work? Something must be locked so that the transaction can be rolled back, right?
2017-01-06 11:32:18	◣	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has quit (Read error: Connection reset by peer)
2017-01-06 11:32:34	Snow-Man	??locks
2017-01-06 11:32:34	pg_docbot	http://www.postgresql.org/docs/current/static/explicit-locking.html#ADVISORY-LOCKS :: http://wiki.postgresql.org/wiki/Lock_dependency_information
2017-01-06 11:32:34	pg_docbot	http://www.postgresql.org/docs/current/static/view-pg-locks.html :: http://wiki.postgresql.org/wiki/Lock_Monitoring
2017-01-06 11:33:07	JordiGH	Can you do better than telling me to rtfm 4 different fms?
2017-01-06 11:33:33	◣	totus1 (~totus@cpe-24-160-136-100.satx.res.rr.com) has quit (Quit: Leaving.)
2017-01-06 11:33:44	JordiGH	Well, two sections of the fm and two sections of the wiki.
2017-01-06 11:34:41	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-06 11:34:47	◥	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-06 11:34:51	◣	dhk (~dhk@138.59.24.18) has quit (Ping timeout: 246 seconds)
2017-01-06 11:35:22	◥	Masterphi (~Masterphi@199.192.105.248) has joined #postgresql
2017-01-06 11:35:28	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Remote host closed the connection)
2017-01-06 11:35:41	◣	Masterphi (~Masterphi@199.192.105.248) has quit (Client Quit)
2017-01-06 11:36:07	StoneCypher	JordiGH: not really, no
2017-01-06 11:36:09	Snow-Man	uhm.  I could copy/paste what's there into here, but I don't think that's really going to be appreciated by everyone else here.
2017-01-06 11:36:09	johto	a transaction can (and often will) hold multiple locks
2017-01-06 11:36:13	◥	Masterphi (~Masterphi@199.192.105.248) has joined #postgresql
2017-01-06 11:36:26	johto	but they're not really that related to the ability to roll back
2017-01-06 11:36:40	JordiGH	Snow-Man: So I have to read all of that to answer the question, "does a transaction use a lock?"
2017-01-06 11:36:44	Snow-Man	indeed, wrt rolling things back, you should go look at mvcc
2017-01-06 11:36:45	Snow-Man	??mvcc
2017-01-06 11:36:46	JordiGH	Is the answer that complicated?
2017-01-06 11:36:46	pg_docbot	http://www.postgresql.org/docs/current/static/mvcc.html :: http://en.wikipedia.org/wiki/Multiversion_concurrency_control
2017-01-06 11:36:46	pg_docbot	http://devcenter.heroku.com/articles/postgresql-concurrency :: http://momjian.us/main/presentations/internals.html#mvcc
2017-01-06 11:36:50	◣	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-06 11:37:03	Snow-Man	JordiGH: You asked "how does it work?"
2017-01-06 11:37:25	Snow-Man	JordiGH: I'm pretty sure you would have complained if I just said "yes, a transaction takes a lock."
2017-01-06 11:37:39	JordiGH	I actually think that's fine.
2017-01-06 11:37:43	Snow-Man	k.
2017-01-06 11:37:45	JordiGH	I'm not complaining.
2017-01-06 11:37:49	johto	but it's not a good answer
2017-01-06 11:37:57	JordiGH	It wasn't a good question either, I'll take it.
2017-01-06 11:38:04	johto	especially since you seem very confused about the basic principles
2017-01-06 11:38:19	JordiGH	Okay, two manual sections and two wiki pages.
2017-01-06 11:38:19	JordiGH	bbl
2017-01-06 11:38:29	JordiGH	Wait, four and four.
2017-01-06 11:38:32	◥	dsantiago (~dsantiago@40.141.55.70) has joined #postgresql
2017-01-06 11:38:32	JordiGH	Be back... tomorrow, I guess.
2017-01-06 11:38:36	johto	we're happy to answer specific questions, but "how does [this really large topic] work?" is not really answerable
2017-01-06 11:38:59	johto	it's better if you start with something already written down and then come back with specific questions, for both parties
2017-01-06 11:39:22	Snow-Man	JordiGH: I expect the MVCC stuff to be more useful wrt your question about how rollback is handled, so if that's really what you're curious about, read that stuff first.
2017-01-06 11:39:31	◥	dsantiag_ (~dsantiago@40.141.55.70) has joined #postgresql
2017-01-06 11:41:46	◥	filiprem (~filip@188.146.93.107.nat.umts.dynamic.t-mobile.pl) has joined #postgresql
2017-01-06 11:43:16	◣	dsantiago (~dsantiago@40.141.55.70) has quit (Ping timeout: 248 seconds)
2017-01-06 11:44:13	◣	bronson (~bronson@142-254-101-34.dsl.dynamic.fusionbroadband.com) has quit (Remote host closed the connection)
2017-01-06 11:44:17	◥	Bob8989 (~bobby12@185.67.177.203) has joined #postgresql
2017-01-06 11:44:47	◥	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has joined #postgresql
2017-01-06 11:44:59	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-06 11:45:00	◥	__Yiota (~textual@2607:fea8:3c9f:ffe9:2126:1ee3:665a:629) has joined #postgresql
2017-01-06 11:45:01	◣	tiwula (~lane@70.89.246.241-Busname-UT.hfc.comcastbusiness.net) has quit (Quit: Leaving)
2017-01-06 11:45:36	◥	code_zombie (~code_zomb@136.63.230.43) has joined #postgresql
2017-01-06 11:46:12	◣	vuoto (~vuoto@n9pl7d.static.netgroup.dk) has quit (Remote host closed the connection)
2017-01-06 11:47:45	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-06 11:49:44	◣	cliluw (~cliluw@unaffiliated/cliluw) has quit (Ping timeout: 272 seconds)
2017-01-06 11:50:08	◥	cliluw (~cliluw@unaffiliated/cliluw) has joined #postgresql
2017-01-06 11:51:05	◥	apotry (~textual@cpc105216-live33-2-0-cust233.17-2.cable.virginm.net) has joined #postgresql
2017-01-06 11:55:57	◣	gheegh (~textual@pool-173-79-73-194.washdc.fios.verizon.net) has quit (Ping timeout: 255 seconds)
2017-01-06 11:56:24	◣	StoneCypher (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has quit (Ping timeout: 255 seconds)
2017-01-06 11:57:05	◣	dargains (~dargains@187.110.239.75) has quit (Remote host closed the connection)
2017-01-06 11:57:40	◥	dargains (~dargains@187.110.239.75) has joined #postgresql
2017-01-06 11:59:52	◥	dargains_ (~dargains@187.110.239.75) has joined #postgresql
2017-01-06 12:01:03	◥	JenniferAkemi (~jennifera@CPEf0f249d14d93-CMf0f249d14d90.cpe.net.cable.rogers.com) has joined #postgresql
2017-01-06 12:01:18	JenniferAkemi	hi, i used to use bucardo for replication but then i decided i wanted failover (instead of master-master) so i am working on setting up postgres slot replication with pgpool2 but it seems like it has so many pieces to the config... i've basically got it working but I'm afraid it is not very maintainable. Is there something simpler with same failover / replication result?
2017-01-06 12:01:21	◣	dargains_ (~dargains@187.110.239.75) has quit (Remote host closed the connection)
2017-01-06 12:01:51	◣	dargains (~dargains@187.110.239.75) has quit (Ping timeout: 245 seconds)
2017-01-06 12:01:59	◥	dargains_ (~dargains@187.110.239.75) has joined #postgresql
2017-01-06 12:02:34	◥	HarrisonF (~Harrison@199.201.65.130) has joined #postgresql
2017-01-06 12:02:34	◣	HarrisonF (~Harrison@199.201.65.130) has quit (Changing host)
2017-01-06 12:02:34	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-06 12:02:34	xocolatl	yeah, postgres's native replication
2017-01-06 12:02:43	JenniferAkemi	i'm using that for replication
2017-01-06 12:02:46	JenniferAkemi	and pgpool for the failover
2017-01-06 12:03:12	◣	bf_ (~bf_@xdsl-87-78-214-9.netcologne.de) has quit (Ping timeout: 240 seconds)
2017-01-06 12:03:17	JenniferAkemi	pgpool2 seems complicated
2017-01-06 12:03:34	◥	vuoto (~vuoto@n9pl7d.static.netgroup.dk) has joined #postgresql
2017-01-06 12:03:42	◣	plasticle (~plasticle@cpe-107-15-169-8.nc.res.rr.com) has quit (Quit: WeeChat 1.6)
2017-01-06 12:03:54	JenniferAkemi	i just wondered if there was some other method people use for failover
2017-01-06 12:03:54	◣	justinp (~justinp@2601:480:4103:be10:6897:7b65:98de:7443) has quit (Read error: Network is unreachable)
2017-01-06 12:04:01	◥	plasticle (~plasticle@cpe-107-15-169-8.nc.res.rr.com) has joined #postgresql
2017-01-06 12:04:04	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Client Quit)
2017-01-06 12:04:13	◥	justinp (~justinp@c-68-52-35-52.hsd1.tn.comcast.net) has joined #postgresql
2017-01-06 12:04:13	◥	dur-randir (~dur_randi@2-233-80-109.ip216.fastwebnet.it) has joined #postgresql
2017-01-06 12:04:30	xocolatl	you mean automatic failover?
2017-01-06 12:04:50	◥	totus (~totus@2605:6000:66c0:8800:e5ba:435a:7da3:b46e) has joined #postgresql
2017-01-06 12:04:56	◣	vuoto (~vuoto@n9pl7d.static.netgroup.dk) has quit (Remote host closed the connection)
2017-01-06 12:05:03	◣	prestorium (~davividal@187.95.106.107) has quit (Quit: Leaving)
2017-01-06 12:05:12	xocolatl	most people I know only let that happen once and then go back to manual failover
2017-01-06 12:05:32	◣	deadnull (deadnull@nat/cisco/x-ulzmlcytjbehtnez) has quit (Quit: Bye)
2017-01-06 12:05:36	JenniferAkemi	heh ok
2017-01-06 12:05:45	xocolatl	take a look at repmgr
2017-01-06 12:05:48	xocolatl	??repmgr
2017-01-06 12:05:48	pg_docbot	http://repmgr.org/
2017-01-06 12:05:48	JenniferAkemi	i can understand taht
2017-01-06 12:05:57	◣	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-06 12:06:18	◣	dargains_ (~dargains@187.110.239.75) has quit (Ping timeout: 255 seconds)
2017-01-06 12:06:35	◣	uncleyear (~ian@unaffiliated/uncleyear) has quit (Read error: Connection reset by peer)
2017-01-06 12:07:11	◥	uncleyear (~ian@unaffiliated/uncleyear) has joined #postgresql
2017-01-06 12:07:17	◥	vuoto (~vuoto@n9pl7d.static.netgroup.dk) has joined #postgresql
2017-01-06 12:07:21	◣	retrospectacus (~adama@199.85.226.242) has left #postgresql
2017-01-06 12:08:12	◣	fatdragon (~fatdragon@cpe-107-184-105-188.socal.res.rr.com) has quit
2017-01-06 12:08:27	◣	justatheory (~justatheo@74.121.28.6) has quit (Quit: justatheory)
2017-01-06 12:09:49	◥	HarrisonF (~Harrison@199.201.65.130) has joined #postgresql
2017-01-06 12:09:49	◣	HarrisonF (~Harrison@199.201.65.130) has quit (Changing host)
2017-01-06 12:09:49	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-06 12:10:11	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 12:10:26	⚡	robink_ is now known as robink
2017-01-06 12:10:28	◣	marcdel (~marcdel@198.8.80.167) has quit (Ping timeout: 258 seconds)
2017-01-06 12:10:57	◣	saurabhj_ (~saurabhjh@182.64.53.83) has quit (Remote host closed the connection)
2017-01-06 12:11:39	◥	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has joined #postgresql
2017-01-06 12:14:15	◥	marc_v92 (~marc_v92@unaffiliated/marc-v92/x-6202358) has joined #postgresql
2017-01-06 12:14:24	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 246 seconds)
2017-01-06 12:15:16	◥	velix (~Velix@x4e304c3d.dyn.telefonica.de) has joined #postgresql
2017-01-06 12:15:30	velix	How can I make PGSQL parse Unicode in ASCII correctly? select '{"addr_city": "Costa d\\&apos;en Blanes"}'::jsonb->>'addr_city';
2017-01-06 12:18:20	◥	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has joined #postgresql
2017-01-06 12:19:21	◣	filiprem (~filip@188.146.93.107.nat.umts.dynamic.t-mobile.pl) has quit (Ping timeout: 255 seconds)
2017-01-06 12:19:37	linuxhiker	can someone explain this behavior with read_only_transactions: http://pastebin.com/rxMt6zNH
2017-01-06 12:20:30	◥	hahuang61 (~hahuang65@2601:647:4000:d7:9446:f8ac:4b2e:f97c) has joined #postgresql
2017-01-06 12:21:40	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-06 12:22:29	◥	Lucretia (~laguest@pdpc/supporter/active/lucretia) has joined #postgresql
2017-01-06 12:22:38	◥	priidu (~priidu@unaffiliated/priidu) has joined #postgresql
2017-01-06 12:22:49	◥	filiprem (~filip@188.146.93.107.nat.umts.dynamic.t-mobile.pl) has joined #postgresql
2017-01-06 12:22:49	johto	perhaps you wanted default_transaction_read_only?
2017-01-06 12:23:02	linuxhiker	oh interesting
2017-01-06 12:23:10	Lucretia	hi, after "create extension citext;" how do i let my mailserver (db) / mailuser (user) access it? \dx doesn't show it.
2017-01-06 12:23:26	linuxhiker	bingo
2017-01-06 12:23:30	linuxhiker	johto: thanks
2017-01-06 12:24:04	Snow-Man	Lucretia: you have to create it in the database you want it in.
2017-01-06 12:24:36	Snow-Man	Lucretia: At first blush, I'm guessing you created it in the 'postgres' database, but you have some other database that your mailserver uses.
2017-01-06 12:24:49	◣	hahuang61 (~hahuang65@2601:647:4000:d7:9446:f8ac:4b2e:f97c) has quit (Ping timeout: 240 seconds)
2017-01-06 12:25:29	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 12:25:59	Lucretia	I'm still learning pg, not done it since uni. so just trying a local test setup first. but yeah, create database mailserver owner mailuser;
2017-01-06 12:26:01	◥	marcdel (~marcdel@198.8.80.74) has joined #postgresql
2017-01-06 12:26:04	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2017-01-06 12:26:05	◥	brentd_ (~brentd@62.145.29.194) has joined #postgresql
2017-01-06 12:26:09	◣	brentd (~brentd@62.145.29.194) has quit (Read error: No route to host)
2017-01-06 12:26:27	Lucretia	Snow-Man: yeah, citext was in the public schema
2017-01-06 12:26:43	◣	Slashman (~Slash@cosium-152-18.fib.nerim.net) has quit (Quit: Leaving)
2017-01-06 12:27:00	◣	Xgc (~Xgc@p-68-237-136-245.dsl1.rtr.chat.fpma.frpt.net) has quit (Ping timeout: 255 seconds)
2017-01-06 12:27:25	Snow-Man	Lucretia: right, so you need to connect to the 'mailserver' database and run the 'create extension citext;' there.
2017-01-06 12:27:44	◥	androot (~androot@44-156-255-130.dynamic.t-mont.net.pl) has joined #postgresql
2017-01-06 12:27:53	◣	JordiGH (~jordi@octave/developer/JordiGH) has left #postgresql ("Leaving")
2017-01-06 12:28:11	Lucretia	right, but mailuser then needs to be a superuser. trying to make sure this is secure as i can.
2017-01-06 12:28:49	Snow-Man	Lucretia: nono, just log in as 'postgres' to the 'mailserver' database
2017-01-06 12:29:09	◥	merzo (~merzo@93-60-92-178.pool.ukrtel.net) has joined #postgresql
2017-01-06 12:29:17	◥	Jungle-boogie (~boogie@unaffiliated/jungle-boogie) has joined #postgresql
2017-01-06 12:29:32	Lucretia	ah
2017-01-06 12:30:08	Lucretia	Snow-Man: thanks!
2017-01-06 12:30:24	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 248 seconds)
2017-01-06 12:30:24	Snow-Man	np
2017-01-06 12:30:36	◣	marcdel (~marcdel@198.8.80.74) has quit (Ping timeout: 245 seconds)
2017-01-06 12:30:58	◥	ovnicraft_ (~ovnicraft@181.211.39.124) has joined #postgresql
2017-01-06 12:31:45	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 12:31:45	◣	marc_v92 (~marc_v92@unaffiliated/marc-v92/x-6202358) has quit (Quit: Probably either lunch time or home time.)
2017-01-06 12:31:51	G_SabinoMullane	velix: Not sure what you are asking. Just put the unicode in verbatim. If you need apostrophes, do: select $${"addr_city": "Costa d'en Blanes"}'::jsonb->>'addr_city'$$;
2017-01-06 12:32:49	◣	euxneks (~euxneks@unaffiliated/euxneks) has quit (Quit: euxneks)
2017-01-06 12:33:52	◥	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has joined #postgresql
2017-01-06 12:34:06	◣	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-06 12:34:45	G_SabinoMullane	JenniferAkemi: Can look at things like Pacemaker too
2017-01-06 12:35:52	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 246 seconds)
2017-01-06 12:35:52	JenniferAkemi	G_SabinoMullane: thanks. do you have any experience with http://dalibo.github.io/PAF/ ?
2017-01-06 12:38:21	◥	hahuang61 (~hahuang65@2601:647:4000:d7:9446:f8ac:4b2e:f97c) has joined #postgresql
2017-01-06 12:38:58	G_SabinoMullane	No, but I've used the underlying technology (pacemaker/corosync). Looks worth a try: dalibo are good folks
2017-01-06 12:39:11	◥	justatheory (~justatheo@74.121.28.6) has joined #postgresql
2017-01-06 12:41:11	⚡	buu_ is now known as buu
2017-01-06 12:41:35	◣	echlebek (~echlebek@S010684948cbf5873.vc.shawcable.net) has quit (Remote host closed the connection)
2017-01-06 12:42:42	◣	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has quit (Read error: Connection reset by peer)
2017-01-06 12:43:38	◥	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has joined #postgresql
2017-01-06 12:46:17	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 12:48:06	◥	StoneCypher (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has joined #postgresql
2017-01-06 12:48:52	◣	vuoto (~vuoto@n9pl7d.static.netgroup.dk) has quit (Remote host closed the connection)
2017-01-06 12:49:25	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-06 12:49:59	saper	G_SabinoMullane: :) long time no see
2017-01-06 12:50:20	xocolatl	JenniferAkemi: did you look at repmgr?
2017-01-06 12:51:09	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 246 seconds)
2017-01-06 12:52:16	JenniferAkemi	xocolatl: I'm installing it now
2017-01-06 12:52:42	JenniferAkemi	xocolatl: looks like it doesnt' do any failover of an IP or anything but will make my config much simpler
2017-01-06 12:52:53	JenniferAkemi	for all the nodes of the cluster
2017-01-06 12:52:57	JenniferAkemi	(at least i hope so)
2017-01-06 12:55:26	◣	Levure (~quassel@91.181.239.93) has quit (Remote host closed the connection)
2017-01-06 12:55:46	xocolatl	JenniferAkemi: it calls a script that you write to do whatever non-postgres stuff you need to do at failover
2017-01-06 12:56:22	◣	ovnicraft_ (~ovnicraft@181.211.39.124) has quit (Quit: ovnicraft_)
2017-01-06 12:56:38	G_SabinoMullane	saper: Hiya. Just looking over pgwiki the other day
2017-01-06 12:57:05	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 12:57:44	JenniferAkemi	xocolatl: ok
2017-01-06 12:58:21	JenniferAkemi	xocolatl: so i can put some ip command sin there
2017-01-06 12:58:48	xocolatl	you can put whatever you want in there
2017-01-06 12:59:24	◥	asymetrixs (~asymetrix@x4db9c4c2.dyn.telefonica.de) has joined #postgresql
2017-01-06 12:59:28	saper	G_SabinoMullane: I was honored to present the state of MediaWiki PostgreSQL support on pgconf.eu in Tallinn in November
2017-01-06 12:59:52	justinp	anyone have any good tutorials for creating a db with no permissions and adding permissions for users back slowly to lock it down?
2017-01-06 13:00:08	◥	dwsr (uid185230@gateway/web/irccloud.com/x-sgnmeuloghinexmm) has joined #postgresql
2017-01-06 13:00:11	justinp	well to keep it locked down.
2017-01-06 13:00:15	◣	cleme1mp (mclement@nat/ibm/x-qnonotrngmmsnteu) has quit (Quit: WeeChat 1.6)
2017-01-06 13:00:36	◣	metaresolve (~metaresol@pool-100-15-230-64.washdc.fios.verizon.net) has quit (Ping timeout: 247 seconds)
2017-01-06 13:01:18	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 246 seconds)
2017-01-06 13:01:28	◣	banditron (~banditron@kohana/developer/banditron) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-06 13:02:17	◣	_djbkd (~djbkd@135.84.132.218) has quit (Remote host closed the connection)
2017-01-06 13:02:19	◥	aprilliac (~aprilliac@174.58.115.36) has joined #postgresql
2017-01-06 13:02:46	◥	_djbkd (~djbkd@135.84.132.218) has joined #postgresql
2017-01-06 13:03:31	G_SabinoMullane	saper: So what *is* the state of Postgres support? :)
2017-01-06 13:03:43	lluad	Yeah, I was just thinking the same thing. :)
2017-01-06 13:04:32	◥	banditron (~banditron@kohana/developer/banditron) has joined #postgresql
2017-01-06 13:05:13	◣	androot (~androot@44-156-255-130.dynamic.t-mont.net.pl) has quit (Quit: Bye :-))
2017-01-06 13:07:29	◣	_djbkd (~djbkd@135.84.132.218) has quit (Ping timeout: 255 seconds)
2017-01-06 13:07:46	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 13:07:51	◣	RickDeckard (~tburringt@cpe-68-174-144-3.nyc.res.rr.com) has quit (Quit: later)
2017-01-06 13:08:14	◥	Coldblackice (~anonz@unaffiliated/coldblackice) has joined #postgresql
2017-01-06 13:08:27	◣	jayjo (~jayjo@unaffiliated/jayjo) has quit (Quit: Lost terminal)
2017-01-06 13:08:36	◣	Coldblackice_ (~anonz@unaffiliated/coldblackice) has quit (Ping timeout: 248 seconds)
2017-01-06 13:09:09	StoneCypher	i'd like to ask a fairly stupid question
2017-01-06 13:09:22	Snow-Man	ask, don't ask to ask. :)
2017-01-06 13:09:34	StoneCypher	is it more difficult to implement stored procedures than to just run the query on request?  note that i'm not saying "to implement them well
2017-01-06 13:09:42	StoneCypher	i ask because redshift doesn't have stored procedures at all
2017-01-06 13:09:44	StoneCypher	and i'm kind of confused why
2017-01-06 13:10:03	johto	it's more work
2017-01-06 13:10:04	xocolatl	because redshit sucks
2017-01-06 13:10:18	Snow-Man	that's not a stupid quesiton, but it is rather off-topic for this channel.
2017-01-06 13:10:20	StoneCypher	johto: why
2017-01-06 13:10:31	johto	in order to make stored procedures work, you have to first do everything ad hoc queries need and then add the stuff stored procedures need, no?
2017-01-06 13:10:48	StoneCypher	i'm not aware of stored procedures needing more than what ad hoc queries have.  what am i missing?
2017-01-06 13:10:53	ningu	StoneCypher: stored procedures aren't just in SQL
2017-01-06 13:10:57	▷	Snow-Man blinks
2017-01-06 13:11:00	Snow-Man	they need a lot more
2017-01-06 13:11:08	StoneCypher	ningu: like how
2017-01-06 13:11:17	ningu	StoneCypher: pl/pgsql, perl, python, ...
2017-01-06 13:11:28	StoneCypher	i think i'm being misunderstood.
2017-01-06 13:11:34	Snow-Man	StoneCypher: Go look at src/pl/plpgsql/src/
2017-01-06 13:11:40	StoneCypher	i didn't mean "stored procedures plus all the extra stuff postgres does"
2017-01-06 13:11:45	StoneCypher	i meant just stored procedures according to sql
2017-01-06 13:11:50	StoneCypher	that doesn't cover eg python
2017-01-06 13:11:52	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 240 seconds)
2017-01-06 13:11:52	StoneCypher	not asking about udfs
2017-01-06 13:12:00	ningu	StoneCypher: so then say "stored procedures in sql"
2017-01-06 13:12:07	ningu	because in pg there are a lot of procedural languages
2017-01-06 13:12:26	Snow-Man	StoneCypher: UDFs are 'user defined functions', just to be clear, that's not language-specific
2017-01-06 13:12:27	▷	StoneCypher shrugs.  "Okay.  Stored procedures as in SQL."
2017-01-06 13:12:29	johto	even if they're SQL only, it's still more work, which should be apparent
2017-01-06 13:12:35	◣	Guest32 (~textual@vic.xmatters.com) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-06 13:12:44	StoneCypher	johto: well, i'm asking for what i'm missing
2017-01-06 13:13:04	StoneCypher	looks like i'm going to get a bunch of "this should be obvious" and "read the source" instead of answers though :/
2017-01-06 13:13:04	lluad	Stored procedures written in SQL aren't *terribly* vital. If I were writing a half-assed database system that only implemented the bare minimum to create MVP, stored SQL procedures wouldn't be on my list.
2017-01-06 13:13:08	ningu	StoneCypher: for one thing they can be declared as immutable or stable
2017-01-06 13:13:12	⚡	zap is now known as Guest14462
2017-01-06 13:13:13	StoneCypher	lluad: they're extremely important to me
2017-01-06 13:13:17	ningu	which is a hint to the optimizer
2017-01-06 13:13:19	Snow-Man	StoneCypher: I think you need to ask Amazon, not here.
2017-01-06 13:13:20	ningu	er
2017-01-06 13:13:20	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 13:13:20	ningu	planner
2017-01-06 13:13:32	StoneCypher	ningu: i'm not worried about planner hints.  those are extensions and hints can be discarded with no loss of functionality
2017-01-06 13:13:38	StoneCypher	Snow-Man: no thanks
2017-01-06 13:13:47	lluad	StoneCypher: Then maybe you don't want to use a half-assed MVP as your database. :)
2017-01-06 13:13:47	ningu	StoneCypher: performance doesn't matter?
2017-01-06 13:13:48	Snow-Man	StoneCypher: This channel is for PostgreSQL, not about why Amazon did or didn't implement something for a commercial service they offer.
2017-01-06 13:13:58	StoneCypher	Snow-Man: are you an op?
2017-01-06 13:14:09	◥	th000 (~thousand@78.63.180.168) has joined #postgresql
2017-01-06 13:14:16	xocolatl	does it matter?
2017-01-06 13:14:36	ningu	it's off-topic in any case. if you want to ask about the difference between SQL stored procedures and inline SQL, sure, that's on topic
2017-01-06 13:14:39	◥	veegee (~veegee@107.161.4.218) has joined #postgresql
2017-01-06 13:14:39	StoneCypher	ningu: sure performance is nice, but there are other reasons to want them too, and i'm just curious whether this can be done with no loss of optional functionality easily
2017-01-06 13:14:39	ningu	redshift is not postgresql
2017-01-06 13:14:50	StoneCypher	i didn't ask about redshift
2017-01-06 13:15:00	StoneCypher	if we can cut the meta please, i already asked the question you're encouraging me to ask
2017-01-06 13:15:17	lluad	It is more work to implement them than not implement them, yes.
2017-01-06 13:15:19	veegee	Hi all, quick question: if I have a primary key with three columns like    PRIMARY KEY (col1, col2, col3)   and I query on col1 and col3 only, is it going to still use the index appropriately?
2017-01-06 13:15:20	RhodiumToad	I suspect that the issue is that redshift presumably gutted or completely replaced the pg executor in order to do their parallel stuff
2017-01-06 13:15:21	StoneCypher	my actual question is "is there anything that is required to fit the sql definition of a stored procedure other than to run an ad hoc query that has been stored"
2017-01-06 13:15:27	StoneCypher	lluad: that's not what i asked.
2017-01-06 13:15:33	ningu	well, you said you were confused why redshift doesn't have stored procedures, so it sounded like you were asking about redshift
2017-01-06 13:15:38	Snow-Man	StoneCypher: the answer is 'yes'
2017-01-06 13:15:40	StoneCypher	ningu: i did not actually say that
2017-01-06 13:15:53	ningu	StoneCypher: um, the scrollback is right there for everyone to see
2017-01-06 13:15:57	StoneCypher	well, go see it
2017-01-06 13:16:00	RhodiumToad	StoneCypher: the way that pg works, yes, because pg doesn't have "procedures" it has "functions", which are called from within the executor
2017-01-06 13:16:16	StoneCypher	RhodiumToad: i'm asking about the sql definition, not postgres' private approach, though
2017-01-06 13:16:34	◥	the_rat (~the_rat@2a02:8109:8380:3e8c:e51a:fb22:783a:5447) has joined #postgresql
2017-01-06 13:16:34	ningu	is there a generic sql definition?
2017-01-06 13:16:35	RhodiumToad	StoneCypher: pg doesn't implement that and never has
2017-01-06 13:16:37	StoneCypher	yes.
2017-01-06 13:16:38	lluad	Postgresql doesn't implement sql standard stored procedures.
2017-01-06 13:16:40	StoneCypher	RhodiumToad: oh.
2017-01-06 13:16:44	▷	StoneCypher was unaware of that.
2017-01-06 13:16:51	Snow-Man	There's reasons for that also
2017-01-06 13:17:04	◣	dionysus69 (~Thunderbi@unaffiliated/dionysus69) has quit (Quit: dionysus69)
2017-01-06 13:17:05	Snow-Man	which has a great deal to do with transactional DDL
2017-01-06 13:17:21	RhodiumToad	also PSM syntax is quite ugly
2017-01-06 13:17:22	xocolatl	hopefully we'll get them RSN
2017-01-06 13:17:24	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 246 seconds)
2017-01-06 13:17:30	◥	dionysus69 (~Thunderbi@unaffiliated/dionysus69) has joined #postgresql
2017-01-06 13:17:32	sobel	you could always implement pl/PL if you wanted, but...
2017-01-06 13:17:41	StoneCypher	are you saying it doesn't do stored procedures at all, or that it does but they aren't what sql calls that
2017-01-06 13:17:43	ningu	er, pl/PL?
2017-01-06 13:17:55	ningu	StoneCypher: they are stored functions, not procedures
2017-01-06 13:18:06	ningu	you can't do transactions inside them, for example
2017-01-06 13:18:11	StoneCypher	oh.
2017-01-06 13:18:14	StoneCypher	well.  gross.
2017-01-06 13:18:15	RhodiumToad	StoneCypher: pg implements something which is not quite the same as anything in the SQL spec
2017-01-06 13:18:19	StoneCypher	RhodiumToad: gotcha.
2017-01-06 13:18:23	lluad	It doesn't do stored procedures at all. It does do quite nice functions, which can be used for many of the same things, but not all of them.
2017-01-06 13:18:36	Snow-Man	functions are quite handy, though it would be nice to have procedures that can do transaction management.
2017-01-06 13:18:49	Snow-Man	There are ways to 'cheat' a bit tho.
2017-01-06 13:19:01	StoneCypher	are stored functions able to return row sets in pg, or do they return scalars like in mysql?  (now just asking out of curiosity)
2017-01-06 13:19:06	Snow-Man	In particular, you can use dblink in your function to start another PG connection and do whatever you want there.
2017-01-06 13:19:07	RhodiumToad	pg allows you to do functions with side effects
2017-01-06 13:19:15	saper	G_SabinoMullane: http://pgbugs.me/ :)
2017-01-06 13:19:17	ningu	StoneCypher: they can return either
2017-01-06 13:19:25	Snow-Man	StoneCypher: functions can be scalar or set-returning
2017-01-06 13:19:25	RhodiumToad	functions can return either scalars, single composite rows, or sets of rows
2017-01-06 13:19:25	StoneCypher	huh.
2017-01-06 13:19:46	▷	StoneCypher shrugs.  "okay, strange, but, whatever."
2017-01-06 13:19:47	sobel	they're pretty cool.
2017-01-06 13:19:58	StoneCypher	RhodiumToad: lluad: ningu: thanks for actual answers
2017-01-06 13:20:08	RhodiumToad	with the exception of transaction management,  select myprocedure(stuff);  allows you to do most of what other systems allow in "procedures"
2017-01-06 13:20:09	saper	G_SabinoMullane: recently even the installer was broke but Paladox fixed it,
2017-01-06 13:20:19	◣	totus (~totus@2605:6000:66c0:8800:e5ba:435a:7da3:b46e) has quit (Quit: Leaving.)
2017-01-06 13:20:22	◣	yieldsfalsehood (~elliot@pool-100-11-87-225.phlapa.fios.verizon.net) has quit (Remote host closed the connection)
2017-01-06 13:20:29	Snow-Man	well, you also can't run commands that "can't be run in a transaction", eg vacuum
2017-01-06 13:20:29	StoneCypher	RhodiumToad: is the reason to call them functions just to get away from people like me having expectations about what they do?
2017-01-06 13:20:32	Snow-Man	which is a bit annoying.
2017-01-06 13:20:34	◥	arezki (~arezki@lon92-h02-176-149-62-139.dsl.sta.abo.bbox.fr) has joined #postgresql
2017-01-06 13:20:54	xocolatl	Snow-Man: I have a patch for that
2017-01-06 13:20:56	RhodiumToad	StoneCypher: from an implementation point of view they are functions
2017-01-06 13:20:59	sobel	StoneCypher: you might have a better time asking broader questions about what you're trying to do or achieve, to get an understanding of how postgresql works
2017-01-06 13:21:05	Snow-Man	xocolatl: I have dblink, for when I need it
2017-01-06 13:21:16	RhodiumToad	StoneCypher: they return a result; even functions declared as returning void do actually return a datum of type "void"
2017-01-06 13:21:43	Snow-Man	Sadly, you can't make a DO block return anything. :/
2017-01-06 13:21:56	xocolatl	raise notice
2017-01-06 13:21:59	RhodiumToad	a DO block can open a cursor and leave it open, which I've used sometimes
2017-01-06 13:22:04	ningu	afaik the technique definition of procedure vs. function (in general) is whether anything is returned
2017-01-06 13:22:04	saper	G_SabinoMullane: https://www.postgresql.eu/events/schedule/pgconfeu2016/session/1323-battleground-keeping-postgresql-port-alive-in-a-mysql-dominated-environment-mediawiki/ will post slides soon to the postgresql wiki and to http://pgwiki.org (feel free to join there)
2017-01-06 13:22:07	ningu	technical*
2017-01-06 13:22:13	RhodiumToad	begin; do $$ stuff; $$; fetch all from mycursor; commit;
2017-01-06 13:22:17	ningu	not sure why SQL settled on "procedure"
2017-01-06 13:22:33	xocolatl	RhodiumToad: interesting
2017-01-06 13:22:55	◥	pgn00b (49dfa7a5@gateway/web/freenode/ip.73.223.167.165) has joined #postgresql
2017-01-06 13:22:57	G_SabinoMullane	Heh, battleground is a good way to describe it. I have the battle scars to prove it!
2017-01-06 13:23:01	Snow-Man	Yeah, I've used cursors too, but, ugh, a bit awkward.
2017-01-06 13:23:11	xocolatl	can you put whatever you want into a cursor?  I thought it was just a query
2017-01-06 13:23:28	RhodiumToad	ningu: there are several possible ways to define the difference between a procedure and a function
2017-01-06 13:23:43	G_SabinoMullane	I need to jump back into that at some point. The gerrit/etc. learning curve usually prevents casual updates.
2017-01-06 13:23:55	RhodiumToad	xocolatl: yes, but the query can be  select 'foo';  or even  select * from unnest(...);
2017-01-06 13:24:03	saper	G_SabinoMullane: yeah but things got better, once I posted to wikitech-l that I am going to present they have created a very nice PostgreSQL Phabricator project and cleaned it up a bit right away
2017-01-06 13:24:06	◥	albertus1 (~seb@x4e32df65.dyn.telefonica.de) has joined #postgresql
2017-01-06 13:24:21	pgn00b	Does pg_column_size only include space used in the relevant table, or does it include e.g. the space used in the table + the size of the compressed toast value?
2017-01-06 13:24:25	G_SabinoMullane	saper: I saw all that reassigning a while back
2017-01-06 13:24:34	pgn00b	er, in the row of the table.
2017-01-06 13:24:36	RhodiumToad	pgn00b: it includes the compressed toast size
2017-01-06 13:24:53	RhodiumToad	pgn00b: but only when called for individual columns, not for the whole-row var
2017-01-06 13:25:06	G_SabinoMullane	saper: Been looking at the API code lately. That's an unholy mess of warnings and workarounds for MySQL. Quite embarassing really (for Maria/MySQL)
2017-01-06 13:25:14	RhodiumToad	pgn00b: (I think, I might have to check)
2017-01-06 13:25:36	◣	eeriegeek (~eeriegeek@73.31.123.0) has quit (Quit: Leaving.)
2017-01-06 13:25:38	pgn00b	@RhodiumToad is there a way to get only the table bytes used
2017-01-06 13:26:04	◣	JenniferAkemi (~jennifera@CPEf0f249d14d93-CMf0f249d14d90.cpe.net.cable.rogers.com) has quit (Remote host closed the connection)
2017-01-06 13:26:22	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:653f:151d:5d0d:afd) has quit (Remote host closed the connection)
2017-01-06 13:26:28	pgn00b	e.g. I think octet_length will give me full uncompressed, what if I just want to know say, the size of the relation resident on disk (e.g., to estimate IO cost of scanning X rows?)
2017-01-06 13:26:36	saper	G_SabinoMullane: folk at the presentation were interested how MediaWiki does appliacation-level replication lag handling (cool stuff), one guy suggested using one of the PHP ORMs to handle metadata changes. I haven't checked API recently, didn't know it's that bad.
2017-01-06 13:27:33	StoneCypher	RhodiumToad: okay.  interesting
2017-01-06 13:27:38	RhodiumToad	pgn00b: currently there's no good way to get that other than using pageinspect
2017-01-06 13:27:38	StoneCypher	RhodiumToad: thanks for taking the time
2017-01-06 13:27:48	pgn00b	RhodiumToad: okay, thanks
2017-01-06 13:27:53	◣	th000 (~thousand@78.63.180.168) has quit (Ping timeout: 258 seconds)
2017-01-06 13:28:01	pgn00b	RhodiumToad: what about determining whether or not a row has a toasted value?
2017-01-06 13:28:27	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 13:28:30	saper	G_SabinoMullane: imho things will not get better if folk running non-trivial PostgreSQL installs will run MediaWIki on MySQL (like OSM does:). I haven't heard of anyone running MW on any form of PG replication for example.
2017-01-06 13:28:44	RhodiumToad	pgn00b: not that I know of
2017-01-06 13:28:54	pgn00b	okay, thanks for your help!
2017-01-06 13:29:08	RhodiumToad	what's the pg wiki running on?
2017-01-06 13:29:11	G_SabinoMullane	saper: I've toyed with tha.
2017-01-06 13:29:22	G_SabinoMullane	s/\./t./
2017-01-06 13:29:52	◣	linuxgurugamer (ad3dbc56@gateway/web/freenode/ip.173.61.188.86) has quit (Quit: Page closed)
2017-01-06 13:30:12	◣	spearthistle (~strawberr@213.205.252.33) has quit (Ping timeout: 256 seconds)
2017-01-06 13:30:51	G_SabinoMullane	saper: api not so much bad as amusing. See: http://pastie.org/10988359
2017-01-06 13:30:58	saper	RhodiumToad: It's oldish MediaWiki on PostgreSQL 9.2.19 https://wiki.postgresql.org/wiki/Special:Version In Tallin I gave them a patch to update the skin to the recent MediaWiki but that hasn't landed yet.
2017-01-06 13:31:54	◣	b00tstr4p (~textual@181.211.39.124) has quit (Quit: My iMac has gone to sleep. ZZZzzz…)
2017-01-06 13:31:55	Snow-Man	pgn00b: uh, why isn't pg_table_size() what you want?
2017-01-06 13:32:11	mastermind	saper: yeah - I know I suck :/
2017-01-06 13:32:14	saper	G_SabinoMullane:  Error 522 Ray ID: 31d2468ef49d2732 • 2017-01-06 21:32:04 UTC
2017-01-06 13:32:19	Snow-Man	pgn00b: I mean, we aren't going to de-toast the toasted value unless you actually ask for it..
2017-01-06 13:32:27	saper	mastermind: oh no worries. I can help you with that :)
2017-01-06 13:32:40	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:653f:151d:5d0d:afd) has joined #postgresql
2017-01-06 13:32:40	RhodiumToad	pg_table_size() includes toast
2017-01-06 13:32:50	Snow-Man	meh, whichever one doesn't
2017-01-06 13:32:51	mastermind	saper: bought a house recently and been swamped with non-pg related work due to this :/
2017-01-06 13:32:59	pgn00b	Snow-Man: I think I want per row info?
2017-01-06 13:33:01	RhodiumToad	pg_relation_size() is just the base table, but I was assuming from the original question that they wanted per-row stats?
2017-01-06 13:33:09	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 246 seconds)
2017-01-06 13:33:10	G_SabinoMullane	saper: Huh?
2017-01-06 13:33:16	pgn00b	my read of pg_table_size is that it provides sum over orws?
2017-01-06 13:33:21	pgn00b	I could obviously be wrong!
2017-01-06 13:33:23	RhodiumToad	there's pgstattuple, as well, of course
2017-01-06 13:33:32	Snow-Man	pgn00b: if you have an existing table, you could look at pg_relation_size() and then divide it by the number of rows to get your average per-row i/o cost
2017-01-06 13:33:43	RhodiumToad	pg_table_size and pg_relation_size measure the actual file size including any free space
2017-01-06 13:33:48	Snow-Man	pgn00b: obviously, things change if you're actually pulling out the toasted values
2017-01-06 13:33:51	pgn00b	Snow-Man: yeah makes sense I guess I was interested in one level more statistics
2017-01-06 13:33:55	saper	mastermind: congratulations! a new house is nice!
2017-01-06 13:33:56	pgn00b	like, what's the distribution
2017-01-06 13:34:02	◥	ramfjord_ (~tramfjord@12.202.171.244) has joined #postgresql
2017-01-06 13:34:03	pgn00b	do 90% of my rows overflow 2K?
2017-01-06 13:34:09	pgn00b	or do I just have a few jumbo rows
2017-01-06 13:34:14	Snow-Man	RhodiumToad: still have to scan through the free space on a seqscan
2017-01-06 13:34:16	saper	G_SabinoMullane: pastie down for me :/
2017-01-06 13:34:22	◣	rajivr (~rajivr@157.49.207.142) has quit (Ping timeout: 245 seconds)
2017-01-06 13:34:35	pgn00b	If my question is not well founded I am interested in that feedback as well!
2017-01-06 13:34:36	mastermind	saper: thanks - but there is some reconstruction to do, so it is also a shitload of work...
2017-01-06 13:34:37	saper	G_SabinoMullane: got it on reload now, thanks
2017-01-06 13:35:15	RhodiumToad	pastie responds to me about one time in three, reloading enough times usually helps
2017-01-06 13:35:24	pgn00b	I have fat rows and am wondering whether sloppy varchars / toast / etc is causing me extraneous IO
2017-01-06 13:35:36	saper	mastermind: I can imagine a nice flow of €€€ for that :/
2017-01-06 13:35:38	G_SabinoMullane	saper: (and those are just the ones that were so bad that someone actually documented it!)
2017-01-06 13:35:46	◥	TheWhip (~thewhip@106.51.141.119) has joined #postgresql
2017-01-06 13:35:51	pgn00b	and was hoping for cheaper experiments than rebuilding tables with the columns dropped
2017-01-06 13:35:57	◣	ramfjord (~tramfjord@12.202.171.244) has quit (Ping timeout: 258 seconds)
2017-01-06 13:36:00	saper	G_SabinoMullane: even domas admits mysql has no real optimizer
2017-01-06 13:36:17	mastermind	saper: thanks for reminding me...
2017-01-06 13:36:18	Snow-Man	pgn00b: well, you could get a histogram of the length of the variable-length columns by scanning the table with an appropriate query...
2017-01-06 13:36:37	saper	mastermind: always at your service :>
2017-01-06 13:36:37	Snow-Man	width_bucket() can be helpful
2017-01-06 13:36:40	◣	mizu_no_oto_work (~textual@c-50-177-170-9.hsd1.ma.comcast.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-06 13:36:41	◥	pjy (~pjy@2001:470:8:f7a:6178:38d3:f1dc:bb97) has joined #postgresql
2017-01-06 13:36:50	RhodiumToad	Snow-Man: but you don't get info about toast usage that way, really
2017-01-06 13:37:24	mastermind	saper: seriously - I had actually reserved some time to integrate your patch into the wiki today but will have to defer that to the weekend :/
2017-01-06 13:37:25	Snow-Man	RhodiumToad: no, not directly, but if you see stuff over 8k, good bet it's toasted, heh.
2017-01-06 13:37:29	pgn00b	k  thanks!
2017-01-06 13:37:34	RhodiumToad	Snow-Man: it used to be that you could use pg_column_size on the whole-row var to get just the main-table size of the row, but a bugfix scotched that a while back
2017-01-06 13:37:49	Snow-Man	yeah. :/
2017-01-06 13:37:55	mastermind	and I actually feel bad about not coming back to you...
2017-01-06 13:38:00	pgn00b	I iwll maybe play around and get back to you
2017-01-06 13:38:03	Snow-Man	I'd like a function to give me if a given value is toasted, and better, what it's chunk_id is...
2017-01-06 13:38:14	RhodiumToad	we could really do with new functions to supplement pg_column_size
2017-01-06 13:38:18	saper	mastermind: if you give me the editor and maybe sysop flag I can put the change in the MediaWiki:Common.css instead, this way you can install stock MediaWiki with no custom patches from me
2017-01-06 13:38:19	pgn00b	Snow-Man: yes please!
2017-01-06 13:38:20	Snow-Man	agreed.
2017-01-06 13:38:27	◥	blackmesa (~blackmesa@aftr-37-201-227-31.unity-media.net) has joined #postgresql
2017-01-06 13:38:34	◥	rajivr (~rajivr@157.49.207.142) has joined #postgresql
2017-01-06 13:38:46	Snow-Man	pgn00b: haha, yeah..  I haven't looked at how hard it'd be, but jumping through various hoops w/ pageinspect is a bit painful.
2017-01-06 13:38:49	RhodiumToad	pgn00b: it wouldn't be hard to write such a thing as a plugin
2017-01-06 13:39:00	Snow-Man	the 9.6 pageinspect makes it a *bit* easier, but still
2017-01-06 13:39:04	saper	mastermind: and there will no "custom skin", just custom changes to the monobook skin (which should be set to default)
2017-01-06 13:39:06	RhodiumToad	pageinspect doesn't have anything to parse rows, really
2017-01-06 13:39:18	saper	mastermind: also, you can set me up on th beta wiki
2017-01-06 13:39:21	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 13:39:39	Snow-Man	RhodiumToad: well, with tuple_data_split() you can pull out just a particular column
2017-01-06 13:39:57	Snow-Man	RhodiumToad: That doesn't tell you if it's toasted or not tho, annoyingly.
2017-01-06 13:40:14	mastermind	saper: well we really need to upgrade the mw version as well and that will also require some work on the community auth plugin (as well as some other stuff) and I need to find some time for it
2017-01-06 13:40:23	Snow-Man	but you can get the chunk_id after you convert the bytea value over to a bit(32) and cast it to an int, heh.
2017-01-06 13:40:41	RhodiumToad	cast to an oid, surely?
2017-01-06 13:40:45	Snow-Man	err, yea
2017-01-06 13:40:58	G_SabinoMullane	mastermind: You have a test box? I could work on that from time to time. Been doing fair bit of MW extension work lately
2017-01-06 13:40:59	Snow-Man	assuming you can do that?
2017-01-06 13:41:07	◣	_ChauffeR (~simone@unaffiliated/chauffer) has quit (Remote host closed the connection)
2017-01-06 13:41:12	◣	justatheory (~justatheo@74.121.28.6) has quit (Quit: justatheory)
2017-01-06 13:41:15	saper	auth plugin seemed fine to me, it is really straightforward. No worries, I have sometime until Monday to clean up my pg projects, if you happen to give me some tools to work on it I can help, otherwise - no worries :)
2017-01-06 13:41:30	◣	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has quit (Quit: Lost terminal)
2017-01-06 13:41:33	RhodiumToad	Snow-Man: I guess you have to do ::integer::oid
2017-01-06 13:41:52	Snow-Man	yeah
2017-01-06 13:41:58	RhodiumToad	Snow-Man: or just hope all your chunk ids are <2^31
2017-01-06 13:42:01	Snow-Man	I was messing with it this morning, hwh.
2017-01-06 13:42:03	Snow-Man	heh
2017-01-06 13:42:14	Snow-Man	RhodiumToad: well, they were in this case. :)
2017-01-06 13:42:23	Snow-Man	we're up at ~230M on the buildfarm database
2017-01-06 13:42:29	◣	blackmesa (~blackmesa@aftr-37-201-227-31.unity-media.net) has quit (Client Quit)
2017-01-06 13:42:37	◥	ningu (~unamuno@76.77.184.33) has joined #postgresql
2017-01-06 13:42:43	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:653f:151d:5d0d:afd) has quit (Remote host closed the connection)
2017-01-06 13:42:48	saper	G_SabinoMullane: https://git.postgresql.org/gitweb/?p=pgweb.git;a=tree;f=tools/communityauth/sample/php/mediawiki;hb=HEAD this is the auth plugin, really really simple, not really an MW extension
2017-01-06 13:42:53	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2017-01-06 13:43:14	Snow-Man	anyway, was just playing around with it today trying to see if I could figure out which TOAST'd values were at the end of the big toast relation
2017-01-06 13:43:26	saper	G_SabinoMullane: I'd say it's a rewrite hack, but it should work with newer MediaWikis I suppose
2017-01-06 13:43:33	◥	justatheory (~justatheo@74.121.28.6) has joined #postgresql
2017-01-06 13:43:39	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 246 seconds)
2017-01-06 13:44:25	Snow-Man	Didn't go too far with it tho, considering there's ~100G of live data at the end of the toast relation and it'd be pretty painful to move all of that to earlier in the relation, so I just punted and recommended we wait a few months when that stuff will drop off and we can let VACUUM shrink the toast table naturally.
2017-01-06 13:44:29	◥	f3_ (~f3@95-31-88-85.broadband.corbina.ru) has joined #postgresql
2017-01-06 13:44:45	G_SabinoMullane	Yeah should turn that into an extension ideally
2017-01-06 13:44:55	mastermind	saper: it does not work out-of-the box, if you are available this weekend I really would like to ask you for help but today it is basically bedtime for me...
2017-01-06 13:45:23	Snow-Man	I do kind of like the idea of making VACUUM turn entirely empty relations into sparse files, but I'm guessing everyone else would hate that. :)
2017-01-06 13:45:28	saper	mastermind: no problem, I am enjoying the final days of my Christmas vacation, so staying up as late as I can :)
2017-01-06 13:46:00	Snow-Man	Not to mention that there'd be a few issues with how to handle running out of space when you are just trying to write out a page..
2017-01-06 13:46:20	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2017-01-06 13:46:38	◣	ramfjord_ (~tramfjord@12.202.171.244) has quit (Ping timeout: 255 seconds)
2017-01-06 13:47:15	◣	gleu (~guillaume@LFbn-1-8419-93.w81-254.abo.wanadoo.fr) has quit (Quit: gleu)
2017-01-06 13:47:31	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 272 seconds)
2017-01-06 13:47:45	RhodiumToad	Snow-Man: there'd also be synchronization concerns
2017-01-06 13:48:09	◥	_djbkd (~djbkd@135.84.132.218) has joined #postgresql
2017-01-06 13:48:11	◣	mmello (Marcelo@nat/redhat/x-bwayvuekdctcxtec) has quit (Quit: Leaving)
2017-01-06 13:48:13	RhodiumToad	Snow-Man: (maybe)
2017-01-06 13:48:34	◣	arezki (~arezki@lon92-h02-176-149-62-139.dsl.sta.abo.bbox.fr) has quit (Ping timeout: 248 seconds)
2017-01-06 13:48:58	RhodiumToad	Snow-Man: right now, we can handle out-of-space conditions because we write the empty page of zeros before trying to wal-log the insert
2017-01-06 13:49:07	◣	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has quit (Remote host closed the connection)
2017-01-06 13:49:08	◣	TheWhip (~thewhip@106.51.141.119) has quit
2017-01-06 13:49:12	◥	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has joined #postgresql
2017-01-06 13:50:02	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 13:52:02	◣	rajivr (~rajivr@157.49.207.142) has quit (Ping timeout: 258 seconds)
2017-01-06 13:52:11	◥	blackmesa (~blackmesa@aftr-37-201-227-31.unity-media.net) has joined #postgresql
2017-01-06 13:52:14	◥	irqq (~chatzilla@afcq114.neoplus.adsl.tpnet.pl) has joined #postgresql
2017-01-06 13:52:15	◥	ramfjord (~tramfjord@12.202.171.244) has joined #postgresql
2017-01-06 13:52:29	◣	AdamTheExile (~textual@ps-relay-server.tolland.k12.ct.us) has quit (Ping timeout: 255 seconds)
2017-01-06 13:52:40	◥	rajivr (~rajivr@157.49.127.30) has joined #postgresql
2017-01-06 13:53:19	saper	??log
2017-01-06 13:53:19	pg_docbot	http://www.postgresql.org/docs/current/static/wal.html :: http://pgfoundry.org/projects/tablelog/
2017-01-06 13:53:19	pg_docbot	http://www.postgresql.org/docs/current/static/runtime-config-logging.html :: http://slony.info/documentation/logshipping.html
2017-01-06 13:53:19	pg_docbot	http://bucardo.org/wiki/Pgsi :: http://www.postgresql.org/docs/current/static/wal-internals.html
2017-01-06 13:53:19	pg_docbot	https://github.com/dalibo/pgbadger :: http://blog.endpoint.com/2010/01/monitoring-postgres-log-files-with.html
2017-01-06 13:53:21	pg_docbot	http://www.postgresql.org/docs/devel/static/file-fdw.html
2017-01-06 13:53:21	◥	igniting (~igniting@unaffiliated/igniting) has joined #postgresql
2017-01-06 13:53:26	◣	filotek (~filotek@206.223.174.62) has quit (Ping timeout: 256 seconds)
2017-01-06 13:54:21	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 245 seconds)
2017-01-06 13:54:45	saper	mastermind, G_SabinoMullane posted a note to myself on https://discourse.wmflabs.org/t/wiki-postgresql-org-community-authentication-plugin/168
2017-01-06 13:55:08	◥	arezki (~arezki@lon92-h02-176-149-62-139.dsl.sta.abo.bbox.fr) has joined #postgresql
2017-01-06 13:55:46	◥	Overspark (~vinz@vindi.nl) has joined #postgresql
2017-01-06 13:56:27	◥	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has joined #postgresql
2017-01-06 13:57:14	◣	banditron (~banditron@kohana/developer/banditron) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-06 13:57:42	◣	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has quit (Remote host closed the connection)
2017-01-06 13:57:49	◥	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has joined #postgresql
2017-01-06 14:00:32	◥	metaresolve (~metaresol@2601:14d:8301:5aa0:40de:72c7:8c83:a6aa) has joined #postgresql
2017-01-06 14:02:03	◥	blackwraith (~priidu@unaffiliated/priidu) has joined #postgresql
2017-01-06 14:03:35	◣	chris_dan (~chris_dan@ip72-197-189-52.sd.sd.cox.net) has quit (Quit: Goodbye)
2017-01-06 14:04:13	◣	priidu (~priidu@unaffiliated/priidu) has quit (Ping timeout: 248 seconds)
2017-01-06 14:04:13	◣	velix (~Velix@x4e304c3d.dyn.telefonica.de) has quit (Ping timeout: 248 seconds)
2017-01-06 14:04:18	◥	totus (~totus@2605:6000:66c0:8800:e5ba:435a:7da3:b46e) has joined #postgresql
2017-01-06 14:04:21	◣	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has quit (Ping timeout: 245 seconds)
2017-01-06 14:04:21	◣	ash_workz (~chatzilla@50-243-5-153-static.hfc.comcastbusiness.net) has quit (Ping timeout: 245 seconds)
2017-01-06 14:05:55	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 14:06:19	◣	__Yiota (~textual@2607:fea8:3c9f:ffe9:2126:1ee3:665a:629) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-06 14:06:58	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-06 14:08:03	◣	fguillot (~fguillot@96.127.216.138) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-06 14:10:00	◥	pertl (~pertl@ipbcc3c4ad.dynamic.kabel-deutschland.de) has joined #postgresql
2017-01-06 14:10:26	◣	blackwraith (~priidu@unaffiliated/priidu) has quit (Ping timeout: 258 seconds)
2017-01-06 14:10:33	◥	mizu_no_oto_work (~textual@c-50-177-170-9.hsd1.ma.comcast.net) has joined #postgresql
2017-01-06 14:10:45	◣	Coldblackice (~anonz@unaffiliated/coldblackice) has quit
2017-01-06 14:11:30	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 248 seconds)
2017-01-06 14:11:33	◥	bratsche (~textual@cpe-24-242-239-239.tx.res.rr.com) has joined #postgresql
2017-01-06 14:12:58	◥	pedahzur (~jkugler@216-67-98-32.static.acsalaska.net) has joined #postgresql
2017-01-06 14:13:04	◣	Andoriyu (~Andoriyu@cpe-76-170-61-115.socal.res.rr.com) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-06 14:13:52	◣	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has quit (Remote host closed the connection)
2017-01-06 14:14:05	◥	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has joined #postgresql
2017-01-06 14:16:12	◣	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has quit (Remote host closed the connection)
2017-01-06 14:16:31	◥	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has joined #postgresql
2017-01-06 14:18:52	◣	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has quit (Remote host closed the connection)
2017-01-06 14:19:08	◥	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has joined #postgresql
2017-01-06 14:20:44	◥	raspado (~raspado@198.8.80.218) has joined #postgresql
2017-01-06 14:21:49	raspado	is that a way I can see disk usage by top 20 tables in databases?
2017-01-06 14:22:01	raspado	seeing about 200GB a week being consumed
2017-01-06 14:22:04	◣	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has quit (Read error: Connection reset by peer)
2017-01-06 14:22:22	xocolatl	you want to know which tables take up the most space on disk?
2017-01-06 14:22:59	raspado	yeah, we can see what db is taking up space but not sure how to drill down deeper
2017-01-06 14:23:10	ningu	\dt+ gives it I think
2017-01-06 14:23:30	◥	ska (~skatinolo@unaffiliated/ska) has joined #postgresql
2017-01-06 14:23:45	xocolatl	select oid::regclass, relpages from pg_class order by 2 desc;
2017-01-06 14:23:55	▷	metaresolve bounces in
2017-01-06 14:24:30	hi117	ningu: wow til ty
2017-01-06 14:24:30	breinbaas	or take the SQL from  psql -E , and ORDER BY it as you like
2017-01-06 14:24:38	ska	I use pg8000 to connect to PG servers. When tables are locked we timeout the connections, but we still see Waiting queries in the queue. How can we abort those queries when we see a lock?
2017-01-06 14:24:44	raspado	thx xocolatl
2017-01-06 14:25:01	ska	Or is there some better way to clean those out? We can't afford for the locks to finish.
2017-01-06 14:25:11	johto	ska; what exactly is timing out the connections?
2017-01-06 14:25:12	◣	pertl (~pertl@ipbcc3c4ad.dynamic.kabel-deutschland.de) has quit (Quit: pertl)
2017-01-06 14:25:47	ska	We time out on the Python side.. If we don't get an answer in 10 secs, we close the pg8000 connections.
2017-01-06 14:26:04	ska	We use the pg8000 timeout params.
2017-01-06 14:26:09	◣	ramfjord (~tramfjord@12.202.171.244) has quit (Ping timeout: 258 seconds)
2017-01-06 14:26:11	johto	have you considered using statement_timeout and/or lock_timeout instead?
2017-01-06 14:26:13	◥	r_hector (~richard@203-97-170-14.cable.telstraclear.net) has joined #postgresql
2017-01-06 14:26:32	◣	arezki (~arezki@lon92-h02-176-149-62-139.dsl.sta.abo.bbox.fr) has quit (Ping timeout: 258 seconds)
2017-01-06 14:26:38	ska	no, is that part of the query?
2017-01-06 14:26:52	johto	no, they're settings you can set on the session
2017-01-06 14:26:55	johto	?? statement_eimtout
2017-01-06 14:26:55	pg_docbot	Nothing found
2017-01-06 14:26:57	johto	?? statement_timeout
2017-01-06 14:26:58	pg_docbot	http://www.postgresql.org/docs/current/static/runtime-config-client.html#GUC-STATEMENT-TIMEOUT
2017-01-06 14:27:35	◣	hahuang61 (~hahuang65@2601:647:4000:d7:9446:f8ac:4b2e:f97c) has quit (Ping timeout: 255 seconds)
2017-01-06 14:27:39	◣	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has quit (Remote host closed the connection)
2017-01-06 14:27:49	◣	Bob8989 (~bobby12@185.67.177.203) has quit (Quit: KVIrc 4.0.4 Insomnia http://www.kvirc.net/)
2017-01-06 14:28:15	◥	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has joined #postgresql
2017-01-06 14:28:26	◥	_ChauffeR (~simone@unaffiliated/chauffer) has joined #postgresql
2017-01-06 14:28:31	◥	glowdemon1 (~robbe@ptr-lnm32wvy1kz4frxqfr.18120a2.ip6.access.telenet.be) has joined #postgresql
2017-01-06 14:28:39	◣	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-06 14:28:49	◥	MajkelKorczak (~Eclipse@apn-31-0-33-149.dynamic.gprs.plus.pl) has joined #postgresql
2017-01-06 14:29:34	◣	MajkelKorczak (~Eclipse@apn-31-0-33-149.dynamic.gprs.plus.pl) has left #postgresql
2017-01-06 14:32:07	◣	diggitydane (~diggityda@2601:681:8100:f548:f087:c4f6:b10b:3600) has quit (Quit: Leaving)
2017-01-06 14:33:04	◣	mizu_no_oto_work (~textual@c-50-177-170-9.hsd1.ma.comcast.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-06 14:34:23	◣	rajivr (~rajivr@157.49.127.30) has quit (Ping timeout: 272 seconds)
2017-01-06 14:35:47	◣	shyu (~shyu@106.38.122.3) has quit (Read error: Connection reset by peer)
2017-01-06 14:37:02	◥	ramfjord (~tramfjord@12.202.171.244) has joined #postgresql
2017-01-06 14:38:23	◣	aajjbb (~aajjbb@179.154.124.39) has quit (Ping timeout: 255 seconds)
2017-01-06 14:39:46	◥	rajivr (~rajivr@157.49.207.142) has joined #postgresql
2017-01-06 14:39:51	◣	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has quit (Remote host closed the connection)
2017-01-06 14:39:54	◥	eeriegeek (~eeriegeek@73.31.123.0) has joined #postgresql
2017-01-06 14:40:32	glowdemon1	Hi, does anyone happen to know how I can connect to the Postgres shell/server (whatever you call it) through Docker?
2017-01-06 14:40:46	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2017-01-06 14:41:00	glowdemon1	When I go in my Docker container and use Postgres -u Bob - it tells me ""root" execution of the PostgreSQL server is not permitted.
2017-01-06 14:41:00	glowdemon1	The server must be started under an unprivileged user ID to prevent
2017-01-06 14:41:00	glowdemon1	possible system security compromise.  See the documentation for
2017-01-06 14:41:00	glowdemon1	more information on how to properly start the server.
2017-01-06 14:41:00	glowdemon1	"
2017-01-06 14:41:01	◣	xzi11a (~robert@static-108-48-124-82.washdc.fios.verizon.net) has quit (Ping timeout: 245 seconds)
2017-01-06 14:41:22	glowdemon1	Excuse the multiline paste :c
2017-01-06 14:41:22	ningu	glowdemon1: seems more like a docker question
2017-01-06 14:41:28	glowdemon1	Alright, thanks
2017-01-06 14:41:31	ningu	you do have to start it under user postgres, generally
2017-01-06 14:41:39	ningu	there must be a howto somewhere on how to do it in docker
2017-01-06 14:42:04	ningu	also, the server and client are distinct -- are you trying to start the server, or connect to it?
2017-01-06 14:42:10	peerce	glowdemon1; if the server is running, you connect to it with the psql command, not 'postgres'
2017-01-06 14:42:13	◥	spearthistle (~strawberr@213.205.252.33) has joined #postgresql
2017-01-06 14:42:39	glowdemon1	Oh thanks Peerce
2017-01-06 14:42:58	◥	CarlFK (~carl@CPE-120-147-224-248.lflg2.win.bigpond.net.au) has joined #postgresql
2017-01-06 14:44:21	◣	blackmesa (~blackmesa@aftr-37-201-227-31.unity-media.net) has quit (Quit: WeeChat 1.6)
2017-01-06 14:44:48	glowdemon1	Yes, that seemed to be the issue, works fine now. Thanks again both
2017-01-06 14:45:47	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 272 seconds)
2017-01-06 14:45:55	◥	Xgc (~Xgc@p-69-195-62-222.dsl1.rtr.chat.fpma.frpt.net) has joined #postgresql
2017-01-06 14:46:03	◥	jaegerca (~jaegerca@2001-48F8-26-1E84-B57A-AFE1-AF66-5459-dynamic.midco.net) has joined #postgresql
2017-01-06 14:46:04	◥	__ior (~jesse@theory.org) has joined #postgresql
2017-01-06 14:46:08	◣	fwiles (~frank@19.89.124.24.cm.sunflower.com) has quit (Quit: fwiles)
2017-01-06 14:47:07	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-06 14:47:19	jaegerca	Can anyone help me with my issue here: https://www.pastiebin.com/58701e6603e9a ?
2017-01-06 14:48:06	ningu	jaegerca: do you care which alphas.id you get?
2017-01-06 14:48:57	jaegerca	ningu: Ultimately, I want all alphas that are connected to a beta with a color, but only one alpha per color, not all the alphas
2017-01-06 14:49:09	jaegerca	I am not sure if that made sense
2017-01-06 14:49:16	ningu	ok
2017-01-06 14:49:18	__ior	hi all, does anyone have any links to good reading on how to represent graph traversals in an rdbms (where the graph is a DAG represented as an adjacency list in existing tables)? thanks in advance!
2017-01-06 14:49:23	ningu	so does it matter which alpha you get?
2017-01-06 14:49:34	jaegerca	I suppose not
2017-01-06 14:49:41	jaegerca	or wait
2017-01-06 14:49:50	jaegerca	In that example, it wouldn't matter which beta I get
2017-01-06 14:50:04	ska	johto: that works great.. I can apply it to the user that makes the calls.
2017-01-06 14:50:07	jaegerca	at least one blue, doesn't matter which
2017-01-06 14:50:13	xocolatl	__ior: recursive cte
2017-01-06 14:50:14	ska	ie.. user role..
2017-01-06 14:50:15	xocolatl	??recursive
2017-01-06 14:50:15	pg_docbot	http://www.postgresql.org/docs/current/interactive/queries-with.html :: http://www.depesz.com/2011/12/16/rtrees-recursive-trees-what-did-you-think-about/
2017-01-06 14:50:21	ningu	jaegerca: do you actually need the alphas.id column?
2017-01-06 14:50:27	ningu	jaegerca: does every betas row have an alpha_id?
2017-01-06 14:50:48	jaegerca	i do need the alphas.id column
2017-01-06 14:51:30	ningu	what about the second question?
2017-01-06 14:51:33	◣	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has quit (Ping timeout: 246 seconds)
2017-01-06 14:51:49	◥	gelignite (~gelignite@x5ce4ac55.dyn.telefonica.de) has joined #postgresql
2017-01-06 14:51:51	__ior	xocolatl, the question isn't how to traverse the list, but rather how to store a representation of the traversal
2017-01-06 14:51:59	macdice	hmm.  buffile.c seems to be capable of eating io errors
2017-01-06 14:52:05	xocolatl	__ior: an array?
2017-01-06 14:52:17	jaegerca	ningu sorry yes, every beta has an alpha.id
2017-01-06 14:52:28	__ior	i was hoping for a normalized solution :)
2017-01-06 14:52:34	◣	_djbkd (~djbkd@135.84.132.218) has quit (Remote host closed the connection)
2017-01-06 14:52:46	CarlFK	I am having an auth problem.    psql -h veyepar.nextdayvideo.com -p 23030 veyepar veyepar  -> no pg_hba.conf entry for host "120.147.224.248", user "veyepar", database "veyepar", SSL on (and off)
2017-01-06 14:52:56	◥	szymon (~szymon@staticline-31-182-67-100.toya.net.pl) has joined #postgresql
2017-01-06 14:53:01	CarlFK	sudo grep 120.147.224.248 /etc/postgresql/9.5/main/pg_hba.conf -> host    veyepar      vepeyar      120.147.224.248/32     md5
2017-01-06 14:53:17	◣	Sigyn (sigyn@freenode/utility-bot/sigyn) has quit (Quit: Can we drop the ‘artificial intelligence’? It’s a bit like me calling you a meat-based processing system.)
2017-01-06 14:53:18	ningu	jaegerca: so unless I misunderstand you can simply do this: SELECT min(alpha_id), color FROM betas GROUP BY color;
2017-01-06 14:53:38	◥	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has joined #postgresql
2017-01-06 14:53:43	◣	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has quit (Remote host closed the connection)
2017-01-06 14:53:49	◥	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has joined #postgresql
2017-01-06 14:54:08	◥	Sigyn (sigyn@freenode/utility-bot/sigyn) has joined #postgresql
2017-01-06 14:54:16	jaegerca	ningu: Hrm, that might work, I will gove it a shot
2017-01-06 14:54:18	jaegerca	Thanks!
2017-01-06 14:54:29	xocolatl	__ior: then use a table?  you're not giving much information here
2017-01-06 14:54:37	◣	brentd_ (~brentd@62.145.29.194) has quit (Remote host closed the connection)
2017-01-06 14:54:55	xocolatl	and array are normalized depending how you use them
2017-01-06 14:55:13	◥	brentd (~brentd@62.145.29.194) has joined #postgresql
2017-01-06 14:55:18	◥	xemdetia (xemdetia@nat/ibm/x-ieaehbqcfmibfpkt) has joined #postgresql
2017-01-06 14:55:45	__ior	xocolatl errrr, yeah, i'
2017-01-06 14:56:07	__ior	xocolatl errrr, yeah, i'm looking for advice on how that table should look!
2017-01-06 14:56:18	◣	szymon (~szymon@staticline-31-182-67-100.toya.net.pl) has quit (Client Quit)
2017-01-06 14:56:27	xocolatl	start by showing an example of your data or something
2017-01-06 14:57:28	__ior	okay, will paste a pastebin in a min
2017-01-06 14:58:04	◥	tiwula (~lane@70.89.246.241-Busname-UT.hfc.comcastbusiness.net) has joined #postgresql
2017-01-06 14:58:13	◣	veegee (~veegee@107.161.4.218) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-06 14:58:31	johto	p/sb end
2017-01-06 14:59:07	◥	sz0 (uid110435@gateway/web/irccloud.com/x-hdvrvladhmvttmjp) has joined #postgresql
2017-01-06 14:59:59	◣	brentd (~brentd@62.145.29.194) has quit (Ping timeout: 255 seconds)
2017-01-06 15:00:07	◥	_djbkd (~djbkd@135.84.132.218) has joined #postgresql
2017-01-06 15:00:14	ska	johto: Is it normal for queries to persist after the network/socket connection dies?
2017-01-06 15:00:37	johto	it's not unusual
2017-01-06 15:00:41	◣	_djbkd (~djbkd@135.84.132.218) has quit (Read error: Connection reset by peer)
2017-01-06 15:00:43	◥	eaxxae (~eaxxae@unaffiliated/eaxxae) has joined #postgresql
2017-01-06 15:00:51	johto	if you want to do the timeout yourself you'd be better off sending a query cancel. not sure how to do that from python
2017-01-06 15:01:02	◥	_djbkd (~djbkd@135.84.132.218) has joined #postgresql
2017-01-06 15:01:20	ska	johto: yea, pg8000 is limited in features.
2017-01-06 15:01:35	◣	dsantiag_ (~dsantiago@40.141.55.70) has quit (Quit: Computer has gone to sleep.)
2017-01-06 15:01:46	◣	pjy (~pjy@2001:470:8:f7a:6178:38d3:f1dc:bb97) has left #postgresql
2017-01-06 15:02:30	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-06 15:02:55	◥	inflames (~syg@47.148.210.171) has joined #postgresql
2017-01-06 15:03:15	__ior	xocolatl for instance https://gist.github.com/anonymous/c27c8dbdfa4333f0dc5ed2240b7b1512
2017-01-06 15:03:35	xocolatl	never ever use uuid as primary key
2017-01-06 15:03:41	__ior	okay
2017-01-06 15:03:46	__ior	aside from that
2017-01-06 15:04:11	__ior	(also, please provide reading as to why not)
2017-01-06 15:04:18	◣	_djbkd (~djbkd@135.84.132.218) has quit (Client Quit)
2017-01-06 15:04:26	xocolatl	??fpw
2017-01-06 15:04:26	pg_docbot	http://www.postgresql.org/docs/current/static/runtime-config-wal.html#GUC-FULL-PAGE-WRITES :: http://blog.2ndquadrant.com/on-the-impact-of-full-page-writes/
2017-01-06 15:04:30	xocolatl	second link
2017-01-06 15:04:36	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Remote host closed the connection)
2017-01-06 15:04:40	buu	They're too large?
2017-01-06 15:04:46	xocolatl	they're too random
2017-01-06 15:05:08	__ior	thanks! but main question is how to shape a table that represents a specific traversal?
2017-01-06 15:06:03	xocolatl	seems like an array of edges.id would be fine
2017-01-06 15:06:13	xocolatl	it depends on how you're going to use it
2017-01-06 15:07:32	◣	inflames (~syg@47.148.210.171) has quit (Ping timeout: 248 seconds)
2017-01-06 15:07:41	__ior	let's pretend i eventually might need to do something totally idiotic like group by second node in a traversal
2017-01-06 15:07:58	◥	mmello (~Marcelo@cpe-24-163-39-86.nc.res.rr.com) has joined #postgresql
2017-01-06 15:08:13	__ior	where 2nd node is really nth node for arbitrary n
2017-01-06 15:08:32	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Remote host closed the connection)
2017-01-06 15:09:33	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 15:09:45	◣	bdunavant (~bdunavant@static-108-48-124-82.washdc.fios.verizon.net) has quit (Remote host closed the connection)
2017-01-06 15:10:51	◣	doppleherz (uid178172@gateway/web/irccloud.com/x-xbkripfjgmaappis) has quit (Quit: Connection closed for inactivity)
2017-01-06 15:12:41	◣	totus (~totus@2605:6000:66c0:8800:e5ba:435a:7da3:b46e) has quit (Quit: Leaving.)
2017-01-06 15:13:06	__ior	did i not explain properly?
2017-01-06 15:14:37	◣	teslix (~Adrien@2a01:cb14:2e8:900:391a:5611:3652:74bb) has left #postgresql
2017-01-06 15:14:40	xocolatl	you did not, and I lost interest
2017-01-06 15:14:44	◥	wsieroci (~wsieroci@adkx73.neoplus.adsl.tpnet.pl) has joined #postgresql
2017-01-06 15:14:58	__ior	that's too bad
2017-01-06 15:15:03	__ior	thanks anywaj
2017-01-06 15:15:06	__ior	y
2017-01-06 15:15:43	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 246 seconds)
2017-01-06 15:18:19	◥	evnmar (~MongooseW@c-67-174-255-15.hsd1.ca.comcast.net) has joined #postgresql
2017-01-06 15:18:42	◥	dedeb (bee96883@gateway/web/freenode/ip.190.233.104.131) has joined #postgresql
2017-01-06 15:18:48	◣	jaegerca (~jaegerca@2001-48F8-26-1E84-B57A-AFE1-AF66-5459-dynamic.midco.net) has quit (Remote host closed the connection)
2017-01-06 15:19:32	◣	cyphase (~cyphase@unaffiliated/cyphase) has quit (Quit: cyphase.com)
2017-01-06 15:20:36	◣	dedeb (bee96883@gateway/web/freenode/ip.190.233.104.131) has quit (Client Quit)
2017-01-06 15:20:53	◥	NeverDie (~NeverDie@pool-74-96-240-190.washdc.fios.verizon.net) has joined #postgresql
2017-01-06 15:21:08	◣	hotpancakes (~hotpancak@2604:2000:ee17:8d00:d01b:49d7:f877:8273) has quit (Remote host closed the connection)
2017-01-06 15:21:14	◥	tiglog (~tiglog@unaffiliated/tiglog) has joined #postgresql
2017-01-06 15:21:26	◣	mmello (~Marcelo@cpe-24-163-39-86.nc.res.rr.com) has quit (Quit: Leaving)
2017-01-06 15:21:38	◥	Ridout (~coffee@unaffiliated/ridout) has joined #postgresql
2017-01-06 15:21:52	◣	glowdemon1 (~robbe@ptr-lnm32wvy1kz4frxqfr.18120a2.ip6.access.telenet.be) has quit (Ping timeout: 240 seconds)
2017-01-06 15:21:54	◣	Maxel_ (~Maxel@50-241-60-122-static.hfc.comcastbusiness.net) has quit (Ping timeout: 248 seconds)
2017-01-06 15:22:32	◣	wsieroci (~wsieroci@adkx73.neoplus.adsl.tpnet.pl) has quit (Remote host closed the connection)
2017-01-06 15:24:21	◥	hahuang61 (~hahuang65@2601:647:4000:d7:9446:f8ac:4b2e:f97c) has joined #postgresql
2017-01-06 15:25:00	◥	inflames (~syg@47.148.210.171) has joined #postgresql
2017-01-06 15:25:03	◥	syg_ (~syg@47.148.210.171) has joined #postgresql
2017-01-06 15:25:03	◣	dbh613 (~dbh613@cpe-104-173-225-132.socal.res.rr.com) has quit
2017-01-06 15:25:19	◥	glowdemon1 (~robbe@ptr-lnm32wvy1kz4frxqfr.18120a2.ip6.access.telenet.be) has joined #postgresql
2017-01-06 15:25:30	◣	tiglog (~tiglog@unaffiliated/tiglog) has quit (Ping timeout: 246 seconds)
2017-01-06 15:26:22	◥	jax (~Adium@15.54.150.83.ftth.ewwwb.as8758.net) has joined #postgresql
2017-01-06 15:26:22	◣	jax (~Adium@15.54.150.83.ftth.ewwwb.as8758.net) has quit (Changing host)
2017-01-06 15:26:22	◥	jax (~Adium@unaffiliated/jax) has joined #postgresql
2017-01-06 15:27:14	◥	akurniawan (~akurniawa@111.94.224.64) has joined #postgresql
2017-01-06 15:27:35	◣	jax (~Adium@unaffiliated/jax) has quit (Client Quit)
2017-01-06 15:28:47	◥	hotpancakes (~hotpancak@cpe-68-173-85-228.nyc.res.rr.com) has joined #postgresql
2017-01-06 15:29:14	◣	hahuang61 (~hahuang65@2601:647:4000:d7:9446:f8ac:4b2e:f97c) has quit (Ping timeout: 255 seconds)
2017-01-06 15:29:30	◣	glowdemon1 (~robbe@ptr-lnm32wvy1kz4frxqfr.18120a2.ip6.access.telenet.be) has quit (Client Quit)
2017-01-06 15:30:16	◣	hotpancakes (~hotpancak@cpe-68-173-85-228.nyc.res.rr.com) has quit (Remote host closed the connection)
2017-01-06 15:30:23	◥	hotpanca_ (~hotpancak@2604:2000:14c5:4058:71a0:f232:447:a8c1) has joined #postgresql
2017-01-06 15:31:17	◣	kacey (~kacey@c-71-231-207-48.hsd1.wa.comcast.net) has quit (Quit: kacey)
2017-01-06 15:31:50	◣	gelignite (~gelignite@x5ce4ac55.dyn.telefonica.de) has quit (Quit: http://bit.ly/1kso8Ta)
2017-01-06 15:32:57	◥	_djbkd (~djbkd@135.84.132.218) has joined #postgresql
2017-01-06 15:32:59	◣	albertus1 (~seb@x4e32df65.dyn.telefonica.de) has quit (Quit: Leaving.)
2017-01-06 15:33:53	MatheusOl	__ior: I'm not sure what you meant by "store the traversal", but you can query an adjacency list table very easily using recursive queries
2017-01-06 15:34:08	MatheusOl	Or perhaps you want something like ltree
2017-01-06 15:34:29	MatheusOl	??ltree
2017-01-06 15:34:29	pg_docbot	http://www.postgresql.org/docs/current/static/ltree.html
2017-01-06 15:34:51	◥	Pupeno (~pupeno@pdpc/supporter/active/pupeno) has joined #postgresql
2017-01-06 15:35:14	◣	filiprem (~filip@188.146.93.107.nat.umts.dynamic.t-mobile.pl) has quit (Ping timeout: 248 seconds)
2017-01-06 15:35:45	◥	marcdel (~marcdel@198.8.80.74) has joined #postgresql
2017-01-09 09:15:08	⚡	irc: disconnected from server
2017-01-09 09:15:32	◥	d8v3 (~david@66.195.46.242) has joined #postgresql
2017-01-09 09:15:32	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2017-01-09 09:15:32	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2017-01-09 09:15:32	⚡	Channel #postgresql: 954 nicks (0 ops, 0 voices, 954 normals)
2017-01-09 09:15:32	⚡	URL for #postgresql: http://www.postgresql.org
2017-01-09 09:15:37	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2017-01-09 09:15:57	◥	Human_G33k (~Human_G33@62.147.242.8) has joined #postgresql
2017-01-09 09:16:03	◥	autechy (~autechy@134.249.168.41) has joined #postgresql
2017-01-09 09:17:55	◣	held (~heldchen@unaffiliated/held) has quit (Ping timeout: 256 seconds)
2017-01-09 09:18:50	◥	dviola (~diego@186.222.78.187) has joined #postgresql
2017-01-09 09:20:28	◣	inoas (~leo@unaffiliated/ionas) has quit (Quit: inoas)
2017-01-09 09:21:17	◥	StoneCypher (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has joined #postgresql
2017-01-09 09:21:25	◣	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has quit (Ping timeout: 258 seconds)
2017-01-09 09:23:10	◣	emerson (~emerson@freenode/staff/emerson) has quit (Quit: leaving)
2017-01-09 09:23:34	◥	NCS_One (~NCS_One@176.78.178.106) has joined #postgresql
2017-01-09 09:23:36	◣	DevAntoine (~DevAntoin@46.29.126.206) has quit (Ping timeout: 248 seconds)
2017-01-09 09:23:40	◥	davidw (~davidw@apache/committer/davidw) has joined #postgresql
2017-01-09 09:24:03	ash_workz	depesz.com/.../versioning helps though :)
2017-01-09 09:24:37	◥	echlebek (~echlebek@50.64.119.210) has joined #postgresql
2017-01-09 09:25:15	◣	SesMan (~sesman@212.76.254.142) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-09 09:25:41	◣	StoneCypher (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has quit (Ping timeout: 240 seconds)
2017-01-09 09:27:24	◥	saurabhj_ (~saurabhjh@182.64.57.38) has joined #postgresql
2017-01-09 09:29:27	◣	saurabhjha (~saurabhjh@182.64.13.66) has quit (Ping timeout: 248 seconds)
2017-01-09 09:29:44	MatheusOl	lucian, linuxhiker: on the contrary, I'd say FlyWay does a bit less than Sqitch... Although it is way simpler to start working with
2017-01-09 09:29:47	◥	skylar (~skylar2@gsits-a.gs.washington.edu) has joined #postgresql
2017-01-09 09:29:59	◣	cartan (~cartan@mail2.luratech.com) has quit (Quit: zzzzzzzzz)
2017-01-09 09:30:18	◥	dikiaap (dikiaap@gateway/shell/panicbnc/x-gcflvtibttuxyfrc) has joined #postgresql
2017-01-09 09:30:35	linuxhiker	MatheusOl: I haven't used it, it was only what I was told
2017-01-09 09:30:37	lucian	MatheusOl: i mean more about the unrelated features, like loading a schema at the startup of a Java app
2017-01-09 09:30:49	lucian	MatheusOl: this is just from reading the docs of both, though
2017-01-09 09:30:55	◥	faw (~faw@38.102.153.98) has joined #postgresql
2017-01-09 09:30:55	◣	faw (~faw@38.102.153.98) has quit (Changing host)
2017-01-09 09:30:55	◥	faw (~faw@unaffiliated/faw) has joined #postgresql
2017-01-09 09:31:16	◣	Nizumzen (~Nizumzen@cpc2-reig5-2-0-cust667.6-3.cable.virginm.net) has quit (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
2017-01-09 09:31:17	MatheusOl	Ah, yes, it is more integrated to Java
2017-01-09 09:31:35	MatheusOl	It doesn't do rollback though
2017-01-09 09:31:45	MatheusOl	I also don't think it has testing capabilities
2017-01-09 09:31:58	◣	psoo (~psoo@2003:5b:203b:100:6d78:58b3:31c6:e6ca) has quit (Quit: Leaving.)
2017-01-09 09:32:15	◥	held (~heldchen@unaffiliated/held) has joined #postgresql
2017-01-09 09:32:49	lucian	MatheusOl: sqitch looks really nice, indeed. its only downside is perl, which is a hard sell in some cases
2017-01-09 09:32:52	◥	aib (~marvin@unaffiliated/aib42) has joined #postgresql
2017-01-09 09:33:36	justatheory	Unless you plan to hack on it, how does that make a difference? It’s just an app.
2017-01-09 09:33:47	MatheusOl	lucian: in theory it shouldn't matter to use the tool
2017-01-09 09:33:51	◥	ogradyd (~Thunderbi@HSI-KBW-46-223-156-191.hsi.kabel-badenwuerttemberg.de) has joined #postgresql
2017-01-09 09:34:04	MatheusOl	Unless you want to increment its functionality and send a patch
2017-01-09 09:34:05	◣	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-09 09:34:14	MatheusOl	Yeah, what justatheory said... xD
2017-01-09 09:34:25	◣	Debnet (~Marc@smtp2.sa-cim.fr) has quit (Quit: Leaving)
2017-01-09 09:34:35	lucian	it requires perl to be installed. in a windows and ms-centric world, that can be a problem
2017-01-09 09:34:35	◣	saurabhj_ (~saurabhjh@182.64.57.38) has quit (Read error: Connection reset by peer)
2017-01-09 09:34:39	lucian	(games dev here)
2017-01-09 09:34:40	◥	saurabhjha (~saurabhjh@182.64.64.24) has joined #postgresql
2017-01-09 09:35:13	◥	StoneCypher (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has joined #postgresql
2017-01-09 09:35:13	◣	saurabhjha (~saurabhjh@182.64.64.24) has quit (Remote host closed the connection)
2017-01-09 09:35:23	◣	Lordz (~Adium@186.215.116.176) has left #postgresql
2017-01-09 09:35:34	◥	edrocks (~edrocks@66-194-206-178.static.twtelecom.net) has joined #postgresql
2017-01-09 09:35:54	lucian	but i certainly want to try sqitch
2017-01-09 09:37:11	◥	ramfjord (~tramfjord@12.202.171.244) has joined #postgresql
2017-01-09 09:37:35	◣	doev (52736fd2@gateway/web/freenode/ip.82.115.111.210) has quit (Quit: Page closed)
2017-01-09 09:37:43	◣	cleme1mp (~mclement@129.42.208.167) has quit (Quit: WeeChat 1.6)
2017-01-09 09:38:07	◥	saurabhjha (~saurabhjh@182.64.64.24) has joined #postgresql
2017-01-09 09:40:37	◥	dionysus70 (~Thunderbi@unaffiliated/dionysus69) has joined #postgresql
2017-01-09 09:41:09	◣	dionysus69 (~Thunderbi@unaffiliated/dionysus69) has quit (Ping timeout: 256 seconds)
2017-01-09 09:41:10	⚡	dionysus70 is now known as dionysus69
2017-01-09 09:42:22	◣	bocaneri (~bocaneri@about/linux/staff/sauvin) has quit (Ping timeout: 245 seconds)
2017-01-09 09:43:30	◥	metaresolve (~metaresol@pool-100-15-230-64.washdc.fios.verizon.net) has joined #postgresql
2017-01-09 09:43:31	◥	grayhemp_wh (~grayhemp_@99-46-142-34.lightspeed.sntcca.sbcglobal.net) has joined #postgresql
2017-01-09 09:43:59	◣	grayhemp_wh (~grayhemp_@99-46-142-34.lightspeed.sntcca.sbcglobal.net) has quit (Remote host closed the connection)
2017-01-09 09:44:13	◣	zuck05 (~goirc@103.77.56.164) has quit (Excess Flood)
2017-01-09 09:44:23	◥	dege (~dege@50-204-244-30-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-09 09:44:44	◥	zuck05 (~goirc@103.77.56.164) has joined #postgresql
2017-01-09 09:44:57	◣	shiriru (~shiriru@213.91.236.225) has quit (Quit: Leaving)
2017-01-09 09:45:31	◥	wsieroci (~wsieroci@095160155147.dynamic-ww-12.vectranet.pl) has joined #postgresql
2017-01-09 09:46:18	◣	saurabhjha (~saurabhjh@182.64.64.24) has quit (Ping timeout: 240 seconds)
2017-01-09 09:46:41	◣	Flotho66 (~florent@AMontpellier-653-1-503-28.w90-57.abo.wanadoo.fr) has quit (Ping timeout: 240 seconds)
2017-01-09 09:47:06	◥	saurabhjha (~saurabhjh@182.64.48.40) has joined #postgresql
2017-01-09 09:48:07	◥	Anahry (~x@a94-132-78-87.cpe.netcabo.pt) has joined #postgresql
2017-01-09 09:49:02	◣	AnHry (~x@a94-132-78-87.cpe.netcabo.pt) has quit (Remote host closed the connection)
2017-01-09 09:51:20	◣	Torgan (~Torgan@avi31-1-88-177-47-93.fbx.proxad.net) has quit (Ping timeout: 248 seconds)
2017-01-09 09:51:37	◣	arezki (~arezki@213.152.28.84) has quit (Ping timeout: 240 seconds)
2017-01-09 09:52:05	stk	hmm I'm lost...
2017-01-09 09:52:26	stk	so I have a database with column in this type: "timestamp without time zone"
2017-01-09 09:53:02	xocolatl	that's your first problem
2017-01-09 09:53:04	stk	now I would I do a SELECT FROM WHERE abc BETWEEN {start_time} AND {end_time}
2017-01-09 09:53:12	◣	saurabhjha (~saurabhjh@182.64.48.40) has quit (Ping timeout: 240 seconds)
2017-01-09 09:53:13	stk	in a particular timezone
2017-01-09 09:53:18	stk	xocolatl: I know, that sucks
2017-01-09 09:53:28	xocolatl	WHERE abc AT TIME ZONE '...4 BETWEEN
2017-01-09 09:53:28	xocolatl	'...'
2017-01-09 09:53:46	◥	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has joined #postgresql
2017-01-09 09:54:00	stk	oh that timestamp without time zone is UTC
2017-01-09 09:54:17	stk	(agreed upon among the developers of this software)
2017-01-09 09:54:20	xocolatl	huh?  no it isn't, it doesn't have a time zone
2017-01-09 09:54:29	stk	agreed upon <<
2017-01-09 09:54:47	xocolatl	then why wasn't it put in the database?
2017-01-09 09:54:52	johto	it'd be much better to convert the input to UTC timestamps as well
2017-01-09 09:54:53	stk	you ask me
2017-01-09 09:54:55	stk	who now
2017-01-09 09:54:59	stk	who knows*
2017-01-09 09:55:19	stk	johto: changing the db is pretty much impossible, which is the problem
2017-01-09 09:55:21	stk	:)
2017-01-09 09:55:27	xocolatl	oh, it's very easy
2017-01-09 09:55:29	johto	I didn't suggest that
2017-01-09 09:55:30	stk	now I need to do query BETWEEN {start_time} AND {end_time}
2017-01-09 09:55:34	johto	I said *input*
2017-01-09 09:55:38	◣	athaller (~quassel@1.rz17.hetzner.thaller.ws) has quit (Read error: Connection reset by peer)
2017-01-09 09:55:52	stk	with timezone, with the *assumption* that those timestamp without timezone are all in UTC
2017-01-09 09:55:59	◥	XofP (~XofP@sfosj0215mups301.wiline.com) has joined #postgresql
2017-01-09 09:56:05	◣	TomyWork (~tomy@85.199.84.100) has quit (Ping timeout: 240 seconds)
2017-01-09 09:56:09	xocolatl	stk: is there something wrong with the solution I gave you?
2017-01-09 09:56:26	johto	it's unindexable
2017-01-09 09:56:35	stk	xocolatl: let me try quickly
2017-01-09 09:56:46	◥	Zamyatin (~Zamyatin@71.239.75.0) has joined #postgresql
2017-01-09 09:56:53	◣	bgardner (~bgardner@cpe-76-84-45-84.neb.res.rr.com) has quit (Ping timeout: 265 seconds)
2017-01-09 09:57:00	xocolatl	true
2017-01-09 09:57:19	◣	xinming (~hyy@115.221.47.201) has quit (Ping timeout: 260 seconds)
2017-01-09 09:57:35	stk	well, I guess the dev didn't read the note in https://www.postgresql.org/docs/9.1/static/datatype-datetime.html
2017-01-09 09:57:38	stk	"The SQL standard requires that writing just timestamp be equivalent to timestamp without time zone, and PostgreSQL honors that behavior"
2017-01-09 09:57:41	◥	athaller (~quassel@1.rz17.hetzner.thaller.ws) has joined #postgresql
2017-01-09 09:58:01	stk	not the first psql instance I encountered that does have decent timezone information
2017-01-09 09:58:02	stk	doesn't*
2017-01-09 09:58:05	xocolatl	put them on the other side, then.  where abc /* assumed to be UTC */ between {start_time} at time zone 'UTC' and {end_time} at time zone 'UTC'
2017-01-09 09:58:22	◥	bgardner (~bgardner@cpe-76-84-45-84.neb.res.rr.com) has joined #postgresql
2017-01-09 09:58:24	◣	dviola (~diego@186.222.78.187) has quit (Changing host)
2017-01-09 09:58:24	◥	dviola (~diego@unaffiliated/diegoviola) has joined #postgresql
2017-01-09 09:58:24	◥	bocaneri (~bocaneri@about/linux/staff/sauvin) has joined #postgresql
2017-01-09 09:58:50	RhodiumToad	start_time contains what exactly?
2017-01-09 09:59:00	◥	hahuang61 (~hahuang65@2601:647:4000:d7:fd6f:f954:e098:b91b) has joined #postgresql
2017-01-09 09:59:11	RhodiumToad	you'll need type casts in most cases, too
2017-01-09 10:03:39	◣	eps_dev (~valery.fa@85.113.220.4) has quit (Quit: Leaving.)
2017-01-09 10:03:40	stk	but I need start_time and end_time in another timezone
2017-01-09 10:03:40	stk	not in UTC
2017-01-09 10:03:40	stk	that's my problem
2017-01-09 10:03:40	RhodiumToad	how is this other timezone being specified
2017-01-09 10:03:40	xocolatl	uhm
2017-01-09 10:03:40	RhodiumToad	?
2017-01-09 10:03:40	stk	RhodiumToad: I don't know, that's what I'm having troubles with
2017-01-09 10:03:40	StoneCypher	stk: the entire difference between with and without is whether it'll honor time zones in a query
2017-01-09 10:03:40	RhodiumToad	so what is the actual input you're being supplied?
2017-01-09 10:03:40	stk	I need to write an SQL query that
2017-01-09 10:03:40	StoneCypher	stk: the way to fix it is to change the column type
2017-01-09 10:03:40	RhodiumToad	StoneCypher: not quite
2017-01-09 10:03:40	StoneCypher	ok
2017-01-09 10:03:40	stk	BETWEEN 2016-10-01T00:00:00 AND 2016-10-31T23:59:59
2017-01-09 10:03:40	RhodiumToad	stk: no, you don't; you want to use >= AND < rather than BETWEEN
2017-01-09 10:03:40	stk	and it *understands* that 2016-10-01T00:00:00 is in +7 or +5, not UTC
2017-01-09 10:03:40	xocolatl	then say AT TIME ZONE 'UTC'
2017-01-09 10:03:40	RhodiumToad	stk: otherwise you lose values like 23:59:59.5
2017-01-09 10:03:40	RhodiumToad	xocolatl: you're jumping the gun
2017-01-09 10:03:40	RhodiumToad	stk: how is it supposed to know whether it's +7 or +5 ?
2017-01-09 10:03:40	stk	RhodiumToad: that what I need to write a query for
2017-01-09 10:03:40	RhodiumToad	stk: (and presumably you mean -7 or -5, if this is the US?)
2017-01-09 10:03:40	stk	Asia market
2017-01-09 10:03:40	◥	xinming (~hyy@115.221.47.201) has joined #postgresql
2017-01-09 10:03:40	RhodiumToad	stk: pg can't magically deduce where it is; all it knows is the selected session timezone and the data in the db
2017-01-09 10:03:40	stk	I don't say so
2017-01-09 10:03:40	◥	grayhemp_wh (~grayhemp_@12.33.220.130) has joined #postgresql
2017-01-09 10:03:40	stk	I'm asking for how to write a query to deal with the timezone
2017-01-09 10:03:45	RhodiumToad	stk: so where is the timezone coming from?
2017-01-09 10:03:55	stk	so let's say I have this item, with this timestamp 2016-10-01T00:00:00 in database, type is "timestamp without timezone "
2017-01-09 10:03:56	◣	hahuang61 (~hahuang65@2601:647:4000:d7:fd6f:f954:e098:b91b) has quit (Ping timeout: 252 seconds)
2017-01-09 10:04:15	stk	but that is in UTC (agreed upon, off database by the developers)
2017-01-09 10:04:21	◥	whartung (~whartung@wsip-70-183-27-154.oc.oc.cox.net) has joined #postgresql
2017-01-09 10:04:30	RhodiumToad	stk: yes, I got that bit
2017-01-09 10:04:48	stk	now I need to write a query that when I specify timezone +5 and 2016-10-01T00:00:00, that item wont get in the result
2017-01-09 10:05:06	◣	lucian (~lucian@194.74.244.130) has quit (Ping timeout: 248 seconds)
2017-01-09 10:05:40	stk	or if I specify timezone +7 and >=2016-09-30T17:00:00
2017-01-09 10:05:49	stk	that item would show up in the results
2017-01-09 10:06:06	RhodiumToad	stk: usually you'd specify timezones as a geographic name rather than an offset
2017-01-09 10:06:07	stk	in short, I need to write a timezone-aware query against a timezone-less database
2017-01-09 10:06:17	RhodiumToad	stk: here are some of the possible ways:
2017-01-09 10:06:37	◥	catbox (c0654df6@gateway/web/freenode/ip.192.101.77.246) has joined #postgresql
2017-01-09 10:06:38	◥	mclement (~mclement@129.42.208.167) has joined #postgresql
2017-01-09 10:06:40	RhodiumToad	stk:  WHERE col >= '2016-10-01T00:00:00+05'::timestamptz at time zone 'UTC'
2017-01-09 10:06:49	stk	StoneCypher: I appreciate your input, but in the real world, you can't change a client's database at will
2017-01-09 10:06:56	▷	StoneCypher shrugs.  "okay"
2017-01-09 10:06:59	RhodiumToad	stk:  WHERE col >= '2016-10-01T00:00:00'::timestamp at time zone 'Asia/Tashkent' at time zone 'UTC'
2017-01-09 10:07:38	◣	whartung (~whartung@wsip-70-183-27-154.oc.oc.cox.net) has quit (Quit: whartung)
2017-01-09 10:07:40	◥	saurabhjha (~saurabhjh@182.64.2.156) has joined #postgresql
2017-01-09 10:07:51	stk	RhodiumToad: really great catch on >= instead of BETWEEN, thank you for that, firstly
2017-01-09 10:08:22	RhodiumToad	BETWEEN is only really safe with discrete data like integers or dates (without times)
2017-01-09 10:09:13	stk	the second one looks interesting to me, trying now
2017-01-09 10:09:44	RhodiumToad	or. if the session timezone is set to the geographic timezone, then just
2017-01-09 10:09:53	RhodiumToad	stk:  WHERE col >= '2016-10-01T00:00:00'::timestamptz at time zone 'UTC'
2017-01-09 10:10:10	◥	whartung (~whartung@wsip-70-183-27-154.oc.oc.cox.net) has joined #postgresql
2017-01-09 10:10:27	RhodiumToad	(a timestamptz literal with no UTC offset is assumed to be in the session timezone)
2017-01-09 10:10:27	◣	brentd (~brentd@p4FF83B19.dip0.t-ipconnect.de) has quit (Remote host closed the connection)
2017-01-09 10:10:51	RhodiumToad	the important thing to note here is that "at time zone" toggles between timestamp with and without time zone, but it means something somewhat different in each case
2017-01-09 10:10:59	◥	brentd (~brentd@p4FF83B19.dip0.t-ipconnect.de) has joined #postgresql
2017-01-09 10:11:57	stk	hmm
2017-01-09 10:12:00	stk	psycopg2.ProgrammingError: argument of AND must be type boolean, not type timestamp without time zone
2017-01-09 10:12:12	RhodiumToad	you have an AND in the wrong place
2017-01-09 10:12:19	RhodiumToad	WHERE col >= x1 AND col < x2
2017-01-09 10:12:26	StoneCypher	you probably forgot the first half of your second clause
2017-01-09 10:12:32	RhodiumToad	unlike with BETWEEN, you need to specify "col" twice
2017-01-09 10:12:47	RhodiumToad	either that or you have some parens in the wrong place
2017-01-09 10:13:11	stk	RhodiumToad: you sir enlightened me
2017-01-09 10:13:18	stk	trying again now
2017-01-09 10:13:36	◥	sfkeller (~chatzilla@135.209.196.178.dynamic.wline.res.cust.swisscom.ch) has joined #postgresql
2017-01-09 10:14:05	stk	it worked
2017-01-09 10:14:06	stk	::timestamp at time zone 'Asia/Tashkent' at time zone 'UTC'
2017-01-09 10:14:19	stk	I didn't even know that I could do 2 AT TIME ZONE like that
2017-01-09 10:14:33	RhodiumToad	obviously I picked Asia/Tashkent as a random example that happens to be at +5
2017-01-09 10:14:55	RhodiumToad	here's how it works
2017-01-09 10:15:14	◣	brentd (~brentd@p4FF83B19.dip0.t-ipconnect.de) has quit (Ping timeout: 248 seconds)
2017-01-09 10:15:36	RhodiumToad	if T is a timestamp without time zone, then  T at time zone Z  means:  what is the absolute time at which a clock on the wall in Z would show the time T
2017-01-09 10:15:51	◥	hotpanca_ (~hotpancak@69.197.29.37) has joined #postgresql
2017-01-09 10:16:02	⚡	tharkun_ is now known as tharkun
2017-01-09 10:16:21	RhodiumToad	if T is a timestamp WITH time zone (and therefore represents an absolute time), then  T at time zone Z  means:  what does the clock on the wall in Z show when the absolute time is T
2017-01-09 10:16:43	◥	Andoriyu (~Andoriyu@rrcs-74-87-203-130.west.biz.rr.com) has joined #postgresql
2017-01-09 10:16:58	RhodiumToad	so, if T is a timestamp without time zone,  T at time zone Z1 at time zone Z2  means:  when it's time T in Z1, what does the clock show in Z2?
2017-01-09 10:17:06	◣	catbox (c0654df6@gateway/web/freenode/ip.192.101.77.246) has quit (Quit: Page closed)
2017-01-09 10:18:31	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:b111:a5c8:13a:cbff) has quit (Ping timeout: 241 seconds)
2017-01-09 10:18:36	◣	NCS_One (~NCS_One@176.78.178.106) has quit (Ping timeout: 240 seconds)
2017-01-09 10:19:01	◣	nettoweb1 (~nettoweb@191.191.114.142) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-09 10:19:39	stk	I see
2017-01-09 10:19:45	◣	hotpanca_ (~hotpancak@69.197.29.37) has quit (Remote host closed the connection)
2017-01-09 10:19:49	◥	nettoweb (~nettoweb@191.191.114.142) has joined #postgresql
2017-01-09 10:20:00	stk	for future reference, what should I do if I am to design my own database?
2017-01-09 10:20:08	stk	use timestamptz for every case?
2017-01-09 10:20:13	RhodiumToad	for recording times when something actually happened, use timestamp with time zone
2017-01-09 10:20:18	threshar	that’s usually the right way
2017-01-09 10:20:18	StoneCypher	there are rare good cases for timestamp without
2017-01-09 10:20:21	StoneCypher	but not many
2017-01-09 10:20:28	RhodiumToad	(for scheduling future events it's more complicated, but that's less common)
2017-01-09 10:20:29	stk	StoneCypher: can you please point out?
2017-01-09 10:20:44	◣	Guest1913 (~debian@95-31-98-210.broadband.corbina.ru) has quit (Ping timeout: 258 seconds)
2017-01-09 10:20:53	StoneCypher	timestamp without is for things that you actually want to be disconnected from the local timezone, like if you want "this is normal time of day for X" and want it to vary according to the consumer
2017-01-09 10:20:59	StoneCypher	it's also appropriate for dealing with strict standard sql
2017-01-09 10:21:16	StoneCypher	i can count on one hand the number of times i've seen it used with intent and understanding in the last ten years
2017-01-09 10:21:25	RhodiumToad	yeah, pg's handling of timezones is not quite what the spec requires, but pg's way is actually useful and the spec's ... isn't
2017-01-09 10:21:47	StoneCypher	the specification's datetime approach is almost never useful except when dealing with backend interop, in my opinion
2017-01-09 10:22:04	StoneCypher	and even then only with oracle or db2, since mysql botches it in a novel way
2017-01-09 10:22:48	◣	flyingX (~flying@90.216.134.195) has quit
2017-01-09 10:22:58	stk	I see,
2017-01-09 10:23:00	RhodiumToad	timestamp without timezone is sometimes needed for future scheduling, if you don't know what the active timezone will be at the future time, or if it's possible that (for example) DST rules change between now and then
2017-01-09 10:23:23	◥	cartan (~cartan@p4FEEAE3B.dip0.t-ipconnect.de) has joined #postgresql
2017-01-09 10:23:24	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-09 10:23:48	▷	StoneCypher thinks ditching time zones to cope with dst is a difficult strategy to understand
2017-01-09 10:23:58	◥	M8bit[m] (M8bitmatri@gateway/shell/matrix.org/x-gxjhanybbqttwnbu) has joined #postgresql
2017-01-09 10:23:59	◥	wooya42[m] (wooya42mat@gateway/shell/matrix.org/x-lcudcqulxkoywtgz) has joined #postgresql
2017-01-09 10:23:59	◥	dcg_mx (sbtsmatrix@gateway/shell/matrix.org/x-mnidbgydblbdeztx) has joined #postgresql
2017-01-09 10:24:01	RhodiumToad	that's not the point
2017-01-09 10:24:01	◥	blackkatana[m] (blackkatan@gateway/shell/matrix.org/x-wkgqkkdajghtioiv) has joined #postgresql
2017-01-09 10:24:01	◥	gowthamraam[m] (gowthamraa@gateway/shell/matrix.org/x-pazvuxkpblkfvrlp) has joined #postgresql
2017-01-09 10:24:01	◥	davidblewett[m] (davidble1@gateway/shell/matrix.org/x-vgigzlfvqhwljnxd) has joined #postgresql
2017-01-09 10:24:01	StoneCypher	that suggests using something other than the database to normalize time zones, which risks drift
2017-01-09 10:24:13	◥	teste545456[m] (teste54545@gateway/shell/matrix.org/x-sbesnoaosbmozwba) has joined #postgresql
2017-01-09 10:24:14	RhodiumToad	using timestamp w/o tz for future scheduling isn't "ditching" timezones
2017-01-09 10:24:17	◥	mulk[m] (mulkmatrix@gateway/shell/matrix.org/x-ixcnrfwoavpmcbbo) has joined #postgresql
2017-01-09 10:24:18	◣	dsantiago (~dsantiago@104.175.193.69) has quit (Quit: Computer has gone to sleep.)
2017-01-09 10:24:18	◣	nettoweb (~nettoweb@191.191.114.142) has quit (Ping timeout: 248 seconds)
2017-01-09 10:24:18	◥	ss[m] (ssriotmatr@gateway/shell/matrix.org/x-veenndspmyputxeq) has joined #postgresql
2017-01-09 10:24:20	◥	samwise[m] (samwisemat@gateway/shell/matrix.org/x-xvijyhorkccszzfh) has joined #postgresql
2017-01-09 10:24:20	◥	shanek[m] (shanekmatr@gateway/shell/matrix.org/x-bxmukcpjmijjxeud) has joined #postgresql
2017-01-09 10:24:22	◣	Neo-- (~neo@89.143.15.222) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-09 10:24:22	threshar	StoneCypher: I did that eons ago. we hit EDT and my boss goes “why the hell are all the times off by an hour now?
2017-01-09 10:24:36	◥	einnjo[m] (einnjomatr@gateway/shell/matrix.org/x-khdjudypkvxulngc) has joined #postgresql
2017-01-09 10:24:37	◥	sergeyb[m] (sergeybmat@gateway/shell/matrix.org/x-etznohilmbjpybjx) has joined #postgresql
2017-01-09 10:24:37	◥	bardic[m] (bardicmatr@gateway/shell/matrix.org/x-rlomolfhplhkfxsw) has joined #postgresql
2017-01-09 10:24:37	◥	diamaths[m] (diamathsma@gateway/shell/matrix.org/x-xqlryfngtnprnooc) has joined #postgresql
2017-01-09 10:24:37	◥	broke[m] (brokematri@gateway/shell/matrix.org/x-ogvvrevxraecqerr) has joined #postgresql
2017-01-09 10:24:42	RhodiumToad	the problem is that if you store a timestamp WITH time zone and the DST rules change under you, then so does the stored value
2017-01-09 10:24:46	◣	saurabhjha (~saurabhjh@182.64.2.156) has quit (Ping timeout: 245 seconds)
2017-01-09 10:25:02	stk	I see the points, so choose the right tool for the right job
2017-01-09 10:25:09	stk	not blindly let everything in default
2017-01-09 10:25:16	RhodiumToad	(this isn't a problem for storing _when_ something happened, because past DST rules don't change unless the admin screwed up)
2017-01-09 10:25:17	xocolatl	if in doubt, use timestamptz
2017-01-09 10:26:03	◥	saurabhjha (~saurabhjh@182.64.145.161) has joined #postgresql
2017-01-09 10:26:13	◣	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has left #postgresql
2017-01-09 10:26:20	◣	justatheory (~justatheo@c-73-164-241-57.hsd1.or.comcast.net) has quit (Quit: justatheory)
2017-01-09 10:26:47	stk	thank you very much, everyone, you all enlightened me on this matter
2017-01-09 10:26:50	StoneCypher	RhodiumToad: being honest, i feel like splitting that fix across two pieces of server software is a disimprovemetn
2017-01-09 10:27:06	StoneCypher	if that's all handled by a database, it's simple enough to run a single bounded query to fix it (speaking from experience)
2017-01-09 10:27:09	RhodiumToad	StoneCypher: who said anything about doing that?
2017-01-09 10:27:25	RhodiumToad	StoneCypher: pg's timezone operators are entirely up to the job
2017-01-09 10:27:44	StoneCypher	well, reinvent timezones if you like
2017-01-09 10:27:51	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-09 10:27:55	RhodiumToad	StoneCypher: who said anything about reinventing anything of the sort?
2017-01-09 10:28:00	StoneCypher	you told me what you didn't want to do rather than what you wanted to do, so i'm unable to guess what strategy you prefer
2017-01-09 10:28:04	StoneCypher	dude
2017-01-09 10:28:10	xocolatl	sweet
2017-01-09 10:28:11	▷	StoneCypher shrugs.  "nevermind"
2017-01-09 10:28:16	RhodiumToad	StoneCypher: use the AT TIME ZONE operator to convert as needed, problem solved
2017-01-09 10:28:17	threshar	Let’s just ditch timezones altogether! it’ll be so much easier
2017-01-09 10:28:25	StoneCypher	that has literally the exact same problem
2017-01-09 10:28:31	RhodiumToad	StoneCypher: nonsense
2017-01-09 10:28:35	StoneCypher	just that now you have to figure out when the query fired
2017-01-09 10:28:36	StoneCypher	ok
2017-01-09 10:28:52	StoneCypher	i guess we see this incompatibly.
2017-01-09 10:28:53	◥	TMM (~hp@fsf/member/pdpc.professional.tmm) has joined #postgresql
2017-01-09 10:28:54	RhodiumToad	StoneCypher: firstly, it's guaranteed to get the same results as other conversions inside the db since it's using the same tz db
2017-01-09 10:29:17	ilmari	StoneCypher: you'd store the time zone somewhere too (either in a separate column, or a preference, or, or, or.), and use that with the AT TIME ZONE operator
2017-01-09 10:29:19	RhodiumToad	StoneCypher: secondly, why would it need to know when the query fired? (and if it did, there's now())
2017-01-09 10:29:33	StoneCypher	ilmari: i would do it quite differently.  and have, in production.
2017-01-09 10:29:58	StoneCypher	RhodiumToad: because that's when the server software was upgraded to the new incompatible tz database, which is where you repair the data rift.
2017-01-09 10:30:18	RhodiumToad	StoneCypher: if you're storing timestamp without time zone, there's nothing to repair
2017-01-09 10:30:26	StoneCypher	i don't want to argue.  you're yelling "nonsense" at me without letting me make my case.  you win
2017-01-09 10:30:53	RhodiumToad	StoneCypher: so make your case
2017-01-09 10:31:00	StoneCypher	no thank you.
2017-01-09 10:32:03	RhodiumToad	updating the tzdb isn't the only issue. Here's another example: suppose I, in the UK, schedule a meeting with someone in the US next week
2017-01-09 10:32:54	RhodiumToad	when I travel to the US, I don't want it to show up in my calendar with its UK time, do I?
2017-01-09 10:33:08	◥	hotpancakes (~hotpancak@69.197.29.37) has joined #postgresql
2017-01-09 10:33:10	◥	NCS_One (~NCS_One@dsl-178-106.bl26.telepac.pt) has joined #postgresql
2017-01-09 10:33:26	◥	filiprem (~filip@188.146.20.53.nat.umts.dynamic.t-mobile.pl) has joined #postgresql
2017-01-09 10:33:38	RhodiumToad	but more to the point, I also don't want it to show up with its UK time _even before I travel_
2017-01-09 10:33:58	threshar	You just care that it’s 3PM tuesday
2017-01-09 10:35:21	RhodiumToad	whereas some other guy who is attending remotely wants it to show up in his local timezone
2017-01-09 10:35:49	RhodiumToad	so, in cases like this, conversions are always required
2017-01-09 10:37:47	xocolatl	that seems like the app's job, though.  I don't see why *storing* it with tz is an inconvenience here
2017-01-09 10:37:48	ilmari	the event would be stored with ('2017-01-17 15:00:00', 'America/New_York'), and each user could have a preference for how to show it
2017-01-09 10:38:12	◥	elein (~chatzilla@192.150.10.209) has joined #postgresql
2017-01-09 10:38:18	ilmari	xocolatl: because the time zone offset rules could change between the meeting being scheduled and happening
2017-01-09 10:38:52	◣	xnox (~xnox@ubuntu/member/xnox) has quit (Ping timeout: 255 seconds)
2017-01-09 10:39:04	RhodiumToad	one thing the tzdb rules don't actually allow for is converting times from an old zone version to a new one
2017-01-09 10:39:05	ilmari	so if you convert it to tstz when it's scheduled, it could become wrong
2017-01-09 10:39:13	RhodiumToad	by the time you upgrade, the old version is gone
2017-01-09 10:39:31	StoneCypher	it can be wrong either way
2017-01-09 10:39:36	RhodiumToad	so there's no way to do  col at time zone 'blah:old' at time zone 'blah:new'
2017-01-09 10:39:44	StoneCypher	more often the actual time specified is more important than the calendar position
2017-01-09 10:39:54	StoneCypher	under either strategy you end up having to mark which one is important
2017-01-09 10:40:51	◥	xnox (~xnox@ubuntu/member/xnox) has joined #postgresql
2017-01-09 10:44:15	◥	Lordz (~Adium@186.215.116.176) has joined #postgresql
2017-01-09 10:44:24	RhodiumToad	yes, dealing with future times is hard
2017-01-09 10:44:28	◥	mizhka (~mizhka@cloud.unclebear.ru) has joined #postgresql
2017-01-09 10:45:00	◥	HarrisonF (~Harrison@199.201.64.135) has joined #postgresql
2017-01-09 10:45:00	◣	HarrisonF (~Harrison@199.201.64.135) has quit (Changing host)
2017-01-09 10:45:00	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-09 10:45:00	▷	StoneCypher finds them to be relatively easy *shrugs*
2017-01-09 10:45:23	StoneCypher	just put the write behind a stored procedure that has a tick counter for which version of the server is running
2017-01-09 10:45:34	StoneCypher	then wait until the new server's up, and update everything on the old tag.
2017-01-09 10:45:36	RhodiumToad	... what
2017-01-09 10:45:42	◣	Lordz (~Adium@186.215.116.176) has left #postgresql
2017-01-09 10:45:57	RhodiumToad	unfortunately you don't have any guarantee that tzdb updates are linked to server version
2017-01-09 10:46:01	◣	Epitrope (~owenja@freegeek/epitrope) has quit (Ping timeout: 245 seconds)
2017-01-09 10:46:16	RhodiumToad	especially since many packagings punt to the OS's tzdb for excellent reasons
2017-01-09 10:46:17	StoneCypher	the timezone database should not be updated with a running postgres node.  bang: now you do.
2017-01-09 10:47:21	RhodiumToad	so I update the OS's tzdb and restart postgres, how is the procedure supposed to detect that?
2017-01-09 10:47:34	StoneCypher	because you change the stored proc
2017-01-09 10:47:50	◥	nettoweb (~nettoweb@191.191.114.142) has joined #postgresql
2017-01-09 10:47:52	RhodiumToad	and without access to the old tzdb, there's no way to tell what changed
2017-01-09 10:47:53	StoneCypher	or hell, you can even have the stored proc pull from a table, and just change the value in the table
2017-01-09 10:47:57	StoneCypher	:/
2017-01-09 10:48:04	StoneCypher	these are easily solved problems if you try.
2017-01-09 10:48:06	xocolatl	this sounds very fragile
2017-01-09 10:48:25	◣	wsieroci (~wsieroci@095160155147.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2017-01-09 10:48:51	StoneCypher	the alternative, to me, seems legit dangerous, from experience.  maybe the team i worked with was too weak to do it RhodiumToad's way, though.  *shrugs*
2017-01-09 10:49:17	StoneCypher	yes, making changes to server interpretation of data is inherently fragile.  it's also manageable, imo.
2017-01-09 10:49:22	MarcWeber	RhodiumToad: http://dpaste.com/35HFP59 is my case
2017-01-09 10:49:30	StoneCypher	the same stuff comes up around locales, etc.
2017-01-09 10:49:32	ilmari	the tzdb knows what the rules were at any time in the past, so converting the example ('2017-01-17 15:00:00', 'America/New_York') example will give you the right answer even if the rules change in the future
2017-01-09 10:50:35	ilmari	but if you convert it to tstz on input, you can't know if it's correct if the rules change before the scheduled time
2017-01-09 10:50:39	RhodiumToad	MarcWeber: the order of clauses doesn't matter to pg.
2017-01-09 10:51:10	RhodiumToad	MarcWeber: are the lists explicit lists, or queries?
2017-01-09 10:51:33	◣	fordfrog (~fordfrog@gentoo/developer/fordfrog) has quit (Quit: Leaving)
2017-01-09 10:51:52	MarcWeber	they are queries such ass addr id within radius of pt 1 or within radius of pt2 or belongs to group1 or to group2 or not to group3
2017-01-09 10:52:18	RhodiumToad	the tzdb knows what the rules were for past times, but only in a single-temporal sense, not bitemporal
2017-01-09 10:53:13	MarcWeber	I understand that "NOT EXISTS" is fastest if there are only some to be checked. But I guess I should be using id IN () for the other cases so the engine can find out which one to look at first ..
2017-01-09 10:53:26	◥	the_rat (~the_rat@2a02:8109:8380:3e8c:48c8:81a5:a36:65b) has joined #postgresql
2017-01-09 10:53:39	MarcWeber	So I cannot use the same queries for add/drop but that would be managable.
2017-01-09 10:53:51	RhodiumToad	MarcWeber: what do the subqueries actually look like?
2017-01-09 10:56:15	MarcWeber	http://mawercer.de/tmp/y.txt
2017-01-09 10:57:21	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2017-01-09 10:57:29	◥	kittybee (cc394084@gateway/web/freenode/ip.204.57.64.132) has joined #postgresql
2017-01-09 10:57:48	kittybee	Hey all! Quick question. If I have a table where one column is ids, is there a way to return rows where the ids are one number apart?
2017-01-09 10:58:19	MarcWeber	If there is a zip list given then the strategy is to only use some people from the zip list because it'll greatly reduce work. The the other could be checked by 'exists'. Otherwise it could be that a 'belongs to group' query does limit the result set to 500 .. than that could be chosen first.
2017-01-09 10:59:27	MarcWeber	So I should implement the geo stuff with IN () ... and the others with exists unless I know there only "some" returned ? Does pg optimize id IN ( SELECT id ..) like exists ?
2017-01-09 10:59:42	◥	bmejias (~bmejias@2a02:a03f:1ae7:db00:ac54:463f:cf7d:ca8d) has joined #postgresql
2017-01-09 11:00:17	MarcWeber	Its only one group having 300K people belong to.
2017-01-09 11:00:29	RhodiumToad	MarcWeber: IN and EXISTS should be treated identically by the optimizer
2017-01-09 11:00:39	RhodiumToad	MarcWeber: it's only NOT IN that's different
2017-01-09 11:01:16	RhodiumToad	kittybee: see the lead() or lag() window functions
2017-01-09 11:01:51	◣	EvanCarroll (~ecarroll@107-211-139-97.lightspeed.hstntx.sbcglobal.net) has quit (Ping timeout: 240 seconds)
2017-01-09 11:03:47	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-09 11:03:55	◥	EvanCarroll (~ecarroll@172.56.14.223) has joined #postgresql
2017-01-09 11:04:54	◣	kittybee (cc394084@gateway/web/freenode/ip.204.57.64.132) has quit (Ping timeout: 260 seconds)
2017-01-09 11:05:06	◥	davidfetter (~chatzilla@2603:3024:e05:af00::1692) has joined #postgresql
2017-01-09 11:05:14	◣	StoneCypher (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has quit (Read error: Connection reset by peer)
2017-01-09 11:05:15	◥	johnhaugeland (~johnhauge@66-194-1-26.STATIC.TWTELECOM.NET) has joined #postgresql
2017-01-09 11:06:34	MarcWeber	RhodiumToad: two zips & large group, fastest way is to get all people from zips, then check whether tehy belong to group.   two zips & smallest_group -> best strategy would be to first check people belonging to group, then check wether they are within zip region. Does the engine make such difference or does it build up the execution plan first, then run it?
2017-01-09 11:06:42	◥	ych (~horrror@93-173-15-210.bb.netvision.net.il) has joined #postgresql
2017-01-09 11:07:10	RhodiumToad	have you looked at the actual plans you're getting?
2017-01-09 11:07:30	◥	slap_stick (~slap_stic@188.172.149.126) has joined #postgresql
2017-01-09 11:07:38	MarcWeber	And there are more filters such as "only people with mobile number" or "having red hair".
2017-01-09 11:07:40	◥	BitWhisperer (~BitWhispe@pool-96-227-235-90.phlapa.fios.verizon.net) has joined #postgresql
2017-01-09 11:07:49	MarcWeber	I want to understand what to look for first.
2017-01-09 11:07:53	RhodiumToad	the execution plan can only be constructed based on estimated sizes, which rely on sampled statistics
2017-01-09 11:08:20	RhodiumToad	EXPLAIN is your friend
2017-01-09 11:08:39	◥	HarrisonF (~Harrison@199.201.64.135) has joined #postgresql
2017-01-09 11:08:39	◣	HarrisonF (~Harrison@199.201.64.135) has quit (Changing host)
2017-01-09 11:08:39	◥	HarrisonF (~Harrison@mysql/training/HarrisonF) has joined #postgresql
2017-01-09 11:10:24	◥	gelignite (~gelignite@x4db6b270.dyn.telefonica.de) has joined #postgresql
2017-01-09 11:10:26	◣	HarrisonF (~Harrison@mysql/training/HarrisonF) has quit (Client Quit)
2017-01-09 11:10:31	◥	raynold (uid201163@gateway/web/irccloud.com/x-atkfqqsiesmzfmay) has joined #postgresql
2017-01-09 11:12:49	raynold	ahh it's a wonderful day
2017-01-09 11:15:01	davidfetter	hi
2017-01-09 11:15:23	davidfetter	RhodiumToad, what was that magic word again?
2017-01-09 11:15:43	RhodiumToad	pginfra?
2017-01-09 11:15:49	davidfetter	thanks :)
2017-01-09 11:16:05	◥	matkor (~matkor@apn-31-1-188-28.dynamic.gprs.plus.pl) has joined #postgresql
2017-01-09 11:16:15	▷	davidfetter managed to arrive at his house about 3:30 this morning. whee!!!
2017-01-09 11:16:31	◣	ych (~horrror@93-173-15-210.bb.netvision.net.il) has quit (Ping timeout: 240 seconds)
2017-01-09 11:16:34	◥	russw (~russ@bas1-ottawa01-70-54-90-140.dsl.bell.ca) has joined #postgresql
2017-01-09 11:16:58	◣	bocaneri (~bocaneri@about/linux/staff/sauvin) has quit (Write error: Connection reset by peer)
2017-01-10 10:59:40	◥	boon (~david@66.195.46.242) has joined #postgresql
2017-01-10 10:59:40	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2017-01-10 10:59:40	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2017-01-10 10:59:40	⚡	Channel #postgresql: 940 nicks (0 ops, 0 voices, 940 normals)
2017-01-10 10:59:40	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2017-01-10 10:59:40	⚡	URL for #postgresql: http://www.postgresql.org
2017-01-10 11:00:23	RhodiumToad	the sql spec spends 2 pages giving rules for how to split an identifier chain up into column and field references, but then doesn't actually say what happens in the ambiguous case
2017-01-10 11:00:49	buremba	isn't (table).column is also valid though? it's just parenthesizes are not required in this case
2017-01-10 11:01:05	RhodiumToad	no, it's not valid
2017-01-10 11:01:10	RhodiumToad	not in standard sql
2017-01-10 11:02:24	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2017-01-10 11:02:27	◥	mspencer (~mspencer@82-69-74-146.dsl.in-addr.zen.co.uk) has joined #postgresql
2017-01-10 11:03:15	buremba	select (s).actions from (select 1 actions) s; works as expected?
2017-01-10 11:03:43	buremba	what am i missing here?
2017-01-10 11:03:56	RhodiumToad	pg allows it, the spec doesn't
2017-01-10 11:04:21	RhodiumToad	in pg, you can refer to a table or correlation name bare, meaning the row value of the whole row
2017-01-10 11:04:29	RhodiumToad	like  row(s.*)
2017-01-10 11:04:48	◣	treehug88 (~textual@cpe-68-173-227-135.nyc.res.rr.com) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-10 11:05:22	◥	mlt- (~user@unaffiliated/mlt-) has joined #postgresql
2017-01-10 11:05:24	◣	hotpanca_ (~hotpancak@2604:2000:ee17:8d00:bc48:2ba8:3a0c:cb93) has quit (Remote host closed the connection)
2017-01-10 11:05:24	buremba	ah, my point was people can't recognize it by just looking so if it doesn't obey the spec, it should find a way to prevent ambiguity
2017-01-10 11:05:29	◥	jouir (~jouir@109.132.79.44) has joined #postgresql
2017-01-10 11:06:05	buremba	in response to "on the contrary, it clearly disambiguates the difference between table.column and column.field"
2017-01-10 11:06:46	◣	fordfrog (~fordfrog@gentoo/developer/fordfrog) has quit (Quit: Leaving)
2017-01-10 11:06:46	◥	NCS_One (~NCS_One@dsl-178-106.bl26.telepac.pt) has joined #postgresql
2017-01-10 11:07:42	◥	tomaw (tom@freenode/staff/tomaw) has joined #postgresql
2017-01-10 11:08:12	◣	wsieroci (~wsieroci@095160155111.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2017-01-10 11:09:37	◥	DexterLB (~dex@77.85.3.113) has joined #postgresql
2017-01-10 11:10:43	mspencer	Hi. Apologies if this is not the best place to ask. Does anyone here know whether a prepared statement can be re-used between transactions? A library that I use creates a named statement that creates a cursor and a second named statement that fetches data using the cursor. Data is fetched and then the library closes the cursor and re-opens it. On re-fetching data from the cursor, I see a "ERROR: cached plan must not change
2017-01-10 11:10:57	mspencer	result type [Status=7]" error. The underlying tables have not changed at all. Postgresql version is 9.5.5.
2017-01-10 11:11:01	◥	slap_stick (~slap_stic@188.172.149.126) has joined #postgresql
2017-01-10 11:11:23	RhodiumToad	the prepared statement can be reused, but the number, names and types of result columns must not change
2017-01-10 11:11:23	ska	For a user that has access granted for all public schema tables, does that user need any explicit access to db functions?
2017-01-10 11:11:53	RhodiumToad	this is because the client can do a Describe on the statement to get the result format back, and is entitled to assume that it won't ever change
2017-01-10 11:12:08	ska	Every function i test with such a user is shows positive access.
2017-01-10 11:12:15	RhodiumToad	ska: functions in the db have execute granted to public by default
2017-01-10 11:12:34	Snow-Man	assuming access to the schema they are in has been granted.
2017-01-10 11:12:47	RhodiumToad	ska: this is generally safe because functions that aren't SECURITY DEFINER or in untrusted languages can't do anything that their caller can't do
2017-01-10 11:12:52	◥	peerce (mudshark@c-73-222-225-64.hsd1.ca.comcast.net) has joined #postgresql
2017-01-10 11:12:54	Snow-Man	There are also certain functions which have had access to them revoked from public.
2017-01-10 11:13:00	Snow-Man	(in recent releases)
2017-01-10 11:13:15	RhodiumToad	ska: (if you create security definer or untrusted language functions, it's up to the function creator to revoke access)
2017-01-10 11:13:32	mspencer	From what I can see, nothing is changing in the declaration and the underlying tables definitely are not changing.
2017-01-10 11:13:36	RhodiumToad	well, all builtin functions are untrusted...
2017-01-10 11:13:52	◣	acetakwas (~acetakwas@154.65.5.250) has quit (Ping timeout: 240 seconds)
2017-01-10 11:14:16	RhodiumToad	mspencer: pg is better at detecting such changes than you are; what is the actual statement?
2017-01-10 11:14:21	◣	inoas (~leo@unaffiliated/ionas) has quit (Quit: inoas)
2017-01-10 11:16:12	◣	vovka (~vovka@46.72.33.152) has quit (Remote host closed the connection)
2017-01-10 11:16:17	mspencer	Is it OK to paste here? It is a few lines long.
2017-01-10 11:16:22	RhodiumToad	??paste
2017-01-10 11:16:22	pg_docbot	http://explain.depesz.com/ :: http://fpaste.org
2017-01-10 11:16:22	pg_docbot	http://sqlfiddle.com/ :: http://dpaste.com/
2017-01-10 11:16:42	RhodiumToad	use one of those (or gist.github or whatever)
2017-01-10 11:16:53	mspencer	Ok. It is here: https://paste.fedoraproject.org/525178/
2017-01-10 11:17:02	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:35a4:92fb:f8a0:eb90) has joined #postgresql
2017-01-10 11:17:27	RhodiumToad	is that the statement you're preparing, or the query for the cursor?
2017-01-10 11:17:27	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-10 11:17:45	◥	lolek (~lolek@unaffiliated/marcin) has joined #postgresql
2017-01-10 11:17:52	◣	FofG (uid91005@gateway/web/irccloud.com/x-hlsynzdzmmjactlm) has quit (Quit: Connection closed for inactivity)
2017-01-10 11:18:05	◣	blackmesa (~blackmesa@aftr-37-201-227-31.unity-media.net) has quit (Ping timeout: 240 seconds)
2017-01-10 11:18:07	◥	orospakr (~orospakr@toroon12-3096783576.sdsl.bell.ca) has joined #postgresql
2017-01-10 11:18:10	mspencer	The library that I use submits a named statement that creates a cursor for the statement and then another named statement to fetch from the cursor.
2017-01-10 11:18:26	mspencer	Let me paste some pertinent information from the library log, in case it helps.
2017-01-10 11:18:30	RhodiumToad	can you show the exact statements that are being prepared?
2017-01-10 11:18:50	RhodiumToad	and are they being prepared using sql PREPARE or by protocol-level PQprepare?
2017-01-10 11:19:05	mspencer	I think it is by PQprepare. Just a sec.
2017-01-10 11:19:33	mspencer	Yes. Let me paste some of the log as it will probably make it clearer for you what is going on.
2017-01-10 11:20:41	◥	velix_inuse (~Velix@x4db5a939.dyn.telefonica.de) has joined #postgresql
2017-01-10 11:21:19	◣	dionysus69 (~Thunderbi@unaffiliated/dionysus69) has quit (Remote host closed the connection)
2017-01-10 11:21:20	◣	tourdownunder (~tourdownu@pa49-185-252-91.pa.vic.optusnet.com.au) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 11:21:56	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Ping timeout: 252 seconds)
2017-01-10 11:22:00	mspencer	Part of the log is here: https://paste.fedoraproject.org/525183/ The actual statement is as pasted before.
2017-01-10 11:22:23	◥	dargains (~dargains@187.110.239.75) has joined #postgresql
2017-01-10 11:23:01	◥	puchacz (~puchacz@cpc96904-walt25-2-0-cust679.13-2.cable.virginm.net) has joined #postgresql
2017-01-10 11:23:19	◥	matkor (~matkor@apn-31-1-188-28.dynamic.gprs.plus.pl) has joined #postgresql
2017-01-10 11:24:01	◣	Slashman (~Slash@cosium-152-18.fib.nerim.net) has quit (Quit: Leaving)
2017-01-10 11:24:12	◣	szymon (~szymon@staticline-31-182-67-100.toya.net.pl) has quit
2017-01-10 11:24:27	RhodiumToad	mspencer: hmm.
2017-01-10 11:24:28	◣	peerce (mudshark@c-73-222-225-64.hsd1.ca.comcast.net) has quit (Ping timeout: 260 seconds)
2017-01-10 11:25:45	RhodiumToad	mspencer: search_path hasn't been changed?
2017-01-10 11:25:52	◣	dargains_ (~dargains@179-240-167-76.3g.claro.net.br) has quit (Ping timeout: 240 seconds)
2017-01-10 11:27:17	◣	dargains (~dargains@187.110.239.75) has quit (Ping timeout: 245 seconds)
2017-01-10 11:27:17	mspencer	Not that I am aware of. A default database search path has been specified. I would have hoped that the search path would have been irrelevant if the table schemas are specified.
2017-01-10 11:27:56	mspencer	I see no statements that alter the search path in the library log file.
2017-01-10 11:28:40	◥	dargains (~dargains@187.110.239.75) has joined #postgresql
2017-01-10 11:29:08	RhodiumToad	you're right, it should be irrelevant
2017-01-10 11:29:40	◥	teslix (~Adrien@2a01:cb14:2e8:900:391a:5611:3652:74bb) has joined #postgresql
2017-01-10 11:30:16	mspencer	I am just in the process of pasting the entire log file, so that you can see the operations that the library performs. There may be something there I have missed, but I have traced through the events that mention the two important named statements.
2017-01-10 11:32:02	mspencer	Is there any way of forcing Postgresql to not store cached plans for certain statements?
2017-01-10 11:32:25	◥	gelignite (~gelignite@x4e3115f5.dyn.telefonica.de) has joined #postgresql
2017-01-10 11:32:58	RhodiumToad	no
2017-01-10 11:33:12	◣	IPGlider (~textual@62.83.5.49.dyn.user.ono.com) has quit (Quit: IPGlider)
2017-01-10 11:33:16	RhodiumToad	that would be the wrong fix anyway
2017-01-10 11:33:33	mspencer	It was more to see if it had an effect, rather than something permanent.
2017-01-10 11:34:12	mspencer	I wonder whether it would be appropriate to attempt to log requests from the server point of view. Something tells me it would be a good idea.
2017-01-10 11:34:24	◣	leo2007 (~leo2007@139.59.241.182) has quit (Quit: happy hacking)
2017-01-10 11:34:24	RhodiumToad	log_statement will do that
2017-01-10 11:34:26	◣	zivester (~zivester@38.104.66.138) has quit (Read error: Connection reset by peer)
2017-01-10 11:34:52	mspencer	Will it track all activity associated with the statement, or should I attempt to log the complete session?
2017-01-10 11:34:57	◥	zivester (~zivester@38.104.66.138) has joined #postgresql
2017-01-10 11:35:30	RhodiumToad	log_statement isn't per statement, it controls whether the server logs all statements
2017-01-10 11:35:45	mspencer	Ahh, OK. Let me do some reading. Thanks for your input so far.
2017-01-10 11:35:48	◣	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 11:39:43	◣	dargains (~dargains@187.110.239.75) has quit
2017-01-10 11:40:31	◥	Rafzzz_ (~textual@host109-156-103-201.range109-156.btcentralplus.com) has joined #postgresql
2017-01-10 11:42:26	◥	other_spacecadet (~spacecade@h130.45.139.40.ip.windstream.net) has joined #postgresql
2017-01-10 11:43:05	◥	IPGlider (~textual@62.83.5.49.dyn.user.ono.com) has joined #postgresql
2017-01-10 11:44:05	◣	spacecadetbrown (~spacecade@h130.45.139.40.ip.windstream.net) has quit (Ping timeout: 240 seconds)
2017-01-10 11:44:24	◥	Lordz (~Adium@186.215.116.176) has joined #postgresql
2017-01-10 11:45:26	◥	dege (~dege@50-204-244-30-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-10 11:46:19	◣	uncleyear (~ian@unaffiliated/uncleyear) has quit (Disconnected by services)
2017-01-10 11:46:27	◥	uncleyear (~ian@unaffiliated/uncleyear) has joined #postgresql
2017-01-10 11:46:29	◣	DexterLB (~dex@77.85.3.113) has quit (*.net *.split)
2017-01-10 11:46:29	◣	popnfresh (~popnfrsh@hackshack.ca) has quit (*.net *.split)
2017-01-10 11:46:29	◣	zuck05 (~goirc@103.77.56.164) has quit (*.net *.split)
2017-01-10 11:46:29	◣	javi404 (~quassel@pool-100-8-254-88.nwrknj.fios.verizon.net) has quit (*.net *.split)
2017-01-10 11:46:29	◣	K1rk (~Kirk@158.69.167.167) has quit (*.net *.split)
2017-01-10 11:46:29	◣	modin (~modin@h-6-164.a444.priv.bahnhof.se) has quit (*.net *.split)
2017-01-10 11:46:29	◣	robink (~quassel@unaffilated/robink) has quit (*.net *.split)
2017-01-10 11:46:29	◣	shampine (~shampine@162.243.131.112) has quit (*.net *.split)
2017-01-10 11:46:29	◣	fibes (fibes@wrong.be) has quit (*.net *.split)
2017-01-10 11:46:29	◣	Jongee (~Jon@66.187.72.54) has quit (*.net *.split)
2017-01-10 11:46:29	◣	albertlast (~albertlas@0exclusive.de) has quit (*.net *.split)
2017-01-10 11:46:29	◣	MatheusOl (~matheusol@unaffiliated/matheusol) has quit (*.net *.split)
2017-01-10 11:46:30	◣	kylo (~kylo@ec2-54-164-32-60.compute-1.amazonaws.com) has quit (*.net *.split)
2017-01-10 11:46:30	◣	Lordz (~Adium@186.215.116.176) has left #postgresql
2017-01-10 11:46:38	◥	nettoweb1 (~nettoweb@191.191.114.142) has joined #postgresql
2017-01-10 11:46:41	◥	javi404 (~quassel@pool-100-8-254-88.nwrknj.fios.verizon.net) has joined #postgresql
2017-01-10 11:46:47	◣	other_spacecadet (~spacecade@h130.45.139.40.ip.windstream.net) has quit (Ping timeout: 256 seconds)
2017-01-10 11:46:48	◥	K1rk (~Kirk@158.69.167.167) has joined #postgresql
2017-01-10 11:46:54	◥	MatheusOl (~matheusol@ec2-50-19-155-105.compute-1.amazonaws.com) has joined #postgresql
2017-01-10 11:46:57	◣	nettoweb (~nettoweb@191.191.114.142) has quit (Ping timeout: 248 seconds)
2017-01-10 11:47:07	◥	wsieroci (~wsieroci@095160155111.dynamic-ww-12.vectranet.pl) has joined #postgresql
2017-01-10 11:47:13	◥	albertlast (~albertlas@0exclusive.de) has joined #postgresql
2017-01-10 11:47:28	◣	SteeleNivenson (~SteeleNiv@c-73-162-143-84.hsd1.ca.comcast.net) has quit (Quit: This computer has gone to sleep)
2017-01-10 11:48:43	◣	IPGlider (~textual@62.83.5.49.dyn.user.ono.com) has quit (Quit: IPGlider)
2017-01-10 11:49:46	RhodiumToad	mspencer: I can't reproduce with a simple test. what pg version?
2017-01-10 11:50:24	mspencer	9.5.5
2017-01-10 11:50:27	◣	m451 (~m451@pD9FA41FB.dip0.t-ipconnect.de) has quit (Read error: Connection reset by peer)
2017-01-10 11:50:37	◥	DexterLB (~dex@77.85.3.113) has joined #postgresql
2017-01-10 11:50:53	mspencer	I am just looking into logging on the server at the moment. When I have more info, I will post it.
2017-01-10 11:51:33	◥	AwoL (~Golanv@unaffiliated/golanv) has joined #postgresql
2017-01-10 11:54:19	◣	MatheusOl (~matheusol@ec2-50-19-155-105.compute-1.amazonaws.com) has quit (Changing host)
2017-01-10 11:54:19	◥	MatheusOl (~matheusol@unaffiliated/matheusol) has joined #postgresql
2017-01-10 11:54:34	◥	eeriegeek (~eeriegeek@73.31.123.0) has joined #postgresql
2017-01-10 11:56:54	◥	blackmesa (~blackmesa@aftr-37-201-227-31.unity-media.net) has joined #postgresql
2017-01-10 11:56:58	◥	rkazak (~rkazak@67.170.253.182) has joined #postgresql
2017-01-10 11:58:00	◣	Rafzzz_ (~textual@host109-156-103-201.range109-156.btcentralplus.com) has quit (Quit: My Mac has gone to sleep. ZZZzzz…)
2017-01-10 11:58:09	◣	slap_stick (~slap_stic@188.172.149.126) has quit (Ping timeout: 248 seconds)
2017-01-10 12:00:02	◥	slap_stick (~slap_stic@188.172.149.126) has joined #postgresql
2017-01-10 12:00:16	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-10 12:00:28	◣	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has quit (Remote host closed the connection)
2017-01-10 12:00:35	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-10 12:00:39	◥	tfitts (uid158900@gateway/web/irccloud.com/x-ccmddnflonafgvwe) has joined #postgresql
2017-01-10 12:01:13	◣	justanotheruser (~justanoth@unaffiliated/justanotheruser) has quit (Ping timeout: 260 seconds)
2017-01-10 12:01:43	◣	wsieroci (~wsieroci@095160155111.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2017-01-10 12:01:55	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-10 12:02:14	◣	buremba (5e37ac1b@gateway/web/freenode/ip.94.55.172.27) has quit (Quit: Page closed)
2017-01-10 12:02:50	mspencer	RhodiumToad: Where would be best to upload the log file? It is going to be too large to paste. There is some more data available which may prove useful.
2017-01-10 12:03:34	◣	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has quit (Ping timeout: 258 seconds)
2017-01-10 12:04:33	◣	saurabhjha (~saurabhjh@182.64.57.98) has quit (Remote host closed the connection)
2017-01-10 12:06:27	mspencer	I have used pastebin, if you are OK with that: http://pastebin.com/cHd9n08N
2017-01-10 12:06:28	◥	Flotho66 (~florent@2a01:e35:8ae3:b2f0:aadf:7f06:4372:61c3) has joined #postgresql
2017-01-10 12:07:11	◣	hahuang65 (~hahuang65@2601:647:4000:d7:4423:e72e:5f0:2a4a) has quit (Ping timeout: 256 seconds)
2017-01-10 12:07:13	◣	dys (~dys@ip-109-44-0-222.web.vodafone.de) has quit (Ping timeout: 248 seconds)
2017-01-10 12:07:46	◥	ramfjord_ (~tramfjord@12.202.171.244) has joined #postgresql
2017-01-10 12:07:48	◥	nineinchnick (~jwas@109.231.18.27) has joined #postgresql
2017-01-10 12:07:57	mspencer	The SQL statement is different, but the issue is the same.
2017-01-10 12:10:05	◣	ramfjord (~tramfjord@12.202.171.244) has quit (Ping timeout: 240 seconds)
2017-01-10 12:11:18	◣	bdunavant (~bdunavant@static-108-48-124-82.washdc.fios.verizon.net) has quit (Remote host closed the connection)
2017-01-10 12:11:59	◣	ramfjord_ (~tramfjord@12.202.171.244) has quit (Ping timeout: 252 seconds)
2017-01-10 12:12:27	◥	spacecadetbrown (~spacecade@2601:141:301:a5ce:adf4:61e1:c819:4fb8) has joined #postgresql
2017-01-10 12:13:10	◥	wsieroci (~wsieroci@095160155111.dynamic-ww-12.vectranet.pl) has joined #postgresql
2017-01-10 12:13:13	◣	nanga (~nanga@unaffiliated/m0f0x) has quit (Read error: Connection timed out)
2017-01-10 12:13:26	◥	nanga (~nanga@191.96.4.30) has joined #postgresql
2017-01-10 12:13:26	◣	nanga (~nanga@191.96.4.30) has quit (Changing host)
2017-01-10 12:13:26	◥	nanga (~nanga@unaffiliated/m0f0x) has joined #postgresql
2017-01-10 12:14:11	◥	sfkeller (~chatzilla@135.209.196.178.dynamic.wline.res.cust.swisscom.ch) has joined #postgresql
2017-01-10 12:14:32	◣	robinho86 (~robsonjf@201.22.86.124.static.gvt.net.br) has left #postgresql
2017-01-10 12:14:38	◥	dys (~dys@ip-109-44-1-144.web.vodafone.de) has joined #postgresql
2017-01-10 12:17:31	◥	donchava (c0654df6@gateway/web/freenode/ip.192.101.77.246) has joined #postgresql
2017-01-10 12:17:59	davidfetter_ge	dys, pm?
2017-01-10 12:19:35	◣	rogerjv (~textual@201.230.241.156) has quit (Ping timeout: 240 seconds)
2017-01-10 12:21:24	◥	r_hector (~richard@203-97-170-14.cable.telstraclear.net) has joined #postgresql
2017-01-10 12:22:43	◣	Maxel_ (~Maxel@50-241-60-122-static.hfc.comcastbusiness.net) has quit (Read error: Connection reset by peer)
2017-01-10 12:24:08	◣	nettoweb1 (~nettoweb@191.191.114.142) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 12:25:14	donchava	I must have something misconfigured.  Autovacuum is on, and it works on data db's in my cluster.  Yet, for some reason, template0 and template1's datfrozenxid advances and eventually threaten wraparound.
2017-01-10 12:25:19	◥	gheegh (~textual@pool-173-79-73-194.washdc.fios.verizon.net) has joined #postgresql
2017-01-10 12:29:06	◥	treehug88 (~textual@cpe-68-173-227-135.nyc.res.rr.com) has joined #postgresql
2017-01-10 12:29:19	donchava	Doesn't make sense to me.  Why do template0 and template1 do that?
2017-01-10 12:30:49	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2017-01-10 12:30:51	johto	why do you think that's a problem?
2017-01-10 12:32:12	donchava	Because they aren't getting autovacuumed.  Template0 doesn't even allow connections by default, much less vacuuming.
2017-01-10 12:32:40	◣	ogradyd (~Thunderbi@HSI-KBW-46-223-156-191.hsi.kabel-badenwuerttemberg.de) has quit (Quit: ogradyd)
2017-01-10 12:34:09	◣	dege (~dege@50-204-244-30-static.hfc.comcastbusiness.net) has quit (Quit: Damage is done, this is fun)
2017-01-10 12:35:22	◥	XofP (~XofP@98.159.94.208) has joined #postgresql
2017-01-10 12:35:49	johto	if the frozenxid advances, that means something is vacuuming them
2017-01-10 12:36:01	johto	what exactly do you mean by "threaten wraparound"?
2017-01-10 12:38:02	◣	jophish_ (~jophish@62.254.189.147) has left #postgresql
2017-01-10 12:38:13	◥	machinewar (~machinewa@69.46.225.170) has joined #postgresql
2017-01-10 12:38:20	◣	AnHry (~x@a94-132-78-87.cpe.netcabo.pt) has quit (Quit: Konversation terminated!)
2017-01-10 12:38:27	machinewar	is there a psql backslash command for listing indexes on a relation too? similar to \d
2017-01-10 12:38:41	johto	\d tblname  lists indexes as well
2017-01-10 12:39:02	johto	\di  if you just want to see all indexes
2017-01-10 12:39:14	GNU\colossus	when listing a custom archive with pg_restore's "--list" option, the documentation refers to "internal archive ID assigned to each item" - are there any guarantees that these IDs will stay the same for the same objects in a given database over time?
2017-01-10 12:40:19	◥	Maxel (~Maxel@50-241-60-122-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-10 12:41:04	◣	entil (~mjt@static.73.71.47.78.clients.your-server.de) has quit (Quit: testing screen-256color)
2017-01-10 12:41:47	◥	entil (~mjt@static.73.71.47.78.clients.your-server.de) has joined #postgresql
2017-01-10 12:42:46	RhodiumToad	mspencer: was afk, looking at it now
2017-01-10 12:42:56	mspencer	No worries, thanks.
2017-01-10 12:44:08	◥	FofG (uid91005@gateway/web/irccloud.com/x-nexuzehyoifzlfzr) has joined #postgresql
2017-01-10 12:45:35	mspencer	Ok. I can provide some more detail. You will notice that there is an insert taking place on the same table that is being used to read rows back. The insert is on a view that uses instead of triggers. If I insert directly into the table, it works just fine.
2017-01-10 12:46:22	mspencer	So the problem would appear to be linked to the instead of trigger firing, perhaps.
2017-01-10 12:46:38	RhodiumToad	mspencer: what does the trigger function do?
2017-01-10 12:46:57	mspencer	Updates some fields. Give me a second and I shall paste it.
2017-01-10 12:48:03	◣	wsieroci (~wsieroci@095160155111.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2017-01-10 12:48:43	◥	saurabhjha (~saurabhjh@182.64.60.186) has joined #postgresql
2017-01-10 12:49:03	RhodiumToad	pp.sales_invoice is the view?
2017-01-10 12:49:09	mspencer	Yup
2017-01-10 12:50:35	◣	DevAntoine (~DevAntoin@46.29.126.206) has quit (Ping timeout: 240 seconds)
2017-01-10 12:51:35	◣	FastJack (~fastjack@2001:470:1f0b:5c2:ff:70ff:fe00:a0b) has quit (Quit: leaving)
2017-01-10 12:51:35	◣	Tanfrieze (~eatabound@c-6297e555.013-81-73746f44.cust.bredbandsbolaget.se) has quit (Ping timeout: 240 seconds)
2017-01-10 12:51:57	◥	admg (~textual@host86-151-235-178.range86-151.btcentralplus.com) has joined #postgresql
2017-01-10 12:52:18	◥	arezki (~arezki@lon92-h02-176-149-62-139.dsl.sta.abo.bbox.fr) has joined #postgresql
2017-01-10 12:52:28	◣	zapata (~zapata@2a02:b18:581:10:7408:1360:b120:6b04) has quit (Quit: WeeChat 1.6)
2017-01-10 12:52:30	◣	mclement (mclement@nat/ibm/x-xbjmgqhwcqiskuuv) has quit (Quit: WeeChat 1.6)
2017-01-10 12:52:53	◥	saurabhj_ (~saurabhjh@182.64.2.68) has joined #postgresql
2017-01-10 12:52:59	◣	saurabhj_ (~saurabhjh@182.64.2.68) has quit (Read error: Connection reset by peer)
2017-01-10 12:53:03	mspencer	Ok. The instead of trigger for the view and base table are here https://paste.fedoraproject.org/525231/ together with any dependent functions.
2017-01-10 12:53:08	◥	hahuang65 (~hahuang65@207-47-46-126.static-ip.telepacific.net) has joined #postgresql
2017-01-10 12:53:22	◣	saurabhjha (~saurabhjh@182.64.60.186) has quit (Ping timeout: 255 seconds)
2017-01-10 12:53:31	◥	saurabhjha (~saurabhjh@182.64.2.68) has joined #postgresql
2017-01-10 12:53:43	◥	grayhem__ (~grayhemp_@12.33.220.130) has joined #postgresql
2017-01-10 12:53:59	◥	rohanrhu (~rohanrhu@81.214.43.248) has joined #postgresql
2017-01-10 12:54:23	◥	Lordz (~Adium@186.215.116.176) has joined #postgresql
2017-01-10 12:54:35	◣	PCatinean (~PCatinean@188.25.6.123) has quit (Remote host closed the connection)
2017-01-10 12:55:04	◥	zapata (~zapata@2a02:b18:581:10:41d2:5895:dc75:2fde) has joined #postgresql
2017-01-10 12:55:25	◥	robink_ (~quassel@fatcat.creosotehill.org) has joined #postgresql
2017-01-10 12:55:29	mspencer	And the user_session and env code that is used for some storage of session state is here: https://paste.fedoraproject.org/525232/
2017-01-10 12:55:48	◣	hashpuppy (uid43164@gateway/web/irccloud.com/x-iqnqrsagjlraixus) has quit (Quit: Connection closed for inactivity)
2017-01-10 12:56:07	mspencer	The env schema uses a temporary table, but that table is created at the start of the session and the current_user variable is set at the start as well, but remains unchanged for the session duration.
2017-01-10 12:56:19	◣	teslix (~Adrien@2a01:cb14:2e8:900:391a:5611:3652:74bb) has left #postgresql
2017-01-10 12:57:05	◣	AdamTheExile (~textual@ps-relay-server.tolland.k12.ct.us) has quit (Ping timeout: 240 seconds)
2017-01-10 12:57:13	◣	grayhemp_wh (~grayhemp_@12.33.220.130) has quit (Ping timeout: 260 seconds)
2017-01-10 12:57:24	◥	armdale (~armdale@hlfxns017vw-142134028221.dhcp-dynamic.FibreOp.ns.bellaliant.net) has joined #postgresql
2017-01-10 12:58:23	RhodiumToad	I don't see anything here that should affect it
2017-01-10 12:58:47	mspencer	My thoughts too. I am just commenting out calls to anything that uses the temporary table, in case it causes an issue.
2017-01-10 12:58:48	RhodiumToad	you're sure it consistently works if you do the insert without the trigger and consistently fails with it?
2017-01-10 12:59:13	◣	machinewar (~machinewa@69.46.225.170) has quit (Remote host closed the connection)
2017-01-10 12:59:19	◣	Lordz (~Adium@186.215.116.176) has quit (Quit: Leaving.)
2017-01-10 12:59:19	mspencer	I have tried 3 times and it works with the base table and fails with the view.
2017-01-10 12:59:32	mspencer	Just trying with a commented version of the trigger.
2017-01-10 12:59:56	◥	queso (~queso@24-183-76-37.dhcp.eucl.wi.charter.com) has joined #postgresql
2017-01-10 13:00:01	◥	ningu (~unamuno@c-73-231-139-69.hsd1.ca.comcast.net) has joined #postgresql
2017-01-10 13:00:06	mspencer	Works.
2017-01-10 13:00:32	◥	wsieroci (~wsieroci@095160155111.dynamic-ww-12.vectranet.pl) has joined #postgresql
2017-01-10 13:00:47	◣	slap_stick (~slap_stic@188.172.149.126) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-10 13:02:04	◥	SteeleNivenson (~SteeleNiv@c-73-162-143-84.hsd1.ca.comcast.net) has joined #postgresql
2017-01-10 13:02:08	mspencer	If I comment lines that call user_session.current_user_id(), the problem disappears.
2017-01-10 13:02:21	RhodiumToad	huh
2017-01-10 13:02:24	◥	NeverTired (uid108572@gateway/web/irccloud.com/x-xzwzipgicrvcznbv) has joined #postgresql
2017-01-10 13:02:42	mspencer	My thoughts exactly :D
2017-01-10 13:03:44	◥	FastJack (~fastjack@2001:470:1f0b:5c2:ff:70ff:fe00:a0b) has joined #postgresql
2017-01-10 13:03:44	RhodiumToad	and the temp table was definitely already created in the session?
2017-01-10 13:04:29	mspencer	I am double-checking that now.
2017-01-10 13:04:37	◣	skylar (~skylar2@gsits-a.gs.washington.edu) has quit (Quit: Leaving.)
2017-01-10 13:04:40	◥	wyoung (~wyoung@wesleyy.com) has joined #postgresql
2017-01-10 13:05:32	◥	Garen_ (garen@cpe-76-178-180-167.natnow.res.rr.com) has joined #postgresql
2017-01-10 13:05:58	RhodiumToad	you're testing this on a dev system, I assume? what OS?
2017-01-10 13:06:00	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2017-01-10 13:06:10	◥	DrLou_ (~DrLou@c-73-33-92-169.hsd1.nj.comcast.net) has joined #postgresql
2017-01-10 13:06:30	ash_workz	how is this possible? https://gist.github.com/anonymous/0913f222c7fbf784faf2589b1cf54aa8
2017-01-10 13:06:41	mspencer	It is on a dev system, yes.
2017-01-10 13:06:48	⚡	robink_ is now known as robink
2017-01-10 13:06:53	mspencer	OS is Linux
2017-01-10 13:06:55	◣	robink (~quassel@fatcat.creosotehill.org) has quit (Changing host)
2017-01-10 13:06:55	◥	robink (~quassel@unaffilated/robink) has joined #postgresql
2017-01-10 13:06:56	◥	palerider (~mjm@47.185.244.157) has joined #postgresql
2017-01-10 13:07:03	RhodiumToad	ash_workz: you forgot about nulls
2017-01-10 13:07:23	ash_workz	hmm
2017-01-10 13:07:26	◥	dxtr_ (9a954b2a@unaffiliated/dxtr) has joined #postgresql
2017-01-10 13:07:33	◣	threshar (~jeff@74-94-162-254-NewEngland.hfc.comcastbusiness.net) has quit (Quit: threshar)
2017-01-10 13:07:35	wyoung	hi, I have a hierarchy of tables; T4 references T3 references T2 references T1.  I have another table, T5, that references all 4 tables using a column with name of table and an ID (non-foreign key).  What SQL magic would I use to get T5 reference of T4 or closest ancestor?
2017-01-10 13:07:40	◥	knot` (~knot@c-71-237-136-191.hsd1.or.comcast.net) has joined #postgresql
2017-01-10 13:07:45	ash_workz	wow
2017-01-10 13:07:57	ash_workz	I guess so; hah! thanks RhodiumToad
2017-01-10 13:07:59	◥	dcope (~dcope@unaffiliated/dcope) has joined #postgresql
2017-01-10 13:08:00	◥	AlHafoudh_ (~AlHafoudh@echo.freevision.sk) has joined #postgresql
2017-01-10 13:08:03	◣	AlHafoudh (~AlHafoudh@echo.freevision.sk) has quit (Ping timeout: 248 seconds)
2017-01-10 13:08:03	◣	dcope_ (~dcope@198.211.101.239) has quit (Ping timeout: 248 seconds)
2017-01-10 13:08:03	◣	yarou (~yarou@unaffiliated/yarou) has quit (Ping timeout: 248 seconds)
2017-01-10 13:08:04	◣	lvf (~knot@unaffiliated/lvf) has quit (Ping timeout: 248 seconds)
2017-01-10 13:08:04	◣	CalimeroTeknik (~calimero@pradic.com) has quit (Ping timeout: 248 seconds)
2017-01-10 13:08:04	◣	Mir4g3 (~Mir4g3@bcast.vlan50.apc.hh.nmmn.net) has quit (Ping timeout: 248 seconds)
2017-01-10 13:08:04	◣	dxtr (b1015d9e@unaffiliated/dxtr) has quit (Read error: Connection reset by peer)
2017-01-10 13:08:04	◣	muesli (~muesli@amarok/developer/muesli) has quit (Excess Flood)
2017-01-10 13:08:04	◣	crisisking (~crisiskin@mute.somethingdead.com) has quit (Read error: Connection reset by peer)
2017-01-10 13:08:04	⚡	dxtr_ is now known as dxtr
2017-01-10 13:08:11	◥	Mir4g3 (~Mir4g3@bcast.vlan50.apc.hh.nmmn.net) has joined #postgresql
2017-01-10 13:08:24	mspencer	RhodiumToad: I presume that a table defined as LOCAL TEMPORARY persists for the entire session?
2017-01-10 13:08:29	⚡	AlHafoudh_ is now known as AlHafoudh
2017-01-10 13:08:29	◣	tdn (~tdn@syrah.adora.dk) has quit (Ping timeout: 248 seconds)
2017-01-10 13:08:30	◣	svip (~svip@unaffiliated/svip) has quit (Ping timeout: 248 seconds)
2017-01-10 13:08:32	◥	crst (~crst@31.188.81.249) has joined #postgresql
2017-01-10 13:08:34	◥	muesli (~muesli@server3.muehlhaeuser.de) has joined #postgresql
2017-01-10 13:08:37	◥	svip (~svip@unaffiliated/svip) has joined #postgresql
2017-01-10 13:08:42	◥	tdn (~tdn@syrah.adora.dk) has joined #postgresql
2017-01-10 13:08:48	RhodiumToad	mspencer: are you up for installing the dbg package and attaching gdb to the backend so that we can catch what's actually going on at the point of the error? I can talk you through it
2017-01-10 13:08:55	◣	Levure (~quassel@91.179.237.111) has quit (Remote host closed the connection)
2017-01-10 13:09:00	RhodiumToad	mspencer: yes, unless explicitly dropped
2017-01-10 13:09:02	◥	crisisking (~crisiskin@mute.somethingdead.com) has joined #postgresql
2017-01-10 13:09:10	◣	robink (~quassel@unaffilated/robink) has quit (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
2017-01-10 13:09:22	◥	zerd (~quassel@bat.slash.no) has joined #postgresql
2017-01-10 13:09:33	◣	jouir (~jouir@109.132.79.44) has quit (Quit: leaving)
2017-01-10 13:09:39	wyoung	any ideas gang?
2017-01-10 13:09:40	mspencer	I can do, sure. What I wanted to do first was make sure that the temporary table is indeed being created correctly before we go any further as I don't want to waste any more of your valuable time.
2017-01-10 13:10:04	RhodiumToad	mspencer: ok. what I'd do there is put a RAISE NOTICE or RAISE LOG in the function that creates the table
2017-01-10 13:10:10	◥	yarou (~yarou@192.241.222.146) has joined #postgresql
2017-01-10 13:10:13	◥	astour_navashv (~logstash@187.37.100.50) has joined #postgresql
2017-01-10 13:10:21	mspencer	Will do.
2017-01-10 13:10:38	◣	Garen (garen@cpe-76-178-180-167.natnow.res.rr.com) has quit (Ping timeout: 248 seconds)
2017-01-10 13:10:56	crst	Hi, can I still upgrade my database from 9.5 to 9.6 without my old PGBIN? I only have the postgres database folder left :(
2017-01-10 13:11:06	RhodiumToad	mspencer: use RAISE LOG to be sure of seeing it in the log. also make sure your log_line_prefix contains %p so that you can distinguish different connections
2017-01-10 13:11:09	◣	DrLou (~DrLou@c-73-33-92-169.hsd1.nj.comcast.net) has quit (Ping timeout: 248 seconds)
2017-01-10 13:11:10	⚡	DrLou_ is now known as DrLou
2017-01-10 13:11:20	mspencer	OK
2017-01-10 13:11:24	RhodiumToad	crst: no, you'll have to reinstall the old binaries
2017-01-10 13:11:42	◣	nicoulaj (~nicoulaj@nicoulaj.net) has quit (Ping timeout: 248 seconds)
2017-01-10 13:12:12	◥	CalimeroTeknik (~calimero@pradic.com) has joined #postgresql
2017-01-10 13:12:12	sobel	are "fooColumn NOT IN (a,b,c)" and "NOT fooColumn IN (a,b,c)" necessarily equivalent expressions?
2017-01-10 13:12:15	RhodiumToad	yes
2017-01-10 13:12:17	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 13:12:18	sobel	thx
2017-01-10 13:12:24	crst	RhodiumToad: does it matter what 9.5.X version exaxtly? because I don't know.
2017-01-10 13:12:28	sobel	is that because postgresql or because sql standard?
2017-01-10 13:12:31	RhodiumToad	crst: no
2017-01-10 13:12:43	RhodiumToad	crst: using the latest 9.5.x point rel should be fine
2017-01-10 13:13:05	RhodiumToad	sobel: well, the spec requires them to be equivalent, I think
2017-01-10 13:13:36	crst	RhodiumToad: Allright, thanks a lot!
2017-01-10 13:13:48	sobel	RhodiumToad: i would hope, but i've been wrong before
2017-01-10 13:14:03	RhodiumToad	sobel: and indeed, the spec defines  x NOT IN y  as being a simple syntactic transform to  NOT (x IN y)
2017-01-10 13:14:12	sobel	sweet
2017-01-10 13:14:16	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 13:14:53	◥	robink_ (~quassel@unaffilated/robink) has joined #postgresql
2017-01-10 13:15:20	◣	dermiste (~dermiste@static-176-158-4-36.ftth.abo.bbox.fr) has quit (Remote host closed the connection)
2017-01-10 13:17:45	◥	dermiste (~dermiste@brouwer.kilob.yt) has joined #postgresql
2017-01-10 13:18:29	ash_workz	RhodiumToad: I still get the same result :\ https://gist.github.com/anonymous/9c9543dbd4a695429653dc01dda6da60
2017-01-10 13:19:34	◣	admg (~textual@host86-151-235-178.range86-151.btcentralplus.com) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-10 13:19:42	RhodiumToad	ash_workz: bar might be null
2017-01-10 13:20:03	⚡	robink_ is now known as robink
2017-01-10 13:20:07	ash_workz	RhodiumToad: I don't get why that would matter
2017-01-10 13:20:17	ash_workz	oh
2017-01-10 13:20:17	RhodiumToad	ash_workz: foo <> bar   is null if bar is null
2017-01-10 13:20:19	ash_workz	yes I do
2017-01-10 13:20:27	ash_workz	sorry
2017-01-10 13:20:42	RhodiumToad	ash_workz: try using  foo IS [NOT] DISTINCT FROM bar
2017-01-10 13:21:04	ash_workz	oh
2017-01-10 13:21:58	RhodiumToad	you can tell that foo is never null, btw, because the foo and not_foo results add up to the total count
2017-01-10 13:22:09	◣	saurabhjha (~saurabhjh@182.64.2.68) has quit (Ping timeout: 258 seconds)
2017-01-10 13:22:23	◣	dermiste (~dermiste@brouwer.kilob.yt) has quit (Ping timeout: 252 seconds)
2017-01-10 13:23:00	crst	Upgrade worked fine. Where can I find ./analyze_new_cluster.sh and ./delete_old_cluster.sh ?
2017-01-10 13:23:20	◥	osmani (5e37ac1b@gateway/web/freenode/ip.94.55.172.27) has joined #postgresql
2017-01-10 13:23:23	RhodiumToad	wherever pg_updrade put them?
2017-01-10 13:23:28	RhodiumToad	*pg_upgrade
2017-01-10 13:23:40	RhodiumToad	likely in the directory in which you ran it?
2017-01-10 13:24:05	◣	MarekTP (~marektp@86.49.154.102) has quit (Quit: Leaving)
2017-01-10 13:24:16	osmani	how can i cast jsonb value 1 to bigint? do i really need to cast it text before casting it to bigint? select cast(cast('1'::jsonb as text) as bigint)?
2017-01-10 13:24:43	RhodiumToad	osmani: where's the 1 actually coming from?
2017-01-10 13:25:08	◣	zivester (~zivester@38.104.66.138) has quit (Ping timeout: 252 seconds)
2017-01-10 13:25:10	osmani	it's stored as jsonb in a column, 1 is the whole value, not an attribute
2017-01-10 13:25:35	◣	aajjbb (~aajjbb@179.154.124.39) has quit (Ping timeout: 240 seconds)
2017-01-10 13:25:36	crst	RhodiumToad: lol, indeed. sorry about that, went straight over my eyes.
2017-01-10 13:25:40	RhodiumToad	osmani: so the column contains a jsonb scalar value, not an object?
2017-01-10 13:25:47	osmani	exactly
2017-01-10 13:26:01	RhodiumToad	osmani: one way is   (col #>> '{}')::bigint
2017-01-10 13:26:16	◥	dege (~dege@50-204-244-30-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-10 13:26:40	RhodiumToad	osmani: using the #>> operator with an empty array is the usual method to convert a json scalar to its plain text representation (casting to text is wrong)
2017-01-10 13:26:55	rightfold	RhodiumToad: IN would also need higher precedence than NOT for this to work
2017-01-10 13:27:05	◣	kus (~khada@pool-98-109-119-45.nwrknj.fios.verizon.net) has quit (Ping timeout: 256 seconds)
2017-01-10 13:27:49	RhodiumToad	NOT has quite low precedence
2017-01-10 13:28:17	◣	SpeakerToMeat (~SpeakerTo@prgmr/customer/SpeakerToMeat) has quit (Ping timeout: 248 seconds)
2017-01-10 13:29:10	osmani	RhodiumToad: is there any performance benefit of it?
2017-01-10 13:29:14	mspencer	RhodiumToad: It would appear that for some reason the temporary table is being re-created, so I guess that is the cause of the problem. Not sure why it is being recreated though. Could you confirm that the proccedure env.initialise() looks OK?
2017-01-10 13:29:27	◥	dermiste (~dermiste@static-176-158-4-36.ftth.abo.bbox.fr) has joined #postgresql
2017-01-10 13:29:54	lluad	??array_sort
2017-01-10 13:29:55	pg_docbot	Nothing found
2017-01-10 13:30:02	◣	nineinchnick (~jwas@109.231.18.27) has quit (Remote host closed the connection)
2017-01-10 13:30:06	RhodiumToad	mspencer: re-created? it does look ok to me
2017-01-10 13:30:25	lluad	?learn array_sort http://postgres.cz/wiki/PostgreSQL_SQL_Tricks_I#General_array_sort
2017-01-10 13:30:26	pg_docbot	Successfully added URL with 1 keyword
2017-01-10 13:30:27	RhodiumToad	mspencer: also, it's not clear why re-creating that would cause the replan error
2017-01-10 13:30:50	mspencer	Nor me, but I want to try to stop the re-create so at least I can verify that it is not that causing the problem.
2017-01-10 13:31:09	mspencer	At least I then have something that works. Since it is DDL, I wonder if it does cause an issue for some reason.
2017-01-10 13:31:43	RhodiumToad	mspencer: the _first_ time in a session that you create a temporary object, it does change the search path
2017-01-10 13:31:59	RhodiumToad	mspencer: (in order to add pg_temp_N on the front)
2017-01-10 13:32:14	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-10 13:32:34	mspencer	Ok. Then since it is being recreated each time, that would cause the plan error, I assume?
2017-01-10 13:32:36	◥	Neo-- (~neo@BSN-142-62-172.dynamic.siol.net) has joined #postgresql
2017-01-10 13:32:53	◣	mgoimam (2d3d021a@gateway/web/freenode/ip.45.61.2.26) has quit (Quit: Page closed)
2017-01-10 13:32:59	RhodiumToad	mspencer: that might cause a plan invalidation, but note that if this is the problem, then avoiding that wouldn't fix it completely because there are many other possible causes of plan invalidation
2017-01-10 13:33:09	◥	nettoweb (~nettoweb@2804:7f5:f080:93df::6) has joined #postgresql
2017-01-10 13:33:25	RhodiumToad	mspencer: for example, does doing an analyze on one of the tables also cause it to fail?
2017-01-10 13:33:37	mspencer	I can try that. Give me a second.
2017-01-10 13:34:33	◣	arezki (~arezki@lon92-h02-176-149-62-139.dsl.sta.abo.bbox.fr) has quit (Ping timeout: 260 seconds)
2017-01-10 13:35:30	◣	gleu (~guillaume@LFbn-1-8419-93.w81-254.abo.wanadoo.fr) has quit (Quit: gleu)
2017-01-10 13:35:47	osmani	RhodiumToad:what's wrong with casting it to text, doesn't it have the same effect?
2017-01-10 13:35:48	◣	JenniferAkemi (~jennifera@CPEf0f249d14d93-CMf0f249d14d90.cpe.net.cable.rogers.com) has quit (Remote host closed the connection)
2017-01-10 13:36:02	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 13:36:18	RhodiumToad	osmani: not for general json scalars, since it doesn't remove quoting
2017-01-10 13:37:22	osmani	RhodiumToad: it seems that it actually does. select sum(cast('1'::jsonb as text)::bigint) from generate_series(0, 10000000) runs as expected?
2017-01-10 13:37:40	osmani	casting text returns 1 not "1"
2017-01-10 13:37:48	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 13:37:57	RhodiumToad	osmani: because it happens not to be quoted, being a json numeric
2017-01-10 13:38:11	osmani	yes
2017-01-10 13:38:18	osmani	numeric scalar
2017-01-10 13:38:24	◣	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 13:38:35	osmani	also why we need to cast it to text before casting it to another type?
2017-01-10 13:38:35	◣	wsieroci (~wsieroci@095160155111.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2017-01-10 13:38:47	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 13:38:48	osmani	is that because json type is not a binary type?
2017-01-10 13:38:54	RhodiumToad	I told you not to cast it to text
2017-01-10 13:39:01	mspencer	RhodiumToad: It would appear that doing an analyze does not cause the problem to occur...
2017-01-10 13:39:39	mspencer	It genuinely seems to be the temporary table being recreated. I commented out the line that creates the table and it works fine.
2017-01-10 13:39:41	ash_workz	RhodiumToad: this doesn't seem to work either, can you compound distinct statements? https://gist.github.com/anonymous/fc2c367ee9e3e167574eaca505a6fbdd
2017-01-10 13:39:44	osmani	RhodiumToad: I did not cast it to text, '1'::jsonb #>> '{}' already returns text
2017-01-10 13:40:02	osmani	sorry for confusiton
2017-01-10 13:40:05	osmani	confusion*
2017-01-10 13:40:14	ash_workz	oops
2017-01-10 13:40:17	RhodiumToad	mspencer: looking at the code, it's possible that because it's a utility statement and not a query, that it gets missed by the normal plan invalidation mechanisms
2017-01-10 13:40:18	ash_workz	line 8 should be baz*
2017-01-10 13:40:51	◥	bdunavant (~bdunavant@static-108-48-124-82.washdc.fios.verizon.net) has joined #postgresql
2017-01-10 13:41:24	◣	yieldsfalsehood (~elliot@phl-nat.afilias.info) has quit (Remote host closed the connection)
2017-01-10 13:41:28	RhodiumToad	ash_workz: you fail basic logic
2017-01-10 13:41:40	ash_workz	:\
2017-01-10 13:41:55	◣	skyx (~skyx__@lk.84.20.243.151.dc.cable.static.lj-kabel.net) has quit (Quit: This computer has gone to sleep)
2017-01-10 13:41:56	RhodiumToad	ash_workz: if you have conditions A and B, then to find the ones that are neither, you need (not A) OR (not B), but you have an AND there
2017-01-10 13:42:19	mspencer	RhodiumToad: To address the problem that I have, I think I just need to find out why that table is being recreated each time with each call to env.initialize.
2017-01-10 13:42:22	RhodiumToad	ash_workz: er, not both
2017-01-10 13:42:32	RhodiumToad	ash_workz: what exactly are you trying to calculate here?
2017-01-10 13:42:41	◣	sjoos (~jlammrs@a111225.upc-a.chello.nl) has quit (Quit: Leaving)
2017-01-10 13:42:43	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 13:43:02	◣	XofP (~XofP@98.159.94.208) has quit (Quit: XofP)
2017-01-10 13:43:15	◥	skyx (~skyx__@lk.84.20.243.151.dc.cable.static.lj-kabel.net) has joined #postgresql
2017-01-10 13:43:25	RhodiumToad	ash_workz: and what result did you get and how was it wrong?
2017-01-10 13:43:31	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2017-01-10 13:43:42	◣	mizu_no_oto_work (~textual@104.207.209.180) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 13:43:53	◣	silver_hook (~hook@unaffiliated/silver-hook/x-2625033) has left #postgresql ("Konversation terminated!")
2017-01-10 13:44:00	RhodiumToad	mspencer: I suspect that'd be hiding the problem not solving it. but I have some idea of what to test now to reproduce it
2017-01-10 13:44:07	◥	sjoos (~jlammrs@a111225.upc-a.chello.nl) has joined #postgresql
2017-01-10 13:44:49	mspencer	Ok. Well, I am happy to follow any instructions you have, but I would also like to ensure that this darned table is not re-created, otherwise my session persistency code is not going to work.
2017-01-10 13:44:53	RhodiumToad	and lo, I can reproduce it
2017-01-10 13:45:01	mspencer	Congratulations :)
2017-01-10 13:45:11	ash_workz	wouldn't !A||!B be useless because anything that is !A could be B (pass); and anything that is !B could be A (pass)?
2017-01-10 13:45:12	RhodiumToad	so I can debug it myself :-)
2017-01-10 13:45:13	◣	osmani (5e37ac1b@gateway/web/freenode/ip.94.55.172.27) has quit (Quit: Page closed)
2017-01-10 13:45:27	mspencer	Glad to hear it :)
2017-01-10 13:45:47	mspencer	Will save you the pain of taking me through helping you to debug stuff.
2017-01-10 13:45:58	RhodiumToad	ash_workz: what result did you get and how was it wrong?
2017-01-10 13:46:05	mspencer	But, any ideas why that table is not persisting?
2017-01-10 13:46:16	◥	boombox_ (~boombox@52.119.114.82) has joined #postgresql
2017-01-10 13:46:34	RhodiumToad	mspencer: are you rolling back the transaction that creates it?
2017-01-10 13:46:56	RhodiumToad	mspencer: btw, that's not the method I'd use for session variables, I'd go with the abuse-of-GUC method
2017-01-10 13:47:11	mspencer	Can you point me in the right direction for that?
2017-01-10 13:47:29	RhodiumToad	select set_config('myapp.somevariable', 'value', false);
2017-01-10 13:47:33	jaawerth	I've got a .psqlrc with AUTOCOMMIT set to off - but because that can screw up scripts, I actually have this in a separate RC file and a bash alias for using it only when I'm doing stuff interactively. Is there a better/more robust way of doing this?
2017-01-10 13:47:33	mspencer	And, no, I don't believe that I am rolling back the transaction, but I will double-check.
2017-01-10 13:47:39	RhodiumToad	select current_setting('myapp.somevariable');
2017-01-10 13:47:48	◣	SporkWitch (~SporkWitc@unaffiliated/sporkwitch) has quit (Quit: ZNC - http://znc.in)
2017-01-10 13:47:51	mspencer	That looks easier.
2017-01-10 13:47:57	jaawerth	s/bash/zsh/ but same diff
2017-01-10 13:48:03	◥	SporkWitch (~SporkWitc@unaffiliated/sporkwitch) has joined #postgresql
2017-01-10 13:48:32	◥	ramfjord (~tramfjord@c-67-169-47-49.hsd1.ca.comcast.net) has joined #postgresql
2017-01-10 13:48:46	RhodiumToad	mspencer: you should ideally pick a prefix which is likely to be unique to your application, to avoid colliding with any extensions that also use this mechanism
2017-01-10 13:48:56	mspencer	Sure thing.
2017-01-10 13:49:06	mspencer	Really appreciate your advice. Thanks for your time.
2017-01-10 13:49:36	◣	apotry (~textual@cpc105216-live33-2-0-cust233.17-2.cable.virginm.net) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-10 13:50:52	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2017-01-10 13:52:12	◣	skyx (~skyx__@lk.84.20.243.151.dc.cable.static.lj-kabel.net) has quit (Quit: This computer has gone to sleep)
2017-01-10 13:52:32	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 13:52:37	◣	boombox_ (~boombox@52.119.114.82) has quit (Remote host closed the connection)
2017-01-10 13:52:59	◥	cJIaB (~cJIaB@178.220.189.177) has joined #postgresql
2017-01-10 13:53:33	RhodiumToad	huh. this is interesting.
2017-01-10 13:53:43	◣	filotek (~filotek@206.223.174.62) has quit (Ping timeout: 256 seconds)
2017-01-10 13:54:18	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 13:54:27	◥	mizu_no_oto_work (~textual@104.207.209.180) has joined #postgresql
2017-01-10 13:54:29	mastermind	RhodiumToad: ?
2017-01-10 13:54:31	◣	Zamyatin (~Zamyatin@4.15.85.94) has quit (Ping timeout: 240 seconds)
2017-01-10 13:54:41	◥	SpeakerToMeat (~SpeakerTo@prgmr/customer/SpeakerToMeat) has joined #postgresql
2017-01-10 13:54:52	RhodiumToad	plancache handling of FETCH commands is really broken
2017-01-10 13:55:14	◣	fguillot (~fguillot@2607:f748:9:1678:f597:d218:1d93:e98f) has quit (Ping timeout: 240 seconds)
2017-01-10 13:55:14	mspencer	I feel so important being a part of discovering this ;)
2017-01-10 13:55:58	RhodiumToad	mspencer: in your code, you're preparing the FETCH before the cursor actually exists, yes?
2017-01-10 13:56:09	mspencer	Let me check.
2017-01-10 13:56:12	◣	mizu_no_oto_work (~textual@104.207.209.180) has quit (Client Quit)
2017-01-10 13:56:33	jaawerth	er - to correct my earlier question, I'm using both AUTOCOMMIT off and ON_ERROR_ROLLBACK on for interactive stuff and am differentiating it with a shell alias, but curious if anyone has a better way to makes that isn't used when processing files
2017-01-10 13:57:07	ash_workz	RhodiumToad: https://gist.github.com/anonymous/6f1a08791957846dab199aa8d1ebc20d
2017-01-10 13:57:22	mspencer	RhodiumToad: Prepare is done on the cursor definition and then on the fetch on the cursor, yes.
2017-01-10 13:57:48	donchava	When age(datfrozenxid) is approaching 2B, does that mean the database is in danger of wraparound?
2017-01-10 13:57:56	mspencer	RhodiumToad: This is done using PQprepare.
2017-01-10 13:58:12	RhodiumToad	ash_workz: are bar and baz constants, or could they sometimes be equal to each other?
2017-01-10 13:58:38	ash_workz	ah, yes, they could be
2017-01-10 13:59:03	wyoung	ok I did something but I don't like it
2017-01-10 13:59:06	RhodiumToad	so you'd count those twice
2017-01-10 13:59:12	◥	skylar (~skylar2@gsits-a.gs.washington.edu) has joined #postgresql
2017-01-10 13:59:14	ash_workz	right
2017-01-10 13:59:16	ash_workz	I see
2017-01-10 13:59:21	RhodiumToad	donchava: yes
2017-01-10 13:59:33	wyoung	if I use multiple union distincts and wrap it all in a select and limit 1, do I need to filter out NULL as well?
2017-01-10 13:59:43	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 13:59:57	RhodiumToad	mspencer: looking at the code, it looks like it'd work ok provided that you don't prepare the FETCH until the cursor is already open.
2017-01-10 14:00:30	xocolatl	sql:2016 is out
2017-01-10 14:00:34	wyoung	also, if I use multiple unions each row will be in order of execution right?
2017-01-10 14:00:43	mspencer	RhodiumToad: I can pass that onto the people who have written the library - I have no control over that unless I start changing their source.
2017-01-10 14:01:07	mspencer	But I can try it temporarily for the time being.
2017-01-10 14:01:35	mastermind	xocolatl: MSSQL server 2016 or something else?
2017-01-10 14:01:46	xocolatl	the sql standard
2017-01-10 14:01:50	RhodiumToad	from pg's point of view, the possibly worse problem is that if you _don't_ trigger a revalidation, then the return value of the FETCH statement actually can change even though it's not supposed to
2017-01-10 14:01:52	xocolatl	http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=63556
2017-01-10 14:02:29	RhodiumToad	how much is 200 CHF in real money?
2017-01-10 14:02:32	johto	~200USD
2017-01-10 14:02:35	wyoung	ok so select the first non null result of 4 tables that are related to each other.  are there any shortcuts for dealing with hierarchy tables?
2017-01-10 14:02:38	xocolatl	€185
2017-01-10 14:03:24	RhodiumToad	~160 quid
2017-01-10 14:03:49	xocolatl	seems a bit expensive for a broken product ;)
2017-01-10 14:04:06	◥	faw (~faw@unaffiliated/faw) has joined #postgresql
2017-01-10 14:04:16	◥	arezki (~arezki@lon92-h02-176-149-62-139.dsl.sta.abo.bbox.fr) has joined #postgresql
2017-01-10 14:05:00	RhodiumToad	wyoung: no, but union sounds like completely the wrong approach
2017-01-10 14:06:25	mspencer	RhodiumToad: Is there any way of forcing a revalidation? I may be able to add that to the code that defines either the cursor or the fetch.
2017-01-10 14:07:33	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 14:07:56	RhodiumToad	mspencer: that won't help
2017-01-10 14:08:24	mspencer	Ok. So just your previous suggestion will be OK?
2017-01-10 14:08:33	bencc	sometimes my server becomes unresponsive and all sql queries time out
2017-01-10 14:08:45	RhodiumToad	mspencer: should be. The problem as it stands is this:
2017-01-10 14:08:55	bencc	doesn't seem it is related to the number of online users or load on the server
2017-01-10 14:09:22	bencc	now I have only 5 users and had this. sometimes I have 500 users and all is fine
2017-01-10 14:09:23	◥	BitWhisperer (~BitWhispe@pool-96-227-235-90.phlapa.fios.verizon.net) has joined #postgresql
2017-01-10 14:09:26	RhodiumToad	mspencer: if you first prepare the FETCH before the cursor is open, pg caches it then, but with NULL for the result descriptor (because with no cursor, it has no idea what the result is)
2017-01-10 14:09:34	bencc	what can cause it?
2017-01-10 14:10:06	RhodiumToad	mspencer: then if a revalidation is forced for any reason, it'll revalidate when you next try and execute it,
2017-01-10 14:10:28	◣	spacecadetbrown (~spacecade@2601:141:301:a5ce:adf4:61e1:c819:4fb8) has quit (Read error: Connection reset by peer)
2017-01-10 14:10:34	RhodiumToad	mspencer: but at that time, the cursor _does_ exist and so the revalidation comes up with a different result descriptor, and errors out
2017-01-10 14:10:44	mspencer	I follow you.
2017-01-10 14:11:07	◥	spacecadetbrown (~spacecade@2601:141:301:a5ce:adf4:61e1:c819:4fb8) has joined #postgresql
2017-01-10 14:11:12	mspencer	So opening then fetching helps because the initial null is not returned, the correct value is?
2017-01-10 14:11:29	RhodiumToad	yes
2017-01-10 14:11:42	RhodiumToad	opening before preparing the fetch the first time, yes
2017-01-10 14:11:56	mspencer	Got it. I will let the developers of the library know. I may be able to patch it myself to test it out.
2017-01-10 14:12:35	RhodiumToad	I guess I should post this to -hackers
2017-01-10 14:13:02	◣	gelignite (~gelignite@x4e3115f5.dyn.telefonica.de) has quit (Quit: http://bit.ly/1kso8Ta)
2017-01-10 14:14:04	mspencer	Thanks again.
2017-01-10 14:15:28	bencc	I'm getting an error: canceling statement due to user request
2017-01-10 14:15:31	bencc	and: while updating tuple (26,7) in relation "courses"
2017-01-10 14:15:51	RhodiumToad	bencc: because you cancelled the statement?
2017-01-10 14:15:57	bencc	I have several errors like this probably blocking all my connection pool
2017-01-10 14:16:12	◣	ash_workz (~chatzilla@50-243-5-153-static.hfc.comcastbusiness.net) has quit (Ping timeout: 240 seconds)
2017-01-10 14:16:22	◥	xemdetia (xemdetia@nat/ibm/x-djfmyjbigawusjlk) has joined #postgresql
2017-01-10 14:16:24	bencc	RhodiumToad: my client cancel automatically after 5 seconds
2017-01-10 14:16:30	bencc	is it possible I have a deadlock?
2017-01-10 14:16:50	RhodiumToad	bencc: it's possible that you have queries that are blocked waiting on something
2017-01-10 14:17:00	RhodiumToad	bencc: a deadlock would be detected
2017-01-10 14:17:33	RhodiumToad	5 seconds might be a bit impatient
2017-01-10 14:17:50	mspencer	If the queries are just waiting, that would not necessarily constitute a deadlock.
2017-01-10 14:17:59	bencc	RhodiumToad: waiting for what?
2017-01-10 14:18:16	mspencer	Sorry, my comment was directed at bencc
2017-01-10 14:18:23	◥	cliluw (~cliluw@unaffiliated/cliluw) has joined #postgresql
2017-01-10 14:18:37	RhodiumToad	bencc: you'd have to look at pg_locks or at log_lock_waits output
2017-01-10 14:19:47	◣	matkor (~matkor@apn-31-1-188-28.dynamic.gprs.plus.pl) has quit (Quit: Z prawd studentek medycyny: "bez kiły nie ma zaliczenia")
2017-01-10 14:19:50	bencc	I don't think I have them on. I'll change that now
2017-01-10 14:20:32	◣	Feld0 (~Feld0@irc.feld0.com) has quit (Ping timeout: 240 seconds)
2017-01-10 14:21:56	◥	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2017-01-10 14:22:06	◣	lolek (~lolek@unaffiliated/marcin) has left #postgresql
2017-01-10 14:23:04	◣	r_hector (~richard@203-97-170-14.cable.telstraclear.net) has quit (Quit: Leaving.)
2017-01-10 14:23:41	◥	Feld0 (~Feld0@irc.feld0.com) has joined #postgresql
2017-01-10 14:23:59	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 14:24:24	◥	SEQUEL_TECH (~sequel@46.238.55.126) has joined #postgresql
2017-01-10 14:24:44	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Client Quit)
2017-01-10 14:26:14	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 14:27:38	◣	__Yiota (~textual@2607:fea8:3c9f:ffe9:dd9a:2ee9:27f7:be87) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 14:28:00	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 14:28:13	◣	cartan (~cartan@p508EAB01.dip0.t-ipconnect.de) has quit (Quit: Leaving)
2017-01-10 14:28:46	bencc	RhodiumToad: I thought pg_locks is something I need to turn on but I see it's a table that is automatically populated
2017-01-10 14:28:56	RhodiumToad	actually a view, but yes
2017-01-10 14:29:00	bencc	what should I check to see why it hangs?
2017-01-10 14:29:22	RhodiumToad	however, pg_locks reflects the current state, so you'd have to look at it while the queries are actually waiting
2017-01-10 14:29:30	bencc	ok
2017-01-10 14:29:45	◣	raynold (uid201163@gateway/web/irccloud.com/x-mzehzatoebbpatci) has quit (Quit: Connection closed for inactivity)
2017-01-10 14:29:49	bencc	but during this time the server isn't responsive
2017-01-10 14:29:51	bencc	any other option?
2017-01-10 14:29:57	RhodiumToad	at that point, locks with granted=false show the ones that are waiting
2017-01-10 14:30:39	◥	banditro_ (~banditron@kohana/developer/banditron) has joined #postgresql
2017-01-10 14:31:18	◥	cartan (~cartan@p508EAB01.dip0.t-ipconnect.de) has joined #postgresql
2017-01-10 14:31:31	donchava	I have an instance in which age(datfrozenxid) is approaching 2B in the template0 and template1 db's.  I understand that I can fix it with VACUUM FREEZE.  Is that going to cause locking or load problems?
2017-01-10 14:32:35	◣	banditron (~banditron@kohana/developer/banditron) has quit (Ping timeout: 240 seconds)
2017-01-10 14:32:36	◥	ogradyd (~Thunderbi@HSI-KBW-46-223-156-191.hsi.kabel-badenwuerttemberg.de) has joined #postgresql
2017-01-10 14:32:36	ningu	what about pg_stat_activity?
2017-01-10 14:32:52	mspencer	RhodiumToad: Is there a way of checking that a GUC exists, rather than trapping an exception that is raised?
2017-01-10 14:32:59	◥	peerce (mudshark@c-73-222-225-64.hsd1.ca.comcast.net) has joined #postgresql
2017-01-10 14:33:41	bencc	ningu: is it also realtime?
2017-01-10 14:33:47	RhodiumToad	mspencer: if you're using the GUC method for session vars, it's usually best to set them to empty values in the .conf file or in per-user or per-database configuration
2017-01-10 14:34:01	RhodiumToad	mspencer: i.e. guarantee they always exist rather than catch the error
2017-01-10 14:34:17	mspencer	RhodiumToad: OK. Will do.
2017-01-10 14:34:28	RhodiumToad	mspencer: (another useful trick is that you can pass initial values via the client's connection string)
2017-01-10 14:34:42	◣	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has left #postgresql
2017-01-10 14:35:20	RhodiumToad	options='-c myapp.username=foo'   for example
2017-01-10 14:35:21	◥	Rafzzz (~textual@host109-156-103-201.range109-156.btcentralplus.com) has joined #postgresql
2017-01-10 14:35:35	◣	blackmesa (~blackmesa@aftr-37-201-227-31.unity-media.net) has quit (Quit: WeeChat 1.6)
2017-01-10 14:35:40	mspencer	RhodiumToad: Thanks :)
2017-01-10 14:36:19	RhodiumToad	alter user foo set myapp.whatever='...';   or alter database foo set ...
2017-01-10 14:36:35	mspencer	Ok
2017-01-10 14:37:54	◣	Flotho66 (~florent@2a01:e35:8ae3:b2f0:aadf:7f06:4372:61c3) has quit (Quit: Konversation terminated!)
2017-01-10 14:37:59	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2017-01-10 14:38:24	◣	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has quit (Read error: Connection reset by peer)
2017-01-10 14:38:28	◣	nettoweb (~nettoweb@2804:7f5:f080:93df::6) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 14:38:54	◣	the_rat_ (~the_rat@2a02:8109:8380:3e8c:458e:2d7d:80f9:b1f6) has quit (Remote host closed the connection)
2017-01-10 14:39:30	◥	the_rat_ (~the_rat@2a02:8109:8380:3e8c:458e:2d7d:80f9:b1f6) has joined #postgresql
2017-01-10 14:39:52	◣	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 14:40:05	◣	hahuang65 (~hahuang65@207-47-46-126.static-ip.telepacific.net) has quit (Ping timeout: 240 seconds)
2017-01-10 14:40:35	◥	aajjbb (~aajjbb@179.154.124.39) has joined #postgresql
2017-01-10 14:43:47	◣	the_rat_ (~the_rat@2a02:8109:8380:3e8c:458e:2d7d:80f9:b1f6) has quit (Ping timeout: 252 seconds)
2017-01-10 14:44:55	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2017-01-10 14:46:28	◣	elein (~chatzilla@192.150.10.209) has quit (Ping timeout: 258 seconds)
2017-01-10 14:47:04	◥	kus (~khada@pool-98-109-119-45.nwrknj.fios.verizon.net) has joined #postgresql
2017-01-10 14:47:20	◣	killdeerthundero (~killdeert@kol-kvintus.cust.fsknet.dk) has quit (K-Lined)
2017-01-10 14:47:52	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 14:49:24	◣	donchava (c0654df6@gateway/web/freenode/ip.192.101.77.246) has quit (Quit: Page closed)
2017-01-10 14:49:39	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 14:49:45	◣	puchacz (~puchacz@cpc96904-walt25-2-0-cust679.13-2.cable.virginm.net) has quit (Quit: Konversation terminated!)
2017-01-10 14:50:30	◥	psdn (~psdn@d14-69-68-37.try.wideopenwest.com) has joined #postgresql
2017-01-10 14:50:31	◥	jon-mac (~textual@67.108.126.82.ptr.us.xo.net) has joined #postgresql
2017-01-10 14:51:10	◣	SpeakerToMeat (~SpeakerTo@prgmr/customer/SpeakerToMeat) has quit (Ping timeout: 240 seconds)
2017-01-10 14:51:57	◣	rjuju (~rjuju@2a01:e34:ec0e:e930:c598:ed4c:6468:7e73) has quit (Quit: bybye)
2017-01-10 14:52:00	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 14:53:30	◥	akurniawan (~akurniawa@111.94.224.64) has joined #postgresql
2017-01-10 14:53:47	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 14:54:11	◣	chucky_z (uid135747@gateway/web/irccloud.com/x-lcelnofndxioanvz) has quit (Quit: Connection closed for inactivity)
2017-01-10 14:54:36	◣	mmello (Marcelo@nat/redhat/x-hjwnnlwmxzvaqqjt) has quit (Quit: Leaving)
2017-01-10 14:56:13	◣	phuff (~Adium@unaffiliated/phuff) has quit (Ping timeout: 260 seconds)
2017-01-10 14:56:57	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 14:57:09	◥	dviola (~diego@unaffiliated/diegoviola) has joined #postgresql
2017-01-10 14:58:19	◥	elein (~chatzilla@192.150.10.209) has joined #postgresql
2017-01-10 14:58:59	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 14:59:29	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:35a4:92fb:f8a0:eb90) has quit (Remote host closed the connection)
2017-01-10 15:00:07	◥	nettoweb (~nettoweb@179.180.171.40) has joined #postgresql
2017-01-10 15:00:32	◥	zivester (~zivester@pool-100-8-14-108.nwrknj.fios.verizon.net) has joined #postgresql
2017-01-10 15:01:39	◥	hotpanca_ (~hotpancak@2604:2000:14c5:4058:176:f484:27ba:b5d5) has joined #postgresql
2017-01-10 15:03:46	◣	skylar (~skylar2@gsits-a.gs.washington.edu) has quit (Quit: Leaving.)
2017-01-10 15:04:00	◣	davidfetter_ge (~chatzilla@64.129.231.6) has quit (Ping timeout: 256 seconds)
2017-01-10 15:04:03	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 15:05:05	◥	hahuang65 (~hahuang65@c-50-136-152-183.hsd1.ca.comcast.net) has joined #postgresql
2017-01-10 15:06:30	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 15:06:43	◣	xzi11a (~robert@static-108-48-124-82.washdc.fios.verizon.net) has quit (Ping timeout: 260 seconds)
2017-01-10 15:06:52	◣	grayhem__ (~grayhemp_@12.33.220.130) has quit (Remote host closed the connection)
2017-01-10 15:07:26	◥	grayhemp_wh (~grayhemp_@12.33.220.130) has joined #postgresql
2017-01-10 15:07:53	◣	asymetrixs (~asymetrix@x4db9f49d.dyn.telefonica.de) has quit (Remote host closed the connection)
2017-01-10 15:09:10	◣	akurniawan (~akurniawa@111.94.224.64) has quit (Ping timeout: 240 seconds)
2017-01-10 15:10:34	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 15:12:29	◣	ogradyd (~Thunderbi@HSI-KBW-46-223-156-191.hsi.kabel-badenwuerttemberg.de) has quit (Quit: ogradyd)
2017-01-10 15:13:08	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 15:15:23	◣	bdunavant (~bdunavant@static-108-48-124-82.washdc.fios.verizon.net) has quit (Remote host closed the connection)
2017-01-10 15:16:01	◣	arezki (~arezki@lon92-h02-176-149-62-139.dsl.sta.abo.bbox.fr) has quit (Ping timeout: 255 seconds)
2017-01-10 15:16:56	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 15:17:35	◣	gheegh (~textual@pool-173-79-73-194.washdc.fios.verizon.net) has quit (Ping timeout: 240 seconds)
2017-01-10 15:18:46	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 15:20:52	◣	doppleherz (uid178172@gateway/web/irccloud.com/x-msgodhnbjzfeixaa) has quit (Quit: Connection closed for inactivity)
2017-01-10 15:21:27	◣	rdegges (sid150899@gateway/web/irccloud.com/x-wvcwymegeigrjtbt) has quit (Ping timeout: 245 seconds)
2017-01-10 15:21:31	◣	al-damiri (uid142631@gateway/web/irccloud.com/x-tbxumpvmdgqhvjtt) has quit (Ping timeout: 240 seconds)
2017-01-10 15:21:31	◣	sd (sid96041@gateway/web/irccloud.com/x-nioghnpstniajuyl) has quit (Ping timeout: 240 seconds)
2017-01-10 15:21:31	◣	lolmac_ (sid171216@gateway/web/irccloud.com/x-zbtldrzdaxvnwnyx) has quit (Ping timeout: 240 seconds)
2017-01-10 15:21:32	◣	ragge (sid95192@gateway/web/irccloud.com/x-kqatpilszboexfax) has quit (Ping timeout: 240 seconds)
2017-01-10 15:21:32	◣	nickle (sid89854@gateway/web/irccloud.com/x-pduefezhfawhvjwh) has quit (Ping timeout: 240 seconds)
2017-01-10 15:21:52	◣	machty (sid13535@gateway/web/irccloud.com/x-zsafzleuvjqpddtd) has quit (Ping timeout: 255 seconds)
2017-01-10 15:21:52	◣	Kamuela (sid111576@gateway/web/irccloud.com/x-ecwxzhwvyjdqglgi) has quit (Ping timeout: 240 seconds)
2017-01-10 15:22:05	◥	sd (sid96041@gateway/web/irccloud.com/x-bhleolfjiumdprfz) has joined #postgresql
2017-01-10 15:22:17	◣	ionelmc (sid20175@python/site-packages/ionelmc) has quit (Ping timeout: 245 seconds)
2017-01-10 15:22:32	◣	deepak_ (sid480@gateway/web/irccloud.com/x-htsnedwavmkatdin) has quit (Ping timeout: 240 seconds)
2017-01-10 15:22:32	◣	eribeiro (sid12454@gateway/web/irccloud.com/x-bxoquovngsdspiln) has quit (Ping timeout: 240 seconds)
2017-01-10 15:22:32	◣	qdw_afk (sid82640@gateway/web/irccloud.com/x-xrlchqmbgiiwxzfp) has quit (Ping timeout: 240 seconds)
2017-01-10 15:22:42	◣	mattwc (sid27919@gateway/web/irccloud.com/x-aufmhvmrwzvqqfbg) has quit (Ping timeout: 256 seconds)
2017-01-10 15:22:46	◣	ollie_ (sid143138@gateway/web/irccloud.com/x-faaxoivlycfgrfqc) has quit (Ping timeout: 255 seconds)
2017-01-10 15:22:46	◣	hayden___ (sid126487@gateway/web/irccloud.com/x-qznxslcfmpgnwvmn) has quit (Ping timeout: 255 seconds)
2017-01-10 15:22:52	◣	pringlescan (sid192736@gateway/web/irccloud.com/x-wznbsuiiuvoyqdzs) has quit (Ping timeout: 240 seconds)
2017-01-10 15:22:53	◣	AppStore (sid156856@gateway/web/irccloud.com/x-jzcoscrubphxchvw) has quit (Ping timeout: 258 seconds)
2017-01-10 15:23:12	◣	tejasmanohar (sid156529@gateway/web/irccloud.com/x-sqplmxeerzhypxbc) has quit (Ping timeout: 240 seconds)
2017-01-10 15:23:12	◣	tfitts (uid158900@gateway/web/irccloud.com/x-ccmddnflonafgvwe) has quit (Ping timeout: 240 seconds)
2017-01-10 15:23:13	◣	moogumbo (sid31999@gateway/web/irccloud.com/x-yywhguebnnmwovto) has quit (Ping timeout: 255 seconds)
2017-01-10 15:23:13	◣	huhlig (sid17687@gateway/web/irccloud.com/x-ljvduyaeeenpnbme) has quit (Ping timeout: 255 seconds)
2017-01-10 15:23:16	◣	mrchrisadams (sid1367@gateway/web/irccloud.com/x-asieoqvquawfraow) has quit (Ping timeout: 256 seconds)
2017-01-10 15:24:24	◥	lolmac_ (sid171216@gateway/web/irccloud.com/x-vbkiwctfniggxnrp) has joined #postgresql
2017-01-10 15:24:26	◥	nickle (sid89854@gateway/web/irccloud.com/x-qqkdkqhpyciignma) has joined #postgresql
2017-01-10 15:24:28	◥	Kamuela (sid111576@gateway/web/irccloud.com/x-vfijqndjxlxwproj) has joined #postgresql
2017-01-10 15:24:29	◣	elein (~chatzilla@192.150.10.209) has quit (Ping timeout: 252 seconds)
2017-01-10 15:24:42	◥	deepak_ (sid480@gateway/web/irccloud.com/x-jgxbtlcawzmhbkfc) has joined #postgresql
2017-01-10 15:24:48	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 15:25:04	◥	moogumbo (sid31999@gateway/web/irccloud.com/x-uccbgwhtqkchcqoq) has joined #postgresql
2017-01-10 15:25:16	◥	al-damiri (uid142631@gateway/web/irccloud.com/x-nkojfdrgzqoenkzi) has joined #postgresql
2017-01-10 15:25:24	◥	machty (sid13535@gateway/web/irccloud.com/x-pubccvydvkzfjaje) has joined #postgresql
2017-01-10 15:25:32	◥	huhlig (sid17687@gateway/web/irccloud.com/x-tbdmjzqphldarjgv) has joined #postgresql
2017-01-10 15:25:48	◥	hayden___ (sid126487@gateway/web/irccloud.com/x-hlsvydxwhpypsdsb) has joined #postgresql
2017-01-10 15:25:52	◥	mrchrisadams (sid1367@gateway/web/irccloud.com/x-zpworheeqawpgalf) has joined #postgresql
2017-01-10 15:25:55	◥	AppStore (sid156856@gateway/web/irccloud.com/x-uinxguubfqnkjlww) has joined #postgresql
2017-01-10 15:26:00	◥	tfitts (uid158900@gateway/web/irccloud.com/x-yoblrsjeaoxcgxxo) has joined #postgresql
2017-01-10 15:26:14	◥	ionelmc (sid20175@python/site-packages/ionelmc) has joined #postgresql
2017-01-10 15:26:15	◥	pringlescan (sid192736@gateway/web/irccloud.com/x-rhbnacaneaxtvcyz) has joined #postgresql
2017-01-10 15:26:39	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 15:26:51	◥	ollie_ (sid143138@gateway/web/irccloud.com/x-ecrcghaxkltkjkni) has joined #postgresql
2017-01-10 15:26:54	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-10 15:27:53	◣	FofG (uid91005@gateway/web/irccloud.com/x-nexuzehyoifzlfzr) has quit (Quit: Connection closed for inactivity)
2017-01-10 15:28:48	◥	koyae (8148932b@gateway/web/cgi-irc/kiwiirc.com/ip.129.72.147.43) has joined #postgresql
2017-01-10 15:28:52	◣	dermiste (~dermiste@static-176-158-4-36.ftth.abo.bbox.fr) has quit (Ping timeout: 240 seconds)
2017-01-10 15:30:45	◥	SpeakerToMeat (~SpeakerTo@prgmr/customer/SpeakerToMeat) has joined #postgresql
2017-01-10 15:31:01	◥	elein (~chatzilla@192.150.10.209) has joined #postgresql
2017-01-10 15:31:11	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Ping timeout: 240 seconds)
2017-01-10 15:32:11	koyae	Is there a function that can look up pg_type aliases and return the canonical type-name or pg_type.oid e.g. foo('INT') -> int8 or foo('INT') -> oid ?
2017-01-10 15:32:12	◥	parallaxis_ (~parkerjon@wsip-184-177-18-9.ga.at.cox.net) has joined #postgresql
2017-01-10 15:33:15	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 15:33:36	◣	nettoweb (~nettoweb@179.180.171.40) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 15:33:41	koyae	hm... looks like I can just cast to REGTYPE.
2017-01-10 15:35:21	bencc	I need to insert or upsert a user every time I'm getting an api request
2017-01-10 15:35:46	bencc	using 'insert ... on conflict update' will work but it will increase the primary index every time
2017-01-10 15:36:16	bencc	I could also use two separate queries. try to update and insert if it fails
2017-01-10 15:36:18	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 15:36:31	Berge	Increase the primary index?
2017-01-10 15:36:53	bencc	most of the time the user info will be the same. should I just read the user row and check if it needs an update?
2017-01-10 15:37:17	bencc	Berge: I mean increase autoincrement index in case of insert error
2017-01-10 15:37:25	Berge	bencc: You mean a sequence?
2017-01-10 15:37:29	bencc	yes. sorry
2017-01-10 15:37:29	Berge	So?
2017-01-10 15:37:38	bencc	isn't it bad practice?
2017-01-10 15:38:02	Berge	Well, it won't if a row with the same primary key already exists, I'd think.
2017-01-10 15:38:05	bencc	to have huge index although I only have thousand records
2017-01-10 15:38:09	Berge	It's not an index.
2017-01-10 15:38:18	◥	qdw_afk (sid82640@gateway/web/irccloud.com/x-zerlmngakktwqfke) has joined #postgresql
2017-01-10 15:38:30	Berge	Think of sequences not as sequences, but as sources of unique IDs with no other meaning.
2017-01-10 15:38:44	bencc	increment the user_id for no reason
2017-01-10 15:39:04	Berge	Why would it?
2017-01-10 15:39:05	◣	Rafzzz (~textual@host109-156-103-201.range109-156.btcentralplus.com) has quit (Quit: My Mac has gone to sleep. ZZZzzz…)
2017-01-10 15:39:08	bencc	users will send api request every 5 minutes all day.
2017-01-10 15:39:35	bencc	instead of having user_id = 1,2,3,4... I'll have 1,3432, 80103...
2017-01-10 15:39:49	◣	banditro_ (~banditron@kohana/developer/banditron) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-10 15:40:30	Berge	Did you check that that actually happens? It would surprise me somewhat.
2017-01-10 15:40:31	bencc	because of many failed inserts that advance the autoincrement sequence
2017-01-10 15:40:34	◥	yieldsfalsehood (~elliot@pool-100-11-87-225.phlapa.fios.verizon.net) has joined #postgresql
2017-01-10 15:40:35	Berge	But at any rate, why would that be a problem?
2017-01-10 15:40:48	bencc	it feels dirty
2017-01-10 15:40:52	◥	banditron (~banditron@kohana/developer/banditron) has joined #postgresql
2017-01-10 15:41:01	bencc	dealing with huge numbers for no reason
2017-01-10 15:41:21	bencc	I know I could use uuid and have meaningless user_ids as well
2017-01-10 15:42:04	◣	jon-mac (~textual@67.108.126.82.ptr.us.xo.net) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-10 15:42:07	◥	jward (~jward@ec2-54-193-15-90.us-west-1.compute.amazonaws.com) has joined #postgresql
2017-01-10 15:42:34	bencc	Berge: I know I'll get gaps because the same user might create thousands  of requests a year and I need to insert/update on each request
2017-01-10 15:43:09	bencc	so if I have 10K users the sequence will be 10K * 1000...
2017-01-10 15:43:22	◥	Ropeney (~Ropeney@tank.mindvision.com.au) has joined #postgresql
2017-01-10 15:44:01	◣	uncleyear (~ian@unaffiliated/uncleyear) has quit (Quit: Lost terminal)
2017-01-10 15:44:11	Zr40	integer goes up to 2^31-1 so that fits just fine with some margin
2017-01-10 15:44:26	Berge	bencc: I don't get it.
2017-01-10 15:44:33	◣	cartan (~cartan@p508EAB01.dip0.t-ipconnect.de) has quit (Quit: zzzzzzzzzzzz)
2017-01-10 15:44:35	◥	uncleyear (~ian@unaffiliated/uncleyear) has joined #postgresql
2017-01-10 15:44:54	◣	yieldsfalsehood (~elliot@pool-100-11-87-225.phlapa.fios.verizon.net) has quit (Remote host closed the connection)
2017-01-10 15:45:18	Zr40	gaps are unpreventable, however, if you are worried about them you could at least try to avoid getting a sequence value when it will certainly be rolled back
2017-01-10 15:45:18	bencc	so I shouldn't worry about it?
2017-01-10 15:45:30	Berge	bencc: No, I don't get why you think the sequence will increase.
2017-01-10 15:45:33	Zr40	(or just use bigint and never worry about it at all)
2017-01-10 15:45:35	bencc	most of the time insert will fail
2017-01-10 15:45:46	Zr40	why will it fail?
2017-01-10 15:45:48	bencc	99.99% of the times I don't need update
2017-01-10 15:45:54	Berge	If you have a table user(userid serial, username text) and thus a sequence called user_userid_seq.
2017-01-10 15:46:21	Zr40	almost-always failing inserts seem horrible for a lot of reasons, sequence gaps being the least of them
2017-01-10 15:46:24	bencc	I have an external site with users using my api
2017-01-10 15:46:33	zsoc	So I'm trying to make a rather uneducated decision about whether I should just use knex as my interface for postgres on node or if I should go full ORM up a level with Bookshelfjs. Is it really just a 'preference' or does some data handle better when manipulated as objects? I'm trying to figure out how to make a rational decision on it.
2017-01-10 15:46:37	◥	shangxiao (~shangxiao@103.224.86.17) has joined #postgresql
2017-01-10 15:46:41	Berge	And do INSERT INTO user (userid, username) VALUES (123, 'berge') ON CONFLICT (userid) DO UPDATE SET username = EXCLUDED.username;
2017-01-10 15:46:45	Berge	Then the sequence won't be touched.
2017-01-10 15:46:57	◣	fwiles (~frank@19.89.124.24.cm.sunflower.com) has quit (Quit: fwiles)
2017-01-10 15:47:02	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-10 15:47:27	zsoc	oo is that an upset? I'll need one of those too :>
2017-01-10 15:47:31	Berge	zsoc: You should never go full or even partial ORM unless you know exactly which limitations and the ORM has. And if it's not sqlalchemy or DBIx::Class, it's more than likely utterly terrible.
2017-01-10 15:47:31	zsoc	*upsert
2017-01-10 15:47:39	bencc	Berge: are you sure the the sequence won't be touched in your example?
2017-01-10 15:47:46	bencc	my understanding is that it will
2017-01-10 15:47:47	◣	koyae (8148932b@gateway/web/cgi-irc/kiwiirc.com/ip.129.72.147.43) has left #postgresql
2017-01-10 15:47:49	Berge	bencc: Don't take my word for it, test it.
2017-01-10 15:47:51	Zr40	bencc: why would it be?
2017-01-10 15:48:03	bencc	because it tries to insert and fail
2017-01-10 15:48:11	◥	anth0ny (~Anthony@unaffiliated/anth0ny) has joined #postgresql
2017-01-10 15:48:15	Zr40	why would it touch the sequence?
2017-01-10 15:48:17	bencc	every time it tries to insert it has to advance the sequence
2017-01-10 15:48:25	Berge	It does not try to insert anytying.
2017-01-10 15:48:25	Zr40	why do you think that?
2017-01-10 15:48:37	bencc	https://www.postgresql.org/message-id/2186.1462633631%40sss.pgh.pa.us
2017-01-10 15:48:40	anth0ny	Is there any good way to save a query in Postgresql and be informed any time that the query yields a hit?
2017-01-10 15:48:40	Berge	The conflict happens long before any row has been written or default values fetched.
2017-01-10 15:48:57	bencc	^^ that what this bug is about
2017-01-10 15:49:01	Berge	anth0ny: No, but you can achieve similar things with LISTEN/NOTIFY.
2017-01-10 15:49:01	Zr40	the only time sequences are touched are when you call nextval() on it, either in your query or as an omitted default
2017-01-10 15:49:52	Zr40	that report calls nextval() as an omitted default
2017-01-10 15:50:29	bencc	Zr40: why?
2017-01-10 15:50:30	bencc	insert into table(column) values (value) on conflict DO NOTHING
2017-01-10 15:50:34	Berge	bencc: Where does anybody mention a bug?
2017-01-10 15:50:41	Berge	bencc: TIAS.
2017-01-10 15:50:43	bencc	a discussion
2017-01-10 15:50:48	anth0ny	Berge, thanks, looking into it now
2017-01-10 15:51:10	bencc	Berge: they say that this will advance the sequence and it's by design: insert into table(column) values (value) on conflict DO NOTHING
2017-01-10 15:51:16	bencc	isn't it the same as your example?
2017-01-10 15:51:30	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 15:51:31	Zr40	bencc: what column uses nextval as a default? Is that column listed in the insert statement?
2017-01-10 15:51:33	Berge	bencc: No, it does not say that.
2017-01-10 15:51:35	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Ping timeout: 256 seconds)
2017-01-10 15:51:55	Berge	bencc: As Zr40 says, it says that a sequence will increase when called nextval() on.
2017-01-10 15:51:56	Zr40	bencc: if you provide a value for a column with the default, the default is ignored
2017-01-10 15:52:16	Zr40	so if you provide a value for a column that has nextval() as its default, nextval() isn't called
2017-01-10 15:52:17	zsoc	Berge: i mean.. bookshelf is a large, active, community project. I've read through the docs.. I can fall back to knex and/or to the raw `pg` driver basically at any point. I don't want to handicap myself by using it, but also not by not using it lol. I guess maybe I should avoid it until at least I'm more familiar with postgres..
2017-01-10 15:52:25	bencc	ok. but I don't know the default
2017-01-10 15:52:26	zsoc	the whole 'understand' your tools thing :p
2017-01-10 15:52:39	Berge	zsoc: I find I'm severely handicapped everytime I use an ORM.
2017-01-10 15:52:45	bencc	Zr40: that's the reason you use autoincrement sequence
2017-01-10 15:52:51	Berge	zsoc: Perceived size of community does not matter.
2017-01-10 15:53:09	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 15:53:17	zsoc	Interesting.. I wonder if that's possibly related to the language one is using tho? Some languages are more prone to be object-driven... FP ones specifically
2017-01-10 15:53:37	bencc	Berge: I understand why in your example the sequence won't be increased but the whole point is that I don't know the user_id
2017-01-10 15:53:46	Berge	zsoc: Often is. The main problem with ORMs is that relational data maps badly to object oriented models in general.
2017-01-10 15:53:47	zsoc	So then what is the advantage of an ORM in general? Requires.. less SQL understanding? Just one more abstraction? heh
2017-01-10 15:53:51	Zr40	bencc: I repeat my earlier question. Why are your inserts mostly-failing?
2017-01-10 15:53:52	bencc	Berge: if I did, I could do an update instead of trying insert first
2017-01-10 15:54:03	bencc	Zr40: let me example the user case
2017-01-10 15:54:19	Berge	bencc: If you don't know the user ID (which I expect is primary key), how can you ever update a user rather than inserting it?
2017-01-10 15:54:21	Berge	Logically.
2017-01-10 15:54:24	bencc	Zr40: an external website has users using my chat as service through an api
2017-01-10 15:54:28	◣	NCS_One (~NCS_One@dsl-178-106.bl26.telepac.pt) has quit (Quit: Lost terminal)
2017-01-10 15:54:31	◣	EyePulp (~eyepulp@98.215.57.107) has quit (Remote host closed the connection)
2017-01-10 15:54:39	zsoc	Well in js... rather used to working with objects with circular dependencies.. that's /sort/ of like model relations heh
2017-01-10 15:54:44	Berge	zsoc: If you think you need an ORM because you then don't need to know SQL, you're doing it wrong.
2017-01-10 15:54:50	bencc	Zr40: the api request sends ext_id (user_id on the other webitesite), username...
2017-01-10 15:54:53	Berge	That should never be the point of an ORM.
2017-01-10 15:55:18	zsoc	Not.. not know. Maybe avoid some of the tedium? I mean that's the point of any abstraction. It's supposed to make things clearer or more declarative at least.
2017-01-10 15:55:25	bencc	Zr40: I need to insert/update the user record based on the ext_id
2017-01-10 15:55:28	Berge	zsoc: What most people tend to think is that an object is the result of a joined set of relational data.
2017-01-10 15:55:49	Berge	That's an abstraction that holds for simple things, but not everything.
2017-01-10 15:55:54	Zr40	bencc: why? What changed for existing users?
2017-01-10 15:55:56	bencc	Zr40: the same user might call the api thousands of times and most of the time with same username
2017-01-10 15:56:10	zsoc	I would disagree with that. I see my object representing exactly what it is.. the schema to a table (generally). That doesn't stop you from having to query properly
2017-01-10 15:56:37	◣	Masterphi (~Masterphi@199.192.105.248) has quit (Remote host closed the connection)
2017-01-10 15:56:39	bencc	Zr40: users info on the other website might change. for example, the user changes the username. role might change (moderator/participants)
2017-01-10 15:56:44	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 15:57:00	bencc	Zr40: since it's dynamic, the website doesn't has to worry about syncing changes
2017-01-10 15:57:06	◣	kus (~khada@pool-98-109-119-45.nwrknj.fios.verizon.net) has quit (Read error: Connection reset by peer)
2017-01-10 15:57:10	Zr40	bencc: it seems rather inappropriate to always write when nothing has changed
2017-01-10 15:57:16	◥	Masterphi (~Masterphi@199.192.105.248) has joined #postgresql
2017-01-10 15:57:22	Berge	zsoc: In code, you're almost never interested in say "a user", but very often "a user and her Things".
2017-01-10 15:57:31	Zr40	bencc: you should detect that nothing has changed and not issue either an insert or update in that case
2017-01-10 15:57:42	Berge	zsoc: And sometimes the things' properties.
2017-01-10 15:57:48	bencc	Zr40: how? try to read the user first?
2017-01-10 15:57:53	Zr40	bencc: and as a side effect / bonus, it solves your gap problem
2017-01-10 15:57:55	Zr40	bencc: yes
2017-01-10 15:58:11	◥	kus (~khada@pool-98-109-119-45.nwrknj.fios.verizon.net) has joined #postgresql
2017-01-10 15:58:14	Berge	(The gap not-really-a-problem, it must be noted.)
2017-01-10 15:58:27	bencc	Berge: I agree. might be my OCD :)
2017-01-10 15:58:28	Zr40	right, gap itch
2017-01-10 15:58:28	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 15:58:53	zsoc	Well, and it's nice to have an object that represents your `user` and that references their `things`. It's extra nice if you get yelled at if you are handling your user improperly before you do something bad lol.
2017-01-10 15:58:54	bencc	thanks for both
2017-01-10 15:59:07	bencc	reading first makes much more sense to me now
2017-01-10 15:59:13	Berge	zsoc: It is indeed nice, but the abstraction doesn't map very well.
2017-01-10 15:59:48	◣	hahuang65 (~hahuang65@c-50-136-152-183.hsd1.ca.comcast.net) has quit (Read error: Connection reset by peer)
2017-01-10 16:00:02	zsoc	I'm not arguing with you, as I lack first hand experience. The only thing similar i've used was an ODM and nosql/document stores tend to have.. different pros and cons
2017-01-10 16:00:16	Berge	Mostly cons.
2017-01-10 16:00:17	Berge	(=
2017-01-10 16:00:22	zsoc	that's why i'm here lol
2017-01-10 16:01:08	◥	hahuang65 (~hahuang65@2601:647:4000:d7:402c:fb9b:d237:3890) has joined #postgresql
2017-01-10 16:01:16	Berge	zsoc: If I had an øre for every person who come to #postgresql with a problem they can't solve because their ORM won't let it…
2017-01-10 16:01:24	Berge	Then I'd likely have at least a krone.
2017-01-10 16:02:21	anth0ny	Can anyone speak to the performance of Triggers?  As in, I want to allow a user to subscribe to alerts about certain data entering the DB.  Would it be a bad idea to build tooling to manage the creation/deletion of Triggers such as "CREATE TRIGGER brand_x_product AFTER INSERT ON products WHEN (NEW.brand = 'x')"?
2017-01-10 16:02:23	Berge	Join-and-aggregate-some-values is often quite trivial to write queries for in SQL, but nearly impossible in most ORMs.
2017-01-10 16:02:24	zsoc	Is this a danish joke. You people have marcipan right? Get me some of that
2017-01-10 16:02:53	Berge	zsoc: No, just localisation of "if I had a penny for.." (-:
2017-01-10 16:03:13	◣	dur-randir (~dur_randi@host176-3-static.224-95-b.business.telecomitalia.it) has quit (Read error: Connection reset by peer)
2017-01-10 16:03:17	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 16:03:26	anth0ny	Berge, I'm not totally understanding how to use LISTEN/NOTIFY to only listen for certain changes. I suppose I could listen for ALL changes and then have the handler compare it against what my query was looking for? Is that what you were suggesting?
2017-01-10 16:03:32	Berge	anth0ny: And then call a function which does NOTIFY? That's a common design.
2017-01-10 16:03:35	◥	dur-randir (~dur_randi@host176-3-static.224-95-b.business.telecomitalia.it) has joined #postgresql
2017-01-10 16:03:52	Berge	anth0ny: Yes, you need a trigger which calls a function which does NOTIFY.
2017-01-10 16:04:27	anth0ny	Berge, ah, okay.  So what would be the performance implications of having 1000 triggers on a table?  each time a row is inserted, would it be equivalent of running 1000 queries?
2017-01-10 16:04:29	Berge	anth0ny: And yes, the subscribers need to check what happened themselves.
2017-01-10 16:04:51	Berge	I can't possibly see a design where 1000 triggers would be useful.
2017-01-10 16:05:02	Berge	And I have no idea about the performance implications.
2017-01-10 16:05:25	Berge	But a trigger itself is cheap, after all, it does not do any data access (unless the function you call does).
2017-01-10 16:05:37	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 248 seconds)
2017-01-10 16:05:56	anth0ny	Berge, so I'm suggesting that each trigger's WHERE clause would represent a user's wants.  So user A wants to know when "brand = X" and user B wants to know when "brand = Y", so each would be a separate trigger
2017-01-10 16:06:09	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2017-01-10 16:06:16	bencc	if I have an index: "UNIQUE (host_id, site_id, ext_id)" and I do SELECT based on host_id and ext_id
2017-01-10 16:06:20	Berge	anth0ny: No, you can have a singel trigger and check what happend in the function you call.
2017-01-10 16:06:24	bencc	ext_id won't enjoy the index?
2017-01-10 16:06:35	Berge	anth0ny: And then notify on the respective channels. Or notify on a channel which has the brand ID.
2017-01-10 16:06:36	bencc	do I need a separate index on ext_id ?
2017-01-10 16:07:06	Berge	bencc: It can be used, but it won't be very effective for filtering on only ext_id.
2017-01-10 16:07:30	lluad	anth0ny: I'm doing something similar, and I'm also serializing relevant data to json and including it in the notify payload (if it's small enough, otherwise it goes to a queue table and the notify payload points there).
2017-01-10 16:07:36	Berge	WHERE host_id .. AND ext_id can use that index, though.
2017-01-10 16:07:36	bencc	Berge: what if I filter based on the first and last columns but not on the middle?
2017-01-10 16:07:36	Berge	(But if you do that often, you might want a (host_id, ext_id) index.
2017-01-10 16:07:42	lluad	I'm yet to decide whether this is a good idea or not.
2017-01-10 16:07:45	◥	ron_frown (~ronnyfro@24-176-228-82.static.snlo.ca.charter.com) has joined #postgresql
2017-01-10 16:07:53	Berge	bencc: It can be used.
2017-01-10 16:08:06	bencc	Berge: even if the middle one is missing? (site_id)
2017-01-10 16:08:16	Berge	lluad: Notifications can get lost, though.
2017-01-10 16:08:30	◣	hahuang65 (~hahuang65@2601:647:4000:d7:402c:fb9b:d237:3890) has quit (Ping timeout: 258 seconds)
2017-01-10 16:09:11	anth0ny	Basically what I'm trying to do is reimplement ElasticSearch's Percolator, where a user can provide saved queries and then whenever a row is added it is compared against saved queries and, if so, an action would take place.
2017-01-10 16:09:11	◣	parallaxis_ (~parkerjon@wsip-184-177-18-9.ga.at.cox.net) has quit (Read error: Connection reset by peer)
2017-01-10 16:09:19	Berge	bencc: Yes.
2017-01-10 16:09:27	bencc	Berge: thanks
2017-01-10 16:09:29	◥	parallaxis_ (~parkerjon@wsip-174-71-183-134.ga.at.cox.net) has joined #postgresql
2017-01-10 16:09:32	lluad	Berge: In modern postgres? Other than duplicates?
2017-01-10 16:09:35	◣	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has quit (Read error: Connection reset by peer)
2017-01-10 16:09:37	◣	shadowdancer (~shadowdan@112.215.170.199) has quit (Read error: Connection reset by peer)
2017-01-10 16:09:48	Berge	lluad: During failover, for instance.
2017-01-10 16:09:51	◣	jmelesky (~jmelesky@c-67-160-173-91.hsd1.or.comcast.net) has quit (Read error: Connection reset by peer)
2017-01-10 16:09:54	◣	davimore_ (~davimore@185.145.66.254) has quit (Read error: Connection reset by peer)
2017-01-10 16:09:56	wyoung	ok so should I use coaleasceee or UNION ALL?
2017-01-10 16:09:56	Berge	Since they're not replicated.
2017-01-10 16:09:59	anth0ny	Berge, so I'm having trouble grasping how a user could enter in the "this is the information I care about" into the handler function that is called by the Trigger
2017-01-10 16:10:00	◥	shadowdancer (~shadowdan@112.215.170.199) has joined #postgresql
2017-01-10 16:10:11	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2017-01-10 16:10:17	lluad	True. This is not a general purpose setup, and losses in those rare cases are acceptable for what I'm doing.
2017-01-10 16:10:25	Berge	Also, a client that connects and does LISTEN might miss something in some cases, iirc.
2017-01-10 16:10:31	◣	bwlang (~langhorst@24.91.227.0) has quit (Ping timeout: 240 seconds)
2017-01-10 16:10:34	◣	myrkraverk (~chatzilla@124.106.136.150) has quit (Read error: Connection reset by peer)
2017-01-10 16:10:36	◥	parallaxis__ (~parkerjon@wsip-184-177-18-9.ga.at.cox.net) has joined #postgresql
2017-01-10 16:10:42	◥	davimore_ (~davimore@185.145.66.254) has joined #postgresql
2017-01-10 16:10:44	lluad	anth0ny: Store what they're interested in in a table, have a trigger on that table dynamically build and replace the trigger function?
2017-01-10 16:10:51	Berge	anth0ny: That's a very general thing. You mean saved, actual SQL queries?
2017-01-10 16:11:11	◣	NemesisD (sid24071@gateway/web/irccloud.com/x-hibwsvzntcbdknna) has quit (Ping timeout: 240 seconds)
2017-01-10 16:11:23	◣	adamg (~akg@38.102.153.98) has quit (Remote host closed the connection)
2017-01-10 16:11:25	◣	sfkeller (~chatzilla@135.209.196.178.dynamic.wline.res.cust.swisscom.ch) has quit (Read error: Connection reset by peer)
2017-01-10 16:11:31	◣	quant (quant@bitsync.net) has quit (Ping timeout: 240 seconds)
2017-01-10 16:11:37	◥	adamg (~akg@38.102.153.98) has joined #postgresql
2017-01-10 16:11:42	anth0ny	Berge, not actual queries, but user specified criteria (that could likely be represented as a SELECT statement), like "brand = X and color = red and price <= 100"
2017-01-10 16:11:49	◥	sfkeller (~chatzilla@135.209.196.178.dynamic.wline.res.cust.swisscom.ch) has joined #postgresql
2017-01-10 16:11:51	◣	ggherdov (sid11402@gateway/web/irccloud.com/x-cabcfnijdbxdqagu) has quit (Ping timeout: 240 seconds)
2017-01-10 16:11:51	◣	jhill_ (sid1055@gateway/web/irccloud.com/x-uejlvhfykafvwixa) has quit (Ping timeout: 240 seconds)
2017-01-10 16:11:51	◣	timwis (sid152344@gateway/web/irccloud.com/x-onlemtkuwjwyktup) has quit (Ping timeout: 240 seconds)
2017-01-10 16:11:57	◣	nikola (~nikola@178.79.159.224) has quit (Ping timeout: 248 seconds)
2017-01-10 16:12:00	◣	hendi (uid205685@gateway/web/irccloud.com/x-wyvylzheezcyjfae) has quit (Read error: Connection reset by peer)
2017-01-10 16:12:00	◣	krainboltgreene (sid5202@gateway/web/irccloud.com/x-dqqpvfixjjfgxwnc) has quit (Read error: Connection reset by peer)
2017-01-10 16:12:04	◣	ron_frown (~ronnyfro@24-176-228-82.static.snlo.ca.charter.com) has quit (Read error: Connection reset by peer)
2017-01-10 16:12:06	◣	Good_Advice_Cat (~Happy@unaffiliated/featheredserpent) has quit (Remote host closed the connection)
2017-01-10 16:12:11	◣	JoWie (sid93456@gateway/web/irccloud.com/x-yifcmmswrldpxrkj) has quit (Ping timeout: 240 seconds)
2017-01-10 16:12:14	◥	myrkraverk (~chatzilla@124.106.136.150) has joined #postgresql
2017-01-10 16:12:21	◥	hahuang65 (~hahuang65@c-50-136-152-183.hsd1.ca.comcast.net) has joined #postgresql
2017-01-10 16:12:25	◣	ktosiek (~quassel@108.61.166.51) has quit (Quit: No Ping reply in 180 seconds.)
2017-01-10 16:12:30	◥	Good_Advice_Cat (~Happy@unaffiliated/featheredserpent) has joined #postgresql
2017-01-10 16:12:31	◣	Dev0n (~Dev0n@unaffiliated/dev0n) has quit (Ping timeout: 240 seconds)
2017-01-10 16:12:42	◣	ahf (ahf@irssi/staff/ahf) has quit (Ping timeout: 245 seconds)
2017-01-10 16:12:43	◣	held (~heldchen@unaffiliated/held) has quit (Read error: Connection reset by peer)
2017-01-10 16:12:45	anth0ny	then, the next step is to display all data matching their criteria (which is why it makes sense in my mind to store it as an actual SELECT query, or something that can be easily turned into a select query)
2017-01-10 16:12:50	Berge	lluad: Let's see, if a transaction does NOTIFY .. COMMIT; and the server crashes (or goes offline), a client might not receive the notification – and if it has to reconnect, it will never get it.
2017-01-10 16:12:51	◣	tdn (~tdn@syrah.adora.dk) has quit (Ping timeout: 240 seconds)
2017-01-10 16:12:51	◣	ScottM______ (sid14960@gateway/web/irccloud.com/x-gjrpzstxfwnopubl) has quit (Ping timeout: 240 seconds)
2017-01-10 16:12:51	◣	githogori (~githogori@c-73-70-12-67.hsd1.ca.comcast.net) has quit (Ping timeout: 240 seconds)
2017-01-10 16:12:51	◣	ramblinpeck (sid34382@gateway/web/irccloud.com/x-spbvclfthnwfrbqa) has quit (Ping timeout: 240 seconds)
2017-01-10 16:12:58	◥	held (~heldchen@unaffiliated/held) has joined #postgresql
2017-01-10 16:13:02	◥	ron_frown (~ronnyfro@24-176-228-82.static.snlo.ca.charter.com) has joined #postgresql
2017-01-10 16:13:03	◥	ktosiek (~quassel@108.61.166.51) has joined #postgresql
2017-01-10 16:13:04	Berge	lluad: So it has to check for changes it's interested in when it connects anyway.
2017-01-10 16:13:05	◣	cgommers (~Christoph@li689-53.members.linode.com) has quit (Ping timeout: 240 seconds)
2017-01-10 16:13:07	◣	Macaba (quassel@2a01:7e00::f03c:91ff:fe50:b330) has quit (Ping timeout: 245 seconds)
2017-01-10 16:13:07	◣	sohum (sohum@pdpc/supporter/active/sohum) has quit (Ping timeout: 245 seconds)
2017-01-10 16:13:11	◣	Ergo (~ergo@91.238.59.144) has quit (Ping timeout: 240 seconds)
2017-01-10 16:13:11	◣	LoRez (~LoRez@freenode/staff-emeritus/lorez) has quit (Ping timeout: 240 seconds)
2017-01-10 16:13:11	◣	evertversteeg (~evert@ip54539041.adsl-surfen.hetnet.nl) has quit (Ping timeout: 240 seconds)
2017-01-10 16:13:11	◣	lohfu (~lohfu@37.139.15.18) has quit (Ping timeout: 240 seconds)
2017-01-10 16:13:31	◣	madduck (~madduck@debian/developer/madduck) has quit (Ping timeout: 240 seconds)
2017-01-10 16:13:32	◣	mood (~mood@torrn.joram.io) has quit (Ping timeout: 240 seconds)
2017-01-10 16:13:32	◣	amiri_ (~amiri@cpe-45-48-101-136.socal.res.rr.com) has quit (Ping timeout: 240 seconds)
2017-01-10 16:13:35	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 240 seconds)
2017-01-10 16:13:36	◥	Macaba (quassel@2a01:7e00::f03c:91ff:fe50:b330) has joined #postgresql
2017-01-10 16:13:42	◥	hendi (uid205685@gateway/web/irccloud.com/x-nzqneobuiobmzuvg) has joined #postgresql
2017-01-10 16:13:51	◣	geoffb (~geoffb@ppp59-167-167-145.static.internode.on.net) has quit (Ping timeout: 240 seconds)
2017-01-10 16:13:52	◣	zzzgeoffb (~zzzgeoffb@ppp59-167-167-145.static.internode.on.net) has quit (Ping timeout: 240 seconds)
2017-01-10 16:13:52	◣	peder (4822@nordur.ifi.uio.no) has quit (Ping timeout: 240 seconds)
2017-01-10 16:13:59	◥	tdn (~tdn@syrah.adora.dk) has joined #postgresql
2017-01-10 16:14:10	◣	parallaxis_ (~parkerjon@wsip-174-71-183-134.ga.at.cox.net) has quit (Ping timeout: 240 seconds)
2017-01-10 16:14:12	◣	aib (~marvin@unaffiliated/aib42) has quit (Ping timeout: 240 seconds)
2017-01-10 16:14:22	◥	amiri (~amiri@cpe-45-48-101-136.socal.res.rr.com) has joined #postgresql
2017-01-10 16:14:24	◥	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has joined #postgresql
2017-01-10 16:14:31	◣	Epitrope (~owenja@freegeek/epitrope) has quit (Ping timeout: 240 seconds)
2017-01-10 16:14:31	◣	Lacriatch (~Lacriatch@ns510295.ip-198-27-69.net) has quit (Ping timeout: 240 seconds)
2017-01-10 16:14:31	◣	johto (~marko@joh.to) has quit (Ping timeout: 240 seconds)
2017-01-10 16:14:33	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2017-01-10 16:14:34	◥	ggherdov (sid11402@gateway/web/irccloud.com/x-wpbezpqzmiqxswjp) has joined #postgresql
2017-01-10 16:14:35	◥	NemesisD (sid24071@gateway/web/irccloud.com/x-bgcxukzkhqribpag) has joined #postgresql
2017-01-10 16:14:41	◥	madduck (~madduck@matilda.madduck.net) has joined #postgresql
2017-01-10 16:14:41	◣	madduck (~madduck@matilda.madduck.net) has quit (Changing host)
2017-01-10 16:14:41	◥	madduck (~madduck@debian/developer/madduck) has joined #postgresql
2017-01-10 16:14:54	◥	timwis (sid152344@gateway/web/irccloud.com/x-wyyouxbgbcrsoomf) has joined #postgresql
2017-01-10 16:15:11	◣	AphelionZ (sid13706@gateway/web/irccloud.com/x-zcrvvodavglivfoc) has quit (Ping timeout: 240 seconds)
2017-01-10 16:15:14	◥	krainboltgreene (sid5202@gateway/web/irccloud.com/x-ggxbxbixucjsvodj) has joined #postgresql
2017-01-10 16:15:24	◥	johto (~marko@joh.to) has joined #postgresql
2017-01-10 16:15:26	◥	Lacriatch (~Lacriatch@ns510295.ip-198-27-69.net) has joined #postgresql
2017-01-10 16:15:31	◣	someone (~someone@somewhe.re) has quit (Ping timeout: 240 seconds)
2017-01-10 16:15:40	◣	howitdo (~howitdo@unaffiliated/howitdo) has quit (Read error: Connection reset by peer)
2017-01-10 16:16:25	◥	jhill_ (sid1055@gateway/web/irccloud.com/x-snsihaprhcipybir) has joined #postgresql
2017-01-10 16:16:27	◥	howitdo (~howitdo@unaffiliated/howitdo) has joined #postgresql
2017-01-10 16:16:40	◥	Epitrope (~owenja@freegeek/epitrope) has joined #postgresql
2017-01-10 16:16:44	◣	aajjbb (~aajjbb@179.154.124.39) has quit (Ping timeout: 252 seconds)
2017-01-10 16:16:55	◣	_djbkd (~djbkd@135.84.132.21) has quit (Quit: My people need me...)
2017-01-10 16:17:24	◥	quant (quant@bitsync.net) has joined #postgresql
2017-01-10 16:17:55	◥	geoffb (~geoffb@ppp59-167-167-145.static.internode.on.net) has joined #postgresql
2017-01-10 16:17:55	◥	zzzgeoffb (~zzzgeoffb@ppp59-167-167-145.static.internode.on.net) has joined #postgresql
2017-01-10 16:18:05	◥	mood (~mood@torrn.joram.io) has joined #postgresql
2017-01-10 16:18:26	◥	ahf (ahf@irssi/staff/ahf) has joined #postgresql
2017-01-10 16:18:35	◥	sohum (sohum@pdpc/supporter/active/sohum) has joined #postgresql
2017-01-10 16:18:38	◥	someone (~someone@somewhe.re) has joined #postgresql
2017-01-10 16:18:54	⚡	someone is now known as Guest72458
2017-01-10 16:18:57	◥	peder (4822@nordur.ifi.uio.no) has joined #postgresql
2017-01-10 16:18:58	◥	cgommers (Christophe@2a01:7e00::f03c:91ff:fe6e:7f8b) has joined #postgresql
2017-01-10 16:19:05	◣	e (e@freenode/staff/spy.edk) has quit (Ping timeout: 604 seconds)
2017-01-10 16:20:18	◣	astour_navashv (~logstash@187.37.100.50) has quit (Remote host closed the connection)
2017-01-10 16:20:50	◥	lohfu (~lohfu@37.139.15.18) has joined #postgresql
2017-01-10 16:21:10	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 16:21:18	◥	veegee (~veegee@107.161.4.218) has joined #postgresql
2017-01-10 16:21:18	◥	astour_navashv (~logstash@187.37.100.50) has joined #postgresql
2017-01-10 16:21:31	◥	githogori (~githogori@c-73-70-12-67.hsd1.ca.comcast.net) has joined #postgresql
2017-01-10 16:21:38	◥	evertversteeg (~evert@ip54539041.adsl-surfen.hetnet.nl) has joined #postgresql
2017-01-10 16:21:44	◥	ChristianDC (~Christian@66.117.62.146) has joined #postgresql
2017-01-10 16:22:01	◥	Ergo (~ergo@91.238.59.144) has joined #postgresql
2017-01-10 16:22:02	◥	trustyhank (~trustyhan@ool-43500679.dyn.optonline.net) has joined #postgresql
2017-01-10 16:22:10	veegee	HI all, quick question: how can I write a query which SELECT * WHERE now()   is not within col2 which is a TSTZRANGE ?
2017-01-10 16:22:19	◣	rohanrhu (~rohanrhu@81.214.43.248) has quit (Quit: Konversation terminated!)
2017-01-10 16:23:20	◥	reiser__ (~reiser@178.220.36.217) has joined #postgresql
2017-01-10 16:23:51	◥	nikola (~nikola@178.79.159.224) has joined #postgresql
2017-01-10 16:24:06	veegee	never mind, found the page
2017-01-10 16:24:10	◥	VeXocide_ (vexocide@toad.stack.nl) has joined #postgresql
2017-01-10 16:24:17	◥	e (~e@freenode/staff/spy.edk) has joined #postgresql
2017-01-10 16:24:44	◥	rohanrhu (~rohanrhu@81.214.43.248) has joined #postgresql
2017-01-10 16:24:51	◥	aib (~marvin@unaffiliated/aib42) has joined #postgresql
2017-01-10 16:24:59	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2017-01-10 16:25:19	◣	VeXocide (vexocide@toad.stack.nl) has quit (Read error: Connection reset by peer)
2017-01-10 16:25:31	◣	brezel (~dahbrezel@ssl.qwuh.com) has quit (Ping timeout: 240 seconds)
2017-01-10 16:25:51	◣	re1_ (~reiser@178.220.36.217) has quit (Ping timeout: 240 seconds)
2017-01-10 16:25:59	◣	kus (~khada@pool-98-109-119-45.nwrknj.fios.verizon.net) has quit (Read error: Connection reset by peer)
2017-01-10 16:26:05	◥	LoRez (~LoRez@freenode/staff-emeritus/lorez) has joined #postgresql
2017-01-10 16:26:38	◥	brezel (~dahbrezel@ssl.qwuh.com) has joined #postgresql
2017-01-10 16:26:58	◥	kus (~khada@pool-98-109-119-45.nwrknj.fios.verizon.net) has joined #postgresql
2017-01-10 16:27:17	◣	hotpanca_ (~hotpancak@2604:2000:14c5:4058:176:f484:27ba:b5d5) has quit (Remote host closed the connection)
2017-01-10 16:27:20	◣	fatdragon (~fatdragon@cpe-107-184-105-188.socal.res.rr.com) has quit (Remote host closed the connection)
2017-01-10 16:27:41	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-10 16:27:43	◣	kus (~khada@pool-98-109-119-45.nwrknj.fios.verizon.net) has quit (Client Quit)
2017-01-10 16:28:28	◣	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has quit (Remote host closed the connection)
2017-01-10 16:29:18	◥	nettoweb (~nettoweb@177.16.202.49) has joined #postgresql
2017-01-10 16:29:23	◥	XofP (~XofP@98.159.94.208) has joined #postgresql
2017-01-10 16:29:38	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Remote host closed the connection)
2017-01-10 16:30:22	◣	rkazak (~rkazak@67.170.253.182) has quit (Quit: Sleep.....ing....)
2017-01-10 16:31:28	◥	AphelionZ (sid13706@gateway/web/irccloud.com/x-mcrehevvrbwhcjds) has joined #postgresql
2017-01-10 16:32:17	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 248 seconds)
2017-01-10 16:33:50	◥	__Yiota (~textual@2607:fea8:56e0:407:61df:b214:55e2:da67) has joined #postgresql
2017-01-10 16:34:47	◥	Dev0n (~Dev0n@unaffiliated/dev0n) has joined #postgresql
2017-01-10 16:34:53	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-10 16:35:01	◣	ron_frown (~ronnyfro@24-176-228-82.static.snlo.ca.charter.com) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 16:36:07	◣	veegee (~veegee@107.161.4.218) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-10 16:36:26	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 16:37:51	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 16:38:29	◥	tozhu (~Thunderbi@218.88.86.106) has joined #postgresql
2017-01-10 16:38:48	◥	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has joined #postgresql
2017-01-10 16:38:48	◣	tourdownunder (~tourdownu@c114-77-114-51.chirn2.vic.optusnet.com.au) has quit (Client Quit)
2017-01-10 16:38:49	◣	reiser__ (~reiser@178.220.36.217) has quit (Read error: Connection reset by peer)
2017-01-10 16:40:03	◥	the_rat_ (~the_rat@2a02:8109:8380:3e8c:684c:155c:744d:ae62) has joined #postgresql
2017-01-10 16:42:19	◥	EyePulp (~eyepulp@173-18-225-16.client.mchsi.com) has joined #postgresql
2017-01-10 16:42:42	◣	banditron (~banditron@kohana/developer/banditron) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 16:43:16	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-10 16:43:51	◣	palerider (~mjm@47.185.244.157) has quit (Quit: Leaving.)
2017-01-10 16:44:00	◥	Bigleka_ (bd3ed2c3@gateway/web/freenode/ip.189.62.210.195) has joined #postgresql
2017-01-10 16:44:37	◥	BigLeka (~BigLeka@189.62.210.195) has joined #postgresql
2017-01-10 16:44:47	◣	the_rat_ (~the_rat@2a02:8109:8380:3e8c:684c:155c:744d:ae62) has quit (Ping timeout: 252 seconds)
2017-01-10 16:45:16	◣	Bigleka_ (bd3ed2c3@gateway/web/freenode/ip.189.62.210.195) has quit (Client Quit)
2017-01-10 16:45:34	◣	Maxel (~Maxel@50-241-60-122-static.hfc.comcastbusiness.net) has quit (Ping timeout: 255 seconds)
2017-01-10 16:46:06	◣	BigLeka (~BigLeka@189.62.210.195) has quit (Client Quit)
2017-01-10 16:46:33	◥	BigLeka (~BigLeka@189.62.210.195) has joined #postgresql
2017-01-10 16:47:31	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Ping timeout: 240 seconds)
2017-01-10 16:49:22	◥	nettoweb1 (~nettoweb@177.16.202.49) has joined #postgresql
2017-01-10 16:49:32	◥	macabre (~ibtjw@unaffiliated/macabre) has joined #postgresql
2017-01-10 16:51:35	◣	nettoweb (~nettoweb@177.16.202.49) has quit (Ping timeout: 240 seconds)
2017-01-10 16:52:35	◣	ramfjord (~tramfjord@c-67-169-47-49.hsd1.ca.comcast.net) has quit (Ping timeout: 240 seconds)
2017-01-10 16:52:52	◣	tozhu (~Thunderbi@218.88.86.106) has quit (Ping timeout: 260 seconds)
2017-01-10 16:54:06	◣	macabre (~ibtjw@unaffiliated/macabre) has quit (Ping timeout: 255 seconds)
2017-01-10 16:56:45	◥	linuxhiker1 (~linuxpoet@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2017-01-10 16:57:32	◣	adamg (~akg@38.102.153.98) has quit (Remote host closed the connection)
2017-01-10 16:57:35	◣	filiprem (~filip@188.146.20.53.nat.umts.dynamic.t-mobile.pl) has quit (Ping timeout: 240 seconds)
2017-01-10 16:57:37	linuxhiker1	anybody want to toy with some odd behavior from column level privelages?
2017-01-10 16:57:48	◥	FofG (uid91005@gateway/web/irccloud.com/x-idufsmhpbymdvvno) has joined #postgresql
2017-01-10 16:57:58	◣	FofG (uid91005@gateway/web/irccloud.com/x-idufsmhpbymdvvno) has left #postgresql
2017-01-10 16:59:15	◥	fev3r101 (~fev3r101@5.134.116.205) has joined #postgresql
2017-01-10 17:00:44	◣	held (~heldchen@unaffiliated/held) has quit (Ping timeout: 256 seconds)
2017-01-10 17:00:50	◥	grayhem__ (~grayhemp_@12.33.220.130) has joined #postgresql
2017-01-10 17:01:00	◥	aajjbb (~aajjbb@179.154.124.39) has joined #postgresql
2017-01-10 17:02:22	◣	BigLeka (~BigLeka@189.62.210.195) has quit (Read error: Connection reset by peer)
2017-01-10 17:02:40	◣	_djbkd (~djbkd@135.84.132.21) has quit (Remote host closed the connection)
2017-01-10 17:02:40	◣	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 17:04:08	◣	grayhemp_wh (~grayhemp_@12.33.220.130) has quit (Ping timeout: 256 seconds)
2017-01-10 17:05:01	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-10 17:05:07	◣	grayhem__ (~grayhemp_@12.33.220.130) has quit (Ping timeout: 260 seconds)
2017-01-10 17:05:22	◣	rjuju1 (~rjuju1@78.192.238.147) has quit (Ping timeout: 255 seconds)
2017-01-10 17:05:29	◥	_djbkd (~djbkd@135.84.132.21) has joined #postgresql
2017-01-10 17:05:48	◣	nettoweb1 (~nettoweb@177.16.202.49) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-10 17:07:08	◥	arescorpio (~arescorpi@14-54-16-190.fibertel.com.ar) has joined #postgresql
2017-01-10 17:07:20	◣	fev3r101 (~fev3r101@5.134.116.205) has quit (Ping timeout: 252 seconds)
2017-01-10 17:07:25	◥	rjuju1 (~rjuju1@78.192.238.147) has joined #postgresql
2017-01-10 17:07:42	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2017-01-10 17:08:25	◥	rkazak (~rkazak@67.170.253.182) has joined #postgresql
2017-01-10 17:09:21	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 245 seconds)
2017-01-10 17:10:30	◣	dwsr (uid185230@gateway/web/irccloud.com/x-ofrbifiboxnxcvgs) has quit (Quit: Connection closed for inactivity)
2017-01-10 17:10:46	◣	shadowdancer (~shadowdan@112.215.170.199) has quit (Ping timeout: 255 seconds)
2017-01-10 17:12:06	◥	adamg (~akg@38.102.153.98) has joined #postgresql
2017-01-10 17:12:42	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 260 seconds)
2017-01-11 09:55:26	⚡	irc: disconnected from server
2017-01-11 09:55:50	◥	boon (~david@66.195.46.242) has joined #postgresql
2017-01-11 09:55:50	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2017-01-11 09:55:50	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2017-01-11 09:55:50	⚡	Channel #postgresql: 937 nicks (0 ops, 0 voices, 937 normals)
2017-01-11 09:55:50	⚡	URL for #postgresql: http://www.postgresql.org
2017-01-11 09:55:54	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2017-01-11 09:55:56	xocolatl	you almost could in 9.3 but no beans
2017-01-11 09:56:38	fqtw	RhodiumToad, is that bad?
2017-01-11 09:56:58	RhodiumToad	depends what you think is "bad"
2017-01-11 09:56:59	fqtw	does it violate 3NF or something?
2017-01-11 09:57:03	BeeAyeEye	for replication i'm still not sure where to put the .pgpass file so that the replication user can read it, doesn't seem like the documentation for this step is clear
2017-01-11 09:57:12	fqtw	will I run into problems later?
2017-01-11 09:57:29	alankila	fqtw: it's just a correctness issue. You normally get all that nice checking that ensures your foreign keys don't get left around dangling and referencing rows that don't exist.
2017-01-11 09:57:31	RhodiumToad	it means you have to implement your own checks when, for example, deleting filters
2017-01-11 09:57:58	xocolatl	BeeAyeEye: you put it in the home directory of the user running postgres (usually postgres)
2017-01-11 09:58:06	alankila	fqtw: and sometimes you get a lot of convenience, e.g. SET NULL and DELETE cascades take care of cleaning up your database for you without having to fix things up at application level
2017-01-11 09:58:29	◣	chillywilly (~danielb@neptune.chaillet.net) has quit (Ping timeout: 256 seconds)
2017-01-11 09:58:30	BeeAyeEye	xocolatl: awesome thanks, but how does it know that that password is only for the replication user, or is it something that is clear if i just google .pgpass
2017-01-11 09:58:37	alankila	I use both of them quite a bit, not having them is a kind of hell
2017-01-11 09:58:56	RhodiumToad	??pgpass
2017-01-11 09:58:56	pg_docbot	http://www.postgresql.org/docs/current/static/libpq-pgpass.html
2017-01-11 09:58:58	xocolatl	BeeAyeEye: are you familiar with the format of the .pgpass file?
2017-01-11 09:59:09	◥	ningu (~unamuno@96-90-204-139-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-11 09:59:15	BeeAyeEye	xocolatl: no, i'm new to postgres, still trying to figure it all out, and thank you pg_docbot
2017-01-11 09:59:21	xocolatl	see link above
2017-01-11 09:59:26	◥	Jungle-boogie (~boogie@unaffiliated/jungle-boogie) has joined #postgresql
2017-01-11 09:59:50	fqtw	RhodiumToad,  alankila, whenever an image and its filters are requested, I check for the existence of the filters, if some don't exist anymore, i can delete them from the array then
2017-01-11 10:00:09	BeeAyeEye	thanks xocolatl , i also assume password can be md5? webpage doesn't say
2017-01-11 10:00:09	fqtw	but that's exactly why I want to detect if a filter is used at all by any image
2017-01-11 10:00:19	xocolatl	BeeAyeEye: no, it's clear text
2017-01-11 10:00:19	fqtw	so I can lock it from being deleted
2017-01-11 10:00:40	◥	wsieroci (~wsieroci@095160155072.dynamic-ww-12.vectranet.pl) has joined #postgresql
2017-01-11 10:00:42	zsoc	hmm
2017-01-11 10:00:49	BeeAyeEye	xocolatl: ouch, that's dissapointing, since i'm trying to put the configuration in puppet via github
2017-01-11 10:00:50	alankila	fqtw: so you're reinventing a job that database would do for you, though you can't use the array
2017-01-11 10:00:53	◥	bencc (~Ofir@5.29.226.133) has joined #postgresql
2017-01-11 10:01:06	xocolatl	BeeAyeEye: uhm
2017-01-11 10:01:06	zsoc	xocolatl: the idea of using date_start and just referencing the most current one that isn't in future to date.now() makes sense to me... i don't /think/ i need a daterange here?
2017-01-11 10:01:10	alankila	of course, it's better to check first and get a nice error than try to deal with database errors at UI level, so you might have to write the check anyway
2017-01-11 10:01:19	johto	BeeAyeEye; but you were ready to trust md5?
2017-01-11 10:01:30	BeeAyeEye	johto: it's better than plaintext
2017-01-11 10:01:35	RhodiumToad	uh, how?
2017-01-11 10:01:54	RhodiumToad	if it would be a valid login credential, it makes no odds whether it's plaintext or md5 or anything else
2017-01-11 10:02:00	xocolatl	zsoc: if you've just got one of the columns, that's fine.  it's when you want to add both that you should use a range
2017-01-11 10:02:08	fqtw	alankila: so you would check all filter references whenever a filter is deleted?
2017-01-11 10:02:12	zsoc	o okay
2017-01-11 10:02:19	◥	tomred1 (~dpaikkos@217.138.14.178) has joined #postgresql
2017-01-11 10:02:38	◣	bencc1 (~Ofir@5.29.226.133) has quit (Ping timeout: 252 seconds)
2017-01-11 10:02:52	ningu	RhodiumToad: sorry to bug you again but do you remember my question from yesterday about WHERE lv IN (SELECT * FROM uidlvs('{fra-000}')) versus WHERE lv = (SELECT * FROM uidlv('fra-000')) ? just wanted to confirm that the two will consistently generate essentially the same plan
2017-01-11 10:02:58	alankila	fqtw: well, it depends on what you want to happen. a ON DELETE CASCADE type foreign key could just wipe the filter usage out of the database for you, but chances are you want to warn user that he's about to delete something that's still being used first
2017-01-11 10:03:07	◥	dviola (~diego@187.66.107.69) has joined #postgresql
2017-01-11 10:03:09	RhodiumToad	ningu: no, they won't
2017-01-11 10:03:11	BeeAyeEye	RhodiumToad: fair point i suppose, if you're scripting something
2017-01-11 10:03:32	RhodiumToad	ningu: (and I never said they did)
2017-01-11 10:03:36	ningu	RhodiumToad: how are they different?
2017-01-11 10:03:40	alankila	fqtw: so I'm thinking you need the check for good UI experience, but you also want the foreign key check for data consistency
2017-01-11 10:03:48	ningu	RhodiumToad: yes, that's why I am asking -- I asked yesterday but guess you were away :)
2017-01-11 10:03:57	◣	tomred (~dpaikkos@217.138.14.178) has quit (Ping timeout: 245 seconds)
2017-01-11 10:03:57	◣	dviola (~diego@187.66.107.69) has quit (Changing host)
2017-01-11 10:03:57	◥	dviola (~diego@unaffiliated/diegoviola) has joined #postgresql
2017-01-11 10:04:03	zsoc	So now my issue is how to make a map~ / tuple pair work. Is there some common way to implement an immutable {key: value} pairing in postgres? Like just a tables with two primary keys I guess? But only one of the two will be unique, this is okay? (together they will be unique, ofc)
2017-01-11 10:04:11	RhodiumToad	ningu: lv IN (select ...)   is a semi-join, whereas   lv = (select ...)   is a scalar subselect
2017-01-11 10:04:22	BeeAyeEye	this is the problem when trying to put postgres configs in github i suppose, somehow you're putting passwords up there
2017-01-11 10:04:38	◥	tomred (~dpaikkos@217.138.14.178) has joined #postgresql
2017-01-11 10:05:03	fqtw	what's @>  ?
2017-01-11 10:05:07	xocolatl	contains
2017-01-11 10:05:09	⚡	CyberJacob is now known as zz_CyberJacob
2017-01-11 10:05:12	alankila	zsoc: (id, key, value) with primary key being (id, key). When you create a new map, you allocate a new id in sequence, then you insert all data as (id, key, value) triplets for that map.
2017-01-11 10:05:13	RhodiumToad	fqtw: read it as "contains"
2017-01-11 10:05:14	ningu	RhodiumToad: hmm ok. but you mentioned how lv = (select ...) won't look up the value in the stats whereas lv = uidlv('fra-000') will. and the latter case seemed to be generating a bad plan
2017-01-11 10:05:40	fqtw	subset or element?
2017-01-11 10:05:41	RhodiumToad	fqtw: with the > pointing to the "smaller" side, so  a <@ b  means "a is contained inside b"
2017-01-11 10:05:41	alankila	zsoc: you are never allowed to insert new data into an id except during the transaction when you allocate the new id, and you're never allowed to update or delete any records.
2017-01-11 10:05:51	RhodiumToad	fqtw: subset
2017-01-11 10:05:53	xocolatl	BeeAyeEye: passwords are for humans.  machines should use certificates
2017-01-11 10:05:54	ningu	I am wondering if a blanket lv = (select * from uidlv('fra-000')) will avoid that issue consistently (for other arguments to uidlv() too)
2017-01-11 10:05:56	fqtw	ok
2017-01-11 10:06:09	RhodiumToad	fqtw: use  arraycol @> array[element]   to check for containing a single element
2017-01-11 10:06:18	BeeAyeEye	xocolatl: does postgres replication support certificates?
2017-01-11 10:06:23	xocolatl	of course
2017-01-11 10:06:27	BeeAyeEye	because all documentation says to use passwords
2017-01-11 10:06:28	alankila	zsoc: this is also the kind of stuff you don't usually do in database. Also feel free to consider json or jsonb data type for this kind of stuff.
2017-01-11 10:06:32	◣	tomred1 (~dpaikkos@217.138.14.178) has quit (Ping timeout: 240 seconds)
2017-01-11 10:06:37	johto	certificates only work for SSL connections, though
2017-01-11 10:06:54	xocolatl	true
2017-01-11 10:07:06	RhodiumToad	BeeAyeEye: I hope you also realize that putting  ALTER USER foo WITH PASSWORD 'md5xxxxxxx';  is equally unsafe
2017-01-11 10:07:40	BeeAyeEye	RhodiumToad: i do now
2017-01-11 10:07:58	RhodiumToad	BeeAyeEye: i.e. exposing the 'md5xxxxx' part is as good as exposing the password, if you have any pg_hba.conf lines with 'md5' auth method
2017-01-11 10:07:58	alankila	zsoc: in case of a json type, you'd have just (id, data) kind of table and you just do inserts, never update or delete. the id can be serial column so autogenerated, it looks like insert into foo (data) values ('{"x":"y"}') sort of
2017-01-11 10:08:19	RhodiumToad	BeeAyeEye: (and even if you don't, it's not hard to brute-force it)
2017-01-11 10:08:26	zsoc	alankila: uhhhh oh ok, so i just have an extra indexing number and just stuff it all in at once.... I mean ofc I could use JSON. Would I just use a JSON/B table in Postgres? I guess i could have it as a config option or something unrelated to the database but the lookups are related to the data.
2017-01-11 10:08:32	BeeAyeEye	RhodiumToad: i do, though i'm not entirely sure why, is it because you can pass the md5 string directly along and it'll still auth?
2017-01-11 10:08:47	xocolatl	no
2017-01-11 10:08:56	ningu	RhodiumToad: so is there a context where the scalar subselect would perform worse than the semi-join, for cases where the IN (...) has only one item?
2017-01-11 10:09:02	xocolatl	you can compute a password that gives the same hash
2017-01-11 10:09:16	alankila	zsoc: terminology. It's a json column, not a table. In any case, if you have something that the database isn't going to be great at modeling anyway, like some (key, value) kind of table, then I think json column is probably a better fit.
2017-01-11 10:09:18	ningu	by worse I mean "a lot worse" :)
2017-01-11 10:09:21	RhodiumToad	BeeAyeEye: you don't pass it directly. the 'md5' auth method is a crude challenge-response system that defends against replay attacks, but if you know the hashed pw then you can generate the right responses
2017-01-11 10:09:27	◣	dsantiago (~dsantiago@cpe-104-175-193-69.socal.res.rr.com) has quit (Quit: Computer has gone to sleep.)
2017-01-11 10:09:32	RhodiumToad	xocolatl: you don't even need to
2017-01-11 10:09:44	xocolatl	oh right, just use the given salt
2017-01-11 10:09:46	◣	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has quit (Quit: Leaving.)
2017-01-11 10:09:48	RhodiumToad	the 'md5' auth method works like this:
2017-01-11 10:09:58	BeeAyeEye	xocolatl: i would think that would take massive iterations given the complexity of the initial password
2017-01-11 10:10:04	◥	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has joined #postgresql
2017-01-11 10:10:18	BeeAyeEye	and yes i realize computers are capable of running through those calculations quickly enough
2017-01-11 10:10:24	RhodiumToad	server sends a nonce value, client sends back md5(md5(password || username) || nonce)
2017-01-11 10:10:48	RhodiumToad	so as long as the client knows md5(password || username), which is what the 'md5xxxx' string is, it can auth
2017-01-11 10:10:53	◣	filiprem1 (~filip@188.146.89.114.nat.umts.dynamic.t-mobile.pl) has quit (Ping timeout: 255 seconds)
2017-01-11 10:11:11	xocolatl	BeeAyeEye: you don't need the original password, any password that produces the same hash will work.  but as RhodiumToad is explaining, you don't even need to do that
2017-01-11 10:11:12	zsoc	alankila: I guess.. obviously I can deal with JSON just fine in node.. is this the sort of thing where I just grab that column and do the duty in my application? I'm just picturing instances of triggers/etc where I'm going to want to do this programatically at the db level. I guess pl/pgsql must be able to handle JSON lookups? heh
2017-01-11 10:11:29	◥	lluad (~lluad@204.11.227.194.static.etheric.net) has joined #postgresql
2017-01-11 10:11:34	BeeAyeEye	yeah xocolatl i see, that's extremely interesting RhodiumToad , thanks for the explanation
2017-01-11 10:11:35	alankila	is there a risk that if ou know the md5 output and the nonce value, you can reverse the md5 computation for that last part, and get back at the md5(password || username)
2017-01-11 10:11:38	◥	mizhka (~mizhka@cloud.unclebear.ru) has joined #postgresql
2017-01-11 10:11:41	ilmari	zsoc: there's a whole pile of operators and functions to deal with json/jsonb
2017-01-11 10:11:44	ilmari	??json
2017-01-11 10:11:44	pg_docbot	http://www.postgresql.org/docs/current/static/datatype-json.html :: http://www.postgresql.org/docs/current/static/functions-json.html
2017-01-11 10:11:51	RhodiumToad	also, since it's only one round of md5 with a known salt (the username), dictionary breaking is trivial
2017-01-11 10:11:54	◥	NCS_One (~NCS_One@dsl-178-106.bl26.telepac.pt) has joined #postgresql
2017-01-11 10:12:07	alankila	zsoc: I've no idea what you are talking about, unfortunately.
2017-01-11 10:12:11	RhodiumToad	alankila: no, that would be a preimage attack, which isn't feasible
2017-01-11 10:12:19	ilmari	zsoc: and with jsonb you can have indexes that help with 'contains' type queries
2017-01-11 10:12:26	BeeAyeEye	i seriously need to step my security game up
2017-01-11 10:12:31	◥	bordicon (~bordicon@50-247-102-73-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-11 10:12:50	href	OA
2017-01-11 10:13:09	RhodiumToad	alankila: you could still try and brute-force the password of course
2017-01-11 10:13:41	◥	amandacmd (~Alto@c-73-225-27-179.hsd1.wa.comcast.net) has joined #postgresql
2017-01-11 10:13:57	RhodiumToad	alankila: i.e.  for pw in big_dictionary; do compare md5(md5(pw || username) || captured_nonce) against captured_response
2017-01-11 10:14:18	alankila	RhodiumToad: hmm. Just worrying about this because md5(x) is usually outputting the state of the hash function after the binary string x has been inputed, with maybe some padding and some length description. If you know all those things, I worry that you can e.g. go from knowing output of md5(x || y) and y, back to what md5(x) would have output
2017-01-11 10:14:46	BeeAyeEye	so, another quick question since i'm new to this and have the platform, regarding replication, the documentation seems unclear, for streaming WAL replication, do i just a) create user with replication on the master, b) create replication slot on master, c) configure recovery.conf with hot_standby on and replication info (slot, user, primary, etc.) and restart postgres?
2017-01-11 10:15:17	fqtw	RhodiumToad, so why should the filters array be a GIN index?
2017-01-11 10:15:36	RhodiumToad	fqtw: because that's what you need to look up by element
2017-01-11 10:15:43	BeeAyeEye	also, a lot of documentation talks about backup primary, restore on slave, then start replication, but can the slave just catch up from point 0 (ie; like mongo replica sets) or does it HAVE to have a backup/restore done ?
2017-01-11 10:15:56	alankila	this is especially the case as md5(md5(x) || y) has the y at a boundary of a new hashing block.
2017-01-11 10:15:59	RhodiumToad	BeeAyeEye: it has to start from a base backup
2017-01-11 10:16:24	alankila	anyway, hopefully it's not a concern.
2017-01-11 10:16:26	RhodiumToad	alankila: not sure it actually does, I think the 'md5' prefix is left in but I'd have to check
2017-01-11 10:16:37	BeeAyeEye	and this is true if a slave was to die and i had to stand up a new one, same ting, backup DB and restore on slave
2017-01-11 10:17:28	RhodiumToad	BeeAyeEye: you can start from any base backup you've taken in the past as long as you (a) have all the needed WAL files from then to now and (b) are prepared to wait long enough for them to apply
2017-01-11 10:17:32	◣	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has quit (Quit: Leaving.)
2017-01-11 10:17:43	◣	negaduck (~negaduck@91.206.116.62) has quit (Quit: negaduck)
2017-01-11 10:17:54	◥	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has joined #postgresql
2017-01-11 10:18:01	BeeAyeEye	RhodiumToad: WAL files only get generated if i configure it to or are they always being written? not sure if that's something i need to turn on , on the master
2017-01-11 10:18:11	Masterphi	Does anyone know of an aggregate function that will give me what I'm missing here: http://sqlfiddle.com/#!15/52821b/3/0
2017-01-11 10:18:31	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2017-01-11 10:18:35	◣	jouir (~jouir@109.132.79.44) has quit (Quit: leaving)
2017-01-11 10:19:08	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-11 10:19:22	ningu	Masterphi: what exactly do you want?
2017-01-11 10:19:30	fqtw	RhodiumToad, I thought foreign keys in arrays don't get recognized as keys, so how can I make the array a GIN index?
2017-01-11 10:19:57	ningu	Masterphi: what is the "first" item of a type, is it the earliest?
2017-01-11 10:20:04	◣	russw (~russ@bas1-ottawa01-70-54-90-140.dsl.bell.ca) has quit (Ping timeout: 240 seconds)
2017-01-11 10:20:06	RhodiumToad	fqtw: indexes have nothing to do with FKs
2017-01-11 10:20:33	RhodiumToad	BeeAyeEye: WAL files are always generated but whether or not to archive them is up to you
2017-01-11 10:20:54	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2017-01-11 10:20:56	◣	hahuang65 (~hahuang65@12.111.82.9) has quit (Ping timeout: 258 seconds)
2017-01-11 10:21:00	RhodiumToad	BeeAyeEye: otherwise, pg recycles them as soon as it no longer needs them for crash recovery or replication to existing slaves
2017-01-11 10:21:08	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-11 10:21:18	BeeAyeEye	and since i currently have 0 slaves configured, i'm assuming they're not saved for long at all
2017-01-11 10:21:27	Masterphi	ningu: yeah
2017-01-11 10:21:30	fqtw	RhodiumToad, non primary keys are just to speed up queries?
2017-01-11 10:21:48	BeeAyeEye	luckily it's a small DB for now, so it's not a big deal, but i'm just trying to future proof as much as i can, and iw ant to write some internal documentation on how this all works for my other team members
2017-01-11 10:21:51	◣	hotpancakes (~hotpancak@2604:2000:ee17:8d00:449e:8f44:32c5:ed55) has quit (Remote host closed the connection)
2017-01-11 10:21:59	Masterphi	ningu: so, based on their timestamp, get the earliest one
2017-01-11 10:22:29	alankila	Masterphi: I know you can e.g. do array_agg(productName order by date) kind of thing but getting just the first eludes me right now
2017-01-11 10:22:47	alankila	It'd be handy if min() with order by embedded did that but it does not
2017-01-11 10:22:52	ningu	Masterphi: you want the id of the earliest one or what?
2017-01-11 10:22:55	RhodiumToad	use a lateral query
2017-01-11 10:23:18	Masterphi	ningu: name field
2017-01-11 10:23:32	Masterphi	ningu: trying not to use a subquery
2017-01-11 10:23:40	evilman_work	Masterphi: I think you can read about OVER statement.
2017-01-11 10:24:18	fqtw	RhodiumToad, should I use the intarray module? http://stackoverflow.com/questions/4058731/can-postgresql-index-array-columns#comment10357041_4059785
2017-01-11 10:24:53	RhodiumToad	fqtw: no
2017-01-11 10:25:14	RhodiumToad	fqtw: in particular, loading intarray can break the built-in array support, so avoid it
2017-01-11 10:25:22	evilman_work	Masterphi: other way is usage of subquery
2017-01-11 10:25:25	◥	gingitsune (~gingitsun@81.198.179.223) has joined #postgresql
2017-01-11 10:25:51	ningu	Masterphi: maybe something like this although it's kind of ugly:   (array_agg(i.productName ORDER BY i.date DESC))[0] AS first
2017-01-11 10:26:11	ningu	er,   (array_agg(i.productName ORDER BY i.date DESC))[0] AS first
2017-01-11 10:26:15	ningu	heh
2017-01-11 10:26:18	ningu	change [0] to [1] :)
2017-01-11 10:26:23	alankila	yeah ... make an entire array then disregard it.
2017-01-11 10:26:31	ningu	alankila: seems lousy, yes.
2017-01-11 10:26:33	alankila	I doubt Pg will figure out that this could be optimized
2017-01-11 10:26:36	ningu	but there is no first()
2017-01-11 10:26:43	RhodiumToad	use a lateral subquery!
2017-01-11 10:27:09	fqtw	thanks a lot RhodiumToad
2017-01-11 10:27:14	RhodiumToad	select * from foo, lateral (select * from bar where bar.foo_id=foo.id order by bar.timestamp limit 1) b;
2017-01-11 10:27:42	ningu	RhodiumToad: ah, yeah
2017-01-11 10:28:45	◥	cartan (~cartan@p4FEEAFAC.dip0.t-ipconnect.de) has joined #postgresql
2017-01-11 10:28:52	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2017-01-11 10:29:05	◣	TomyWork (~tomy@85.199.84.100) has quit (Ping timeout: 240 seconds)
2017-01-11 10:29:44	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-11 10:29:59	◣	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has quit (Quit: Leaving.)
2017-01-11 10:30:19	◥	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has joined #postgresql
2017-01-11 10:30:31	◣	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has quit (Client Quit)
2017-01-11 10:30:45	ningu	RhodiumToad: but the where clause in the lateral is for something joined to the main from table ... how do you do that?
2017-01-11 10:30:49	◥	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has joined #postgresql
2017-01-11 10:31:36	ningu	left join lateral, I guess
2017-01-11 10:32:45	Masterphi	ningu: yeah, I think I'll have to do a join on a subquery
2017-01-11 10:32:46	alankila	lateral joins are almost descriptions for database for how to calculate the result set rather than descriptions what the result set is
2017-01-11 10:33:08	alankila	I dislike them :)
2017-01-11 10:33:10	◥	korzybski (~danielwai@97-113-86-34.tukw.qwest.net) has joined #postgresql
2017-01-11 10:33:18	Masterphi	ningu: too bad first_value is only on the current window
2017-01-11 10:33:51	korzybski	Good morning!
2017-01-11 10:35:16	◣	wsieroci (~wsieroci@095160155072.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2017-01-11 10:35:40	alankila	does writing the keyword LATERAL pretty much force a nested loop join?
2017-01-11 10:35:53	◣	jmelesky (~jmelesky@c-67-160-173-91.hsd1.or.comcast.net) has quit (Ping timeout: 258 seconds)
2017-01-11 10:35:55	RhodiumToad	not exactly
2017-01-11 10:36:16	RhodiumToad	it depends whether the actual lateral condition can be hoisted out of the subquery or not
2017-01-11 10:36:27	alankila	right
2017-01-11 10:36:42	RhodiumToad	if there's an order by / limit, then the condition cannot be hoisted, and so it forces a nestloop join
2017-01-11 10:36:54	alankila	well, there's that at least.
2017-01-11 10:36:58	RhodiumToad	(more precisely, it forces the lateral query to be a parameterized path)
2017-01-11 10:37:08	◣	saurabhjha (~saurabhjh@182.64.163.140) has quit (Remote host closed the connection)
2017-01-11 10:37:45	RhodiumToad	pretty much all the useful cases of LATERAL are where you absolutely need a nestloop join, though
2017-01-11 10:37:54	◥	Jongee (~Jon@66.187.72.54) has joined #postgresql
2017-01-11 10:38:22	◥	saurabhjha (~saurabhjh@182.64.163.140) has joined #postgresql
2017-01-11 10:38:35	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-11 10:39:09	alankila	I've been running into some annoyance lately with UPDATE FROM type statements where the query I write inside FROM happens to not find a single row. E.g. I have an unnormalized database where I have an order with rows, and I keep a total of the value of the order in the order table
2017-01-11 10:39:32	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2017-01-11 10:39:49	alankila	I ran into the annoying situation where there are no rows in the order left, which of course means that sum() can't be calculated and in fact because there are no rows, a join fails.
2017-01-11 10:40:20	alankila	which means that if user creates an order with some rows, then deletes them all, I'm left with UPDATE statement trying to update the total but because the subquery comes up empty I get no results and the order is not appropriately updated to have 0 total value
2017-01-11 10:40:26	RhodiumToad	that's solvable with an extra self-join
2017-01-11 10:40:49	alankila	do tell
2017-01-11 10:40:51	RhodiumToad	update foo f1 set ... from foo f2 left join (stuff) where f1.id=f2.id;
2017-01-11 10:41:08	◥	dermiste (~dermiste@brouwer.kilob.yt) has joined #postgresql
2017-01-11 10:41:11	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-11 10:41:37	◣	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has quit (Quit: Leaving.)
2017-01-11 10:41:38	alankila	err, but the stuff also needs join conditions like left join (stuff) s on s.id = f1.id right?
2017-01-11 10:41:38	◥	wsieroci (~wsieroci@095160155072.dynamic-ww-12.vectranet.pl) has joined #postgresql
2017-01-11 10:41:44	RhodiumToad	yes
2017-01-11 10:41:54	◥	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has joined #postgresql
2017-01-11 10:42:22	◣	ningu (~unamuno@96-90-204-139-static.hfc.comcastbusiness.net) has quit (Ping timeout: 255 seconds)
2017-01-11 10:42:49	◥	Neo-- (~neo@BSN-142-62-172.dynamic.siol.net) has joined #postgresql
2017-01-11 10:43:08	alankila	okay. I think I get it
2017-01-11 10:43:10	alankila	thanks a lot
2017-01-11 10:44:03	alankila	the final irritation is dealing with the NULL but that's just a coalesce so it's not too bad in truth
2017-01-11 10:44:45	alankila	I was confused with the LEFT JOIN for a part until I realized that this is in fact the same as LEFT OUTER JOIN
2017-01-11 10:44:58	◣	killdeerthundero (~killdeert@kol-kvintus.cust.fsknet.dk) has quit (Read error: Connection reset by peer)
2017-01-11 10:45:32	◣	dermiste (~dermiste@brouwer.kilob.yt) has quit (Ping timeout: 240 seconds)
2017-01-11 10:45:34	◣	dobber (~dobber@95.111.70.117) has quit (Ping timeout: 240 seconds)
2017-01-11 10:45:43	alankila	apparently in Pg the OUTER keyword can just be dropped. I'm used to dealing with database where LEFT JOIN is just an inner join, in fact it didn't seem to do anything
2017-01-11 10:46:32	RhodiumToad	uh, OUTER is a noise word in the spec
2017-01-11 10:46:46	RhodiumToad	there is no database in existence in which LEFT JOIN is an inner join
2017-01-11 10:46:54	alankila	Agree, but I learnt my SQL with DB2 where it has to be used iirc.
2017-01-11 10:47:10	alankila	or at least I've methodically always used the OUTER keyword
2017-01-11 10:47:45	alankila	perhaps it's my mistake. It seemed, based on reading their manuals, that you get INNER join if you don't explicitly specify OUTER.
2017-01-11 10:48:13	alankila	I'll be happy to drop that though if it works. I'll try that tomorrow.
2017-01-11 10:48:45	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2017-01-11 10:49:40	alankila	hmm nah I think even in DB2 the keyword is optional
2017-01-11 10:50:10	RhodiumToad	it's the presence of LEFT, RIGHT or FULL that marks it as an outer join
2017-01-11 10:50:31	◥	chillywilly (~danielb@neptune.chaillet.net) has joined #postgresql
2017-01-11 10:50:43	Snow-Man	don't forget (+)
2017-01-11 10:50:45	Snow-Man	I mean, come on
2017-01-11 10:50:52	◥	the_rat_ (~the_rat@2a02:8109:8380:3e8c:f8db:4962:6abe:ba9d) has joined #postgresql
2017-01-11 10:50:56	▷	Snow-Man hides
2017-01-11 10:51:15	◣	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has quit (Quit: Leaving.)
2017-01-11 10:51:17	zsoc	soooo... obj::json->'key' returns the whole field... is there to get just the value? heh
2017-01-11 10:51:30	◥	filiprem (~filip@188.146.89.114.nat.umts.dynamic.t-mobile.pl) has joined #postgresql
2017-01-11 10:51:35	◥	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has joined #postgresql
2017-01-11 10:51:35	alankila	yeah it would make sense that any of those three keywords would imply an outer join but I do think I did read somewhere that the join is an INNER join if it isn't explicitly an OUTER join. Which does sound stupid.
2017-01-11 10:51:45	RhodiumToad	zsoc: what do you mean by "whole field"?
2017-01-11 10:51:45	zsoc	neeeeeeever mind, that does get just the value, i'm blind
2017-01-11 10:51:49	⚡	robink_ is now known as robink
2017-01-11 10:51:50	alankila	zsoc: ->> maybe
2017-01-11 10:51:54	alankila	oh
2017-01-11 10:51:55	◥	chris__ (~chris@75-145-29-133-Washington.hfc.comcastbusiness.net) has joined #postgresql
2017-01-11 10:51:59	RhodiumToad	zsoc: perhaps you wanted ->>  which returns text rather than json
2017-01-11 10:52:05	Snow-Man	alankila: left join and right join aren't the same...  you can't just get rid of them and do 'outer join' …
2017-01-11 10:52:13	◣	rhonabwy (~rhonabwy@95.157.58.47.dynamic.cablesurf.de) has quit (Read error: Connection reset by peer)
2017-01-11 10:52:31	alankila	Snow-Man: I didn't talk about that
2017-01-11 10:52:40	zsoc	i was confused about how my data would be formatted. I guess it shouldn't be an array of objects
2017-01-11 10:52:42	Snow-Man	oh, I misread
2017-01-11 10:52:43	chris__	Is it safe to upgrade libpq on a database server that you are not upgrading postgres on? I need postgresql-dev but it has a dep on libpq-dev, and libpq-dev has a dep on upgrading libpq
2017-01-11 10:53:07	◥	russw (~russ@bas1-ottawa01-70-54-90-140.dsl.bell.ca) has joined #postgresql
2017-01-11 10:53:23	alankila	Snow-Man: I meant that LEFT JOIN is same as LEFT OUTER JOIN, and that RIGHT JOIN is same as RIGHT OUTER JOIN. I've always used the OUTER keyword on belief that it's necessary.
2017-01-11 10:53:24	Snow-Man	chris__: well, generally speaking, yes, but best practice is to not do development on a production server …
2017-01-11 10:53:31	◥	rhonabwy (~rhonabwy@95.157.58.47) has joined #postgresql
2017-01-11 10:53:38	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 255 seconds)
2017-01-11 10:54:14	chris__	Snow-Man: I fully agree, but its some python crap that I need to setup for monitoring pgbouncer/postgres to report to newrelic. python needs postgresql-dev for psycopg2
2017-01-11 10:54:24	zsoc	yep, json as a flat object with defined fields.. it's just ->> , fantastic ty
2017-01-11 10:55:31	◣	the_rat_ (~the_rat@2a02:8109:8380:3e8c:f8db:4962:6abe:ba9d) has quit (Ping timeout: 240 seconds)
2017-01-11 10:55:32	◣	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has quit (Client Quit)
2017-01-11 10:55:43	◥	jer_ (~jer@136.62.70.210) has joined #postgresql
2017-01-11 10:55:55	◥	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has joined #postgresql
2017-01-11 10:56:31	Snow-Man	chris__: I dunno what you're doing, but psycopg2 doesn't require postgresql-dev on my systems...
2017-01-11 10:57:49	Snow-Man	unless you're building it, in which case, see above..
2017-01-11 10:58:05	◣	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has quit (Remote host closed the connection)
2017-01-11 10:58:35	◣	rhonabwy (~rhonabwy@95.157.58.47) has quit (Quit: Leaving)
2017-01-11 10:58:49	Snow-Man	chris__: but, yea, the long-and-short of it is that you should be 'ok' upgrading libpq.  If you really care, you can use the per-version repos that will give you the per-version libpq.
2017-01-11 10:58:56	◥	rhonabwy (~rhonabwy@95.157.58.47.dynamic.cablesurf.de) has joined #postgresql
2017-01-11 10:59:17	chris__	Snow-Man: Im not building it at all, I despise python with a passion. I just want to install it https://github.com/MeetMe/newrelic-plugin-agent to report details to newrelic. I will see if maybe I can get it to build somewhere else and then bring it over?
2017-01-11 10:59:25	evilman_work	Masterphi: is your request still actual? this is my solution - http://sqlfiddle.com/#!15/52821b/14
2017-01-11 10:59:26	◣	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has quit (Client Quit)
2017-01-11 10:59:44	Masterphi	evilman_work: any solution is welcome :)
2017-01-11 10:59:50	◥	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has joined #postgresql
2017-01-11 11:00:28	Snow-Man	chris__: What distro are you on?
2017-01-11 11:00:39	◥	bencc1 (~Ofir@5.29.226.133) has joined #postgresql
2017-01-11 11:00:51	chris__	Snow-Man: Debian 7
2017-01-11 11:01:05	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:f475:5e:511f:8f1c) has joined #postgresql
2017-01-11 11:01:15	◣	hotpancakes (~hotpancak@2604:2000:14c5:4058:f475:5e:511f:8f1c) has quit (Remote host closed the connection)
2017-01-11 11:01:22	◥	hotpancakes (~hotpancak@2604:2000:14c5:4058:f475:5e:511f:8f1c) has joined #postgresql
2017-01-11 11:02:16	RhodiumToad	evilman_work: that's much slower than the lateral approach if there are many items per type and you don't need the count
2017-01-11 11:02:30	Snow-Man	chris__: Why not just install python-psycopg2 or python3-psycopg2 then..?
2017-01-11 11:03:17	chris__	Snow-Man: I can give that a try. I was just following their directions and it errored out installing the deps with pip saying it needed postgresql-dev-x.y
2017-01-11 11:03:27	Snow-Man	uuggghhh...
2017-01-11 11:03:38	◥	hongkongphooey (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has joined #postgresql
2017-01-11 11:04:01	Snow-Man	chris__: well, for my 2c, I strongly advocate *against* ever using pip on a modern OS that has its own packaging system.
2017-01-11 11:04:08	Masterphi	evilman_work: You could have just used first_value instead of rank. This is a valid solution for the example, but won't work on my actual problem, I needed an aggregate function (that works with GROUP BY). array_aggr is the closest hack I could get so far
2017-01-11 11:04:13	◣	bencc (~Ofir@5.29.226.133) has quit (Ping timeout: 256 seconds)
2017-01-11 11:04:22	Masterphi	evilman_work: thanks for the effort! :)
2017-01-11 11:04:48	◥	dwsr (uid185230@gateway/web/irccloud.com/x-xhlvqjototwxbqdz) has joined #postgresql
2017-01-11 11:04:56	RhodiumToad	Masterphi: have you tried the lateral approach?
2017-01-11 11:05:20	Masterphi	RhodiumToad: My db doesn't support lateral yet
2017-01-11 11:05:28	Masterphi	='/
2017-01-11 11:05:30	◥	faw (~faw@38.102.153.98) has joined #postgresql
2017-01-11 11:05:30	◣	faw (~faw@38.102.153.98) has quit (Changing host)
2017-01-11 11:05:30	◥	faw (~faw@unaffiliated/faw) has joined #postgresql
2017-01-11 11:05:30	◥	raynold (uid201163@gateway/web/irccloud.com/x-qqjizzbotxnwpqvu) has joined #postgresql
2017-01-11 11:05:57	▷	Masterphi goes to the corner and cries a little bit
2017-01-11 11:06:01	◣	akretschmer (~akretschm@p4FCCB631.dip0.t-ipconnect.de) has quit (Quit: Lost terminal)
2017-01-11 11:06:02	Scient	so you cant do a pg dump with the parallel option (jobs) on a replication slave, even if you stop replication?
2017-01-11 11:06:20	chris__	Snow-Man: I strongly advocate against anything that ends in .py all together on a modern OS :P. Couldn't agree more with your points youve made
2017-01-11 11:06:20	◣	Nas (~nas@koffice.avito.ru) has quit (Remote host closed the connection)
2017-01-11 11:06:42	Masterphi	Scient: the data set is so massive that only Redshift was able to run it so far
2017-01-11 11:06:50	◣	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has quit (Quit: Leaving.)
2017-01-11 11:07:09	◥	Debnet`Work (~Marc@20.86.2.93.rev.sfr.net) has joined #postgresql
2017-01-11 11:07:15	◥	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has joined #postgresql
2017-01-11 11:07:18	Scient	oh no i was actually asking a question from the channel lol
2017-01-11 11:07:32	Berge	Masterphi: I'm curious, how big is that data set?
2017-01-11 11:07:54	Masterphi	Berge: about 1TB
2017-01-11 11:07:56	Snow-Man	Masterphi: that seems … unlikely
2017-01-11 11:07:58	Snow-Man	hahaha
2017-01-11 11:07:59	◥	connor_ (~textual@dhcp-128-189-231-94.ubcsecure.wireless.ubc.ca) has joined #postgresql
2017-01-11 11:08:07	◣	azlev (~ze@186.202.104.171) has quit (Ping timeout: 245 seconds)
2017-01-11 11:08:12	Snow-Man	1TB isn't *that* big. :)
2017-01-11 11:08:12	◥	Debnet`Laptop (~Marc@smtp2.sa-cim.fr) has joined #postgresql
2017-01-11 11:08:13	RhodiumToad	Scient: did you try? what happened?
2017-01-11 11:08:18	Masterphi	Snow-Man: eventually we will downsample the data
2017-01-11 11:08:22	Snow-Man	I don't think it'll be able to create a snapshot
2017-01-11 11:08:30	chris__	Snow-Man: Looks like just installing psycopg2 from apt did the trick without any deps. Thanks for the help!!
2017-01-11 11:08:31	Snow-Man	wrt pg_dump on replicas in parallel mode
2017-01-11 11:08:33	hongkongphooey	hi i forgot to insert a row near the beginning of my table, how do i insert after id 4 for example and then change all ids after it so they aren't out of order? i cant find info on this onlione
2017-01-11 11:08:36	Snow-Man	chris__: np.
2017-01-11 11:08:40	◥	SteffanW (~steffanw@ip4da40774.direct-adsl.nl) has joined #postgresql
2017-01-11 11:08:42	Berge	Masterphi: Ok, so big but not huge.
2017-01-11 11:08:58	Berge	1TB isn't too bad for a powerful server.
2017-01-11 11:09:01	Masterphi	Berge: yeah, we need sub-second queries
2017-01-11 11:09:17	Snow-Man	Masterphi: Apparently what you need is lateral. :)
2017-01-11 11:09:18	◥	azlev (~ze@186.202.104.171) has joined #postgresql
2017-01-11 11:09:25	Berge	Masterphi: For which sort of queries?
2017-01-11 11:09:32	◥	dermiste (~dermiste@brouwer.kilob.yt) has joined #postgresql
2017-01-11 11:10:04	janos_	hongkongphooey, just an int? update everything to be value+1 that's larger than or equal to what you want to inject
2017-01-11 11:10:17	◣	Debnet (~Marc@smtp2.sa-cim.fr) has quit (Ping timeout: 255 seconds)
2017-01-11 11:10:18	janos_	then inject the id you want
2017-01-11 11:10:36	Masterphi	Berge: it's a fleet tracking software, runs about ~50 different reports on the events coming in from vehicles
2017-01-11 11:10:47	tjr9898	@RhodiumToad regarding the multiple job pg_dump on a hot standby slave
2017-01-11 11:10:52	◣	wsieroci (~wsieroci@095160155072.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2017-01-11 11:11:08	tjr9898	We are getting the error cannot assign TransactionIds during recovery
2017-01-11 11:11:13	Masterphi	Snow-Man: lateral *could* help on this case, but not on others
2017-01-11 11:11:20	RhodiumToad	Snow-Man: ah, exporting a snapshot tries to allocate an xid
2017-01-11 11:11:37	◣	totus (~totus@2605:6000:66c0:8800:fc6d:3575:c3b0:9884) has quit (Ping timeout: 255 seconds)
2017-01-11 11:11:40	◣	Debnet`Work (~Marc@20.86.2.93.rev.sfr.net) has quit (Ping timeout: 240 seconds)
2017-01-11 11:11:40	◣	russw (~russ@bas1-ottawa01-70-54-90-140.dsl.bell.ca) has quit (Ping timeout: 240 seconds)
2017-01-11 11:13:01	RhodiumToad	tjr9898: yup. the snapshot export code seems to rely on allocating an xid, so you can't do it on a slave
2017-01-11 11:13:06	◥	brentd (~brentd@62.145.29.194) has joined #postgresql
2017-01-11 11:13:21	◣	vovka (~vovka@46.72.33.152) has quit (Remote host closed the connection)
2017-01-11 11:13:36	Snow-Man	tjr9898: You might want to consider a parallel file-based backup solution, which would also allow you to restore much more quickly than a pg_dump, if you're doing this for backups.
2017-01-11 11:13:45	◥	Lordz (~Adium@186.215.116.176) has joined #postgresql
2017-01-11 11:14:07	tjr9898	yeah for our cold, off-site recovery
2017-01-11 11:14:18	hongkongphooey	janos_: is there a way to do that all at once?
2017-01-11 11:14:21	tjr9898	mostly for forensics or user-based diasters
2017-01-11 11:14:49	hongkongphooey	janos_: (increment each id greater than where i inserted the new row)
2017-01-11 11:15:06	tjr9898	I was thinking barman with stream replication because we're on 9.4 currently.  @RhodiumToad @Snow-Man
2017-01-11 11:15:15	◥	wsieroci_ (~wsieroci@095160155072.dynamic-ww-12.vectranet.pl) has joined #postgresql
2017-01-11 11:15:22	Snow-Man	tjr9898: Last I checked, barman was still single-process.
2017-01-11 11:15:46	tjr9898	what would be a better option? @Snow-Man
2017-01-11 11:16:04	Snow-Man	tjr9898: well, I'm not exactly unbiased, but pgBackrest is my recommendation.
2017-01-11 11:16:30	◣	banditron (~banditron@kohana/developer/banditron) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-11 11:16:46	linuxhiker	tjr9898: I concur with Snow-Man and I am not biased
2017-01-11 11:16:56	janos_	hongkongphooey, sure - (if i'm getting your requirements right). update foo set bar = bar + 1 where bar >= baz;
2017-01-11 11:16:58	◥	tourdownunder (~tourdownu@203.214.35.209) has joined #postgresql
2017-01-11 11:17:08	Snow-Man	linuxhiker: Did you see that it grew a C library. :D
2017-01-11 11:18:01	janos_	if you're using a sequence you might need to reset where it starts to the new max
2017-01-11 11:18:33	janos_	but if you're using a sequence, i'd argue that trying to use that as an order or go gapless is a mistake
2017-01-11 11:19:12	◣	mizhka (~mizhka@cloud.unclebear.ru) has left #postgresql
2017-01-11 11:19:14	hongkongphooey	janos_: its a primary key so i get  Key (id)=(1) already exists.
2017-01-11 11:19:43	janos_	if you're inserting before updating i'd expect that. are you?
2017-01-11 11:20:17	janos_	good old primary kevil
2017-01-11 11:20:22	hongkongphooey	no
2017-01-11 11:20:23	janos_	sometimes hard to avoid
2017-01-11 11:20:37	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-11 11:20:42	janos_	hrmm
2017-01-11 11:20:44	⚡	xemdetia_ is now known as xemdetia
2017-01-11 11:20:46	hongkongphooey	1 tries to update to 2 but 2 already exists
2017-01-11 11:21:00	janos_	ah right
2017-01-11 11:21:10	◥	kacey (~kacey@c-71-231-207-48.hsd1.wa.comcast.net) has joined #postgresql
2017-01-11 11:21:16	RhodiumToad	you either need to drop the constraint, make it deferrable, use two updates, or use alter table instead of update
2017-01-11 11:21:17	janos_	this is in one transaction?
2017-01-11 11:21:18	hongkongphooey	it would have to do it backwards starting at the highest id and adding 1
2017-01-11 11:21:33	janos_	listen to RhodiumToad
2017-01-11 11:21:36	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2017-01-11 11:21:48	RhodiumToad	alter table foo alter column bar type integer using case when bar > 10 then bar+1 else bar end;
2017-01-11 11:22:37	◣	bocaneri (~bocaneri@about/linux/staff/sauvin) has quit (Read error: Connection reset by peer)
2017-01-11 11:23:13	hongkongphooey	RhodiumToad: okay ill try this
2017-01-11 11:23:24	◥	doev (~doev@p4FE1239C.dip0.t-ipconnect.de) has joined #postgresql
2017-01-11 11:24:36	◣	doev (~doev@p4FE1239C.dip0.t-ipconnect.de) has quit (Read error: Connection reset by peer)
2017-01-11 11:24:45	◥	doev (~doev@p4FE1239C.dip0.t-ipconnect.de) has joined #postgresql
2017-01-11 11:25:00	◣	tourdownunder (~tourdownu@203.214.35.209) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-11 11:25:05	evilman_work	Masterphi: http://sqlfiddle.com/#!15/52821b/16
2017-01-11 11:25:16	whartung	should I not run vacuum on a live db? or will that work ok? for a large table?
2017-01-11 11:26:58	◣	saurabhjha (~saurabhjh@182.64.163.140) has quit (Remote host closed the connection)
2017-01-11 11:27:13	◥	saurabhjha (~saurabhjh@182.64.163.140) has joined #postgresql
2017-01-11 11:29:10	◣	xemdetia (xemdetia@nat/ibm/x-ozhilcvdcywmtrol) has quit (Remote host closed the connection)
2017-01-11 11:29:39	◥	xemdetia (xemdetia@nat/ibm/x-fanbesxpgwudwgzc) has joined #postgresql
2017-01-11 11:29:47	hongkongphooey	RhodiumToad: that worked perfectly, except the table is still out of order ex: 1,2,6,3,4,5 ... does that matter?
2017-01-11 11:30:27	◣	doev (~doev@p4FE1239C.dip0.t-ipconnect.de) has quit (Quit: Ex-Chat)
2017-01-11 11:31:05	janos_	that's what ORDER BY is for
2017-01-11 11:31:28	◥	banditron (~banditron@kohana/developer/banditron) has joined #postgresql
2017-01-11 11:31:39	janos_	don't expect a stable inherent table order
2017-01-11 11:32:18	hongkongphooey	janos_: right, okay just looks ugly, thanks al ot
2017-01-11 11:32:30	lluad	whartung: Vacuum is fine, though often unneccesary (as autovacuum will run it in the background). "Vacuum full" isn't something to run on a production DB without planning - it'll lock the table as it runs.
2017-01-11 11:33:23	evilman_work	Masterphi: on large dataset the array aggregation requires memory, so my last attempt with join of two subqueries should win with speed and memory requirements.
2017-01-11 11:33:24	◣	SteeleNivenson (~SteeleNiv@2601:646:4201:be30:c81b:7f41:495d:d870) has quit (Quit: This computer has gone to sleep)
2017-01-11 11:33:41	whartung	does vacuum full work in place? i.e. if I have a 100GB table with 30GB of deleted space, and I have 20GB free on disk, will Vacuum Full work?
2017-01-11 11:33:50	MatheusOl	whartung: no
2017-01-11 11:33:59	whartung	or do I need 70GB of free space for the new table
2017-01-11 11:34:06	MatheusOl	whartung: it used to, but on recent versions it create a copy of the relations
2017-01-11 11:34:22	whartung	ok
2017-01-11 11:34:24	MatheusOl	whartung: You need about 70GB of free space
2017-01-11 11:34:28	whartung	great ty
2017-01-11 11:34:35	MatheusOl	(unless you are using an ancient version, pre-9.0, IIRC)
2017-01-11 11:34:38	threshar	MatheusOl: I’m pretty sure it always needed 2x the space
2017-01-11 11:34:39	whartung	yea, no
2017-01-11 11:34:47	◣	chris__ (~chris@75-145-29-133-Washington.hfc.comcastbusiness.net) has quit (Quit: leaving)
2017-01-11 11:34:53	threshar	and also, vacuum full on a 100G table is going to be awful
2017-01-11 11:35:03	lluad	There are other options that do the same sort of thing as vacuum full, but don't need that extra space. They
2017-01-11 11:35:10	threshar	you may want to consider a dump & reload (or a select into and rename)
2017-01-11 11:35:13	lluad	re never great, but if you're stuck and you need them, they exist.
2017-01-11 11:35:18	whartung	Oh, that's ok threshar -- this table is 1.4 TB :)
2017-01-11 11:35:20	johto	no, pre-9.0 VACUUM FULL was really in place
2017-01-11 11:35:26	johto	still sucked though
2017-01-11 11:35:27	lluad	I usually resort to a dump+reload in that situation.
2017-01-11 11:35:44	whartung	yea, we're debating doing the table copy
2017-01-11 11:35:47	◥	matkor (~matkor@apn-31-1-188-28.dynamic.gprs.plus.pl) has joined #postgresql
2017-01-11 11:35:47	threshar	huh. how about that. I’ve never had much luck with vacuum full on anything non trivially sized
2017-01-11 11:36:02	johto	it locked everything and sucked. it just didn't write a new copy
2017-01-11 11:36:03	whartung	just would think a vacuum would be faster, since it's at a page level, rather than a row level
2017-01-11 11:36:14	lluad	I have, both with the old version (slow, but worked, eventually) and the new (basically make a new table and rename things) approach.
2017-01-11 11:36:46	whartung	I would think a vacuum full would be a copy of the active pages, and then rebuilding all th indexes
2017-01-11 11:36:49	threshar	the next question being, you sure you need a vacuum full or equivalent?
2017-01-11 11:37:16	whartung	we're runing out of disk space, we have a very large table with 3 years of data, and we're going to delete 2 years of if.
2017-01-11 11:37:43	zsoc	Is it ridiculous to keep my json k:v pair in 1 row in an info field and just retrieve the whole row and data::json->>'key' ? It's small data.. a few hundred pairs.
2017-01-11 11:38:18	MatheusOl	threshar: it needs up to twice the space, can be less if the bloat is big
2017-01-11 11:38:27	alankila	zsoc: I think keeping it in a single key-value pair per row kind of fights against the idea of json.
2017-01-11 11:38:53	whartung	because to create a new table, or reload means we have to be cleaning up all the relations and constraints
2017-01-11 11:38:59	whartung	if it's dramatically faster, then it's worht it
2017-01-11 11:39:02	alankila	you'd probably want key and value as separate columns over storing { key: value } in json
2017-01-11 11:39:14	MatheusOl	threshar: Ah, plus WAL
2017-01-11 11:39:23	◣	Slashman (~Slash@cosium-152-18.fib.nerim.net) has quit (Quit: Leaving)
2017-01-11 11:39:46	zsoc	alright... so i insert one row per field... and then i SELECT info ->> 'key' ?
2017-01-11 11:42:06	zsoc	and to insert the entire object... I can't really? I have to INSERT INTO table (info) VALUES ( '{"key":"value"} ), ( '{"foo": "bar"}), .... etc? So I can't just paste the object into a query?
2017-01-11 11:42:20	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2017-01-11 11:43:43	◣	fguillot (~fguillot@108.163.152.8) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-11 11:43:45	alankila	zsoc: you misunderstood. The entire object can be stored inside one JSON field. It is probably the preferable solution when you have no other schema for the data, but I do advice against using json columns without a good reason
2017-01-11 11:43:56	zsoc	oic
2017-01-11 11:44:21	alankila	json data without known keys is pretty much totally opaque as far as database is concerned, so it's hardly a great fit. It just beats doing stuff like varchar key and varchar column fields
2017-01-11 11:44:49	zsoc	So then maybe I should go back to (id, key, value) with primary key being (id, key)
2017-01-11 11:45:14	alankila	zsoc: why? this is against telling database about the data you're modeling. It's kind of antipattern.
2017-01-11 11:45:34	◣	acetakwas (~acetakwas@154.65.5.250) has quit (Ping timeout: 240 seconds)
2017-01-11 11:45:35	alankila	it's called One True Lookup Table in general, and making one is generally mistake.
2017-01-11 11:45:37	◣	lucian (~lucian@194.74.244.130) has quit (Ping timeout: 245 seconds)
2017-01-11 11:45:38	whartung	so what would folks consider the best practice for reducing a large table, in terms of safest then performant.
2017-01-11 11:46:13	zsoc	Ok.. so if not using a json seems wrong, and using the json i have, which is pairs contained in a single object/field... also seems wrong... is my data wrong? Lol
2017-01-11 11:46:13	◣	connor_ (~textual@dhcp-128-189-231-94.ubcsecure.wireless.ubc.ca) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-11 11:46:33	Snow-Man	whartung: You mean when you have enough space to create a copy of the table..  or when you don't?
2017-01-11 11:46:43	Snow-Man	If you can create a copy then things get a lot easier
2017-01-11 11:46:58	Snow-Man	If you can't, then it's... difficult
2017-01-11 11:47:10	whartung	we'll have enough space, we're going to migrate the data t a larger device
2017-01-11 11:47:21	Snow-Man	It's worse if what you really have is a big toast table, heh.
2017-01-11 11:47:28	◥	Nas (~nas@broadband-95-84-158-145.moscow.rt.ru) has joined #postgresql
2017-01-11 11:47:33	alankila	zsoc: no, but usually you want some kind of sense to guide you. E.g. if you never need postgresql to understand any of the data you store in a json field, then you might use json field. You aren't losing anything by using it.'
2017-01-11 11:47:47	whartung	well, the bulk of this data is TEXT data, so /wave, that would be us
2017-01-11 11:47:56	Snow-Man	whartung: oh, then you can just create an audit table, use triggers to populate it, create a snapshot of the table, and then when you're ready just replay your audit log onto the snapshot and rename it into place.
2017-01-11 11:48:19	alankila	but as soon as you want pg to understand even a single value in your json, then it quite rapidly becomes a chore to deal with data in json. You want to start promoting the values away from those opaque json fields
2017-01-11 11:48:22	Snow-Man	whartung: basically zero downtime, removes essentially all bloat from the table and indexes and only a very short period of time with a heavy lock
2017-01-11 11:48:35	◣	ramfjord (~tramfjord@c-67-169-47-49.hsd1.ca.comcast.net) has quit (Ping timeout: 240 seconds)
2017-01-11 11:48:59	alankila	I'm using json myself explicitly in case where postgresql never needs to execute a single query involving anything within the json. It's all opaque data that doesn't concern the functioning of the system.
2017-01-11 11:49:02	whartung	how do you migrate all of the constraints from the other tables?
2017-01-11 11:49:28	Snow-Man	Ah, that adds complications, unfortunately.
2017-01-11 11:49:35	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2017-01-11 11:49:45	Snow-Man	Depends on how big they are and in which direction
2017-01-11 11:50:04	◥	hyperboreean (~none@ec2-54-198-165-173.compute-1.amazonaws.com) has joined #postgresql
2017-01-11 11:50:42	◣	hyperboreean (~none@ec2-54-198-165-173.compute-1.amazonaws.com) has quit (Client Quit)
2017-01-11 11:50:46	◣	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has quit (Read error: error:1408F119:SSL routines:SSL3_GET_RECORD:decryption failed or bad record mac)
2017-01-11 11:51:00	Snow-Man	whartung: oh, uh, the bulk of the data is in text fields >2K in size...?
2017-01-11 11:51:09	evilman_work	Masterphi: anyway better way is try to use all these queries under 'explain analyze' and select the best :)
2017-01-11 11:51:11	◥	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-11 11:51:40	◣	Nas (~nas@broadband-95-84-158-145.moscow.rt.ru) has quit (Ping timeout: 255 seconds)
2017-01-11 11:51:52	whartung	yes Snow-Man
2017-01-11 11:51:57	Snow-Man	whartung: ugh.
2017-01-11 11:52:06	whartung	why is that ap roblem?
2017-01-11 11:52:24	Snow-Man	well, it's not a problem for the approach I was just describing, or at least, not any bigger of a problem
2017-01-11 11:52:36	Snow-Man	if you were trying to do an in-place reduction, then it sucks more
2017-01-11 11:52:44	zsoc	alankila: I foresee wanting pg to deal with this data in the future. The advantage of using a OTLT is here is that the pk is can be referenced (and restricted again) by one table, while having a unique pairing with a value field which is a meaningful piece of data for a third table.
2017-01-11 11:52:46	Snow-Man	which is what I was looking at doing with the buildfarm database actually
2017-01-11 11:52:47	◣	SteffanW (~steffanw@ip4da40774.direct-adsl.nl) has quit (Read error: Connection reset by peer)
2017-01-11 11:52:52	alankila	For instance, I've got a situation where I'm given data about customer's products. It's got a lot of stuff, it's an evolving schema. I think every product definition is like 10 kB when expressed as JSON. I definitely don't really want to model anything about that in the integration platform. But every system that wants data from integration platform parses that JSON and looks up data it needs to
2017-01-11 11:52:57	◥	m451 (~m451@pD9FA4036.dip0.t-ipconnect.de) has joined #postgresql
2017-01-11 11:52:58	alankila	understand from that and stores it in a proper table
2017-01-11 11:53:00	◣	Lordz (~Adium@186.215.116.176) has quit (Read error: Connection reset by peer)
2017-01-11 11:53:10	◥	Lordz (~Adium@186.215.116.176) has joined #postgresql
2017-01-11 11:53:21	◣	palerider (~mjm@47.185.244.157) has quit (Quit: Leaving.)
2017-01-11 11:53:24	alankila	from point of view of the integration platform, all customer data is just some opaque key-value crap where value may even be arrays, but all systems interested in the data don't use JSON at all, that would be suicide
2017-01-11 11:53:34	◣	InfoTest (~Thunderbi@tgn.149.24.147.dts.mg) has quit (Quit: InfoTest)
2017-01-11 11:53:41	whartung	I mean, a lot of this stems from the fact that we updated a large chunk of this table by setting the TEXT value to empty (actually we set it to "<PURGED>". Then auto vacuum ran, but still, on the whole, DB space was being consumed, even those this table is the VAST majority of our data space, so I would have hoped that doing the large update, followed by the auto vacuum would have stemmed the over DB growth.
2017-01-11 11:53:51	zsoc	yeah i understand what you are saying, from an implementation aspect.. how is it used
2017-01-11 11:53:55	◣	pjy (~pjy@pool-96-241-86-199.washdc.fios.verizon.net) has quit (Ping timeout: 255 seconds)
2017-01-11 11:54:09	whartung	it may or may not, but claerly in our case, it's not stemming it enough. I had thought it would have let us buy more time
2017-01-11 11:54:10	◣	uncleyear (~ian@unaffiliated/uncleyear) has quit (Disconnected by services)
2017-01-11 11:54:18	◥	uncleyea1 (~ian@pppoe.178-66-29-237.dynamic.avangarddsl.ru) has joined #postgresql
2017-01-11 11:54:22	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 255 seconds)
2017-01-11 11:54:30	Snow-Man	whartung: Hrmmm, PG should re-use the existing space in the table(s)
2017-01-11 11:54:31	zsoc	well here it's used in pg, unless i'm selecting it from my application to find the value pair heh.. which i don't think i want to be doing.. this will probably happen in a trigger on insert/update
2017-01-11 11:54:41	Snow-Man	whartung: pg_freespacemap is very handy for looking at this
2017-01-11 11:54:54	alankila	zsoc: yes. Use database in ways that are convenient. In general you use JSON when you don't care about the data a whole lot in the level you're working with. Don't use JSON if you actually write thing like ->> queries.
2017-01-11 11:55:11	◣	wsieroci_ (~wsieroci@095160155072.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2017-01-11 11:55:15	zsoc	fair enough
2017-01-11 11:55:29	alankila	at least, that's how I guess it should go. I suppose there are exceptions, but needing ->> queries is an indication that you actually care about the contents of the data at that level
2017-01-11 11:55:33	◣	banditron (~banditron@kohana/developer/banditron) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-11 11:56:09	◥	Debnet`Work (~Marc@20.86.2.93.rev.sfr.net) has joined #postgresql
2017-01-11 11:56:35	whartung	is that a utility, and add on, or what Snow-Man ?
2017-01-11 11:56:36	◣	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has quit (Read error: Connection reset by peer)
2017-01-11 11:56:36	lluad	Yeah. Using json(b) as a mostly opaque blob for the app, but using ->> in things like reporting and admin tools and ad-hoc work seems to be the sweet spot for me.
2017-01-11 11:56:37	◥	dobber (~dobber@95.111.70.117) has joined #postgresql
2017-01-11 11:57:12	Snow-Man	whartung: it's an extension
2017-01-11 11:57:30	◥	Insanity_ (uid179350@gateway/web/irccloud.com/x-qensxwsrwesutqig) has joined #postgresql
2017-01-11 11:57:35	zsoc	So back to (id, key, value) with pk (id, key)... This would allow me to use 'key' as a foreign field restriction on TableFoos.. but since 'value' will not be unique, I can NOT then use 'value' as a foreign field restriction on TableBars, correct?
2017-01-11 11:57:45	◥	svm_invictvs (~patrick@unaffiliated/svminvictvs/x-938456) has joined #postgresql
2017-01-11 11:58:09	◥	Debnet (~Marc@smtp2.sa-cim.fr) has joined #postgresql
2017-01-11 11:58:35	zsoc	and while 'value' itself is not unique, (key, value) WOULD be unique.. but I don't know how to use that to my advantage
2017-01-11 11:58:37	alankila	zsoc: the whole idea of the (id, key) primary key is that it allows you to model a hashmap. The key is the string key for the value, the id is the version number.
2017-01-11 11:58:59	alankila	zsoc: using the value as foreign key would be a terrible thing
2017-01-11 11:59:10	◣	Debnet`Laptop (~Marc@smtp2.sa-cim.fr) has quit (Ping timeout: 240 seconds)
2017-01-11 11:59:14	alankila	you really want to model something you use as foreign key properly
2017-01-11 11:59:35	zsoc	Well I probably have some conceptual misunderstanding... obviously it's an XY problem heh
2017-01-11 11:59:39	alankila	that is to say, as a relational table. The "relational" just means you have things like columns and rows, it's a 2D table
2017-01-11 12:00:07	alankila	every single thing that needs foreign key check is worth promoting to a real table
2017-01-11 12:00:12	◥	ramfjord (~tramfjord@75-144-246-5-SFBA.hfc.comcastbusiness.net) has joined #postgresql
2017-01-11 12:00:32	◣	Debnet`Work (~Marc@20.86.2.93.rev.sfr.net) has quit (Ping timeout: 240 seconds)
2017-01-11 12:00:45	◥	bencc (~Ofir@5.29.226.133) has joined #postgresql
2017-01-11 12:01:59	◣	gingitsune (~gingitsun@81.198.179.223) has quit (Ping timeout: 252 seconds)
2017-01-11 12:02:01	zsoc	alankila: Ya, do I have TableFoos.name and TableBars and in a perfect world, TableFoos.service would match up with TableBars.service but it's not a perfect world and in TableFoos the 'service' field is fuzzy whereas in TableBars the 'service' field is consistent. So I can have TableServices and TableBars.service_name could reference TableServices.service_name and be fine. But I need this hash map to allow TableFoos.service to join in on the fun
2017-01-11 12:03:00	alankila	I do not really understand what you are doing. I would suggest adding a strict foreign key to TableFoos where you are sure what the actual relation is
2017-01-11 12:03:05	◣	bencc1 (~Ofir@5.29.226.133) has quit (Ping timeout: 252 seconds)
2017-01-11 12:03:08	alankila	to=on
2017-01-11 12:03:50	Snow-Man	whartung: You might find this useful: select width_bucket(blkno,0,131072000,1000) as segment,max(avail) as max_avail,avg(avail) as avg_avail,sum(avail) as total_avail,sum(case when avail = 8128 then 1 else 0 end) as empty_pages,count(*) as total_pages from pg_freespace('pg_toast.pg_toast_10780716') group by 1 order by 1;
2017-01-11 12:03:55	alankila	it's possible for SQL databases to deal with less than definite data, but eventually you want strict joins once you are sure what the relations between rows are
2017-01-11 12:04:25	Snow-Man	whartung: You'll have to change the table name, of course.
2017-01-11 12:04:25	whartung	yea I don't have pg_freespace
2017-01-11 12:04:28	zsoc	alankila: So.. I use the hashmap to match TableFoos.fuzzy_name to a value and then insert that in TableFoos.service_name and now all three tables have the same reference? And I just do this on insert/update?
2017-01-11 12:04:39	Snow-Man	You should get it then. :)
2017-01-11 12:04:45	◥	banditron (~banditron@kohana/developer/banditron) has joined #postgresql
2017-01-11 12:05:00	◥	tjr9898_ (~tjr9898@wsip-98-174-147-98.dc.dc.cox.net) has joined #postgresql
2017-01-11 12:05:36	alankila	zsoc: your terminology again needs work. If you have a row in TableFoos where you find something in fuzzy_name, then you update service_name if that's really the field you want to join on. I'm not sure why you say "all three" when you have mentioned 2 tables only.
2017-01-11 12:05:45	alankila	or well, 1 table but 2 columns.
2017-01-11 12:05:51	alankila	this is all quite confusing to me
2017-01-11 12:05:54	zsoc	Ya I have about 2 days of experience with rdbms lol. My apologies I'm trying..
2017-01-11 12:06:04	◣	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has quit (Ping timeout: 255 seconds)
2017-01-11 12:06:55	alankila	I started quite humbly as well. I thought tables are like files with a structure inside them that I've defined with create table. My first web application happily executed create table statements.
2017-01-11 12:07:42	alankila	I've learnt after that that you want to define the data structure once, properly, and you don't execute CREATE TABLE statements automatically at all.
2017-01-11 12:08:13	zsoc	Sorry. The 3 tables/fields I'm referring to...  ServiceNames service_name, which is the actual table with all the info about the service... TableBars service_name, which would be a reference / foreign restriction to ServiceNames service_name, and TableFoos 'fuzzy_name' which i somehow need to translate into service_name (using the needed hashmap) so I can do joins heh
2017-01-11 12:08:35	◣	tjr9898 (~tjr9898@ec2-54-82-135-12.compute-1.amazonaws.com) has quit (Ping timeout: 240 seconds)
2017-01-11 12:08:39	zsoc	hehe i was thinking about the use case for programmatic CREATE TABLE the other day.. I'm sure there are some :p but generally a bad idea...
2017-01-11 12:09:11	alankila	I work with customer that believes the databases are so slow that they have 1 concept split into 3 tables: new records, archived records, and errorneous records. They could just have some status fields or timestamps or whatever, but this customer believes in deleting data from the new table in order to insert that data into the archive table
2017-01-11 12:09:25	alankila	their table sizes are like < 1e5 records
2017-01-11 12:09:40	zsoc	this customer likely ran their entire company on spreadsheets before hand
2017-01-11 12:09:45	alankila	It makes me laugh but I never disagree with customer over stupid shit like that.
2017-01-11 12:10:05	zsoc	100,000 rows start to take a long time to do calculations xD
2017-01-11 12:10:39	alankila	yes, in my experience it might take 100 ms to do something with 1e5 records. But they don't put indexes in any tables either.
2017-01-11 12:11:12	alankila	I've talked about that but it's like talking chinese I guess. The crazy consultant says something, I'll nod until he sods off and does what I actually pay him for
2017-01-11 12:11:34	zsoc	same really in the application space... when you're doing a task 10,000 times.. if you are using loops or iterators or parallelism or streams or promises or whatever abstraction... who cares. And people are trying to optimize functions and it's like.. Howabout you write readable code instead of saving 2ms on doing something 100 times? Lol
2017-01-11 12:11:48	◥	puchacz (~puchacz@cpc96904-walt25-2-0-cust679.13-2.cable.virginm.net) has joined #postgresql
2017-01-11 12:11:59	◥	wsieroci (~wsieroci@095160155072.dynamic-ww-12.vectranet.pl) has joined #postgresql
2017-01-11 12:12:27	◥	lane_ (~lane@70.89.246.241-Busname-UT.hfc.comcastbusiness.net) has joined #postgresql
2017-01-11 12:13:12	velix	I've got a table with 12 columns. What happens if I import a CSV file, where the last two fields are missing (10 columns only) ?
2017-01-11 12:13:17	alankila	Last time I discovered that customer defines the database to be in latin1, then manually encodes the values so they got in UTF-8 encoding but the database is unaware
2017-01-11 12:14:12	alankila	I gave a quick explanation of how encodings work but I'm not sure it went through
2017-01-11 12:14:35	◣	tiwula (~lane@70.89.246.241-Busname-UT.hfc.comcastbusiness.net) has quit (Ping timeout: 240 seconds)
2017-01-11 12:15:14	◣	korzybski (~danielwai@97-113-86-34.tukw.qwest.net) has quit (Quit: korzybski)
2017-01-11 12:15:20	◣	kacey (~kacey@c-71-231-207-48.hsd1.wa.comcast.net) has quit (Quit: kacey)
2017-01-11 12:15:46	alankila	so when I select something in my java programs, I get UTF-8 bytes in Latin-1 encoding and have to convert them manually. One day I'm going to quit this industry, after I've burnt out properly, and I go farm lychee fruits somewhere in temperate climate. I will never think another thought about SQL or anything else.
2017-01-11 12:15:54	RhodiumToad	velix: you have to specify a column list in the COPY command, giving the same number of columns that are in the file
2017-01-11 12:16:05	◣	wsieroci (~wsieroci@095160155072.dynamic-ww-12.vectranet.pl) has quit (Ping timeout: 240 seconds)
2017-01-11 12:16:06	◥	tourdownunder (~tourdownu@pa49-199-81-111.pa.vic.optusnet.com.au) has joined #postgresql
2017-01-11 12:16:07	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2017-01-11 12:16:33	◥	lamneth (~IceChat9@modemcable080.114-202-24.mc.videotron.ca) has joined #postgresql
2017-01-11 12:16:37	velix	RhodiumToad: oh okay... then I need to add two blank fields to the CSV file.
2017-01-11 12:16:49	RhodiumToad	velix: why?
2017-01-11 12:16:51	velix	RhodiumToad: I thought, it accepts 10 columns (from the left).
2017-01-11 12:16:58	velix	RhodiumToad: Sometimes it's 10 columsn, sometimes 12.
2017-01-11 12:17:17	velix	RhodiumToad: 2 mio lines, about 240,000 only have 10 columns.
2017-01-11 12:17:19	RhodiumToad	velix: within a given file, there must be the same number of fields in every row
2017-01-11 12:17:35	velix	RhodiumToad: yeah, that's why I have to add empty fields to those 240,000 lines.
2017-01-11 12:17:38	◥	korzybski_ (~danielwai@97-113-86-34.tukw.qwest.net) has joined #postgresql
2017-01-11 12:17:41	RhodiumToad	yup
2017-01-11 12:17:45	◥	baldrick (~duncan@92-111-69-58.static.chello.nl) has joined #postgresql
2017-01-11 12:17:56	velix	I thought, it would accept 10 fields and just name it "null" / empty.
2017-01-11 12:18:00	velix	it = PSQL
2017-01-11 12:18:05	RhodiumToad	nope
2017-01-11 12:18:08	⚡	baldrick is now known as Guest50367
2017-01-11 12:18:12	velix	missing feature ;)
2017-01-11 12:18:45	◥	kenny (~kenny@unaffiliated/kenny) has joined #postgresql
2017-01-11 12:18:53	Snow-Man	eh, it's been discussed.
2017-01-11 12:19:25	◥	__Yiota (~textual@2607:fea8:3c9f:ffe9:457a:f1a0:865a:b75e) has joined #postgresql
2017-01-11 12:20:06	◣	tourdownunder (~tourdownu@pa49-199-81-111.pa.vic.optusnet.com.au) has quit (Max SendQ exceeded)
2017-01-11 12:20:37	zsoc	alankila: So a reasonable way to solve my 'fuzzy_name' problem for future joins.. is trigger BEFORE INSERT ON TableFoos FOR EACH ROW EXECUTE PROCEDURE, which will lookup (join?) TableFoos fuzzy_name in my hashmap table 'key' to get the 'value' pairing. Then set that strict value with TableFoos service_name = value ... ya?
2017-01-11 12:21:06	alankila	zsoc: it sounds crazy to me. I generally expect programs to know what objecst theyr
2017-01-11 12:21:28	alankila	they're really talking about, and I expect them to join by numeric IDs, not names of arbitrary length
2017-01-11 12:21:30	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-11 12:22:05	kenny	Hello, I have data in the format of [key, data], both are strings. I want a client to quickly determine if there's new/updated rows. My thoughts are using a `last_updated` on each row, and the client storing the last one, but I'm worried about race condiitions. Another option would be a version, but I think that requries to queries. Suggestions?
2017-01-11 12:22:05	◥	wsieroci (~wsieroci@095160155072.dynamic-ww-12.vectranet.pl) has joined #postgresql
2017-01-11 12:22:27	zsoc	alankila: I mean I could do it the other way. But where would I store the hashmap? It makes sense to me to store it.. in my data store. So.. I would select it from the db and then do the translation in the application space before inserting? Now I'm back to storing some json in a table that pg will never need to know about or understand
2017-01-11 12:22:29	zsoc	which i guess is okay
2017-01-11 12:22:31	◥	pjy (~pjy@2001:470:8:f7a:a0ae:38cc:4ce1:1f3f) has joined #postgresql
2017-01-11 12:23:04	alankila	zsoc: I'm afraid that you're making some kind of basic mistakes about how data should be modeled in relational storage in first place
2017-01-11 12:23:09	◣	m451 (~m451@pD9FA4036.dip0.t-ipconnect.de) has quit (Read error: Connection reset by peer)
2017-01-11 12:23:12	zsoc	Yep, school me lol.
2017-01-11 12:23:13	◣	Jungle-boogie (~boogie@unaffiliated/jungle-boogie) has quit (Ping timeout: 258 seconds)
2017-01-11 12:23:36	◣	saurabhjha (~saurabhjh@182.64.163.140) has quit (Ping timeout: 260 seconds)
2017-01-11 12:23:56	◣	hongkongphooey (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has quit (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
2017-01-11 12:24:22	◥	saurabhjha (~saurabhjh@223.181.84.45) has joined #postgresql
2017-01-11 12:24:36	◥	fvs (~freevryhe@2605:6000:efa7:5000:ebcf:58f0:cfff:fc05) has joined #postgresql
2017-01-11 12:24:44	alankila	zsoc: there's classic relational examples about employees working for departments and bosses and queries figuring out who has the highest salary under each boss and crap like that
2017-01-11 12:25:11	alankila	it may not sound like much but it's classic stuff teaching how databases should be used
2017-01-11 12:25:32	korzybski_	zsoc: I recommend SQL and Relatinal Theory by Chris Date.
2017-01-11 12:25:34	Snow-Man	well, natural keys are not necessairly bad, and surrogate keys can be, so
2017-01-11 12:25:35	zsoc	Sure, yes, I've gone through some of these. I get that general concept. So you're telling it's my program's job to make sure the data conforms to this relational schema in a reasonable way before anything makes it in there
2017-01-11 12:26:18	korzybski_	I found it a difficult read, but when I closed the book the fog had lifted, so to speak.
2017-01-11 12:26:25	zsoc	Which of course I would do.. the data normalization, before insertion. But this particular step requires having a hashmap to do the fuzzy lookup. It makes sense to me to store the hashmap in my db lol.
2017-01-11 12:26:40	◥	saurabhj_ (~saurabhjh@182.64.40.138) has joined #postgresql
2017-01-11 12:27:26	◣	MrXXIV (~MrXXIV@2601:589:c400:2014:d973:36ff:a832:f117) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-11 12:27:53	◥	Munnu (~timo@91-158-145-247.elisa-laajakaista.fi) has joined #postgresql
2017-01-11 12:28:26	◣	rjuju (~rjuju@2a01:e34:ec0e:e930:f8e0:7272:c662:79b1) has quit (Quit: bybye)
2017-01-11 12:29:34	◣	saurabhjha (~saurabhjh@223.181.84.45) has quit (Ping timeout: 240 seconds)
2017-01-11 12:29:44	◣	sz0 (uid110435@gateway/web/irccloud.com/x-topsngfggughfwld) has quit (Quit: Connection closed for inactivity)
2017-01-11 12:31:25	◥	saurabhjha (~saurabhjh@182.64.1.154) has joined #postgresql
2017-01-11 12:32:04	◥	hongkongphooey (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has joined #postgresql
2017-01-11 12:32:04	◣	hongkongphooey (adce625a@gateway/web/cgi-irc/kiwiirc.com/ip.173.206.98.90) has quit (Client Quit)
2017-01-11 12:32:21	◣	saurabhj_ (~saurabhjh@182.64.40.138) has quit (Ping timeout: 260 seconds)
2017-01-11 12:35:33	◥	dealy_ (~quassel@rrcs-173-196-52-74.west.biz.rr.com) has joined #postgresql
2017-01-11 12:35:49	fvs	hi, how does one declare and assign a variable in an sql function that can be used in subsequent selects. I'm getting an error using the 'with' statement here: http://pastebin.com/fCmZy5sb
2017-01-11 12:36:17	◥	Jungle-boogie (~boogie@174.46.235.6) has joined #postgresql
2017-01-11 12:36:18	◣	Jungle-boogie (~boogie@174.46.235.6) has quit (Changing host)
2017-01-11 12:36:18	◥	Jungle-boogie (~boogie@unaffiliated/jungle-boogie) has joined #postgresql
2017-01-11 12:36:39	RhodiumToad	fvs: "hwy" behaves like a table, not like a variable
2017-01-11 12:37:30	◣	nettoweb (~nettoweb@179.180.169.229) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-11 12:37:46	MatheusOl	fvs: Perhaps this: select case when left(hwy,2) ~ 'LP' then replace(hwy, 'LP', 'SL') else hwy end from pre_pmis_route($1) as p(hwy);
2017-01-11 12:38:13	MatheusOl	And I would use "=" instead of "~"
2017-01-11 12:38:30	RhodiumToad	I would use  hwy ~ '^LP'
2017-01-11 12:38:58	fvs	thanks, very helpful!
2017-01-11 12:39:09	MatheusOl	I would use  hwy LIKE 'LP%'
2017-01-11 12:39:15	MatheusOl	xD
2017-01-11 12:39:37	RhodiumToad	do you want to replace occurrences of 'LP' other than at the start?
2017-01-11 12:39:48	◣	tjr9898_ (~tjr9898@wsip-98-174-147-98.dc.dc.cox.net) has quit (Remote host closed the connection)
2017-01-11 12:39:58	RhodiumToad	because if not, then  regexp_replace(hwy, '^LP', 'SL')  obviates the need for CASE at all
2017-01-11 12:40:06	MatheusOl	+1
2017-01-11 12:40:24	◥	tjr9898 (~tjr9898@wsip-98-174-147-98.dc.dc.cox.net) has joined #postgresql
2017-01-11 12:41:57	alankila	zsoc: I think I want you to think about what your data means, e.g. what you know about the data, and how to encode it in database level. E.g. if you know that the data you need to incorporate in your database definitely referred to a line in foo table with id=12345, you better be doing an insert statement which contains foo_id=12345
2017-01-11 12:42:52	◣	filiprem (~filip@188.146.89.114.nat.umts.dynamic.t-mobile.pl) has quit (Ping timeout: 240 seconds)
2017-01-11 12:42:59	alankila	not distorting information as your program runs is the first step, so you need to establish what are the facts, and you want to find nice ways to express your facts at database level.
2017-01-11 12:43:43	zsoc	Ok.. but what is the layer we 'know' this at? Is this in the program space before the insert? Do I do these lookups via selects to get the id of foo to begin with?
2017-01-11 12:43:57	◥	m451 (~m451@pD9FA4036.dip0.t-ipconnect.de) has joined #postgresql
2017-01-11 12:44:14	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2017-01-11 12:44:28	◣	korzybski_ (~danielwai@97-113-86-34.tukw.qwest.net) has quit (Quit: korzybski_)
2017-01-11 12:45:13	alankila	It's kind of hard for me to say actually. For me, it's clear that I try to derive facts that are true of the situation and then want to find ways to write those facts on database level, e.g. person at the counter who logged into my system found a customer's representative with id=12555 wanted to buy quantity 4 of product 12345 at time 14:23:27 today
2017-01-11 12:45:39	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Client Quit)
2017-01-11 12:45:56	◥	skyx (~skyx__@lk.84.20.227.139.dc.cable.static.lj-kabel.net) has joined #postgresql
2017-01-11 12:45:57	alankila	so I store some row with (cashier_id, employee_id, product_id, quantity, time) into some kind of table called purchases
2017-01-11 12:46:34	alankila	which records the fact that the cashier, employee, product, and some quantity of the product where "together" at one point of time when the sales were made
2017-01-11 12:47:25	zsoc	hmmm i see.. so you try to model the schema based on what information is available at the time you are inserting it
2017-01-11 12:47:39	◥	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-11 12:47:43	alankila	yes, I mostly try to record the facts, as undistorted as possible
2017-01-11 12:47:47	◥	chucky_z (uid135747@gateway/web/irccloud.com/x-kjsojbltfycuahmm) has joined #postgresql
2017-01-11 12:48:13	◣	adlaistevenson (443c3c49@gateway/web/freenode/ip.68.60.60.73) has quit (Quit: Page closed)
2017-01-11 12:48:55	alankila	I derive all other information from those facts. I have a warehouse with some quantity of the prodcut. But I don't have a table called warehouse which contains product_id and the current quantity
2017-01-11 12:49:08	ash_workz	is there a way to dump a select without using a temp table?
2017-01-11 12:49:18	Berge	ash_workz: Dump how?
2017-01-11 12:49:24	Berge	Or to what
2017-01-11 12:49:34	ash_workz	Berge: so I can just pop that into a local db
2017-01-11 12:49:43	zsoc	alankila: I mean in theory i could be doing this fuzzy lookup when i go to display the report and never worry my db about it. I just felt like it was right to 'do it once' and then store the strict data field in that table
2017-01-11 12:49:46	Berge	ash_workz: COPY
2017-01-11 12:49:52	johto	or, easier, \copy from psql
2017-01-11 12:49:57	◣	saurabhjha (~saurabhjh@182.64.1.154) has quit (Remote host closed the connection)
2017-01-11 12:50:01	alankila	what I have are facts like "at 2017-01-01, when someone went through the warehouse, they counted 3 instances of product_id 12345". Afterwards, 2 were sold on days 2017-01-07 and 2017-01-08, so it follows we expect to just have 1 product left
2017-01-11 12:50:05	ash_workz	thanks Berge johto
2017-01-11 12:50:19	fvs	ash_workz, \copy (select * from tbl) to 'file.csv' csv header;
2017-01-11 12:50:24	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2017-01-11 12:50:27	ash_workz	thanks fvs
2017-01-11 12:51:03	⚡	uncleyea1 is now known as uncleyear
2017-01-11 12:51:05	◥	kus (~khada@pool-98-109-119-45.nwrknj.fios.verizon.net) has joined #postgresql
2017-01-11 12:51:15	◥	nettoweb (~nettoweb@189.115.60.75) has joined #postgresql
2017-01-11 12:52:03	◣	uncleyear (~ian@pppoe.178-66-29-237.dynamic.avangarddsl.ru) has quit (Changing host)
2017-01-11 12:52:03	◥	uncleyear (~ian@unaffiliated/uncleyear) has joined #postgresql
2017-01-11 12:52:06	◥	the_rat_ (~the_rat@2a02:8109:8380:3e8c:50c6:31e2:40aa:fb84) has joined #postgresql
2017-01-11 12:52:17	◣	djbkd (~djbkd@98.248.67.209) has quit (Remote host closed the connection)
2017-01-11 12:52:53	◥	djbkd (~djbkd@98.248.67.209) has joined #postgresql
2017-01-11 12:53:02	◣	wsieroci (~wsieroci@095160155072.dynamic-ww-12.vectranet.pl) has quit (Remote host closed the connection)
2017-01-11 12:53:45	◥	ur5us (~ur5us@118-92-154-145.dsl.dyn.ihug.co.nz) has joined #postgresql
2017-01-11 12:55:07	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 255 seconds)
2017-01-11 12:56:00	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-11 12:56:00	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2017-01-11 12:56:30	◥	albertus1 (~seb@x55b4b9d4.dyn.telefonica.de) has joined #postgresql
2017-01-11 12:56:32	zsoc	alankila: so in my example.. the facts are that i have a new work order to insert, and the information i have is the information contained in the work order, and the time i'm inserting it. But at some point I'm going to have to figure out what service the work order is requesting.. /that/ information is only available via this fuzzy lookup. So I just do that lookup anytime I need the info? eg: when the work order inserted into a scheduled item?
2017-01-11 12:56:32	◥	hashpuppy (uid43164@gateway/web/irccloud.com/x-azamrxkbdudtowlk) has joined #postgresql
2017-01-11 12:56:59	◣	the_rat_ (~the_rat@2a02:8109:8380:3e8c:50c6:31e2:40aa:fb84) has quit (Ping timeout: 252 seconds)
2017-01-11 12:57:06	◥	Guest43 (~textual@50-207-96-162-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-11 12:57:17	◣	djbkd (~djbkd@98.248.67.209) has quit (Ping timeout: 245 seconds)
2017-01-11 12:57:43	◥	filiprem (~filip@188.146.24.152.nat.umts.dynamic.t-mobile.pl) has joined #postgresql
2017-01-11 12:57:52	alankila	zsoc: I don't actually know when it is the right time to make the firm association. It seems clear to me at some point you have to lock the fact down, though.
2017-01-11 12:58:05	◣	dealy_ (~quassel@rrcs-173-196-52-74.west.biz.rr.com) has quit (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
2017-01-11 12:58:19	◥	dealy_ (~quassel@rrcs-173-196-52-74.west.biz.rr.com) has joined #postgresql
2017-01-11 12:58:22	alankila	A lot of the time I do advocate just recording the facts that have happened, and refrain from making inferences from the facts
2017-01-11 12:58:39	◣	dealy_ (~quassel@rrcs-173-196-52-74.west.biz.rr.com) has quit (Client Quit)
2017-01-11 12:58:52	◥	dealy (~quassel@rrcs-173-196-52-74.west.biz.rr.com) has joined #postgresql
2017-01-11 12:58:55	◥	teslix (~Adrien@2a01:cb14:2e8:900:391a:5611:3652:74bb) has joined #postgresql
2017-01-11 12:59:03	alankila	e.g. you don't know the current quantity of a product in warehouse, but you know someone claimed they saw 3 of them, and then 2 items were sold in separate days
2017-01-11 12:59:39	alankila	you can calculcate from those facts you expect 1 item to be left, but you're not actually directly storing that information.
2017-01-11 13:00:11	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Ping timeout: 240 seconds)
2017-01-11 13:00:47	zsoc	That makes sense
2017-01-11 13:01:05	zsoc	don't store data you don't know is 100% correct... it's probably not your db's job to make assertions.
2017-01-11 13:01:13	◥	bencc1 (~Ofir@5.29.226.133) has joined #postgresql
2017-01-11 13:01:15	◣	Guest43 (~textual@50-207-96-162-static.hfc.comcastbusiness.net) has left #postgresql
2017-01-11 13:01:17	◥	Guest43 (~textual@50-207-96-162-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-11 13:01:40	◣	Guest43 (~textual@50-207-96-162-static.hfc.comcastbusiness.net) has left #postgresql
2017-01-11 13:01:58	alankila	I really want systems to store the facts, like they got a truck full of stuff, and it had 4 items of gadget 123457. That's the sort of thing I want to store.
2017-01-11 13:02:07	alankila	It's something that actually happened.
2017-01-11 13:02:23	◥	Guest43 (~textual@50-207-96-162-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-11 13:02:34	◣	Guest43 (~textual@50-207-96-162-static.hfc.comcastbusiness.net) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-11 13:02:55	◥	zyrb (~yrb@12.215.54.67) has joined #postgresql
2017-01-11 13:03:01	alankila	It's not that I have +4 items of product 123457, it's that someone drove a truck, and in that truck they got items and according to manifest they had 4 of item 123457.
2017-01-11 13:03:12	◣	bencc (~Ofir@5.29.226.133) has quit (Ping timeout: 240 seconds)
2017-01-11 13:03:19	◣	dealy (~quassel@rrcs-173-196-52-74.west.biz.rr.com) has quit (Remote host closed the connection)
2017-01-11 13:03:32	◥	dealy (~quassel@rrcs-173-196-52-74.west.biz.rr.com) has joined #postgresql
2017-01-11 13:03:35	◣	threshar (~jeff@74-94-162-254-NewEngland.hfc.comcastbusiness.net) has quit (Quit: threshar)
2017-01-11 13:03:55	◣	dealy (~quassel@rrcs-173-196-52-74.west.biz.rr.com) has quit (Client Quit)
2017-01-11 13:04:05	◥	dealy_ (~quassel@rrcs-173-196-52-74.west.biz.rr.com) has joined #postgresql
2017-01-11 13:04:18	alankila	I've no problem at all in calculating sums and figuring out what records are relevant. I start from the last warehouse inventory date and take the number as gospel, then count all sales that occurred after the inventory and subtract the numbers
2017-01-11 13:05:10	zsoc	right, you always have to assume the data you have is correct, so you shouldn't be storing data that isn't as factual as possible
2017-01-11 13:05:23	alankila	and if there have been deliveries, I add the counts from the manifests as they are claimed. If they saw they delivered 4 products of id 123457, I'm going to increase the quantity of 4 and say there's some amount left now if they haven't sold all 4
2017-01-11 13:05:54	alankila	I think you're getting it.
2017-01-11 13:06:01	◣	dealy_ (~quassel@rrcs-173-196-52-74.west.biz.rr.com) has quit (Remote host closed the connection)
2017-01-11 13:06:19	◥	meltedChoco (~quassel@rrcs-173-196-52-74.west.biz.rr.com) has joined #postgresql
2017-01-11 13:06:25	johto	I don't think there's really a difference. you can store both: a value to lock and for quick lookups, and the history of how you got to that number
2017-01-11 13:06:32	alankila	I do very strongly recommend focusing SQL database usage on immutable facts
2017-01-11 13:07:47	◣	xemdetia (xemdetia@nat/ibm/x-fanbesxpgwudwgzc) has quit (Remote host closed the connection)
2017-01-11 13:07:58	◥	korzybski_ (~danielwai@97-113-86-34.tukw.qwest.net) has joined #postgresql
2017-01-11 13:08:31	◥	arezki (~arezki@eth-west-pareq2-46-193-1-54.wb.wifirst.net) has joined #postgresql
2017-01-11 13:08:37	alankila	johto: you are of course correct, in some information theoretic sense, but I've got a general campaign here for zsoc that's focused on avoiding things like issuing UDPATE and DELETE statements. I recommend trying to record facts as clearly and as simply as possible, and deriving all other quantities from facts
2017-01-11 13:08:58	◣	zyrb (~yrb@12.215.54.67) has left #postgresql ("Textual IRC Client: www.textualapp.com")
2017-01-11 13:09:44	◥	xemdetia (xemdetia@nat/ibm/x-lazuoutxvdbiaqmx) has joined #postgresql
2017-01-11 13:10:03	alankila	I'm talking about the inventory situation because that's literally what I do. I've no idea what quantity of specific product customer has in their warehouse -- all I can do is look at the quantity they counted last time from warehouse and subtract sales and add additional stock deliveries. Maybe next month they'll do another inventory and give me exact numners
2017-01-11 13:10:42	alankila	but I never keep a running total which contains the exact number. I much rather just look at the "facts": this quantity was observed on date $x, and then I count the sales and deliveries
2017-01-11 13:11:15	◣	arezki (~arezki@eth-west-pareq2-46-193-1-54.wb.wifirst.net) has quit (Remote host closed the connection)
2017-01-11 13:11:33	alankila	even if there are mistakes, the facts are still easy to explain and don't require me to look very much into the past
2017-01-11 13:11:36	◣	Lordz (~Adium@186.215.116.176) has quit (Quit: Leaving.)
2017-01-11 13:13:25	◣	m451 (~m451@pD9FA4036.dip0.t-ipconnect.de) has quit (Read error: Connection reset by peer)
2017-01-11 13:13:32	◣	ramfjord (~tramfjord@75-144-246-5-SFBA.hfc.comcastbusiness.net) has quit (Ping timeout: 245 seconds)
2017-01-11 13:13:41	◣	tjr9898 (~tjr9898@wsip-98-174-147-98.dc.dc.cox.net) has quit (Remote host closed the connection)
2017-01-11 13:14:12	◥	ramfjord (~tramfjord@75-144-246-5-SFBA.hfc.comcastbusiness.net) has joined #postgresql
2017-01-11 13:14:17	◥	tjr9898 (~tjr9898@ec2-54-82-135-12.compute-1.amazonaws.com) has joined #postgresql
2017-01-11 13:14:29	GNU\colossus	with pg_restore's "--list" output, what is the meaning of the second and third columns?
2017-01-11 13:14:33	◥	saifi (~Thunderbi@59.99.104.106) has joined #postgresql
2017-01-11 13:14:50	◣	saifi (~Thunderbi@59.99.104.106) has left #postgresql
2017-01-11 13:15:20	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-11 13:16:48	RhodiumToad	GNU\colossus: I think it's the classid and objid
2017-01-11 13:16:59	◥	r_hector (~richard@203-97-170-14.cable.telstraclear.net) has joined #postgresql
2017-01-11 13:17:06	Snow-Man	yup.
2017-01-11 13:17:29	◣	gleu (~guillaume@LFbn-1-8419-93.w81-254.abo.wanadoo.fr) has quit (Quit: gleu)
2017-01-11 13:17:30	Snow-Man	Not everything has a classid tho (eg: data doesn't)
2017-01-11 13:18:04	Snow-Man	GNU\colossus: You can look up the classid in pg_class, just select * from pg_class where oid = <classid>;
2017-01-11 13:18:08	RhodiumToad	ahprintf(AH, "%d; %u %u %s %s %s %s\n", te->dumpId,
2017-01-11 13:18:09	RhodiumToad	 te->catalogId.tableoid, te->catalogId.oid,
2017-01-11 13:18:09	RhodiumToad	 te->desc, te->namespace ? te->namespace : "-",
2017-01-11 13:18:09	RhodiumToad	 te->tag, te->owner);
2017-01-11 13:18:21	Snow-Man	GNU\colossus: Once you have that, you can look up in the relevant catalog the OID of the object.
2017-01-11 13:19:00	zsoc	alankila: i really appreciate the help btw, i also tend to tread the path of 'do it right' and 'dont mutate' etc.. but i appreciate the input from the less indoctrinated also hehe
2017-01-11 13:19:05	◥	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has joined #postgresql
2017-01-11 13:19:49	Snow-Man	of course, the fourth column ('te->desc') will tell you, pretty much, which class it is
2017-01-11 13:20:05	fvs	MatheusOl, the 'as p(hwy)' part of your reply to my question previously has me intrigued. I'm familair with aliases but never used this syntax before - is this standard SQL? Can you perhaps point me to the relevant section in the manual that discusses it.
2017-01-11 13:20:05	Snow-Man	and you'll get the namespace and table name
2017-01-11 13:20:10	◣	cleme1mp (mclement@nat/ibm/x-tvsvjryetdwiuqzb) has quit (Ping timeout: 240 seconds)
2017-01-11 13:20:31	RhodiumToad	fvs: AS table_alias(column_aliases...)
2017-01-11 13:20:40	RhodiumToad	fvs: and yes, it's standard sql
2017-01-11 13:20:54	◥	dsantiago (~dsantiago@40.141.55.70) has joined #postgresql
2017-01-11 13:21:03	GNU\colossus	RhodiumToad, Snow-Man - thanks!
2017-01-11 13:21:09	Snow-Man	np
2017-01-11 13:21:29	◥	alden (uid182191@gateway/web/irccloud.com/x-thywopohhcyomdob) has joined #postgresql
2017-01-11 13:21:40	◣	Xgc (~Xgc@p-69-195-59-10.dsl1.rtr.chat.fpma.frpt.net) has quit (Ping timeout: 255 seconds)
2017-01-11 13:22:04	alankila	I can only say that if I claim that $x = y, customers are very likely to question it. If I claim $x = $a - $b + $c, and show what my justification for $a, $b and $c are, then it's much easier discussion
2017-01-11 13:22:37	RhodiumToad	https://www.postgresql.org/docs/9.6/static/queries-table-expressions.html#QUERIES-TABLE-ALIASES
2017-01-11 13:22:51	fvs	RhodiumToad, thanks!!
2017-01-11 13:22:52	◥	asymetrixs (~asymetrix@x4db9e9f8.dyn.telefonica.de) has joined #postgresql
2017-01-11 13:24:14	alankila	it may be partly about people being reluctant to attack more complicated situation, though. But the less I do, the easier it is for me to show that the problem isn't caused by anything I do
2017-01-11 13:24:15	◥	ningu (~unamuno@76.77.184.33) has joined #postgresql
2017-01-11 13:29:52	◣	Thorn (~Thorn@unaffiliated/thorn) has quit (Ping timeout: 248 seconds)
2017-01-11 13:31:45	◣	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has quit (Read error: Connection reset by peer)
2017-01-11 13:32:14	◥	blackmesa (~blackmesa@aftr-37-201-227-31.unity-media.net) has joined #postgresql
2017-01-11 13:32:34	◥	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has joined #postgresql
2017-01-11 13:33:47	◣	ogradyd (~Thunderbi@HSI-KBW-46-223-156-191.hsi.kabel-badenwuerttemberg.de) has quit (Quit: ogradyd)
2017-01-11 13:34:32	◣	dsantiago (~dsantiago@40.141.55.70) has quit (Read error: Connection reset by peer)
2017-01-11 13:34:42	◥	Flotho66 (~florent@78-152-190-109.dsl.ovh.fr) has joined #postgresql
2017-01-11 13:34:55	◥	dsantiago (~dsantiago@40.141.55.70) has joined #postgresql
2017-01-11 13:35:35	◣	filiprem (~filip@188.146.24.152.nat.umts.dynamic.t-mobile.pl) has quit (Ping timeout: 240 seconds)
2017-01-11 13:37:17	◣	xemdetia (xemdetia@nat/ibm/x-lazuoutxvdbiaqmx) has quit (Remote host closed the connection)
2017-01-11 13:37:20	◥	xemdetia_ (xemdetia@nat/ibm/x-seysuaaemeiykbxi) has joined #postgresql
2017-01-11 13:37:52	◣	xemdetia_ (xemdetia@nat/ibm/x-seysuaaemeiykbxi) has quit (Remote host closed the connection)
2017-01-11 13:39:37	◥	xemdetia (xemdetia@nat/ibm/x-ibmvvgbnjxgpzhkq) has joined #postgresql
2017-01-11 13:40:01	◣	Balliad (~textual@52D96D43.cm-11-1b.dynamic.ziggo.nl) has quit (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
2017-01-11 13:41:24	◣	yieldsfalsehood (~elliot@phl-nat.afilias.info) has quit (Remote host closed the connection)
2017-01-11 13:42:04	◣	kus (~khada@pool-98-109-119-45.nwrknj.fios.verizon.net) has quit (Quit: Konversation terminated!)
2017-01-11 13:42:07	◣	ignarps (~iggy@pdpc/supporter/active/ignarps) has left #postgresql ("Textual IRC Client: www.textualapp.com")
2017-01-11 13:46:21	◥	connor_ (~textual@dhcp-128-189-229-224.ubcsecure.wireless.ubc.ca) has joined #postgresql
2017-01-11 13:46:56	◥	MrXXIV (~MrXXIV@2601:589:c400:2014:a46f:aa1a:10bb:3283) has joined #postgresql
2017-01-11 13:48:22	◣	fwiles (~frank@19.89.124.24.cm.sunflower.com) has quit (Quit: fwiles)
2017-01-11 13:49:11	Snow-Man	wheeeee
2017-01-11 13:49:14	◣	AdamTheExile (~textual@ps-relay-server.tolland.k12.ct.us) has quit (Ping timeout: 252 seconds)
2017-01-11 13:49:14	Snow-Man	*another* bug
2017-01-11 13:49:16	Snow-Man	yeesh.
2017-01-11 13:49:37	Snow-Man	This one has to do with default privileges...
2017-01-11 13:50:24	◣	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-11 13:51:07	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2017-01-11 13:51:20	MatheusOl	hm
2017-01-11 13:51:24	MatheusOl	Snow-Man: that interests me to know
2017-01-11 13:51:31	Snow-Man	MatheusOl: they are your fault, aren't they? :D
2017-01-11 13:51:36	Snow-Man	MatheusOl: try something like this:
2017-01-11 13:51:56	◥	patrickw (~patrickw@EARNEST-OPE.bar1.SanFrancisco1.Level3.net) has joined #postgresql
2017-01-11 13:52:03	Snow-Man	ALTER DEFAULT PRIVILEGES FOR ROLE regress_dump_test_role IN SCHEMA dump_test GRANT SELECT ON TABLES TO regress_dump_test_role;
2017-01-11 13:52:08	Snow-Man	… and then do
2017-01-11 13:52:16	Snow-Man	ALTER DEFAULT PRIVILEGES FOR ROLE regress_dump_test_role GRANT SELECT ON TABLES TO regress_dump_test_role;
2017-01-11 13:52:43	Snow-Man	Maybe I'm missing something, but shouldn't the second invocation result in a new record in pg_default_acl with defaclnamepsace = InvalidOid?
2017-01-11 13:52:46	Snow-Man	because it doesn't
2017-01-11 13:52:55	Snow-Man	the 2nd command ends up being a no-op
2017-01-11 13:53:12	MatheusOl	My fault?...
2017-01-11 13:53:14	▷	MatheusOl runs
2017-01-11 13:53:18	Snow-Man	hahaha
2017-01-11 13:53:48	MatheusOl	hm
2017-01-11 13:53:56	◣	matkor (~matkor@apn-31-1-188-28.dynamic.gprs.plus.pl) has quit (Quit: Z prawd studentek medycyny: "bez kiły nie ma zaliczenia")
2017-01-11 13:53:56	MatheusOl	From my understanding, it should indeed
2017-01-11 13:54:10	Snow-Man	that's certainly how the docs read too, to me
2017-01-11 13:54:22	MatheusOl	Snow-Man: I knew it couldn't be me, as my patch wasn't commited yet
2017-01-11 13:54:33	ash_workz	is there a simpler way to write `CASE WHEN ... THEN TRUE ELSE FALSE END` ?
2017-01-11 13:54:34	MatheusOl	Snow-Man: It *could*, remove the previous entry though
2017-01-11 13:54:41	MatheusOl	ash_workz: Yes: ...
2017-01-11 13:54:50	MatheusOl	Just to do the boolean expression
2017-01-11 13:54:55	Snow-Man	MatheusOl: Your patch wasn't committed?
2017-01-11 13:55:10	Snow-Man	oh, must have been someone else here who added default privs..
2017-01-11 13:55:16	Snow-Man	I recall discussing it w/ someone here
2017-01-11 13:55:23	Snow-Man	of course, that was *ages* ago
2017-01-11 13:55:29	◣	skyx (~skyx__@lk.84.20.227.139.dc.cable.static.lj-kabel.net) has quit (Quit: This computer has gone to sleep)
2017-01-11 13:55:41	MatheusOl	Snow-Man: hehe... No... I have a new patch proposal to make ADP works for privileges to schemas
2017-01-11 13:55:46	Snow-Man	ah
2017-01-11 13:55:52	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 255 seconds)
2017-01-11 13:56:01	ash_workz	MatheusOl: thanks!
2017-01-11 13:56:16	Snow-Man	then I don't feel as bad complaining about this function looking downright ugly..  (ExecAlterDefaultPrivilegesStmt)
2017-01-11 13:56:36	MatheusOl	Snow-Man: I'm with code source about ADP fresh in my mind though, if you want me to try to work on this bug
2017-01-11 13:56:38	johto	Snow-Man; I thought you added ADP
2017-01-11 13:57:26	Snow-Man	No
2017-01-11 13:57:37	Snow-Man	It was committed by Tom, written by Petr Jelinek
2017-01-11 13:57:38	Snow-Man	apparently
2017-01-11 13:58:06	Snow-Man	johto: I chatted with whomever was implementing it a fair bit on here, but didn't end up having time to commit it myself before Tom did
2017-01-11 13:58:32	johto	huh? committing what?
2017-01-11 13:58:33	◣	eggyknap (~jtolley@unaffiliated/eggyknap) has quit (Quit: leaving)
2017-01-11 13:58:50	Snow-Man	ADP..
2017-01-11 13:59:07	Snow-Man	I guess I was chatting w/ Petr..
2017-01-11 13:59:09	▷	MatheusOl hands some coffee to johto
2017-01-11 13:59:10	johto	it was added in 9.0. you weren't a committer back then, were you?
2017-01-11 13:59:12	Snow-Man	tho I didn't think he was on here.
2017-01-11 13:59:39	Snow-Man	was I?  hrm, I don't remember.
2017-01-11 13:59:57	johto	Petr used to be here a lot
2017-01-11 14:00:14	Snow-Man	??ircnames
2017-01-11 14:00:15	pg_docbot	Nothing found
2017-01-11 14:00:20	Snow-Man	??irc2rw
2017-01-11 14:00:20	pg_docbot	Nothing found
2017-01-11 14:00:23	Snow-Man	bah
2017-01-11 14:00:27	xocolatl	??irc
2017-01-11 14:00:27	pg_docbot	http://www.postgresql.org/community/irc :: http://wiki.postgresql.org/wiki/IRC2RWNames
2017-01-11 14:00:27	Snow-Man	??nicks
2017-01-11 14:00:28	pg_docbot	http://wiki.postgresql.org/wiki/IRC2RWNames
2017-01-11 14:00:32	Snow-Man	danke
2017-01-11 14:00:45	Snow-Man	ahhhhh, yes, PJMODOS
2017-01-11 14:01:05	xocolatl	currently PJMODOS_
2017-01-11 14:01:06	Snow-Man	yeah, I chatted with him about the implementation quite a bit on here and he wrote it and Tom committed it
2017-01-11 14:01:18	◥	bencc (~Ofir@5.29.226.133) has joined #postgresql
2017-01-11 14:01:18	◣	xemdetia (xemdetia@nat/ibm/x-ibmvvgbnjxgpzhkq) has quit (Remote host closed the connection)
2017-01-11 14:01:22	Snow-Man	and, yea, my first commit was 2013, it seems
2017-01-11 14:01:25	◥	xemdetia_ (xemdetia@nat/ibm/x-pkersapzqzoxvpst) has joined #postgresql
2017-01-11 14:01:28	MatheusOl	ah
2017-01-11 14:01:33	MatheusOl	Snow-Man: ALTER DEFAULT PRIVILEGES FOR ROLE regress_dump_test_role GRANT SELECT ON TABLES TO regress_dump_test_role1;
2017-01-11 14:01:41	MatheusOl	Snow-Man: That by itself creates no entry in pg_default_acl
2017-01-11 14:01:44	MatheusOl	Ops...
2017-01-11 14:01:51	MatheusOl	ALTER DEFAULT PRIVILEGES FOR ROLE regress_dump_test_role GRANT SELECT ON TABLES TO regress_dump_test_role;
2017-01-11 14:01:53	MatheusOl	That, ^
2017-01-11 14:01:57	Snow-Man	So, only 9.3+ is my fault. ;)
2017-01-11 14:02:07	Snow-Man	MatheusOl: erm
2017-01-11 14:02:10	MatheusOl	Probably due to the fact that FOR ROLE and TO have the same role
2017-01-11 14:02:54	MatheusOl	If you change the role it works as expected
2017-01-11 14:03:04	◣	bencc1 (~Ofir@5.29.226.133) has quit (Ping timeout: 240 seconds)
2017-01-11 14:03:11	MatheusOl	Now, if you think about it, makes no sense to provide ADP to the owner, does it?
2017-01-11 14:03:21	Snow-Man	hah
2017-01-11 14:03:24	Snow-Man	perhaps. :)
2017-01-11 14:03:26	MatheusOl	In which case, neither the first should add an entry in pg_default_acl
2017-01-11 14:03:28	MatheusOl	NO?
2017-01-11 14:03:41	MatheusOl	s/NO/No/, sorry to shout
2017-01-11 14:03:45	Snow-Man	unless you have a default ACL to revoke them all...
2017-01-11 14:03:52	◥	blackmes1 (~blackmesa@aftr-37-201-227-31.unity-media.net) has joined #postgresql
2017-01-11 14:04:31	◣	Insanity_ (uid179350@gateway/web/irccloud.com/x-qensxwsrwesutqig) has quit (Quit: Connection closed for inactivity)
2017-01-11 14:04:33	◥	skyx (~skyx__@lk.84.20.227.139.dc.cable.static.lj-kabel.net) has joined #postgresql
2017-01-11 14:05:00	◥	davimore_ (~davimore@185.145.66.254) has joined #postgresql
2017-01-11 14:05:34	Snow-Man	which does seem to work
2017-01-11 14:05:36	Snow-Man	ok. :)
2017-01-11 14:05:50	Snow-Man	now to see if pg_dump plays nicely...
2017-01-11 14:06:10	◣	blackmesa (~blackmesa@aftr-37-201-227-31.unity-media.net) has quit (Ping timeout: 240 seconds)
2017-01-11 14:06:33	Snow-Man	HMMM.
2017-01-11 14:06:34	Snow-Man	# ALTER DEFAULT PRIVILEGES FOR ROLE regress_dump_test_role GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,UPDATE ON TABLES  TO regress_dump_test_role;
2017-01-11 14:07:07	◣	Nizumzen (~Nizumzen@cpc2-reig5-2-0-cust667.6-3.cable.virginm.net) has quit (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
2017-01-11 14:07:18	▷	Snow-Man is getting a sinking feeling here
2017-01-11 14:07:26	◥	nettoweb1 (~nettoweb@177.96.51.180) has joined #postgresql
2017-01-11 14:07:49	◣	davimore (~davimore@185.145.66.254) has quit (Ping timeout: 256 seconds)
2017-01-11 14:08:25	◣	MarcWeber (~marc@mawercer.de) has quit (Quit: Lost terminal)
2017-01-11 14:08:48	Snow-Man	yup, that's no good.
2017-01-11 14:08:50	◥	hahuang65 (~hahuang65@2601:647:4000:d7:15e6:2367:5f15:df27) has joined #postgresql
2017-01-11 14:08:58	Snow-Man	and this one might be my fault..
2017-01-11 14:09:49	◣	nettoweb (~nettoweb@189.115.60.75) has quit (Ping timeout: 255 seconds)
2017-01-11 14:09:57	◣	fvs (~freevryhe@2605:6000:efa7:5000:ebcf:58f0:cfff:fc05) has left #postgresql ("leaving")
2017-01-11 14:10:04	MatheusOl	:(
2017-01-11 14:10:16	◥	djbkd (~djbkd@98.248.67.209) has joined #postgresql
2017-01-11 14:10:31	Snow-Man	yup, that one is my fault
2017-01-11 14:10:40	◣	pjy (~pjy@2001:470:8:f7a:a0ae:38cc:4ce1:1f3f) has quit (Ping timeout: 256 seconds)
2017-01-11 14:11:17	Snow-Man	We shouldn't be dumping out a GRANT command in that case, but a REVOKE command instead.
2017-01-11 14:11:23	Snow-Man	yay!
2017-01-11 14:12:17	◣	zivester (~zivester@38.104.66.138) has quit (Ping timeout: 245 seconds)
2017-01-11 14:12:33	◣	xemdetia_ (xemdetia@nat/ibm/x-pkersapzqzoxvpst) has quit (Ping timeout: 240 seconds)
2017-01-11 14:15:22	◥	danpalmer (uid121480@gateway/web/irccloud.com/x-uodvtriuydpnlufa) has joined #postgresql
2017-01-11 14:15:24	◣	bowhunter (~textual@209-99-92-162.fwd.datafoundry.com) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-11 14:15:58	Snow-Man	well
2017-01-11 14:16:07	◣	Neo-- (~neo@BSN-142-62-172.dynamic.siol.net) has quit (Ping timeout: 255 seconds)
2017-01-11 14:16:13	Snow-Man	Guess we know what I'll be playing with tomorrow.
2017-01-11 14:16:30	Snow-Man	MatheusOl: thanks for the help. :)
2017-01-11 14:16:50	◣	KellerFuchs (~kellerfuc@gateway/tor-sasl/kellerfuchs) has quit (Ping timeout: 255 seconds)
2017-01-11 14:17:49	◣	faw (~faw@unaffiliated/faw) has quit (Ping timeout: 258 seconds)
2017-01-11 14:17:51	◣	hahuang65 (~hahuang65@2601:647:4000:d7:15e6:2367:5f15:df27) has quit (Ping timeout: 240 seconds)
2017-01-11 14:20:51	◣	blackmes1 (~blackmesa@aftr-37-201-227-31.unity-media.net) has quit (Ping timeout: 240 seconds)
2017-01-11 14:22:03	▷	xocolatl is thinking about a visibility map for btree...
2017-01-11 14:23:02	xocolatl	it wouldn't be for tuple visibility, but for P_IGNORE
2017-01-11 14:23:35	xocolatl	would make vacuum much faster on severely bloated indexes
2017-01-11 14:23:50	xocolatl	thoughts?
2017-01-11 14:24:22	◣	ramfjord (~tramfjord@75-144-246-5-SFBA.hfc.comcastbusiness.net) has quit (Ping timeout: 245 seconds)
2017-01-11 14:24:28	◣	EyePulp (~eyepulp@98.215.57.107) has quit (Remote host closed the connection)
2017-01-11 14:27:45	◥	ramfjord (~tramfjord@75-144-246-5-SFBA.hfc.comcastbusiness.net) has joined #postgresql
2017-01-11 14:28:14	◣	woltman (~woltman@23-24-57-113-static.hfc.comcastbusiness.net) has quit (Read error: Connection reset by peer)
2017-01-11 14:28:53	◥	KellerFuchs (~kellerfuc@gateway/tor-sasl/kellerfuchs) has joined #postgresql
2017-01-11 14:29:13	◥	EyePulp (~eyepulp@98.215.57.107) has joined #postgresql
2017-01-11 14:29:15	◣	Guest50367 (~duncan@92-111-69-58.static.chello.nl) has quit (Quit: Leaving.)
2017-01-11 14:29:49	◣	r_hector (~richard@203-97-170-14.cable.telstraclear.net) has quit (Quit: Leaving.)
2017-01-11 14:31:03	◣	dobber (~dobber@95.111.70.117) has quit (Remote host closed the connection)
2017-01-11 14:31:49	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-11 14:32:32	◥	SEQUEL_TECH (~sequel@46.238.55.126) has joined #postgresql
2017-01-11 14:32:35	◣	SEQUEL_TECH (~sequel@46.238.55.126) has quit (Client Quit)
2017-01-11 14:33:57	◣	rocky (~rocky@crbknf0223w-156057210179.dhcp-dynamic.FibreOp.nl.bellaliant.net) has quit (Ping timeout: 245 seconds)
2017-01-11 14:33:59	◣	dtcrshr (~datacrush@unaffiliated/datacrusher) has quit (Read error: Connection reset by peer)
2017-01-11 14:37:05	xocolatl	man, I'm getting no love at all from irc today :(
2017-01-11 14:38:22	mspencer	Can send you some love, but cannot answer your question ;)
2017-01-11 14:40:51	davidfetter_ge	xocolatl, istm that tracking this would cost everybody, and likely in a performance-critical place,  where fixing index bloat closer to the source would give bigger bangs for bucks
2017-01-11 14:41:00	◣	tjr9898 (~tjr9898@ec2-54-82-135-12.compute-1.amazonaws.com) has quit (Read error: Connection reset by peer)
2017-01-11 14:41:10	◥	tjr9898 (~tjr9898@ec2-54-82-135-12.compute-1.amazonaws.com) has joined #postgresql
2017-01-11 14:41:41	xocolatl	updating a bit every time you set BTP_DELETED and unsetting it when you recycle the page doesn't sound so expensive to me
2017-01-11 14:42:11	davidfetter_ge	tias :)
2017-01-11 14:42:43	xocolatl	thank you for your input
2017-01-11 14:44:25	⚡	robink is now known as robinak
2017-01-11 14:44:42	⚡	robinak is now known as robink
2017-01-11 14:46:03	johto	the bits are not what they seem
2017-01-11 14:46:28	◥	rocky (~rocky@crbknf0223w-156057210179.dhcp-dynamic.FibreOp.nl.bellaliant.net) has joined #postgresql
2017-01-11 14:47:28	◣	al-damiri (uid142631@gateway/web/irccloud.com/x-ladvqbqgnfdpiyli) has quit (Quit: Connection closed for inactivity)
2017-01-11 14:48:06	◣	connor_ (~textual@dhcp-128-189-229-224.ubcsecure.wireless.ubc.ca) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-11 14:49:30	◣	cartan (~cartan@p4FEEAFAC.dip0.t-ipconnect.de) has quit (Quit: Leaving)
2017-01-11 14:49:37	◣	xapiens (~xapiens@190.234.106.240) has quit (Quit: Leaving)
2017-01-11 14:50:19	◣	ramfjord (~tramfjord@75-144-246-5-SFBA.hfc.comcastbusiness.net) has quit (Ping timeout: 255 seconds)
2017-01-11 14:51:00	◣	puchacz (~puchacz@cpc96904-walt25-2-0-cust679.13-2.cable.virginm.net) has quit (Quit: Konversation terminated!)
2017-01-11 14:51:46	◣	Zr40 (~zr40@unaffiliated/zr40) has quit (Ping timeout: 256 seconds)
2017-01-11 14:51:52	◥	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has joined #postgresql
2017-01-11 14:51:53	◣	Debnet (~Marc@smtp2.sa-cim.fr) has quit (Ping timeout: 240 seconds)
2017-01-11 14:51:56	◥	Zr40 (~zr40@unaffiliated/zr40) has joined #postgresql
2017-01-11 14:53:20	◥	the_rat_ (~the_rat@2a02:8109:8380:3e8c:59af:448b:4a67:f1ad) has joined #postgresql
2017-01-11 14:55:24	◥	Xgc (~Xgc@p-216-227-83-156.dsl1.rtr.chat.fpma.frpt.net) has joined #postgresql
2017-01-11 14:56:12	◥	cpobrien (~cpobrien@dhcp-128-189-229-224.ubcsecure.wireless.ubc.ca) has joined #postgresql
2017-01-11 14:56:37	◣	hphuoc25 (~hphuoc25@bb121-7-103-152.singnet.com.sg) has quit (Ping timeout: 255 seconds)
2017-01-11 14:56:39	◣	fordfrog (~fordfrog@gentoo/developer/fordfrog) has quit (Quit: Leaving)
2017-01-11 14:57:51	◣	the_rat_ (~the_rat@2a02:8109:8380:3e8c:59af:448b:4a67:f1ad) has quit (Ping timeout: 240 seconds)
2017-01-11 14:58:34	◣	darkbit (~darkbit@119.95.205.80) has quit (Ping timeout: 240 seconds)
2017-01-11 14:58:43	◥	metaresolve (~metaresol@2601:14d:8301:5aa0:49ca:b575:5d10:9e35) has joined #postgresql
2017-01-11 15:00:53	MatheusOl	Snow-Man: yw
2017-01-11 15:01:30	◥	bencc1 (~Ofir@5.29.226.133) has joined #postgresql
2017-01-11 15:02:07	◣	mizu_no_oto_work (~textual@104.207.209.180) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-11 15:02:50	◥	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has joined #postgresql
2017-01-11 15:02:57	◣	rhonabwy (~rhonabwy@95.157.58.47.dynamic.cablesurf.de) has quit (Read error: Connection reset by peer)
2017-01-11 15:03:49	◣	bencc (~Ofir@5.29.226.133) has quit (Ping timeout: 258 seconds)
2017-01-11 15:04:01	◥	akurniawan (~akurniawa@111.94.224.64) has joined #postgresql
2017-01-11 15:07:10	◥	Nas (~nas@broadband-95-84-158-145.moscow.rt.ru) has joined #postgresql
2017-01-11 15:07:20	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Ping timeout: 252 seconds)
2017-01-11 15:10:31	◥	zivester (~zivester@pool-100-35-216-31.nwrknj.fios.verizon.net) has joined #postgresql
2017-01-11 15:11:35	◥	ramfjord (~tramfjord@c-67-169-47-49.hsd1.ca.comcast.net) has joined #postgresql
2017-01-11 15:11:36	◣	Nas (~nas@broadband-95-84-158-145.moscow.rt.ru) has quit (Ping timeout: 260 seconds)
2017-01-11 15:12:12	◣	rocky (~rocky@crbknf0223w-156057210179.dhcp-dynamic.FibreOp.nl.bellaliant.net) has quit (Ping timeout: 260 seconds)
2017-01-11 15:12:31	velix	Is this correct pspsql? EXECUTE '\COPY import FROM ''/tmp/import_' || $1 || $2 || '.csv'' USING DELIMITERS ''|'' CSV HEADER;';
2017-01-11 15:12:46	◣	akurniawan (~akurniawa@111.94.224.64) has quit (Quit: Textual IRC Client: www.textualapp.com)
2017-01-11 15:13:28	RhodiumToad	no
2017-01-11 15:13:41	RhodiumToad	 \copy is a psql meta-command, not something you can use in EXECUTE
2017-01-11 15:13:53	velix	RhodiumToad: Since the user isn't a superuser, he can't use COPY.
2017-01-11 15:14:46	RhodiumToad	 \copy works by issuing COPY ... FROM STDIN  or  COPY ... TO STDOUT  to the server, then managing the file i/o in the client
2017-01-11 15:14:59	◣	asymetrixs (~asymetrix@x4db9e9f8.dyn.telefonica.de) has quit (Remote host closed the connection)
2017-01-11 15:15:23	velix	RhodiumToad: but I'm reading from CSV file ;)
2017-01-11 15:16:31	RhodiumToad	so?
2017-01-11 15:17:27	◥	XofP (~XofP@98.159.94.208) has joined #postgresql
2017-01-11 15:18:04	velix	RhodiumToad: sorry, I really don't understand what you're trying to tell me :D
2017-01-11 15:18:24	RhodiumToad	when doing \copy, the file i/o is done in the client
2017-01-11 15:18:39	RhodiumToad	psql reads from the file you specified and sends the data to the server
2017-01-11 15:18:52	velix	RhodiumToad: but I want to read it from within a function
2017-01-11 15:18:57	RhodiumToad	tough cookies
2017-01-11 15:19:10	RhodiumToad	 \copy is a command TO PSQL, not a command that the server understands
2017-01-11 15:20:41	◣	spacecadetbrown (~spacecade@c-73-201-121-101.hsd1.va.comcast.net) has quit (Ping timeout: 258 seconds)
2017-01-11 15:20:51	velix	Yeah, you've already said this :)
2017-01-11 15:21:22	◣	xzi11a (~robert@static-108-48-124-82.washdc.fios.verizon.net) has quit (Ping timeout: 255 seconds)
2017-01-11 15:21:24	velix	So it's simply not possible for non-superusers to import
2017-01-11 15:21:41	RhodiumToad	non-superusers can use \copy
2017-01-11 15:22:00	velix	RhodiumToad: but not within a function :))
2017-01-11 15:22:02	RhodiumToad	or they can use the copy support of any client interface that supports it (many do)
2017-01-11 15:23:17	◣	ash_workz (~chatzilla@50-243-5-153-static.hfc.comcastbusiness.net) has quit (Ping timeout: 252 seconds)
2017-01-11 15:23:57	◣	__Yiota (~textual@2607:fea8:3c9f:ffe9:457a:f1a0:865a:b75e) has quit (Quit: My MacBook has gone to sleep. ZZZzzz…)
2017-01-11 15:24:59	◣	BeeAyeEye (4356d9a7@gateway/web/freenode/ip.67.86.217.167) has quit (Ping timeout: 260 seconds)
2017-01-11 15:25:05	◣	teslix (~Adrien@2a01:cb14:2e8:900:391a:5611:3652:74bb) has left #postgresql
2017-01-11 15:25:20	velix	Is there a reason why only superusers can import files? I mean, it's not a security issue, since they can use \copy
2017-01-11 15:25:27	◥	Nas (~nas@broadband-95-84-158-145.moscow.rt.ru) has joined #postgresql
2017-01-11 15:25:38	RhodiumToad	it absolutely is a security issue
2017-01-11 15:25:44	xocolatl	only superusers can safely read files off the server's disk
2017-01-11 15:26:09	RhodiumToad	server-side COPY uses the server's OS user to access files, and reads/writes the server's filesystem, not the client's
2017-01-11 15:26:45	RhodiumToad	which means for example that you can use it to modify the pg_hba.conf or to read data you shouldn't have access to
2017-01-11 15:27:40	RhodiumToad	copy from stdin/to stdout is available to non-superusers precisely because it does no file i/o on the server side
2017-01-11 15:27:57	◣	skyx (~skyx__@lk.84.20.227.139.dc.cable.static.lj-kabel.net) has quit (Quit: This computer has gone to sleep)
2017-01-11 15:42:20	◥	boon (~david@66.195.46.242) has joined #postgresql
2017-01-11 15:42:20	⚡	Topic for #postgresql is "Don't ask to ask.  Just ask! || Update releases 9.6.1, 9.5.5, 9.4.10, 9.3.15, 9.2.19, and 9.1.24 are out, time to upgrade! || The 9.1 series is EOL as of 9.1.24. || Paste: type ??paste for list || Docs: http://www.postgresql.org/docs/current/static/ || Off topic? #postgresql-lounge"
2017-01-11 15:42:20	⚡	Topic set by davidfetter_ge (~chatzilla@64.129.231.6) on Mon, 14 Nov 2016 12:58:04
2017-01-11 15:42:21	⚡	Channel #postgresql: 914 nicks (0 ops, 0 voices, 914 normals)
2017-01-11 15:42:21	⚡	URL for #postgresql: http://www.postgresql.org
2017-01-11 15:42:21	⚡	Channel created on Sat, 25 Nov 2006 22:42:42
2017-01-11 15:42:41	xocolatl	ty
2017-01-11 15:43:45	◥	Nas (~nas@broadband-95-84-158-145.moscow.rt.ru) has joined #postgresql
2017-01-11 15:45:11	◣	lucian (~lucian@cpc35-bmly9-2-0-cust271.2-3.cable.virginm.net) has quit (Ping timeout: 245 seconds)
2017-01-11 15:45:25	◥	hahuang61 (~hahuang65@2601:647:4000:d7:15e6:2367:5f15:df27) has joined #postgresql
2017-01-11 15:45:47	◣	hashpuppy (uid43164@gateway/web/irccloud.com/x-azamrxkbdudtowlk) has quit (Quit: Connection closed for inactivity)
